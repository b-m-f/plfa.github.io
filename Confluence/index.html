<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../assets/css/light.css" integrity="sha512-J8Ko83OT11zQ2/+vowqJ0Ovx2JEWUBNPTbNptixluYAHAO009R7GVxRQNKA+Wq4skbsdZr1AEOjF2AeQmKt3/A==" title="Light" id="stylesheet-light"><link rel="stylesheet" href="../assets/css/dark.css" integrity="sha512-kK/Wf2991I8CFsf5/Qu/2GIm2Enzw8H70RQ/yHNIb6iGTPF/SKE0B+kxTG2HjcFOgcjfKxZ9Jr4bvSfuKraNWw==" title="Dark" id="stylesheet-dark" disabled><title>Programming Language Foundations in Agda – Confluence</title><script src="../assets/js/anchor.js" integrity="sha512-Y5IMGqYQp36NYYdEL6gXISLsHNpx0LxW0NS0twvYBvXI8GH5PZa1g5gm1B5lxg6tlFyUAiOOfgKL/NIn0dtY4w==" id="script-anchor"></script><script src="../assets/js/darkmode.js" integrity="sha512-iUX9HnSphH4WbMv88MYJEFtLfkCtTHrvWyFwjigSm5GkwHv1L31GP5grIGDo7kI2jftuYVvt4xu4qeCn2fKbww==" id="script-darkmode"></script><script src="../assets/js/main.js" integrity="sha512-X7aZg6IUKq1TvTVjSureaMGKZ/ylbAD7kxiU2w42IUgh4lUTWoOsoIWzNvrqkwBJdQ1y2GsS67gtsv39Uuq6ew==" id="script-main"></script></head><body><header class="site-header" aria-label="Site"><div class="wrapper"><a class="site-title" href="../">Programming Language Foundations in Agda</a><nav class="site-nav" aria-label="Site"><input type="checkbox" id="nav-trigger" class="nav-trigger"><label for="nav-trigger"><span class="menu-icon"><svg class="svg-icon grey" viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span></label><div class="trigger"><a class="page-link" href="../">The Book</a> <a class="page-link" href="../Announcements/">Announcements</a> <a class="page-link" href="../GettingStarted/">Getting Started</a> <a class="page-link" href="../Citing/">Citing</a> <a class="page-link" href="https://agda-zh.github.io/PLFA-zh/">中文</a> <a class="page-link" onclick="window.darkmode.toggle()"><i id="darkmode-trigger" class="fas fa-moon"></i> </a><a class="page-link" href="../plfa.epub"><i class="fa fa-book"></i></a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Untyped/">Prev</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/part2/Confluence.lagda.md">Source</a></li><li class="separator">•</li><li><a class="pagelink" href="../BigStep/">Next</a></li><li class="separator">•</li></ul></nav><header class="post-header" aria-label="Chapter"><h1 class="post-title">Confluence: Confluence of untyped lambda calculus</h1></header><div class="post-content"><pre class="Agda"><a id="plfa_plfa-part2-Confluence-107" class="Keyword">module</a> <a id="plfa_plfa-part2-Confluence-114" href="../Confluence/#" class="Module">plfa.part2.Confluence</a> <a id="plfa_plfa-part2-Confluence-136" class="Keyword">where</a>
</pre><h2 id="introduction">Introduction</h2><p>In this chapter we prove that beta reduction is <em>confluent</em>, a property also known as <em>Church-Rosser</em>. That is, if there are reduction sequences from any term <code>L</code> to two different terms <code>M₁</code> and <code>M₂</code>, then there exist reduction sequences from those two terms to some common term <code>N</code>. In pictures:</p><pre><code>    L
   / \
  /   \
 /     \
M₁      M₂
 \     /
  \   /
   \ /
    N</code></pre><p>where downward lines are instances of <code>—↠</code>.</p><p>Confluence is studied in many other kinds of rewrite systems besides the lambda calculus, and it is well known how to prove confluence in rewrite systems that enjoy the <em>diamond property</em>, a single-step version of confluence. Let <code>⇛</code> be a relation. Then <code>⇛</code> has the diamond property if whenever <code>L ⇛ M₁</code> and <code>L ⇛ M₂</code>, then there exists an <code>N</code> such that <code>M₁ ⇛ N</code> and <code>M₂ ⇛ N</code>. This is just an instance of the same picture above, where downward lines are now instance of <code>⇛</code>. If we write <code>⇛*</code> for the reflexive and transitive closure of <code>⇛</code>, then confluence of <code>⇛*</code> follows immediately from the diamond property.</p><p>Unfortunately, reduction in the lambda calculus does not satisfy the diamond property. Here is a counter example.</p><pre><code>(λ x. x x)((λ x. x) a) —→ (λ x. x x) a
(λ x. x x)((λ x. x) a) —→ ((λ x. x) a) ((λ x. x) a)</code></pre><p>Both terms can reduce to <code>a a</code>, but the second term requires two steps to get there, not one.</p><p>To side-step this problem, we’ll define an auxiliary reduction relation, called <em>parallel reduction</em>, that can perform many reductions simultaneously and thereby satisfy the diamond property. Furthermore, we show that a parallel reduction sequence exists between any two terms if and only if a beta reduction sequence exists between them. Thus, we can reduce the proof of confluence for beta reduction to confluence for parallel reduction.</p><h2 id="imports">Imports</h2><pre class="Agda"><a id="plfa_plfa-part2-Confluence-2000" class="Keyword">open</a> <a id="plfa_plfa-part2-Confluence-2005" class="Keyword">import</a> <a id="plfa_plfa-part2-Confluence-2012" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="plfa_plfa-part2-Confluence-2050" class="Keyword">using</a> <a id="plfa_plfa-part2-Confluence-2056" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-2057" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">_≡_</a><a id="plfa_plfa-part2-Confluence-2060" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2062" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Confluence-2066" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-2068" class="Keyword">open</a> <a id="plfa_plfa-part2-Confluence-2073" class="Keyword">import</a> <a id="plfa_plfa-part2-Confluence-2080" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.html" class="Module">Function</a> <a id="plfa_plfa-part2-Confluence-2089" class="Keyword">using</a> <a id="plfa_plfa-part2-Confluence-2095" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-2096" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">_∘_</a><a id="plfa_plfa-part2-Confluence-2099" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-2101" class="Keyword">open</a> <a id="plfa_plfa-part2-Confluence-2106" class="Keyword">import</a> <a id="plfa_plfa-part2-Confluence-2113" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html" class="Module">Data.Product</a> <a id="plfa_plfa-part2-Confluence-2126" class="Keyword">using</a> <a id="plfa_plfa-part2-Confluence-2132" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-2133" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#1176" class="Function Operator">_×_</a><a id="plfa_plfa-part2-Confluence-2136" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2138" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Sigma.html#148" class="Record">Σ</a><a id="plfa_plfa-part2-Confluence-2139" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2141" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#925" class="Function">Σ-syntax</a><a id="plfa_plfa-part2-Confluence-2149" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2151" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#1378" class="Function">∃</a><a id="plfa_plfa-part2-Confluence-2152" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2154" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#1815" class="Function">∃-syntax</a><a id="plfa_plfa-part2-Confluence-2162" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2164" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Sigma.html#234" class="Field">proj₁</a><a id="plfa_plfa-part2-Confluence-2169" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2171" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Sigma.html#246" class="Field">proj₂</a><a id="plfa_plfa-part2-Confluence-2176" class="Symbol">)</a>
  <a id="plfa_plfa-part2-Confluence-2180" class="Keyword">renaming</a> <a id="plfa_plfa-part2-Confluence-2189" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-2190" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">_,_</a> <a id="plfa_plfa-part2-Confluence-2194" class="Symbol">to</a> <a id="plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="plfa_plfa-part2-Confluence-2202" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-2204" class="Keyword">open</a> <a id="plfa_plfa-part2-Confluence-2209" class="Keyword">import</a> <a id="plfa_plfa-part2-Confluence-2216" href="../Substitution/#" class="Module">plfa.part2.Substitution</a> <a id="plfa_plfa-part2-Confluence-2240" class="Keyword">using</a> <a id="plfa_plfa-part2-Confluence-2246" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-2247" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a><a id="plfa_plfa-part2-Confluence-2253" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2255" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a><a id="plfa_plfa-part2-Confluence-2260" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-2262" class="Keyword">open</a> <a id="plfa_plfa-part2-Confluence-2267" class="Keyword">import</a> <a id="plfa_plfa-part2-Confluence-2274" href="../Untyped/#" class="Module">plfa.part2.Untyped</a>
  <a id="plfa_plfa-part2-Confluence-2295" class="Keyword">using</a> <a id="plfa_plfa-part2-Confluence-2301" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-2302" href="../Untyped/#plfa_plfa-part2-Untyped-9858" class="Datatype Operator">_—→_</a><a id="plfa_plfa-part2-Confluence-2306" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2308" href="../Untyped/#plfa_plfa-part2-Untyped-10088" class="InductiveConstructor">β</a><a id="plfa_plfa-part2-Confluence-2309" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2311" href="../Untyped/#plfa_plfa-part2-Untyped-9908" class="InductiveConstructor">ξ₁</a><a id="plfa_plfa-part2-Confluence-2313" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2315" href="../Untyped/#plfa_plfa-part2-Untyped-9998" class="InductiveConstructor">ξ₂</a><a id="plfa_plfa-part2-Confluence-2317" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2319" href="../Untyped/#plfa_plfa-part2-Untyped-10196" class="InductiveConstructor">ζ</a><a id="plfa_plfa-part2-Confluence-2320" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2322" href="../Untyped/#plfa_plfa-part2-Untyped-10990" class="Datatype Operator">_—↠_</a><a id="plfa_plfa-part2-Confluence-2326" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2328" href="../Untyped/#plfa_plfa-part2-Untyped-11220" class="Function Operator">begin_</a><a id="plfa_plfa-part2-Confluence-2334" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2336" href="../Untyped/#plfa_plfa-part2-Untyped-11178" class="InductiveConstructor Operator">_—→⟨_⟩_</a><a id="plfa_plfa-part2-Confluence-2343" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2345" href="../Untyped/#plfa_plfa-part2-Untyped-22011" class="Function Operator">_—↠⟨_⟩_</a><a id="plfa_plfa-part2-Confluence-2352" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2354" href="../Untyped/#plfa_plfa-part2-Untyped-11036" class="InductiveConstructor Operator">_∎</a><a id="plfa_plfa-part2-Confluence-2356" class="Symbol">;</a>
  <a id="plfa_plfa-part2-Confluence-2360" href="../Untyped/#plfa_plfa-part2-Untyped-23916" class="Function">abs-cong</a><a id="plfa_plfa-part2-Confluence-2368" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2370" href="../Untyped/#plfa_plfa-part2-Untyped-22911" class="Function">appL-cong</a><a id="plfa_plfa-part2-Confluence-2379" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2381" href="../Untyped/#plfa_plfa-part2-Untyped-23684" class="Function">appR-cong</a><a id="plfa_plfa-part2-Confluence-2390" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2392" href="../Untyped/#plfa_plfa-part2-Untyped-21737" class="Function">—↠-trans</a><a id="plfa_plfa-part2-Confluence-2400" class="Symbol">;</a>
  <a id="plfa_plfa-part2-Confluence-2404" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">_⊢_</a><a id="plfa_plfa-part2-Confluence-2407" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2409" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">_∋_</a><a id="plfa_plfa-part2-Confluence-2412" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2414" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`_</a><a id="plfa_plfa-part2-Confluence-2416" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2418" href="../Untyped/#plfa_plfa-part2-Untyped-4814" class="Function Operator">#_</a><a id="plfa_plfa-part2-Confluence-2420" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2422" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">_,_</a><a id="plfa_plfa-part2-Confluence-2425" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2427" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-2428" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2430" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ_</a><a id="plfa_plfa-part2-Confluence-2432" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2434" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">_·_</a><a id="plfa_plfa-part2-Confluence-2437" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2439" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">_[_]</a><a id="plfa_plfa-part2-Confluence-2443" class="Symbol">;</a>
  <a id="plfa_plfa-part2-Confluence-2447" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a><a id="plfa_plfa-part2-Confluence-2453" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2455" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a><a id="plfa_plfa-part2-Confluence-2458" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2460" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a><a id="plfa_plfa-part2-Confluence-2464" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2466" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Confluence-2467" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2469" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part2-Confluence-2471" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2473" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a><a id="plfa_plfa-part2-Confluence-2478" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2480" href="../Untyped/#plfa_plfa-part2-Untyped-7207" class="Function">subst-zero</a><a id="plfa_plfa-part2-Confluence-2490" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2492" href="../Untyped/#plfa_plfa-part2-Untyped-2782" class="Datatype">Context</a><a id="plfa_plfa-part2-Confluence-2499" class="Symbol">)</a>
</pre><h2 id="parallel-reduction">Parallel Reduction</h2><p>The parallel reduction relation is defined as follows.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-2593" class="Keyword">infix</a> <a id="plfa_plfa-part2-Confluence-2599" class="Number">2</a> <a id="plfa_plfa-part2-Confluence-2601" href="../Confluence/#plfa_plfa-part2-Confluence-2611" class="Datatype Operator">_⇛_</a>

<a id="plfa_plfa-part2-Confluence-2606" class="Keyword">data</a> <a id="plfa_plfa-part2-Confluence-_⇛_"></a><a id="plfa_plfa-part2-Confluence-2611" href="../Confluence/#plfa_plfa-part2-Confluence-2611" class="Datatype Operator">_⇛_</a> <a id="plfa_plfa-part2-Confluence-2615" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-2617" class="Symbol">∀</a> <a id="plfa_plfa-part2-Confluence-2619" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-2620" href="../Confluence/#plfa_plfa-part2-Confluence-2620" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-2622" href="../Confluence/#plfa_plfa-part2-Confluence-2622" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-2623" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-2625" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-2627" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-2628" href="../Confluence/#plfa_plfa-part2-Confluence-2620" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-2630" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-2632" href="../Confluence/#plfa_plfa-part2-Confluence-2622" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-2633" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-2635" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-2637" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-2638" href="../Confluence/#plfa_plfa-part2-Confluence-2620" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-2640" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-2642" href="../Confluence/#plfa_plfa-part2-Confluence-2622" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-2643" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-2645" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-2647" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a> <a id="plfa_plfa-part2-Confluence-2651" class="Keyword">where</a>

  <a id="plfa_plfa-part2-Confluence-_⇛_.pvar"></a><a id="plfa_plfa-part2-Confluence-2660" href="../Confluence/#plfa_plfa-part2-Confluence-2660" class="InductiveConstructor">pvar</a> <a id="plfa_plfa-part2-Confluence-2665" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-2667" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-2669" href="../Confluence/#plfa_plfa-part2-Confluence-2669" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-2671" href="../Confluence/#plfa_plfa-part2-Confluence-2671" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-2672" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-2674" href="../Confluence/#plfa_plfa-part2-Confluence-2674" class="Bound">x</a> <a id="plfa_plfa-part2-Confluence-2676" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-2678" href="../Confluence/#plfa_plfa-part2-Confluence-2669" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-2680" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Confluence-2682" href="../Confluence/#plfa_plfa-part2-Confluence-2671" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-2683" class="Symbol">}</a>
      <a id="plfa_plfa-part2-Confluence-2691" class="Comment">---------</a>
    <a id="plfa_plfa-part2-Confluence-2705" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-2707" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-2708" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Confluence-2710" href="../Confluence/#plfa_plfa-part2-Confluence-2674" class="Bound">x</a><a id="plfa_plfa-part2-Confluence-2711" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-2713" href="../Confluence/#plfa_plfa-part2-Confluence-2611" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-2715" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-2716" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Confluence-2718" href="../Confluence/#plfa_plfa-part2-Confluence-2674" class="Bound">x</a><a id="plfa_plfa-part2-Confluence-2719" class="Symbol">)</a>

  <a id="plfa_plfa-part2-Confluence-_⇛_.pabs"></a><a id="plfa_plfa-part2-Confluence-2724" href="../Confluence/#plfa_plfa-part2-Confluence-2724" class="InductiveConstructor">pabs</a> <a id="plfa_plfa-part2-Confluence-2729" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-2731" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-2733" href="../Confluence/#plfa_plfa-part2-Confluence-2733" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-2734" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-2736" href="../Confluence/#plfa_plfa-part2-Confluence-2736" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-2738" href="../Confluence/#plfa_plfa-part2-Confluence-2738" class="Bound">N′</a> <a id="plfa_plfa-part2-Confluence-2741" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-2743" href="../Confluence/#plfa_plfa-part2-Confluence-2733" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-2745" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-2747" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-Confluence-2749" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-2751" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-2752" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Confluence-2758" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-2760" href="../Confluence/#plfa_plfa-part2-Confluence-2736" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-2762" href="../Confluence/#plfa_plfa-part2-Confluence-2611" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-2764" href="../Confluence/#plfa_plfa-part2-Confluence-2738" class="Bound">N′</a>
      <a id="plfa_plfa-part2-Confluence-2773" class="Comment">----------</a>
    <a id="plfa_plfa-part2-Confluence-2788" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-2790" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-2792" href="../Confluence/#plfa_plfa-part2-Confluence-2736" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-2794" href="../Confluence/#plfa_plfa-part2-Confluence-2611" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-2796" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-2798" href="../Confluence/#plfa_plfa-part2-Confluence-2738" class="Bound">N′</a>

  <a id="plfa_plfa-part2-Confluence-_⇛_.papp"></a><a id="plfa_plfa-part2-Confluence-2804" href="../Confluence/#plfa_plfa-part2-Confluence-2804" class="InductiveConstructor">papp</a> <a id="plfa_plfa-part2-Confluence-2809" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-2811" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-2813" href="../Confluence/#plfa_plfa-part2-Confluence-2813" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-2814" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-2816" href="../Confluence/#plfa_plfa-part2-Confluence-2816" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-2818" href="../Confluence/#plfa_plfa-part2-Confluence-2818" class="Bound">L′</a> <a id="plfa_plfa-part2-Confluence-2821" href="../Confluence/#plfa_plfa-part2-Confluence-2821" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-2823" href="../Confluence/#plfa_plfa-part2-Confluence-2823" class="Bound">M′</a> <a id="plfa_plfa-part2-Confluence-2826" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-2828" href="../Confluence/#plfa_plfa-part2-Confluence-2813" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-2830" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-2832" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-2833" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Confluence-2839" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-2841" href="../Confluence/#plfa_plfa-part2-Confluence-2816" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-2843" href="../Confluence/#plfa_plfa-part2-Confluence-2611" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-2845" href="../Confluence/#plfa_plfa-part2-Confluence-2818" class="Bound">L′</a>
    <a id="plfa_plfa-part2-Confluence-2852" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-2854" href="../Confluence/#plfa_plfa-part2-Confluence-2821" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-2856" href="../Confluence/#plfa_plfa-part2-Confluence-2611" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-2858" href="../Confluence/#plfa_plfa-part2-Confluence-2823" class="Bound">M′</a>
      <a id="plfa_plfa-part2-Confluence-2867" class="Comment">-----------------</a>
    <a id="plfa_plfa-part2-Confluence-2889" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-2891" href="../Confluence/#plfa_plfa-part2-Confluence-2816" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-2893" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-2895" href="../Confluence/#plfa_plfa-part2-Confluence-2821" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-2897" href="../Confluence/#plfa_plfa-part2-Confluence-2611" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-2899" href="../Confluence/#plfa_plfa-part2-Confluence-2818" class="Bound">L′</a> <a id="plfa_plfa-part2-Confluence-2902" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-2904" href="../Confluence/#plfa_plfa-part2-Confluence-2823" class="Bound">M′</a>

  <a id="plfa_plfa-part2-Confluence-_⇛_.pbeta"></a><a id="plfa_plfa-part2-Confluence-2910" href="../Confluence/#plfa_plfa-part2-Confluence-2910" class="InductiveConstructor">pbeta</a> <a id="plfa_plfa-part2-Confluence-2916" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-2918" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-2920" href="../Confluence/#plfa_plfa-part2-Confluence-2920" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-2921" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-2923" href="../Confluence/#plfa_plfa-part2-Confluence-2923" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-2925" href="../Confluence/#plfa_plfa-part2-Confluence-2925" class="Bound">N′</a>  <a id="plfa_plfa-part2-Confluence-2929" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-2931" href="../Confluence/#plfa_plfa-part2-Confluence-2920" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-2933" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-2935" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-Confluence-2937" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-2939" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-2940" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-2942" href="../Confluence/#plfa_plfa-part2-Confluence-2942" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-2944" href="../Confluence/#plfa_plfa-part2-Confluence-2944" class="Bound">M′</a> <a id="plfa_plfa-part2-Confluence-2947" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-2949" href="../Confluence/#plfa_plfa-part2-Confluence-2920" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-2951" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-2953" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-2954" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Confluence-2960" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-2962" href="../Confluence/#plfa_plfa-part2-Confluence-2923" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-2964" href="../Confluence/#plfa_plfa-part2-Confluence-2611" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-2966" href="../Confluence/#plfa_plfa-part2-Confluence-2925" class="Bound">N′</a>
    <a id="plfa_plfa-part2-Confluence-2973" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-2975" href="../Confluence/#plfa_plfa-part2-Confluence-2942" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-2977" href="../Confluence/#plfa_plfa-part2-Confluence-2611" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-2979" href="../Confluence/#plfa_plfa-part2-Confluence-2944" class="Bound">M′</a>
      <a id="plfa_plfa-part2-Confluence-2988" class="Comment">-----------------------</a>
    <a id="plfa_plfa-part2-Confluence-3016" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-3018" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-3019" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-3021" href="../Confluence/#plfa_plfa-part2-Confluence-2923" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-3022" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-3024" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-3026" href="../Confluence/#plfa_plfa-part2-Confluence-2942" class="Bound">M</a>  <a id="plfa_plfa-part2-Confluence-3029" href="../Confluence/#plfa_plfa-part2-Confluence-2611" class="Datatype Operator">⇛</a>  <a id="plfa_plfa-part2-Confluence-3032" href="../Confluence/#plfa_plfa-part2-Confluence-2925" class="Bound">N′</a> <a id="plfa_plfa-part2-Confluence-3035" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Confluence-3037" href="../Confluence/#plfa_plfa-part2-Confluence-2944" class="Bound">M′</a> <a id="plfa_plfa-part2-Confluence-3040" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a>
</pre><p>The first three rules are congruences that reduce each of their parts simultaneously. The last rule reduces a lambda term and term in parallel followed by a beta step.</p><p>We remark that the <code>pabs</code>, <code>papp</code>, and <code>pbeta</code> rules perform reduction on all their subexpressions simultaneously. Also, the <code>pabs</code> rule is akin to the <code>ζ</code> rule and <code>pbeta</code> is akin to <code>β</code>.</p><p>Parallel reduction is reflexive.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-par-refl"></a><a id="plfa_plfa-part2-Confluence-3447" href="../Confluence/#plfa_plfa-part2-Confluence-3447" class="Function">par-refl</a> <a id="plfa_plfa-part2-Confluence-3456" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-3458" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-3460" href="../Confluence/#plfa_plfa-part2-Confluence-3460" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-3462" href="../Confluence/#plfa_plfa-part2-Confluence-3462" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-3463" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-3465" href="../Confluence/#plfa_plfa-part2-Confluence-3465" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-3467" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-3469" href="../Confluence/#plfa_plfa-part2-Confluence-3460" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-3471" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-3473" href="../Confluence/#plfa_plfa-part2-Confluence-3462" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-3474" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-3476" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-3478" href="../Confluence/#plfa_plfa-part2-Confluence-3465" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-3480" href="../Confluence/#plfa_plfa-part2-Confluence-2611" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-3482" href="../Confluence/#plfa_plfa-part2-Confluence-3465" class="Bound">M</a>
<a id="plfa_plfa-part2-Confluence-3484" href="../Confluence/#plfa_plfa-part2-Confluence-3447" class="Function">par-refl</a> <a id="plfa_plfa-part2-Confluence-3493" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-3494" href="../Confluence/#plfa_plfa-part2-Confluence-3494" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-3495" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-3497" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-3498" href="../Confluence/#plfa_plfa-part2-Confluence-3498" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-3499" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-3501" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-3502" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Confluence-3504" href="../Confluence/#plfa_plfa-part2-Confluence-3504" class="Bound">x</a><a id="plfa_plfa-part2-Confluence-3505" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-3507" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-3509" href="../Confluence/#plfa_plfa-part2-Confluence-2660" class="InductiveConstructor">pvar</a>
<a id="plfa_plfa-part2-Confluence-3514" href="../Confluence/#plfa_plfa-part2-Confluence-3447" class="Function">par-refl</a> <a id="plfa_plfa-part2-Confluence-3523" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-3524" href="../Confluence/#plfa_plfa-part2-Confluence-3524" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-3525" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-3527" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-3528" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-3529" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-3531" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-3532" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-3534" href="../Confluence/#plfa_plfa-part2-Confluence-3534" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-3535" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-3537" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-3539" href="../Confluence/#plfa_plfa-part2-Confluence-2724" class="InductiveConstructor">pabs</a> <a id="plfa_plfa-part2-Confluence-3544" href="../Confluence/#plfa_plfa-part2-Confluence-3447" class="Function">par-refl</a>
<a id="plfa_plfa-part2-Confluence-3553" href="../Confluence/#plfa_plfa-part2-Confluence-3447" class="Function">par-refl</a> <a id="plfa_plfa-part2-Confluence-3562" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-3563" href="../Confluence/#plfa_plfa-part2-Confluence-3563" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-3564" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-3566" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-3567" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-3568" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-3570" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-3571" href="../Confluence/#plfa_plfa-part2-Confluence-3571" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-3573" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-3575" href="../Confluence/#plfa_plfa-part2-Confluence-3575" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-3576" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-3578" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-3580" href="../Confluence/#plfa_plfa-part2-Confluence-2804" class="InductiveConstructor">papp</a> <a id="plfa_plfa-part2-Confluence-3585" href="../Confluence/#plfa_plfa-part2-Confluence-3447" class="Function">par-refl</a> <a id="plfa_plfa-part2-Confluence-3594" href="../Confluence/#plfa_plfa-part2-Confluence-3447" class="Function">par-refl</a>
</pre><p>We define the sequences of parallel reduction as follows.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-3674" class="Keyword">infix</a>  <a id="plfa_plfa-part2-Confluence-3681" class="Number">2</a> <a id="plfa_plfa-part2-Confluence-3683" href="../Confluence/#plfa_plfa-part2-Confluence-3722" class="Datatype Operator">_⇛*_</a>
<a id="plfa_plfa-part2-Confluence-3688" class="Keyword">infixr</a> <a id="plfa_plfa-part2-Confluence-3695" class="Number">2</a> <a id="plfa_plfa-part2-Confluence-3697" href="../Confluence/#plfa_plfa-part2-Confluence-3828" class="InductiveConstructor Operator">_⇛⟨_⟩_</a>
<a id="plfa_plfa-part2-Confluence-3704" class="Keyword">infix</a>  <a id="plfa_plfa-part2-Confluence-3711" class="Number">3</a> <a id="plfa_plfa-part2-Confluence-3713" href="../Confluence/#plfa_plfa-part2-Confluence-3772" class="InductiveConstructor Operator">_∎</a>

<a id="plfa_plfa-part2-Confluence-3717" class="Keyword">data</a> <a id="plfa_plfa-part2-Confluence-_⇛*_"></a><a id="plfa_plfa-part2-Confluence-3722" href="../Confluence/#plfa_plfa-part2-Confluence-3722" class="Datatype Operator">_⇛*_</a> <a id="plfa_plfa-part2-Confluence-3727" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-3729" class="Symbol">∀</a> <a id="plfa_plfa-part2-Confluence-3731" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-3732" href="../Confluence/#plfa_plfa-part2-Confluence-3732" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-3734" href="../Confluence/#plfa_plfa-part2-Confluence-3734" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-3735" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-3737" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-3739" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-3740" href="../Confluence/#plfa_plfa-part2-Confluence-3732" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-3742" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-3744" href="../Confluence/#plfa_plfa-part2-Confluence-3734" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-3745" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-3747" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-3749" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-3750" href="../Confluence/#plfa_plfa-part2-Confluence-3732" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-3752" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-3754" href="../Confluence/#plfa_plfa-part2-Confluence-3734" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-3755" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-3757" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-3759" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a> <a id="plfa_plfa-part2-Confluence-3763" class="Keyword">where</a>

  <a id="plfa_plfa-part2-Confluence-_⇛*_._∎"></a><a id="plfa_plfa-part2-Confluence-3772" href="../Confluence/#plfa_plfa-part2-Confluence-3772" class="InductiveConstructor Operator">_∎</a> <a id="plfa_plfa-part2-Confluence-3775" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-3777" class="Symbol">∀</a> <a id="plfa_plfa-part2-Confluence-3779" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-3780" href="../Confluence/#plfa_plfa-part2-Confluence-3780" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-3782" href="../Confluence/#plfa_plfa-part2-Confluence-3782" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-3783" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-3785" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-3786" href="../Confluence/#plfa_plfa-part2-Confluence-3786" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-3788" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-3790" href="../Confluence/#plfa_plfa-part2-Confluence-3780" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-3792" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-3794" href="../Confluence/#plfa_plfa-part2-Confluence-3782" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-3795" class="Symbol">)</a>
      <a id="plfa_plfa-part2-Confluence-3803" class="Comment">--------</a>
    <a id="plfa_plfa-part2-Confluence-3816" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-3818" href="../Confluence/#plfa_plfa-part2-Confluence-3786" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-3820" href="../Confluence/#plfa_plfa-part2-Confluence-3722" class="Datatype Operator">⇛*</a> <a id="plfa_plfa-part2-Confluence-3823" href="../Confluence/#plfa_plfa-part2-Confluence-3786" class="Bound">M</a>

  <a id="plfa_plfa-part2-Confluence-_⇛*_._⇛⟨_⟩_"></a><a id="plfa_plfa-part2-Confluence-3828" href="../Confluence/#plfa_plfa-part2-Confluence-3828" class="InductiveConstructor Operator">_⇛⟨_⟩_</a> <a id="plfa_plfa-part2-Confluence-3835" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-3837" class="Symbol">∀</a> <a id="plfa_plfa-part2-Confluence-3839" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-3840" href="../Confluence/#plfa_plfa-part2-Confluence-3840" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-3842" href="../Confluence/#plfa_plfa-part2-Confluence-3842" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-3843" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-3845" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-3846" href="../Confluence/#plfa_plfa-part2-Confluence-3846" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-3848" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-3850" href="../Confluence/#plfa_plfa-part2-Confluence-3840" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-3852" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-3854" href="../Confluence/#plfa_plfa-part2-Confluence-3842" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-3855" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-3857" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-3858" href="../Confluence/#plfa_plfa-part2-Confluence-3858" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-3860" href="../Confluence/#plfa_plfa-part2-Confluence-3860" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-3862" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-3864" href="../Confluence/#plfa_plfa-part2-Confluence-3840" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-3866" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-3868" href="../Confluence/#plfa_plfa-part2-Confluence-3842" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-3869" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Confluence-3875" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-3877" href="../Confluence/#plfa_plfa-part2-Confluence-3846" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-3879" href="../Confluence/#plfa_plfa-part2-Confluence-2611" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-3881" href="../Confluence/#plfa_plfa-part2-Confluence-3858" class="Bound">M</a>
    <a id="plfa_plfa-part2-Confluence-3887" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-3889" href="../Confluence/#plfa_plfa-part2-Confluence-3858" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-3891" href="../Confluence/#plfa_plfa-part2-Confluence-3722" class="Datatype Operator">⇛*</a> <a id="plfa_plfa-part2-Confluence-3894" href="../Confluence/#plfa_plfa-part2-Confluence-3860" class="Bound">N</a>
      <a id="plfa_plfa-part2-Confluence-3902" class="Comment">---------</a>
    <a id="plfa_plfa-part2-Confluence-3916" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-3918" href="../Confluence/#plfa_plfa-part2-Confluence-3846" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-3920" href="../Confluence/#plfa_plfa-part2-Confluence-3722" class="Datatype Operator">⇛*</a> <a id="plfa_plfa-part2-Confluence-3923" href="../Confluence/#plfa_plfa-part2-Confluence-3860" class="Bound">N</a>
</pre><h4 id="exercise-par-diamond-eg-practice">Exercise <code>par-diamond-eg</code> (practice)</h4><p>Revisit the counter example to the diamond property for reduction by showing that the diamond property holds for parallel reduction in that case.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-4129" class="Comment">-- Your code goes here</a>
</pre><h2 id="equivalence-between-parallel-reduction-and-reduction">Equivalence between parallel reduction and reduction</h2><p>Here we prove that for any <code>M</code> and <code>N</code>, <code>M ⇛* N</code> if and only if <code>M —↠ N</code>. The only-if direction is particularly easy. We start by showing that if <code>M —→ N</code>, then <code>M ⇛ N</code>. The proof is by induction on the reduction <code>M —→ N</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-beta-par"></a><a id="plfa_plfa-part2-Confluence-4447" href="../Confluence/#plfa_plfa-part2-Confluence-4447" class="Function">beta-par</a> <a id="plfa_plfa-part2-Confluence-4456" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-4458" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-4460" href="../Confluence/#plfa_plfa-part2-Confluence-4460" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-4462" href="../Confluence/#plfa_plfa-part2-Confluence-4462" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-4463" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-4465" href="../Confluence/#plfa_plfa-part2-Confluence-4465" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-4467" href="../Confluence/#plfa_plfa-part2-Confluence-4467" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-4469" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-4471" href="../Confluence/#plfa_plfa-part2-Confluence-4460" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-4473" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-4475" href="../Confluence/#plfa_plfa-part2-Confluence-4462" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-4476" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Confluence-4480" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-4482" href="../Confluence/#plfa_plfa-part2-Confluence-4465" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-4484" href="../Untyped/#plfa_plfa-part2-Untyped-9858" class="Datatype Operator">—→</a> <a id="plfa_plfa-part2-Confluence-4487" href="../Confluence/#plfa_plfa-part2-Confluence-4467" class="Bound">N</a>
    <a id="plfa_plfa-part2-Confluence-4493" class="Comment">------</a>
  <a id="plfa_plfa-part2-Confluence-4502" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-4504" href="../Confluence/#plfa_plfa-part2-Confluence-4465" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-4506" href="../Confluence/#plfa_plfa-part2-Confluence-2611" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-4508" href="../Confluence/#plfa_plfa-part2-Confluence-4467" class="Bound">N</a>
<a id="plfa_plfa-part2-Confluence-4510" href="../Confluence/#plfa_plfa-part2-Confluence-4447" class="Function">beta-par</a> <a id="plfa_plfa-part2-Confluence-4519" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-4520" href="../Confluence/#plfa_plfa-part2-Confluence-4520" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-4521" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-4523" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-4524" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-4525" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-4527" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-4528" href="../Confluence/#plfa_plfa-part2-Confluence-4528" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-4530" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-4532" href="../Confluence/#plfa_plfa-part2-Confluence-4532" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-4533" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-4535" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-4536" href="../Untyped/#plfa_plfa-part2-Untyped-9908" class="InductiveConstructor">ξ₁</a> <a id="plfa_plfa-part2-Confluence-4539" href="../Confluence/#plfa_plfa-part2-Confluence-4539" class="Bound">r</a><a id="plfa_plfa-part2-Confluence-4540" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-4542" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-4544" href="../Confluence/#plfa_plfa-part2-Confluence-2804" class="InductiveConstructor">papp</a> <a id="plfa_plfa-part2-Confluence-4549" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-4550" href="../Confluence/#plfa_plfa-part2-Confluence-4447" class="Function">beta-par</a> <a id="plfa_plfa-part2-Confluence-4559" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-4560" class="Argument">M</a> <a id="plfa_plfa-part2-Confluence-4562" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-4564" href="../Confluence/#plfa_plfa-part2-Confluence-4528" class="Bound">L</a><a id="plfa_plfa-part2-Confluence-4565" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-4567" href="../Confluence/#plfa_plfa-part2-Confluence-4539" class="Bound">r</a><a id="plfa_plfa-part2-Confluence-4568" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-4570" href="../Confluence/#plfa_plfa-part2-Confluence-3447" class="Function">par-refl</a>
<a id="plfa_plfa-part2-Confluence-4579" href="../Confluence/#plfa_plfa-part2-Confluence-4447" class="Function">beta-par</a> <a id="plfa_plfa-part2-Confluence-4588" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-4589" href="../Confluence/#plfa_plfa-part2-Confluence-4589" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-4590" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-4592" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-4593" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-4594" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-4596" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-4597" href="../Confluence/#plfa_plfa-part2-Confluence-4597" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-4599" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-4601" href="../Confluence/#plfa_plfa-part2-Confluence-4601" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-4602" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-4604" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-4605" href="../Untyped/#plfa_plfa-part2-Untyped-9998" class="InductiveConstructor">ξ₂</a> <a id="plfa_plfa-part2-Confluence-4608" href="../Confluence/#plfa_plfa-part2-Confluence-4608" class="Bound">r</a><a id="plfa_plfa-part2-Confluence-4609" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-4611" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-4613" href="../Confluence/#plfa_plfa-part2-Confluence-2804" class="InductiveConstructor">papp</a> <a id="plfa_plfa-part2-Confluence-4618" href="../Confluence/#plfa_plfa-part2-Confluence-3447" class="Function">par-refl</a> <a id="plfa_plfa-part2-Confluence-4627" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-4628" href="../Confluence/#plfa_plfa-part2-Confluence-4447" class="Function">beta-par</a> <a id="plfa_plfa-part2-Confluence-4637" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-4638" class="Argument">M</a> <a id="plfa_plfa-part2-Confluence-4640" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-4642" href="../Confluence/#plfa_plfa-part2-Confluence-4601" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-4643" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-4645" href="../Confluence/#plfa_plfa-part2-Confluence-4608" class="Bound">r</a><a id="plfa_plfa-part2-Confluence-4646" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-4648" href="../Confluence/#plfa_plfa-part2-Confluence-4447" class="Function">beta-par</a> <a id="plfa_plfa-part2-Confluence-4657" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-4658" href="../Confluence/#plfa_plfa-part2-Confluence-4658" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-4659" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-4661" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-4662" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-4663" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-4665" class="Symbol">{(</a><a id="plfa_plfa-part2-Confluence-4667" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-4669" href="../Confluence/#plfa_plfa-part2-Confluence-4669" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-4670" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-4672" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-4674" href="../Confluence/#plfa_plfa-part2-Confluence-4674" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-4675" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-4677" href="../Untyped/#plfa_plfa-part2-Untyped-10088" class="InductiveConstructor">β</a> <a id="plfa_plfa-part2-Confluence-4679" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-4681" href="../Confluence/#plfa_plfa-part2-Confluence-2910" class="InductiveConstructor">pbeta</a> <a id="plfa_plfa-part2-Confluence-4687" href="../Confluence/#plfa_plfa-part2-Confluence-3447" class="Function">par-refl</a> <a id="plfa_plfa-part2-Confluence-4696" href="../Confluence/#plfa_plfa-part2-Confluence-3447" class="Function">par-refl</a>
<a id="plfa_plfa-part2-Confluence-4705" href="../Confluence/#plfa_plfa-part2-Confluence-4447" class="Function">beta-par</a> <a id="plfa_plfa-part2-Confluence-4714" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-4715" href="../Confluence/#plfa_plfa-part2-Confluence-4715" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-4716" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-4718" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-4719" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-4720" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-4722" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-4723" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-4725" href="../Confluence/#plfa_plfa-part2-Confluence-4725" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-4726" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-4728" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-4729" href="../Untyped/#plfa_plfa-part2-Untyped-10196" class="InductiveConstructor">ζ</a> <a id="plfa_plfa-part2-Confluence-4731" href="../Confluence/#plfa_plfa-part2-Confluence-4731" class="Bound">r</a><a id="plfa_plfa-part2-Confluence-4732" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-4734" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-4736" href="../Confluence/#plfa_plfa-part2-Confluence-2724" class="InductiveConstructor">pabs</a> <a id="plfa_plfa-part2-Confluence-4741" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-4742" href="../Confluence/#plfa_plfa-part2-Confluence-4447" class="Function">beta-par</a> <a id="plfa_plfa-part2-Confluence-4751" href="../Confluence/#plfa_plfa-part2-Confluence-4731" class="Bound">r</a><a id="plfa_plfa-part2-Confluence-4752" class="Symbol">)</a>
</pre><p>With this lemma in hand we complete the only-if direction, that <code>M —↠ N</code> implies <code>M ⇛* N</code>. The proof is a straightforward induction on the reduction sequence <code>M —↠ N</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-betas-pars"></a><a id="plfa_plfa-part2-Confluence-4936" href="../Confluence/#plfa_plfa-part2-Confluence-4936" class="Function">betas-pars</a> <a id="plfa_plfa-part2-Confluence-4947" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-4949" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-4951" href="../Confluence/#plfa_plfa-part2-Confluence-4951" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-4953" href="../Confluence/#plfa_plfa-part2-Confluence-4953" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-4954" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-4956" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-4957" href="../Confluence/#plfa_plfa-part2-Confluence-4957" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-4959" href="../Confluence/#plfa_plfa-part2-Confluence-4959" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-4961" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-4963" href="../Confluence/#plfa_plfa-part2-Confluence-4951" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-4965" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-4967" href="../Confluence/#plfa_plfa-part2-Confluence-4953" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-4968" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Confluence-4972" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-4974" href="../Confluence/#plfa_plfa-part2-Confluence-4957" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-4976" href="../Untyped/#plfa_plfa-part2-Untyped-10990" class="Datatype Operator">—↠</a> <a id="plfa_plfa-part2-Confluence-4979" href="../Confluence/#plfa_plfa-part2-Confluence-4959" class="Bound">N</a>
    <a id="plfa_plfa-part2-Confluence-4985" class="Comment">------</a>
  <a id="plfa_plfa-part2-Confluence-4994" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-4996" href="../Confluence/#plfa_plfa-part2-Confluence-4957" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-4998" href="../Confluence/#plfa_plfa-part2-Confluence-3722" class="Datatype Operator">⇛*</a> <a id="plfa_plfa-part2-Confluence-5001" href="../Confluence/#plfa_plfa-part2-Confluence-4959" class="Bound">N</a>
<a id="plfa_plfa-part2-Confluence-5003" href="../Confluence/#plfa_plfa-part2-Confluence-4936" class="Function">betas-pars</a> <a id="plfa_plfa-part2-Confluence-5014" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5015" href="../Confluence/#plfa_plfa-part2-Confluence-5015" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-5016" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5018" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5019" href="../Confluence/#plfa_plfa-part2-Confluence-5019" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-5020" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5022" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5023" href="../Confluence/#plfa_plfa-part2-Confluence-5023" class="Bound">M₁</a><a id="plfa_plfa-part2-Confluence-5025" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5027" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5028" class="DottedPattern Symbol">.</a><a id="plfa_plfa-part2-Confluence-5029" href="../Confluence/#plfa_plfa-part2-Confluence-5023" class="DottedPattern Bound">M₁</a><a id="plfa_plfa-part2-Confluence-5031" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5033" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-5034" href="../Confluence/#plfa_plfa-part2-Confluence-5023" class="Bound">M₁</a> <a id="plfa_plfa-part2-Confluence-5037" href="../Untyped/#plfa_plfa-part2-Untyped-11036" class="InductiveConstructor Operator">∎</a><a id="plfa_plfa-part2-Confluence-5038" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-5040" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-5042" href="../Confluence/#plfa_plfa-part2-Confluence-5023" class="Bound">M₁</a> <a id="plfa_plfa-part2-Confluence-5045" href="../Confluence/#plfa_plfa-part2-Confluence-3772" class="InductiveConstructor Operator">∎</a>
<a id="plfa_plfa-part2-Confluence-5047" href="../Confluence/#plfa_plfa-part2-Confluence-4936" class="Function">betas-pars</a> <a id="plfa_plfa-part2-Confluence-5058" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5059" href="../Confluence/#plfa_plfa-part2-Confluence-5059" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-5060" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5062" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5063" href="../Confluence/#plfa_plfa-part2-Confluence-5063" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-5064" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5066" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5067" class="DottedPattern Symbol">.</a><a id="plfa_plfa-part2-Confluence-5068" href="../Confluence/#plfa_plfa-part2-Confluence-5076" class="DottedPattern Bound">L</a><a id="plfa_plfa-part2-Confluence-5069" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5071" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5072" href="../Confluence/#plfa_plfa-part2-Confluence-5072" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-5073" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5075" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-5076" href="../Confluence/#plfa_plfa-part2-Confluence-5076" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-5078" href="../Untyped/#plfa_plfa-part2-Untyped-11178" class="InductiveConstructor Operator">—→⟨</a> <a id="plfa_plfa-part2-Confluence-5082" href="../Confluence/#plfa_plfa-part2-Confluence-5082" class="Bound">b</a> <a id="plfa_plfa-part2-Confluence-5084" href="../Untyped/#plfa_plfa-part2-Untyped-11178" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-5086" href="../Confluence/#plfa_plfa-part2-Confluence-5086" class="Bound">bs</a><a id="plfa_plfa-part2-Confluence-5088" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-5090" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Confluence-5095" href="../Confluence/#plfa_plfa-part2-Confluence-5076" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-5097" href="../Confluence/#plfa_plfa-part2-Confluence-3828" class="InductiveConstructor Operator">⇛⟨</a> <a id="plfa_plfa-part2-Confluence-5100" href="../Confluence/#plfa_plfa-part2-Confluence-4447" class="Function">beta-par</a> <a id="plfa_plfa-part2-Confluence-5109" href="../Confluence/#plfa_plfa-part2-Confluence-5082" class="Bound">b</a> <a id="plfa_plfa-part2-Confluence-5111" href="../Confluence/#plfa_plfa-part2-Confluence-3828" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-5113" href="../Confluence/#plfa_plfa-part2-Confluence-4936" class="Function">betas-pars</a> <a id="plfa_plfa-part2-Confluence-5124" href="../Confluence/#plfa_plfa-part2-Confluence-5086" class="Bound">bs</a>
</pre><p>Now for the other direction, that <code>M ⇛* N</code> implies <code>M —↠ N</code>. The proof of this direction is a bit different because it’s not the case that <code>M ⇛ N</code> implies <code>M —→ N</code>. After all, <code>M ⇛ N</code> performs many reductions. So instead we shall prove that <code>M ⇛ N</code> implies <code>M —↠ N</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-par-betas"></a><a id="plfa_plfa-part2-Confluence-5409" href="../Confluence/#plfa_plfa-part2-Confluence-5409" class="Function">par-betas</a> <a id="plfa_plfa-part2-Confluence-5419" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-5421" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-5423" href="../Confluence/#plfa_plfa-part2-Confluence-5423" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-5425" href="../Confluence/#plfa_plfa-part2-Confluence-5425" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-5426" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-5428" href="../Confluence/#plfa_plfa-part2-Confluence-5428" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-5430" href="../Confluence/#plfa_plfa-part2-Confluence-5430" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-5432" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-5434" href="../Confluence/#plfa_plfa-part2-Confluence-5423" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-5436" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-5438" href="../Confluence/#plfa_plfa-part2-Confluence-5425" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-5439" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Confluence-5443" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-5445" href="../Confluence/#plfa_plfa-part2-Confluence-5428" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-5447" href="../Confluence/#plfa_plfa-part2-Confluence-2611" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-5449" href="../Confluence/#plfa_plfa-part2-Confluence-5430" class="Bound">N</a>
    <a id="plfa_plfa-part2-Confluence-5455" class="Comment">------</a>
  <a id="plfa_plfa-part2-Confluence-5464" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-5466" href="../Confluence/#plfa_plfa-part2-Confluence-5428" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-5468" href="../Untyped/#plfa_plfa-part2-Untyped-10990" class="Datatype Operator">—↠</a> <a id="plfa_plfa-part2-Confluence-5471" href="../Confluence/#plfa_plfa-part2-Confluence-5430" class="Bound">N</a>
<a id="plfa_plfa-part2-Confluence-5473" href="../Confluence/#plfa_plfa-part2-Confluence-5409" class="Function">par-betas</a> <a id="plfa_plfa-part2-Confluence-5483" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5484" href="../Confluence/#plfa_plfa-part2-Confluence-5484" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-5485" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5487" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5488" href="../Confluence/#plfa_plfa-part2-Confluence-5488" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-5489" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5491" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5492" class="DottedPattern Symbol">.(</a><a id="plfa_plfa-part2-Confluence-5494" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="DottedPattern InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Confluence-5496" class="DottedPattern Symbol">_)</a><a id="plfa_plfa-part2-Confluence-5498" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5500" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-5501" href="../Confluence/#plfa_plfa-part2-Confluence-2660" class="InductiveConstructor">pvar</a><a id="plfa_plfa-part2-Confluence-5505" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5506" class="Argument">x</a> <a id="plfa_plfa-part2-Confluence-5508" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-5510" href="../Confluence/#plfa_plfa-part2-Confluence-5510" class="Bound">x</a><a id="plfa_plfa-part2-Confluence-5511" class="Symbol">})</a> <a id="plfa_plfa-part2-Confluence-5514" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-5516" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-5517" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Confluence-5519" href="../Confluence/#plfa_plfa-part2-Confluence-5510" class="Bound">x</a><a id="plfa_plfa-part2-Confluence-5520" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-5522" href="../Untyped/#plfa_plfa-part2-Untyped-11036" class="InductiveConstructor Operator">∎</a>
<a id="plfa_plfa-part2-Confluence-5524" href="../Confluence/#plfa_plfa-part2-Confluence-5409" class="Function">par-betas</a> <a id="plfa_plfa-part2-Confluence-5534" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5535" href="../Confluence/#plfa_plfa-part2-Confluence-5535" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-5536" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5538" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5539" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-5540" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5542" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5543" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-5545" href="../Confluence/#plfa_plfa-part2-Confluence-5545" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-5546" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5548" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-5549" href="../Confluence/#plfa_plfa-part2-Confluence-2724" class="InductiveConstructor">pabs</a> <a id="plfa_plfa-part2-Confluence-5554" href="../Confluence/#plfa_plfa-part2-Confluence-5554" class="Bound">p</a><a id="plfa_plfa-part2-Confluence-5555" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-5557" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-5559" href="../Untyped/#plfa_plfa-part2-Untyped-23916" class="Function">abs-cong</a> <a id="plfa_plfa-part2-Confluence-5568" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-5569" href="../Confluence/#plfa_plfa-part2-Confluence-5409" class="Function">par-betas</a> <a id="plfa_plfa-part2-Confluence-5579" href="../Confluence/#plfa_plfa-part2-Confluence-5554" class="Bound">p</a><a id="plfa_plfa-part2-Confluence-5580" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-5582" href="../Confluence/#plfa_plfa-part2-Confluence-5409" class="Function">par-betas</a> <a id="plfa_plfa-part2-Confluence-5592" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5593" href="../Confluence/#plfa_plfa-part2-Confluence-5593" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-5594" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5596" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5597" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-5598" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5600" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5601" href="../Confluence/#plfa_plfa-part2-Confluence-5601" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-5603" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-5605" href="../Confluence/#plfa_plfa-part2-Confluence-5605" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-5606" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5608" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-5609" href="../Confluence/#plfa_plfa-part2-Confluence-2804" class="InductiveConstructor">papp</a> <a id="plfa_plfa-part2-Confluence-5614" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5615" class="Argument">L</a> <a id="plfa_plfa-part2-Confluence-5617" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-5619" href="../Confluence/#plfa_plfa-part2-Confluence-5601" class="Bound">L</a><a id="plfa_plfa-part2-Confluence-5620" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-5622" href="../Confluence/#plfa_plfa-part2-Confluence-5622" class="Bound">L′</a><a id="plfa_plfa-part2-Confluence-5624" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-5626" href="../Confluence/#plfa_plfa-part2-Confluence-5605" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-5627" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-5629" href="../Confluence/#plfa_plfa-part2-Confluence-5629" class="Bound">M′</a><a id="plfa_plfa-part2-Confluence-5631" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5633" href="../Confluence/#plfa_plfa-part2-Confluence-5633" class="Bound">p₁</a> <a id="plfa_plfa-part2-Confluence-5636" href="../Confluence/#plfa_plfa-part2-Confluence-5636" class="Bound">p₂</a><a id="plfa_plfa-part2-Confluence-5638" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-5640" class="Symbol">=</a>
    <a id="plfa_plfa-part2-Confluence-5646" href="../Untyped/#plfa_plfa-part2-Untyped-11220" class="Function Operator">begin</a>
    <a id="plfa_plfa-part2-Confluence-5656" href="../Confluence/#plfa_plfa-part2-Confluence-5601" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-5658" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-5660" href="../Confluence/#plfa_plfa-part2-Confluence-5605" class="Bound">M</a>   <a id="plfa_plfa-part2-Confluence-5664" href="../Untyped/#plfa_plfa-part2-Untyped-22011" class="Function Operator">—↠⟨</a> <a id="plfa_plfa-part2-Confluence-5668" href="../Untyped/#plfa_plfa-part2-Untyped-22911" class="Function">appL-cong</a><a id="plfa_plfa-part2-Confluence-5677" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5678" class="Argument">M</a> <a id="plfa_plfa-part2-Confluence-5680" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-5682" href="../Confluence/#plfa_plfa-part2-Confluence-5605" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-5683" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5685" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-5686" href="../Confluence/#plfa_plfa-part2-Confluence-5409" class="Function">par-betas</a> <a id="plfa_plfa-part2-Confluence-5696" href="../Confluence/#plfa_plfa-part2-Confluence-5633" class="Bound">p₁</a><a id="plfa_plfa-part2-Confluence-5698" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-5700" href="../Untyped/#plfa_plfa-part2-Untyped-22011" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part2-Confluence-5706" href="../Confluence/#plfa_plfa-part2-Confluence-5622" class="Bound">L′</a> <a id="plfa_plfa-part2-Confluence-5709" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-5711" href="../Confluence/#plfa_plfa-part2-Confluence-5605" class="Bound">M</a>  <a id="plfa_plfa-part2-Confluence-5714" href="../Untyped/#plfa_plfa-part2-Untyped-22011" class="Function Operator">—↠⟨</a> <a id="plfa_plfa-part2-Confluence-5718" href="../Untyped/#plfa_plfa-part2-Untyped-23684" class="Function">appR-cong</a> <a id="plfa_plfa-part2-Confluence-5728" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-5729" href="../Confluence/#plfa_plfa-part2-Confluence-5409" class="Function">par-betas</a> <a id="plfa_plfa-part2-Confluence-5739" href="../Confluence/#plfa_plfa-part2-Confluence-5636" class="Bound">p₂</a><a id="plfa_plfa-part2-Confluence-5741" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-5743" href="../Untyped/#plfa_plfa-part2-Untyped-22011" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part2-Confluence-5749" href="../Confluence/#plfa_plfa-part2-Confluence-5622" class="Bound">L′</a> <a id="plfa_plfa-part2-Confluence-5752" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-5754" href="../Confluence/#plfa_plfa-part2-Confluence-5629" class="Bound">M′</a>
    <a id="plfa_plfa-part2-Confluence-5761" href="../Untyped/#plfa_plfa-part2-Untyped-11036" class="InductiveConstructor Operator">∎</a>
<a id="plfa_plfa-part2-Confluence-5763" href="../Confluence/#plfa_plfa-part2-Confluence-5409" class="Function">par-betas</a> <a id="plfa_plfa-part2-Confluence-5773" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5774" href="../Confluence/#plfa_plfa-part2-Confluence-5774" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-5775" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5777" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5778" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-5779" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5781" class="Symbol">{(</a><a id="plfa_plfa-part2-Confluence-5783" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-5785" href="../Confluence/#plfa_plfa-part2-Confluence-5785" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-5786" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-5788" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-5790" href="../Confluence/#plfa_plfa-part2-Confluence-5790" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-5791" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5793" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-5794" href="../Confluence/#plfa_plfa-part2-Confluence-2910" class="InductiveConstructor">pbeta</a><a id="plfa_plfa-part2-Confluence-5799" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5800" class="Argument">N′</a> <a id="plfa_plfa-part2-Confluence-5803" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-5805" href="../Confluence/#plfa_plfa-part2-Confluence-5805" class="Bound">N′</a><a id="plfa_plfa-part2-Confluence-5807" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-5809" class="Argument">M′</a> <a id="plfa_plfa-part2-Confluence-5812" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-5814" href="../Confluence/#plfa_plfa-part2-Confluence-5814" class="Bound">M′</a><a id="plfa_plfa-part2-Confluence-5816" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5818" href="../Confluence/#plfa_plfa-part2-Confluence-5818" class="Bound">p₁</a> <a id="plfa_plfa-part2-Confluence-5821" href="../Confluence/#plfa_plfa-part2-Confluence-5821" class="Bound">p₂</a><a id="plfa_plfa-part2-Confluence-5823" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-5825" class="Symbol">=</a>
    <a id="plfa_plfa-part2-Confluence-5831" href="../Untyped/#plfa_plfa-part2-Untyped-11220" class="Function Operator">begin</a>
    <a id="plfa_plfa-part2-Confluence-5841" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-5842" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-5844" href="../Confluence/#plfa_plfa-part2-Confluence-5785" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-5845" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-5847" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-5849" href="../Confluence/#plfa_plfa-part2-Confluence-5790" class="Bound">M</a>                    <a id="plfa_plfa-part2-Confluence-5870" href="../Untyped/#plfa_plfa-part2-Untyped-22011" class="Function Operator">—↠⟨</a> <a id="plfa_plfa-part2-Confluence-5874" href="../Untyped/#plfa_plfa-part2-Untyped-22911" class="Function">appL-cong</a><a id="plfa_plfa-part2-Confluence-5883" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5884" class="Argument">M</a> <a id="plfa_plfa-part2-Confluence-5886" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-5888" href="../Confluence/#plfa_plfa-part2-Confluence-5790" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-5889" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5891" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-5892" href="../Untyped/#plfa_plfa-part2-Untyped-23916" class="Function">abs-cong</a> <a id="plfa_plfa-part2-Confluence-5901" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-5902" href="../Confluence/#plfa_plfa-part2-Confluence-5409" class="Function">par-betas</a> <a id="plfa_plfa-part2-Confluence-5912" href="../Confluence/#plfa_plfa-part2-Confluence-5818" class="Bound">p₁</a><a id="plfa_plfa-part2-Confluence-5914" class="Symbol">))</a> <a id="plfa_plfa-part2-Confluence-5917" href="../Untyped/#plfa_plfa-part2-Untyped-22011" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part2-Confluence-5923" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-5924" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-5926" href="../Confluence/#plfa_plfa-part2-Confluence-5805" class="Bound">N′</a><a id="plfa_plfa-part2-Confluence-5928" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-5930" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-5932" href="../Confluence/#plfa_plfa-part2-Confluence-5790" class="Bound">M</a>                   <a id="plfa_plfa-part2-Confluence-5952" href="../Untyped/#plfa_plfa-part2-Untyped-22011" class="Function Operator">—↠⟨</a> <a id="plfa_plfa-part2-Confluence-5956" href="../Untyped/#plfa_plfa-part2-Untyped-23684" class="Function">appR-cong</a><a id="plfa_plfa-part2-Confluence-5965" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5966" class="Argument">L</a> <a id="plfa_plfa-part2-Confluence-5968" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-5970" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-5972" href="../Confluence/#plfa_plfa-part2-Confluence-5805" class="Bound">N′</a><a id="plfa_plfa-part2-Confluence-5974" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5976" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-5977" href="../Confluence/#plfa_plfa-part2-Confluence-5409" class="Function">par-betas</a> <a id="plfa_plfa-part2-Confluence-5987" href="../Confluence/#plfa_plfa-part2-Confluence-5821" class="Bound">p₂</a><a id="plfa_plfa-part2-Confluence-5989" class="Symbol">)</a>  <a id="plfa_plfa-part2-Confluence-5992" href="../Untyped/#plfa_plfa-part2-Untyped-22011" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part2-Confluence-5998" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-5999" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-6001" href="../Confluence/#plfa_plfa-part2-Confluence-5805" class="Bound">N′</a><a id="plfa_plfa-part2-Confluence-6003" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-6005" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-6007" href="../Confluence/#plfa_plfa-part2-Confluence-5814" class="Bound">M′</a>                  <a id="plfa_plfa-part2-Confluence-6027" href="../Untyped/#plfa_plfa-part2-Untyped-11178" class="InductiveConstructor Operator">—→⟨</a> <a id="plfa_plfa-part2-Confluence-6031" href="../Untyped/#plfa_plfa-part2-Untyped-10088" class="InductiveConstructor">β</a> <a id="plfa_plfa-part2-Confluence-6033" href="../Untyped/#plfa_plfa-part2-Untyped-11178" class="InductiveConstructor Operator">⟩</a>
     <a id="plfa_plfa-part2-Confluence-6040" href="../Confluence/#plfa_plfa-part2-Confluence-5805" class="Bound">N′</a> <a id="plfa_plfa-part2-Confluence-6043" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Confluence-6045" href="../Confluence/#plfa_plfa-part2-Confluence-5814" class="Bound">M′</a> <a id="plfa_plfa-part2-Confluence-6048" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a>
    <a id="plfa_plfa-part2-Confluence-6054" href="../Untyped/#plfa_plfa-part2-Untyped-11036" class="InductiveConstructor Operator">∎</a>
</pre><p>The proof is by induction on <code>M ⇛ N</code>.</p><ul><li><p>Suppose <code>x ⇛ x</code>. We immediately have <code>x —↠ x</code>.</p></li><li><p>Suppose <code>ƛ N ⇛ ƛ N′</code> because <code>N ⇛ N′</code>. By the induction hypothesis we have <code>N —↠ N′</code>. We conclude that <code>ƛ N —↠ ƛ N′</code> because <code>—↠</code> is a congruence.</p></li><li><p>Suppose <code>L · M ⇛ L′ · M′</code> because <code>L ⇛ L′</code> and <code>M ⇛ M′</code>. By the induction hypothesis, we have <code>L —↠ L′</code> and <code>M —↠ M′</code>. So <code>L · M —↠ L′ · M</code> and then <code>L′ · M —↠ L′ · M′</code> because <code>—↠</code> is a congruence.</p></li><li><p>Suppose <code>(ƛ N) · M ⇛ N′ [ M′ ]</code> because <code>N ⇛ N′</code> and <code>M ⇛ M′</code>. By similar reasoning, we have <code>(ƛ N) · M —↠ (ƛ N′) · M′</code> which we can following with the β reduction <code>(ƛ N′) · M′ —→ N′ [ M′ ]</code>.</p></li></ul><p>With this lemma in hand, we complete the proof that <code>M ⇛* N</code> implies <code>M —↠ N</code> with a simple induction on <code>M ⇛* N</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-pars-betas"></a><a id="plfa_plfa-part2-Confluence-6842" href="../Confluence/#plfa_plfa-part2-Confluence-6842" class="Function">pars-betas</a> <a id="plfa_plfa-part2-Confluence-6853" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-6855" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-6857" href="../Confluence/#plfa_plfa-part2-Confluence-6857" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-6859" href="../Confluence/#plfa_plfa-part2-Confluence-6859" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-6860" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-6862" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-6863" href="../Confluence/#plfa_plfa-part2-Confluence-6863" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-6865" href="../Confluence/#plfa_plfa-part2-Confluence-6865" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-6867" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-6869" href="../Confluence/#plfa_plfa-part2-Confluence-6857" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-6871" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-6873" href="../Confluence/#plfa_plfa-part2-Confluence-6859" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-6874" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Confluence-6878" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-6880" href="../Confluence/#plfa_plfa-part2-Confluence-6863" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-6882" href="../Confluence/#plfa_plfa-part2-Confluence-3722" class="Datatype Operator">⇛*</a> <a id="plfa_plfa-part2-Confluence-6885" href="../Confluence/#plfa_plfa-part2-Confluence-6865" class="Bound">N</a>
    <a id="plfa_plfa-part2-Confluence-6891" class="Comment">------</a>
  <a id="plfa_plfa-part2-Confluence-6900" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-6902" href="../Confluence/#plfa_plfa-part2-Confluence-6863" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-6904" href="../Untyped/#plfa_plfa-part2-Untyped-10990" class="Datatype Operator">—↠</a> <a id="plfa_plfa-part2-Confluence-6907" href="../Confluence/#plfa_plfa-part2-Confluence-6865" class="Bound">N</a>
<a id="plfa_plfa-part2-Confluence-6909" href="../Confluence/#plfa_plfa-part2-Confluence-6842" class="Function">pars-betas</a> <a id="plfa_plfa-part2-Confluence-6920" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-6921" href="../Confluence/#plfa_plfa-part2-Confluence-6921" class="Bound">M₁</a> <a id="plfa_plfa-part2-Confluence-6924" href="../Confluence/#plfa_plfa-part2-Confluence-3772" class="InductiveConstructor Operator">∎</a><a id="plfa_plfa-part2-Confluence-6925" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-6927" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-6929" href="../Confluence/#plfa_plfa-part2-Confluence-6921" class="Bound">M₁</a> <a id="plfa_plfa-part2-Confluence-6932" href="../Untyped/#plfa_plfa-part2-Untyped-11036" class="InductiveConstructor Operator">∎</a>
<a id="plfa_plfa-part2-Confluence-6934" href="../Confluence/#plfa_plfa-part2-Confluence-6842" class="Function">pars-betas</a> <a id="plfa_plfa-part2-Confluence-6945" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-6946" href="../Confluence/#plfa_plfa-part2-Confluence-6946" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-6948" href="../Confluence/#plfa_plfa-part2-Confluence-3828" class="InductiveConstructor Operator">⇛⟨</a> <a id="plfa_plfa-part2-Confluence-6951" href="../Confluence/#plfa_plfa-part2-Confluence-6951" class="Bound">p</a> <a id="plfa_plfa-part2-Confluence-6953" href="../Confluence/#plfa_plfa-part2-Confluence-3828" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-6955" href="../Confluence/#plfa_plfa-part2-Confluence-6955" class="Bound">ps</a><a id="plfa_plfa-part2-Confluence-6957" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-6959" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-6961" href="../Untyped/#plfa_plfa-part2-Untyped-21737" class="Function">—↠-trans</a> <a id="plfa_plfa-part2-Confluence-6970" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-6971" href="../Confluence/#plfa_plfa-part2-Confluence-5409" class="Function">par-betas</a> <a id="plfa_plfa-part2-Confluence-6981" href="../Confluence/#plfa_plfa-part2-Confluence-6951" class="Bound">p</a><a id="plfa_plfa-part2-Confluence-6982" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-6984" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-6985" href="../Confluence/#plfa_plfa-part2-Confluence-6842" class="Function">pars-betas</a> <a id="plfa_plfa-part2-Confluence-6996" href="../Confluence/#plfa_plfa-part2-Confluence-6955" class="Bound">ps</a><a id="plfa_plfa-part2-Confluence-6998" class="Symbol">)</a>
</pre><h2 id="substitution-lemma-for-parallel-reduction">Substitution lemma for parallel reduction</h2><p>Our next goal is to prove the diamond property for parallel reduction. But to do that, we need to prove that substitution respects parallel reduction. That is, if <code>N ⇛ N′</code> and <code>M ⇛ M′</code>, then <code>N [ M ] ⇛ N′ [ M′ ]</code>. We cannot prove this directly by induction, so we generalize it to: if <code>N ⇛ N′</code> and the substitution <code>σ</code> pointwise parallel reduces to <code>τ</code>, then <code>subst σ N ⇛ subst τ N′</code>. We define the notion of pointwise parallel reduction of a substitution as follows.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-par-subst"></a><a id="plfa_plfa-part2-Confluence-7529" href="../Confluence/#plfa_plfa-part2-Confluence-7529" class="Function">par-subst</a> <a id="plfa_plfa-part2-Confluence-7539" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-7541" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-7543" href="../Confluence/#plfa_plfa-part2-Confluence-7543" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-7545" href="../Confluence/#plfa_plfa-part2-Confluence-7545" class="Bound">Δ</a><a id="plfa_plfa-part2-Confluence-7546" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-7548" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-7550" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Confluence-7556" href="../Confluence/#plfa_plfa-part2-Confluence-7543" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-7558" href="../Confluence/#plfa_plfa-part2-Confluence-7545" class="Bound">Δ</a> <a id="plfa_plfa-part2-Confluence-7560" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-7562" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Confluence-7568" href="../Confluence/#plfa_plfa-part2-Confluence-7543" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-7570" href="../Confluence/#plfa_plfa-part2-Confluence-7545" class="Bound">Δ</a> <a id="plfa_plfa-part2-Confluence-7572" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-7574" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a>
<a id="plfa_plfa-part2-Confluence-7578" href="../Confluence/#plfa_plfa-part2-Confluence-7529" class="Function">par-subst</a> <a id="plfa_plfa-part2-Confluence-7588" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-7589" href="../Confluence/#plfa_plfa-part2-Confluence-7589" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-7590" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-7592" href="../Confluence/#plfa_plfa-part2-Confluence-7592" class="Bound">Δ</a><a id="plfa_plfa-part2-Confluence-7593" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-7595" href="../Confluence/#plfa_plfa-part2-Confluence-7595" class="Bound">σ</a> <a id="plfa_plfa-part2-Confluence-7597" href="../Confluence/#plfa_plfa-part2-Confluence-7597" class="Bound">σ′</a> <a id="plfa_plfa-part2-Confluence-7600" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-7602" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-7604" href="../Confluence/#plfa_plfa-part2-Confluence-7604" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-7605" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-7607" href="../Confluence/#plfa_plfa-part2-Confluence-7607" class="Bound">x</a> <a id="plfa_plfa-part2-Confluence-7609" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-7611" href="../Confluence/#plfa_plfa-part2-Confluence-7589" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-7613" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Confluence-7615" href="../Confluence/#plfa_plfa-part2-Confluence-7604" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-7616" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-7618" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-7620" href="../Confluence/#plfa_plfa-part2-Confluence-7595" class="Bound">σ</a> <a id="plfa_plfa-part2-Confluence-7622" href="../Confluence/#plfa_plfa-part2-Confluence-7607" class="Bound">x</a> <a id="plfa_plfa-part2-Confluence-7624" href="../Confluence/#plfa_plfa-part2-Confluence-2611" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-7626" href="../Confluence/#plfa_plfa-part2-Confluence-7597" class="Bound">σ′</a> <a id="plfa_plfa-part2-Confluence-7629" href="../Confluence/#plfa_plfa-part2-Confluence-7607" class="Bound">x</a>
</pre><p>In the type of <code>par-subst</code> we make use of the shorthand <code>Subst Γ Δ</code> for the type of a substitution. Similarly, we shall make use of <code>Rename Γ Δ</code> for the type of a renaming. Both are defined in Chapter <a href="../Substitution/">Substitution</a> and have the following meaning.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-7909" href="../Confluence/#plfa_plfa-part2-Confluence-7909" class="Function">_</a> <a id="plfa_plfa-part2-Confluence-7911" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-7913" class="Symbol">∀(</a><a id="plfa_plfa-part2-Confluence-7915" href="../Confluence/#plfa_plfa-part2-Confluence-7915" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-7917" href="../Confluence/#plfa_plfa-part2-Confluence-7917" class="Bound">Δ</a> <a id="plfa_plfa-part2-Confluence-7919" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-7921" href="../Untyped/#plfa_plfa-part2-Untyped-2782" class="Datatype">Context</a><a id="plfa_plfa-part2-Confluence-7928" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-7930" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-7932" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set₁</a>
<a id="plfa_plfa-part2-Confluence-7937" class="Symbol">_</a> <a id="plfa_plfa-part2-Confluence-7939" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-7941" class="Symbol">λ</a> <a id="plfa_plfa-part2-Confluence-7943" href="../Confluence/#plfa_plfa-part2-Confluence-7943" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-7945" href="../Confluence/#plfa_plfa-part2-Confluence-7945" class="Bound">Δ</a> <a id="plfa_plfa-part2-Confluence-7947" class="Symbol">→</a>   <a id="plfa_plfa-part2-Confluence-7951" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Confluence-7958" href="../Confluence/#plfa_plfa-part2-Confluence-7943" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-7960" href="../Confluence/#plfa_plfa-part2-Confluence-7945" class="Bound">Δ</a> <a id="plfa_plfa-part2-Confluence-7962" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Confluence-7964" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-7966" href="../Confluence/#plfa_plfa-part2-Confluence-7966" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-7967" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-7969" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-7971" href="../Confluence/#plfa_plfa-part2-Confluence-7943" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-7973" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Confluence-7975" href="../Confluence/#plfa_plfa-part2-Confluence-7966" class="Bound">A</a> <a id="plfa_plfa-part2-Confluence-7977" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-7979" href="../Confluence/#plfa_plfa-part2-Confluence-7945" class="Bound">Δ</a> <a id="plfa_plfa-part2-Confluence-7981" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Confluence-7983" href="../Confluence/#plfa_plfa-part2-Confluence-7966" class="Bound">A</a>

<a id="plfa_plfa-part2-Confluence-7986" href="../Confluence/#plfa_plfa-part2-Confluence-7986" class="Function">_</a> <a id="plfa_plfa-part2-Confluence-7988" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-7990" class="Symbol">∀(</a><a id="plfa_plfa-part2-Confluence-7992" href="../Confluence/#plfa_plfa-part2-Confluence-7992" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-7994" href="../Confluence/#plfa_plfa-part2-Confluence-7994" class="Bound">Δ</a> <a id="plfa_plfa-part2-Confluence-7996" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-7998" href="../Untyped/#plfa_plfa-part2-Untyped-2782" class="Datatype">Context</a><a id="plfa_plfa-part2-Confluence-8005" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-8007" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-8009" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set₁</a>
<a id="plfa_plfa-part2-Confluence-8014" class="Symbol">_</a> <a id="plfa_plfa-part2-Confluence-8016" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-8018" class="Symbol">λ</a> <a id="plfa_plfa-part2-Confluence-8020" href="../Confluence/#plfa_plfa-part2-Confluence-8020" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-8022" href="../Confluence/#plfa_plfa-part2-Confluence-8022" class="Bound">Δ</a> <a id="plfa_plfa-part2-Confluence-8024" class="Symbol">→</a>   <a id="plfa_plfa-part2-Confluence-8028" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Confluence-8034" href="../Confluence/#plfa_plfa-part2-Confluence-8020" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-8036" href="../Confluence/#plfa_plfa-part2-Confluence-8022" class="Bound">Δ</a> <a id="plfa_plfa-part2-Confluence-8038" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Confluence-8040" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-8042" href="../Confluence/#plfa_plfa-part2-Confluence-8042" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-8043" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-8045" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-8047" href="../Confluence/#plfa_plfa-part2-Confluence-8020" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-8049" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Confluence-8051" href="../Confluence/#plfa_plfa-part2-Confluence-8042" class="Bound">A</a> <a id="plfa_plfa-part2-Confluence-8053" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-8055" href="../Confluence/#plfa_plfa-part2-Confluence-8022" class="Bound">Δ</a> <a id="plfa_plfa-part2-Confluence-8057" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-8059" href="../Confluence/#plfa_plfa-part2-Confluence-8042" class="Bound">A</a>
</pre><p>Because substitution depends on the extension function <code>exts</code>, which in turn relies on <code>rename</code>, we start with a version of the substitution lemma, called <code>par-rename</code>, that is specialized to renamings. The proof of <code>par-rename</code> relies on the fact that renaming and substitution commute with one another, which is a lemma that we import from Chapter <a href="../Substitution/">Substitution</a> and restate here.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-rename-subst-commute"></a><a id="plfa_plfa-part2-Confluence-8475" href="../Confluence/#plfa_plfa-part2-Confluence-8475" class="Function">rename-subst-commute</a> <a id="plfa_plfa-part2-Confluence-8496" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-8498" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-8500" href="../Confluence/#plfa_plfa-part2-Confluence-8500" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-8502" href="../Confluence/#plfa_plfa-part2-Confluence-8502" class="Bound">Δ</a><a id="plfa_plfa-part2-Confluence-8503" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-8505" href="../Confluence/#plfa_plfa-part2-Confluence-8505" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-8507" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-8509" href="../Confluence/#plfa_plfa-part2-Confluence-8500" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-8511" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-8513" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-Confluence-8515" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-8517" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-8518" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-8520" href="../Confluence/#plfa_plfa-part2-Confluence-8520" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-8522" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-8524" href="../Confluence/#plfa_plfa-part2-Confluence-8500" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-8526" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-8528" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-8529" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-8531" href="../Confluence/#plfa_plfa-part2-Confluence-8531" class="Bound">ρ</a> <a id="plfa_plfa-part2-Confluence-8533" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-8535" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Confluence-8542" href="../Confluence/#plfa_plfa-part2-Confluence-8500" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-8544" href="../Confluence/#plfa_plfa-part2-Confluence-8502" class="Bound">Δ</a> <a id="plfa_plfa-part2-Confluence-8546" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Confluence-8552" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-8554" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-8555" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Confluence-8562" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-8563" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Confluence-8567" href="../Confluence/#plfa_plfa-part2-Confluence-8531" class="Bound">ρ</a><a id="plfa_plfa-part2-Confluence-8568" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-8570" href="../Confluence/#plfa_plfa-part2-Confluence-8505" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-8571" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-8573" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Confluence-8575" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Confluence-8582" href="../Confluence/#plfa_plfa-part2-Confluence-8531" class="Bound">ρ</a> <a id="plfa_plfa-part2-Confluence-8584" href="../Confluence/#plfa_plfa-part2-Confluence-8520" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-8586" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a> <a id="plfa_plfa-part2-Confluence-8588" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Confluence-8590" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Confluence-8597" href="../Confluence/#plfa_plfa-part2-Confluence-8531" class="Bound">ρ</a> <a id="plfa_plfa-part2-Confluence-8599" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-8600" href="../Confluence/#plfa_plfa-part2-Confluence-8505" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-8602" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Confluence-8604" href="../Confluence/#plfa_plfa-part2-Confluence-8520" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-8606" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a><a id="plfa_plfa-part2-Confluence-8607" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-8609" href="../Confluence/#plfa_plfa-part2-Confluence-8475" class="Function">rename-subst-commute</a> <a id="plfa_plfa-part2-Confluence-8630" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-8631" class="Argument">N</a> <a id="plfa_plfa-part2-Confluence-8633" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-8635" href="../Confluence/#plfa_plfa-part2-Confluence-8635" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-8636" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-8638" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-8640" href="../Substitution/#plfa_plfa-part2-Substitution-27839" class="Function">plfa.part2.Substitution.rename-subst-commute</a> <a id="plfa_plfa-part2-Confluence-8685" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-8686" class="Argument">N</a> <a id="plfa_plfa-part2-Confluence-8688" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-8690" href="../Confluence/#plfa_plfa-part2-Confluence-8635" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-8691" class="Symbol">}</a>
</pre><p>Now for the <code>par-rename</code> lemma.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-par-rename"></a><a id="plfa_plfa-part2-Confluence-8739" href="../Confluence/#plfa_plfa-part2-Confluence-8739" class="Function">par-rename</a> <a id="plfa_plfa-part2-Confluence-8750" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-8752" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-8754" href="../Confluence/#plfa_plfa-part2-Confluence-8754" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-8756" href="../Confluence/#plfa_plfa-part2-Confluence-8756" class="Bound">Δ</a> <a id="plfa_plfa-part2-Confluence-8758" href="../Confluence/#plfa_plfa-part2-Confluence-8758" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-8759" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-8761" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-8762" href="../Confluence/#plfa_plfa-part2-Confluence-8762" class="Bound">ρ</a> <a id="plfa_plfa-part2-Confluence-8764" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-8766" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Confluence-8773" href="../Confluence/#plfa_plfa-part2-Confluence-8754" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-8775" href="../Confluence/#plfa_plfa-part2-Confluence-8756" class="Bound">Δ</a><a id="plfa_plfa-part2-Confluence-8776" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-8778" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-8779" href="../Confluence/#plfa_plfa-part2-Confluence-8779" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-8781" href="../Confluence/#plfa_plfa-part2-Confluence-8781" class="Bound">M′</a> <a id="plfa_plfa-part2-Confluence-8784" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-8786" href="../Confluence/#plfa_plfa-part2-Confluence-8754" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-8788" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-8790" href="../Confluence/#plfa_plfa-part2-Confluence-8758" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-8791" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Confluence-8795" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-8797" href="../Confluence/#plfa_plfa-part2-Confluence-8779" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-8799" href="../Confluence/#plfa_plfa-part2-Confluence-2611" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-8801" href="../Confluence/#plfa_plfa-part2-Confluence-8781" class="Bound">M′</a>
    <a id="plfa_plfa-part2-Confluence-8808" class="Comment">------------------------</a>
  <a id="plfa_plfa-part2-Confluence-8835" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-8837" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Confluence-8844" href="../Confluence/#plfa_plfa-part2-Confluence-8762" class="Bound">ρ</a> <a id="plfa_plfa-part2-Confluence-8846" href="../Confluence/#plfa_plfa-part2-Confluence-8779" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-8848" href="../Confluence/#plfa_plfa-part2-Confluence-2611" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-8850" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Confluence-8857" href="../Confluence/#plfa_plfa-part2-Confluence-8762" class="Bound">ρ</a> <a id="plfa_plfa-part2-Confluence-8859" href="../Confluence/#plfa_plfa-part2-Confluence-8781" class="Bound">M′</a>
<a id="plfa_plfa-part2-Confluence-8862" href="../Confluence/#plfa_plfa-part2-Confluence-8739" class="Function">par-rename</a> <a id="plfa_plfa-part2-Confluence-8873" href="../Confluence/#plfa_plfa-part2-Confluence-2660" class="InductiveConstructor">pvar</a> <a id="plfa_plfa-part2-Confluence-8878" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-8880" href="../Confluence/#plfa_plfa-part2-Confluence-2660" class="InductiveConstructor">pvar</a>
<a id="plfa_plfa-part2-Confluence-8885" href="../Confluence/#plfa_plfa-part2-Confluence-8739" class="Function">par-rename</a> <a id="plfa_plfa-part2-Confluence-8896" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-8897" href="../Confluence/#plfa_plfa-part2-Confluence-2724" class="InductiveConstructor">pabs</a> <a id="plfa_plfa-part2-Confluence-8902" href="../Confluence/#plfa_plfa-part2-Confluence-8902" class="Bound">p</a><a id="plfa_plfa-part2-Confluence-8903" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-8905" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-8907" href="../Confluence/#plfa_plfa-part2-Confluence-2724" class="InductiveConstructor">pabs</a> <a id="plfa_plfa-part2-Confluence-8912" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-8913" href="../Confluence/#plfa_plfa-part2-Confluence-8739" class="Function">par-rename</a> <a id="plfa_plfa-part2-Confluence-8924" href="../Confluence/#plfa_plfa-part2-Confluence-8902" class="Bound">p</a><a id="plfa_plfa-part2-Confluence-8925" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-8927" href="../Confluence/#plfa_plfa-part2-Confluence-8739" class="Function">par-rename</a> <a id="plfa_plfa-part2-Confluence-8938" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-8939" href="../Confluence/#plfa_plfa-part2-Confluence-2804" class="InductiveConstructor">papp</a> <a id="plfa_plfa-part2-Confluence-8944" href="../Confluence/#plfa_plfa-part2-Confluence-8944" class="Bound">p₁</a> <a id="plfa_plfa-part2-Confluence-8947" href="../Confluence/#plfa_plfa-part2-Confluence-8947" class="Bound">p₂</a><a id="plfa_plfa-part2-Confluence-8949" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-8951" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-8953" href="../Confluence/#plfa_plfa-part2-Confluence-2804" class="InductiveConstructor">papp</a> <a id="plfa_plfa-part2-Confluence-8958" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-8959" href="../Confluence/#plfa_plfa-part2-Confluence-8739" class="Function">par-rename</a> <a id="plfa_plfa-part2-Confluence-8970" href="../Confluence/#plfa_plfa-part2-Confluence-8944" class="Bound">p₁</a><a id="plfa_plfa-part2-Confluence-8972" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-8974" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-8975" href="../Confluence/#plfa_plfa-part2-Confluence-8739" class="Function">par-rename</a> <a id="plfa_plfa-part2-Confluence-8986" href="../Confluence/#plfa_plfa-part2-Confluence-8947" class="Bound">p₂</a><a id="plfa_plfa-part2-Confluence-8988" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-8990" href="../Confluence/#plfa_plfa-part2-Confluence-8739" class="Function">par-rename</a> <a id="plfa_plfa-part2-Confluence-9001" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-9002" href="../Confluence/#plfa_plfa-part2-Confluence-9002" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-9003" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-9005" href="../Confluence/#plfa_plfa-part2-Confluence-9005" class="Bound">Δ</a><a id="plfa_plfa-part2-Confluence-9006" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-9008" href="../Confluence/#plfa_plfa-part2-Confluence-9008" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-9009" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-9011" href="../Confluence/#plfa_plfa-part2-Confluence-9011" class="Bound">ρ</a><a id="plfa_plfa-part2-Confluence-9012" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-9014" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-9015" href="../Confluence/#plfa_plfa-part2-Confluence-2910" class="InductiveConstructor">pbeta</a><a id="plfa_plfa-part2-Confluence-9020" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-9021" href="../Confluence/#plfa_plfa-part2-Confluence-9002" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-9022" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-9024" href="../Confluence/#plfa_plfa-part2-Confluence-9024" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-9025" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-9027" href="../Confluence/#plfa_plfa-part2-Confluence-9027" class="Bound">N′</a><a id="plfa_plfa-part2-Confluence-9029" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-9031" href="../Confluence/#plfa_plfa-part2-Confluence-9031" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-9032" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-9034" href="../Confluence/#plfa_plfa-part2-Confluence-9034" class="Bound">M′</a><a id="plfa_plfa-part2-Confluence-9036" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-9038" href="../Confluence/#plfa_plfa-part2-Confluence-9038" class="Bound">p₁</a> <a id="plfa_plfa-part2-Confluence-9041" href="../Confluence/#plfa_plfa-part2-Confluence-9041" class="Bound">p₂</a><a id="plfa_plfa-part2-Confluence-9043" class="Symbol">)</a>
    <a id="plfa_plfa-part2-Confluence-9049" class="Keyword">with</a> <a id="plfa_plfa-part2-Confluence-9054" href="../Confluence/#plfa_plfa-part2-Confluence-2910" class="InductiveConstructor">pbeta</a> <a id="plfa_plfa-part2-Confluence-9060" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-9061" href="../Confluence/#plfa_plfa-part2-Confluence-8739" class="Function">par-rename</a><a id="plfa_plfa-part2-Confluence-9071" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-9072" class="Argument">ρ</a> <a id="plfa_plfa-part2-Confluence-9074" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-9076" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Confluence-9080" href="../Confluence/#plfa_plfa-part2-Confluence-9011" class="Bound">ρ</a><a id="plfa_plfa-part2-Confluence-9081" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-9083" href="../Confluence/#plfa_plfa-part2-Confluence-9038" class="Bound">p₁</a><a id="plfa_plfa-part2-Confluence-9085" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-9087" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-9088" href="../Confluence/#plfa_plfa-part2-Confluence-8739" class="Function">par-rename</a><a id="plfa_plfa-part2-Confluence-9098" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-9099" class="Argument">ρ</a> <a id="plfa_plfa-part2-Confluence-9101" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-9103" href="../Confluence/#plfa_plfa-part2-Confluence-9011" class="Bound">ρ</a><a id="plfa_plfa-part2-Confluence-9104" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-9106" href="../Confluence/#plfa_plfa-part2-Confluence-9041" class="Bound">p₂</a><a id="plfa_plfa-part2-Confluence-9108" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-9110" class="Symbol">...</a> <a id="plfa_plfa-part2-Confluence-9114" class="Symbol">|</a> <a id="plfa_plfa-part2-Confluence-9116" href="../Confluence/#plfa_plfa-part2-Confluence-9116" class="Bound">G</a> <a id="plfa_plfa-part2-Confluence-9118" class="Keyword">rewrite</a> <a id="plfa_plfa-part2-Confluence-9126" href="../Confluence/#plfa_plfa-part2-Confluence-8475" class="Function">rename-subst-commute</a><a id="plfa_plfa-part2-Confluence-9146" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-9147" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-9148" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-9150" class="Bound">Δ</a><a id="plfa_plfa-part2-Confluence-9151" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-9153" class="Bound">N′</a><a id="plfa_plfa-part2-Confluence-9155" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-9157" class="Bound">M′</a><a id="plfa_plfa-part2-Confluence-9159" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-9161" class="Bound">ρ</a><a id="plfa_plfa-part2-Confluence-9162" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-9164" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-9166" href="../Confluence/#plfa_plfa-part2-Confluence-9116" class="Bound">G</a>

</pre><p>The proof is by induction on <code>M ⇛ M′</code>. The first three cases are straightforward so we just consider the last one for <code>pbeta</code>.</p><ul><li>Suppose <code>(ƛ N) · M ⇛ N′ [ M′ ]</code> because <code>N ⇛ N′</code> and <code>M ⇛ M′</code>. By the induction hypothesis, we have <code>rename (ext ρ) N ⇛ rename (ext ρ) N′</code> and <code>rename ρ M ⇛ rename ρ M′</code>. So by <code>pbeta</code> we have <code>(ƛ rename (ext ρ) N) · (rename ρ M) ⇛ (rename (ext ρ) N) [ rename ρ M ]</code>. However, to conclude we instead need parallel reduction to <code>rename ρ (N [ M ])</code>. But thankfully, renaming and substitution commute with one another.</li></ul><p>With the <code>par-rename</code> lemma in hand, it is straightforward to show that extending substitutions preserves the pointwise parallel reduction relation.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-par-subst-exts"></a><a id="plfa_plfa-part2-Confluence-9899" href="../Confluence/#plfa_plfa-part2-Confluence-9899" class="Function">par-subst-exts</a> <a id="plfa_plfa-part2-Confluence-9914" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-9916" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-9918" href="../Confluence/#plfa_plfa-part2-Confluence-9918" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-9920" href="../Confluence/#plfa_plfa-part2-Confluence-9920" class="Bound">Δ</a><a id="plfa_plfa-part2-Confluence-9921" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-9923" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-9924" href="../Confluence/#plfa_plfa-part2-Confluence-9924" class="Bound">σ</a> <a id="plfa_plfa-part2-Confluence-9926" href="../Confluence/#plfa_plfa-part2-Confluence-9926" class="Bound">τ</a> <a id="plfa_plfa-part2-Confluence-9928" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-9930" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Confluence-9936" href="../Confluence/#plfa_plfa-part2-Confluence-9918" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-9938" href="../Confluence/#plfa_plfa-part2-Confluence-9920" class="Bound">Δ</a><a id="plfa_plfa-part2-Confluence-9939" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Confluence-9943" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-9945" href="../Confluence/#plfa_plfa-part2-Confluence-7529" class="Function">par-subst</a> <a id="plfa_plfa-part2-Confluence-9955" href="../Confluence/#plfa_plfa-part2-Confluence-9924" class="Bound">σ</a> <a id="plfa_plfa-part2-Confluence-9957" href="../Confluence/#plfa_plfa-part2-Confluence-9926" class="Bound">τ</a>
    <a id="plfa_plfa-part2-Confluence-9963" class="Comment">------------------------------------------</a>
  <a id="plfa_plfa-part2-Confluence-10008" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-10010" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-10012" href="../Confluence/#plfa_plfa-part2-Confluence-10012" class="Bound">B</a><a id="plfa_plfa-part2-Confluence-10013" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10015" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-10017" href="../Confluence/#plfa_plfa-part2-Confluence-7529" class="Function">par-subst</a> <a id="plfa_plfa-part2-Confluence-10027" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-10028" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Confluence-10033" href="../Confluence/#plfa_plfa-part2-Confluence-9924" class="Bound">σ</a> <a id="plfa_plfa-part2-Confluence-10035" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10036" class="Argument">B</a> <a id="plfa_plfa-part2-Confluence-10038" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-10040" href="../Confluence/#plfa_plfa-part2-Confluence-10012" class="Bound">B</a><a id="plfa_plfa-part2-Confluence-10041" class="Symbol">})</a> <a id="plfa_plfa-part2-Confluence-10044" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-10045" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Confluence-10050" href="../Confluence/#plfa_plfa-part2-Confluence-9926" class="Bound">τ</a><a id="plfa_plfa-part2-Confluence-10051" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-10053" href="../Confluence/#plfa_plfa-part2-Confluence-9899" class="Function">par-subst-exts</a> <a id="plfa_plfa-part2-Confluence-10068" href="../Confluence/#plfa_plfa-part2-Confluence-10068" class="Bound">s</a> <a id="plfa_plfa-part2-Confluence-10070" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10071" class="Argument">x</a> <a id="plfa_plfa-part2-Confluence-10073" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-10075" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Confluence-10076" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10078" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-10080" href="../Confluence/#plfa_plfa-part2-Confluence-2660" class="InductiveConstructor">pvar</a>
<a id="plfa_plfa-part2-Confluence-10085" href="../Confluence/#plfa_plfa-part2-Confluence-9899" class="Function">par-subst-exts</a> <a id="plfa_plfa-part2-Confluence-10100" href="../Confluence/#plfa_plfa-part2-Confluence-10100" class="Bound">s</a> <a id="plfa_plfa-part2-Confluence-10102" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10103" class="Argument">x</a> <a id="plfa_plfa-part2-Confluence-10105" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-10107" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Confluence-10109" href="../Confluence/#plfa_plfa-part2-Confluence-10109" class="Bound">x</a><a id="plfa_plfa-part2-Confluence-10110" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10112" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-10114" href="../Confluence/#plfa_plfa-part2-Confluence-8739" class="Function">par-rename</a> <a id="plfa_plfa-part2-Confluence-10125" href="../Confluence/#plfa_plfa-part2-Confluence-10100" class="Bound">s</a>
</pre><p>The next lemma that we need for proving that substitution respects parallel reduction is the following which states that simultaneous substitution commutes with single substitution. We import this lemma from Chapter <a href="../Substitution/">Substitution</a> and restate it below.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-subst-commute"></a><a id="plfa_plfa-part2-Confluence-10410" href="../Confluence/#plfa_plfa-part2-Confluence-10410" class="Function">subst-commute</a> <a id="plfa_plfa-part2-Confluence-10424" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-10426" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-10428" href="../Confluence/#plfa_plfa-part2-Confluence-10428" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-10430" href="../Confluence/#plfa_plfa-part2-Confluence-10430" class="Bound">Δ</a><a id="plfa_plfa-part2-Confluence-10431" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-10433" href="../Confluence/#plfa_plfa-part2-Confluence-10433" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-10435" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-10437" href="../Confluence/#plfa_plfa-part2-Confluence-10428" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-10439" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-10441" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-Confluence-10443" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-10445" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-10446" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-10448" href="../Confluence/#plfa_plfa-part2-Confluence-10448" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-10450" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-10452" href="../Confluence/#plfa_plfa-part2-Confluence-10428" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-10454" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-10456" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-10457" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-10459" href="../Confluence/#plfa_plfa-part2-Confluence-10459" class="Bound">σ</a> <a id="plfa_plfa-part2-Confluence-10461" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-10463" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Confluence-10469" href="../Confluence/#plfa_plfa-part2-Confluence-10428" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-10471" href="../Confluence/#plfa_plfa-part2-Confluence-10430" class="Bound">Δ</a> <a id="plfa_plfa-part2-Confluence-10473" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Confluence-10477" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-10479" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a> <a id="plfa_plfa-part2-Confluence-10485" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-10486" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Confluence-10491" href="../Confluence/#plfa_plfa-part2-Confluence-10459" class="Bound">σ</a><a id="plfa_plfa-part2-Confluence-10492" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-10494" href="../Confluence/#plfa_plfa-part2-Confluence-10433" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-10496" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Confluence-10498" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a> <a id="plfa_plfa-part2-Confluence-10504" href="../Confluence/#plfa_plfa-part2-Confluence-10459" class="Bound">σ</a> <a id="plfa_plfa-part2-Confluence-10506" href="../Confluence/#plfa_plfa-part2-Confluence-10448" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-10508" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a> <a id="plfa_plfa-part2-Confluence-10510" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Confluence-10512" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a> <a id="plfa_plfa-part2-Confluence-10518" href="../Confluence/#plfa_plfa-part2-Confluence-10459" class="Bound">σ</a> <a id="plfa_plfa-part2-Confluence-10520" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-10521" href="../Confluence/#plfa_plfa-part2-Confluence-10433" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-10523" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Confluence-10525" href="../Confluence/#plfa_plfa-part2-Confluence-10448" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-10527" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a><a id="plfa_plfa-part2-Confluence-10528" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-10530" href="../Confluence/#plfa_plfa-part2-Confluence-10410" class="Function">subst-commute</a> <a id="plfa_plfa-part2-Confluence-10544" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10545" class="Argument">N</a> <a id="plfa_plfa-part2-Confluence-10547" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-10549" href="../Confluence/#plfa_plfa-part2-Confluence-10549" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-10550" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10552" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-10554" href="../Substitution/#plfa_plfa-part2-Substitution-26294" class="Function">plfa.part2.Substitution.subst-commute</a> <a id="plfa_plfa-part2-Confluence-10592" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10593" class="Argument">N</a> <a id="plfa_plfa-part2-Confluence-10595" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-10597" href="../Confluence/#plfa_plfa-part2-Confluence-10549" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-10598" class="Symbol">}</a>
</pre><p>We are ready to prove that substitution respects parallel reduction.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-subst-par"></a><a id="plfa_plfa-part2-Confluence-10683" href="../Confluence/#plfa_plfa-part2-Confluence-10683" class="Function">subst-par</a> <a id="plfa_plfa-part2-Confluence-10693" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-10695" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-10697" href="../Confluence/#plfa_plfa-part2-Confluence-10697" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-10699" href="../Confluence/#plfa_plfa-part2-Confluence-10699" class="Bound">Δ</a> <a id="plfa_plfa-part2-Confluence-10701" href="../Confluence/#plfa_plfa-part2-Confluence-10701" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-10702" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10704" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10705" href="../Confluence/#plfa_plfa-part2-Confluence-10705" class="Bound">σ</a> <a id="plfa_plfa-part2-Confluence-10707" href="../Confluence/#plfa_plfa-part2-Confluence-10707" class="Bound">τ</a> <a id="plfa_plfa-part2-Confluence-10709" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-10711" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Confluence-10717" href="../Confluence/#plfa_plfa-part2-Confluence-10697" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-10719" href="../Confluence/#plfa_plfa-part2-Confluence-10699" class="Bound">Δ</a><a id="plfa_plfa-part2-Confluence-10720" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10722" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10723" href="../Confluence/#plfa_plfa-part2-Confluence-10723" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-10725" href="../Confluence/#plfa_plfa-part2-Confluence-10725" class="Bound">M′</a> <a id="plfa_plfa-part2-Confluence-10728" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-10730" href="../Confluence/#plfa_plfa-part2-Confluence-10697" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-10732" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-10734" href="../Confluence/#plfa_plfa-part2-Confluence-10701" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-10735" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Confluence-10739" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-10741" href="../Confluence/#plfa_plfa-part2-Confluence-7529" class="Function">par-subst</a> <a id="plfa_plfa-part2-Confluence-10751" href="../Confluence/#plfa_plfa-part2-Confluence-10705" class="Bound">σ</a> <a id="plfa_plfa-part2-Confluence-10753" href="../Confluence/#plfa_plfa-part2-Confluence-10707" class="Bound">τ</a>  <a id="plfa_plfa-part2-Confluence-10756" class="Symbol">→</a>  <a id="plfa_plfa-part2-Confluence-10759" href="../Confluence/#plfa_plfa-part2-Confluence-10723" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-10761" href="../Confluence/#plfa_plfa-part2-Confluence-2611" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-10763" href="../Confluence/#plfa_plfa-part2-Confluence-10725" class="Bound">M′</a>
    <a id="plfa_plfa-part2-Confluence-10770" class="Comment">--------------------------</a>
  <a id="plfa_plfa-part2-Confluence-10799" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-10801" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a> <a id="plfa_plfa-part2-Confluence-10807" href="../Confluence/#plfa_plfa-part2-Confluence-10705" class="Bound">σ</a> <a id="plfa_plfa-part2-Confluence-10809" href="../Confluence/#plfa_plfa-part2-Confluence-10723" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-10811" href="../Confluence/#plfa_plfa-part2-Confluence-2611" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-10813" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a> <a id="plfa_plfa-part2-Confluence-10819" href="../Confluence/#plfa_plfa-part2-Confluence-10707" class="Bound">τ</a> <a id="plfa_plfa-part2-Confluence-10821" href="../Confluence/#plfa_plfa-part2-Confluence-10725" class="Bound">M′</a>
<a id="plfa_plfa-part2-Confluence-10824" href="../Confluence/#plfa_plfa-part2-Confluence-10683" class="Function">subst-par</a> <a id="plfa_plfa-part2-Confluence-10834" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10835" href="../Confluence/#plfa_plfa-part2-Confluence-10835" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-10836" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10838" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10839" href="../Confluence/#plfa_plfa-part2-Confluence-10839" class="Bound">Δ</a><a id="plfa_plfa-part2-Confluence-10840" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10842" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10843" href="../Confluence/#plfa_plfa-part2-Confluence-10843" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-10844" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10846" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10847" href="../Confluence/#plfa_plfa-part2-Confluence-10847" class="Bound">σ</a><a id="plfa_plfa-part2-Confluence-10848" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10850" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10851" href="../Confluence/#plfa_plfa-part2-Confluence-10851" class="Bound">τ</a><a id="plfa_plfa-part2-Confluence-10852" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10854" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10855" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Confluence-10857" href="../Confluence/#plfa_plfa-part2-Confluence-10857" class="Bound">x</a><a id="plfa_plfa-part2-Confluence-10858" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10860" href="../Confluence/#plfa_plfa-part2-Confluence-10860" class="Bound">s</a> <a id="plfa_plfa-part2-Confluence-10862" href="../Confluence/#plfa_plfa-part2-Confluence-2660" class="InductiveConstructor">pvar</a> <a id="plfa_plfa-part2-Confluence-10867" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-10869" href="../Confluence/#plfa_plfa-part2-Confluence-10860" class="Bound">s</a>
<a id="plfa_plfa-part2-Confluence-10871" href="../Confluence/#plfa_plfa-part2-Confluence-10683" class="Function">subst-par</a> <a id="plfa_plfa-part2-Confluence-10881" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10882" href="../Confluence/#plfa_plfa-part2-Confluence-10882" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-10883" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10885" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10886" href="../Confluence/#plfa_plfa-part2-Confluence-10886" class="Bound">Δ</a><a id="plfa_plfa-part2-Confluence-10887" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10889" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10890" href="../Confluence/#plfa_plfa-part2-Confluence-10890" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-10891" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10893" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10894" href="../Confluence/#plfa_plfa-part2-Confluence-10894" class="Bound">σ</a><a id="plfa_plfa-part2-Confluence-10895" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10897" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10898" href="../Confluence/#plfa_plfa-part2-Confluence-10898" class="Bound">τ</a><a id="plfa_plfa-part2-Confluence-10899" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10901" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10902" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-10904" href="../Confluence/#plfa_plfa-part2-Confluence-10904" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-10905" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10907" href="../Confluence/#plfa_plfa-part2-Confluence-10907" class="Bound">s</a> <a id="plfa_plfa-part2-Confluence-10909" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-10910" href="../Confluence/#plfa_plfa-part2-Confluence-2724" class="InductiveConstructor">pabs</a> <a id="plfa_plfa-part2-Confluence-10915" href="../Confluence/#plfa_plfa-part2-Confluence-10915" class="Bound">p</a><a id="plfa_plfa-part2-Confluence-10916" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-10918" class="Symbol">=</a>
  <a id="plfa_plfa-part2-Confluence-10922" href="../Confluence/#plfa_plfa-part2-Confluence-2724" class="InductiveConstructor">pabs</a> <a id="plfa_plfa-part2-Confluence-10927" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-10928" href="../Confluence/#plfa_plfa-part2-Confluence-10683" class="Function">subst-par</a> <a id="plfa_plfa-part2-Confluence-10938" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10939" class="Argument">σ</a> <a id="plfa_plfa-part2-Confluence-10941" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-10943" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Confluence-10948" href="../Confluence/#plfa_plfa-part2-Confluence-10894" class="Bound">σ</a><a id="plfa_plfa-part2-Confluence-10949" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10951" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10952" class="Argument">τ</a> <a id="plfa_plfa-part2-Confluence-10954" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-10956" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Confluence-10961" href="../Confluence/#plfa_plfa-part2-Confluence-10898" class="Bound">τ</a><a id="plfa_plfa-part2-Confluence-10962" class="Symbol">}</a>
        <a id="plfa_plfa-part2-Confluence-10972" class="Symbol">(λ</a> <a id="plfa_plfa-part2-Confluence-10975" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10976" href="../Confluence/#plfa_plfa-part2-Confluence-10976" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-10977" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-10979" href="../Confluence/#plfa_plfa-part2-Confluence-10979" class="Bound">x</a><a id="plfa_plfa-part2-Confluence-10980" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10982" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-10984" href="../Confluence/#plfa_plfa-part2-Confluence-9899" class="Function">par-subst-exts</a> <a id="plfa_plfa-part2-Confluence-10999" href="../Confluence/#plfa_plfa-part2-Confluence-10907" class="Bound">s</a> <a id="plfa_plfa-part2-Confluence-11001" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-11002" class="Argument">x</a> <a id="plfa_plfa-part2-Confluence-11004" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-11006" href="../Confluence/#plfa_plfa-part2-Confluence-10979" class="Bound">x</a><a id="plfa_plfa-part2-Confluence-11007" class="Symbol">})</a> <a id="plfa_plfa-part2-Confluence-11010" href="../Confluence/#plfa_plfa-part2-Confluence-10915" class="Bound">p</a><a id="plfa_plfa-part2-Confluence-11011" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-11013" href="../Confluence/#plfa_plfa-part2-Confluence-10683" class="Function">subst-par</a> <a id="plfa_plfa-part2-Confluence-11023" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-11024" href="../Confluence/#plfa_plfa-part2-Confluence-11024" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-11025" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-11027" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-11028" href="../Confluence/#plfa_plfa-part2-Confluence-11028" class="Bound">Δ</a><a id="plfa_plfa-part2-Confluence-11029" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-11031" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-11032" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-11033" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-11035" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-11036" href="../Confluence/#plfa_plfa-part2-Confluence-11036" class="Bound">σ</a><a id="plfa_plfa-part2-Confluence-11037" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-11039" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-11040" href="../Confluence/#plfa_plfa-part2-Confluence-11040" class="Bound">τ</a><a id="plfa_plfa-part2-Confluence-11041" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-11043" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-11044" href="../Confluence/#plfa_plfa-part2-Confluence-11044" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-11046" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-11048" href="../Confluence/#plfa_plfa-part2-Confluence-11048" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-11049" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-11051" href="../Confluence/#plfa_plfa-part2-Confluence-11051" class="Bound">s</a> <a id="plfa_plfa-part2-Confluence-11053" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-11054" href="../Confluence/#plfa_plfa-part2-Confluence-2804" class="InductiveConstructor">papp</a> <a id="plfa_plfa-part2-Confluence-11059" href="../Confluence/#plfa_plfa-part2-Confluence-11059" class="Bound">p₁</a> <a id="plfa_plfa-part2-Confluence-11062" href="../Confluence/#plfa_plfa-part2-Confluence-11062" class="Bound">p₂</a><a id="plfa_plfa-part2-Confluence-11064" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-11066" class="Symbol">=</a>
  <a id="plfa_plfa-part2-Confluence-11070" href="../Confluence/#plfa_plfa-part2-Confluence-2804" class="InductiveConstructor">papp</a> <a id="plfa_plfa-part2-Confluence-11075" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-11076" href="../Confluence/#plfa_plfa-part2-Confluence-10683" class="Function">subst-par</a> <a id="plfa_plfa-part2-Confluence-11086" href="../Confluence/#plfa_plfa-part2-Confluence-11051" class="Bound">s</a> <a id="plfa_plfa-part2-Confluence-11088" href="../Confluence/#plfa_plfa-part2-Confluence-11059" class="Bound">p₁</a><a id="plfa_plfa-part2-Confluence-11090" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-11092" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-11093" href="../Confluence/#plfa_plfa-part2-Confluence-10683" class="Function">subst-par</a> <a id="plfa_plfa-part2-Confluence-11103" href="../Confluence/#plfa_plfa-part2-Confluence-11051" class="Bound">s</a> <a id="plfa_plfa-part2-Confluence-11105" href="../Confluence/#plfa_plfa-part2-Confluence-11062" class="Bound">p₂</a><a id="plfa_plfa-part2-Confluence-11107" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-11109" href="../Confluence/#plfa_plfa-part2-Confluence-10683" class="Function">subst-par</a> <a id="plfa_plfa-part2-Confluence-11119" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-11120" href="../Confluence/#plfa_plfa-part2-Confluence-11120" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-11121" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-11123" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-11124" href="../Confluence/#plfa_plfa-part2-Confluence-11124" class="Bound">Δ</a><a id="plfa_plfa-part2-Confluence-11125" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-11127" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-11128" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-11129" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-11131" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-11132" href="../Confluence/#plfa_plfa-part2-Confluence-11132" class="Bound">σ</a><a id="plfa_plfa-part2-Confluence-11133" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-11135" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-11136" href="../Confluence/#plfa_plfa-part2-Confluence-11136" class="Bound">τ</a><a id="plfa_plfa-part2-Confluence-11137" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-11139" class="Symbol">{(</a><a id="plfa_plfa-part2-Confluence-11141" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-11143" href="../Confluence/#plfa_plfa-part2-Confluence-11143" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-11144" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-11146" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-11148" href="../Confluence/#plfa_plfa-part2-Confluence-11148" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-11149" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-11151" href="../Confluence/#plfa_plfa-part2-Confluence-11151" class="Bound">s</a> <a id="plfa_plfa-part2-Confluence-11153" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-11154" href="../Confluence/#plfa_plfa-part2-Confluence-2910" class="InductiveConstructor">pbeta</a><a id="plfa_plfa-part2-Confluence-11159" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-11160" class="Argument">N′</a> <a id="plfa_plfa-part2-Confluence-11163" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-11165" href="../Confluence/#plfa_plfa-part2-Confluence-11165" class="Bound">N′</a><a id="plfa_plfa-part2-Confluence-11167" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-11169" class="Argument">M′</a> <a id="plfa_plfa-part2-Confluence-11172" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-11174" href="../Confluence/#plfa_plfa-part2-Confluence-11174" class="Bound">M′</a><a id="plfa_plfa-part2-Confluence-11176" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-11178" href="../Confluence/#plfa_plfa-part2-Confluence-11178" class="Bound">p₁</a> <a id="plfa_plfa-part2-Confluence-11181" href="../Confluence/#plfa_plfa-part2-Confluence-11181" class="Bound">p₂</a><a id="plfa_plfa-part2-Confluence-11183" class="Symbol">)</a>
    <a id="plfa_plfa-part2-Confluence-11189" class="Keyword">with</a> <a id="plfa_plfa-part2-Confluence-11194" href="../Confluence/#plfa_plfa-part2-Confluence-2910" class="InductiveConstructor">pbeta</a> <a id="plfa_plfa-part2-Confluence-11200" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-11201" href="../Confluence/#plfa_plfa-part2-Confluence-10683" class="Function">subst-par</a><a id="plfa_plfa-part2-Confluence-11210" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-11211" class="Argument">σ</a> <a id="plfa_plfa-part2-Confluence-11213" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-11215" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Confluence-11220" href="../Confluence/#plfa_plfa-part2-Confluence-11132" class="Bound">σ</a><a id="plfa_plfa-part2-Confluence-11221" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-11223" class="Argument">τ</a> <a id="plfa_plfa-part2-Confluence-11225" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-11227" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Confluence-11232" href="../Confluence/#plfa_plfa-part2-Confluence-11136" class="Bound">τ</a><a id="plfa_plfa-part2-Confluence-11233" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-11235" class="Argument">M</a> <a id="plfa_plfa-part2-Confluence-11237" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-11239" href="../Confluence/#plfa_plfa-part2-Confluence-11143" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-11240" class="Symbol">}</a>
                        <a id="plfa_plfa-part2-Confluence-11266" class="Symbol">(λ{</a><a id="plfa_plfa-part2-Confluence-11269" href="../Confluence/#plfa_plfa-part2-Confluence-11269" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-11270" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-11272" href="../Confluence/#plfa_plfa-part2-Confluence-11272" class="Bound">x</a><a id="plfa_plfa-part2-Confluence-11273" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-11275" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-11277" href="../Confluence/#plfa_plfa-part2-Confluence-9899" class="Function">par-subst-exts</a> <a id="plfa_plfa-part2-Confluence-11292" href="../Confluence/#plfa_plfa-part2-Confluence-11151" class="Bound">s</a> <a id="plfa_plfa-part2-Confluence-11294" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-11295" class="Argument">x</a> <a id="plfa_plfa-part2-Confluence-11297" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-11299" href="../Confluence/#plfa_plfa-part2-Confluence-11272" class="Bound">x</a><a id="plfa_plfa-part2-Confluence-11300" class="Symbol">})</a> <a id="plfa_plfa-part2-Confluence-11303" href="../Confluence/#plfa_plfa-part2-Confluence-11178" class="Bound">p₁</a><a id="plfa_plfa-part2-Confluence-11305" class="Symbol">)</a>
               <a id="plfa_plfa-part2-Confluence-11322" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-11323" href="../Confluence/#plfa_plfa-part2-Confluence-10683" class="Function">subst-par</a> <a id="plfa_plfa-part2-Confluence-11333" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-11334" class="Argument">σ</a> <a id="plfa_plfa-part2-Confluence-11336" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-11338" href="../Confluence/#plfa_plfa-part2-Confluence-11132" class="Bound">σ</a><a id="plfa_plfa-part2-Confluence-11339" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-11341" href="../Confluence/#plfa_plfa-part2-Confluence-11151" class="Bound">s</a> <a id="plfa_plfa-part2-Confluence-11343" href="../Confluence/#plfa_plfa-part2-Confluence-11181" class="Bound">p₂</a><a id="plfa_plfa-part2-Confluence-11345" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-11347" class="Symbol">...</a> <a id="plfa_plfa-part2-Confluence-11351" class="Symbol">|</a> <a id="plfa_plfa-part2-Confluence-11353" href="../Confluence/#plfa_plfa-part2-Confluence-11353" class="Bound">G</a> <a id="plfa_plfa-part2-Confluence-11355" class="Keyword">rewrite</a> <a id="plfa_plfa-part2-Confluence-11363" href="../Confluence/#plfa_plfa-part2-Confluence-10410" class="Function">subst-commute</a><a id="plfa_plfa-part2-Confluence-11376" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-11377" class="Argument">N</a> <a id="plfa_plfa-part2-Confluence-11379" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-11381" class="Bound">N′</a><a id="plfa_plfa-part2-Confluence-11383" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-11385" class="Argument">M</a> <a id="plfa_plfa-part2-Confluence-11387" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-11389" class="Bound">M′</a><a id="plfa_plfa-part2-Confluence-11391" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-11393" class="Argument">σ</a> <a id="plfa_plfa-part2-Confluence-11395" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-11397" class="Bound">τ</a><a id="plfa_plfa-part2-Confluence-11398" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-11400" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-11402" href="../Confluence/#plfa_plfa-part2-Confluence-11353" class="Bound">G</a>
</pre><p>We proceed by induction on <code>M ⇛ M′</code>.</p><ul><li><p>Suppose <code>x ⇛ x</code>. We conclude that <code>σ x ⇛ τ x</code> using the premise <code>par-subst σ τ</code>.</p></li><li><p>Suppose <code>ƛ N ⇛ ƛ N′</code> because <code>N ⇛ N′</code>. To use the induction hypothesis, we need <code>par-subst (exts σ) (exts τ)</code>, which we obtain by <code>par-subst-exts</code>. So we have <code>subst (exts σ) N ⇛ subst (exts τ) N′</code> and conclude by rule <code>pabs</code>.</p></li><li><p>Suppose <code>L · M ⇛ L′ · M′</code> because <code>L ⇛ L′</code> and <code>M ⇛ M′</code>. By the induction hypothesis we have <code>subst σ L ⇛ subst τ L′</code> and <code>subst σ M ⇛ subst τ M′</code>, so we conclude by rule <code>papp</code>.</p></li><li><p>Suppose <code>(ƛ N) · M ⇛ N′ [ M′ ]</code> because <code>N ⇛ N′</code> and <code>M ⇛ M′</code>. Again we obtain <code>par-subst (exts σ) (exts τ)</code> by <code>par-subst-exts</code>. So by the induction hypothesis, we have <code>subst (exts σ) N ⇛ subst (exts τ) N′</code> and <code>subst σ M ⇛ subst τ M′</code>. Then by rule <code>pbeta</code>, we have parallel reduction to <code>subst (exts τ) N′ [ subst τ M′ ]</code>. Substitution commutes with itself in the following sense. For any σ, N, and M, we have</p><pre><code>  (subst (exts σ) N) [ subst σ M ] ≡ subst σ (N [ M ])</code></pre><p>So we have parallel reduction to <code>subst τ (N′ [ M′ ])</code>.</p></li></ul><p>Of course, if <code>M ⇛ M′</code>, then <code>subst-zero M</code> pointwise parallel reduces to <code>subst-zero M′</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-par-subst-zero"></a><a id="plfa_plfa-part2-Confluence-12614" href="../Confluence/#plfa_plfa-part2-Confluence-12614" class="Function">par-subst-zero</a> <a id="plfa_plfa-part2-Confluence-12629" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-12631" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-12633" href="../Confluence/#plfa_plfa-part2-Confluence-12633" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-12634" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-12636" href="../Confluence/#plfa_plfa-part2-Confluence-12636" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-12637" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-12639" href="../Confluence/#plfa_plfa-part2-Confluence-12639" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-12641" href="../Confluence/#plfa_plfa-part2-Confluence-12641" class="Bound">M′</a> <a id="plfa_plfa-part2-Confluence-12644" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-12646" href="../Confluence/#plfa_plfa-part2-Confluence-12633" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-12648" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-12650" href="../Confluence/#plfa_plfa-part2-Confluence-12636" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-12651" class="Symbol">}</a>
       <a id="plfa_plfa-part2-Confluence-12660" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-12662" href="../Confluence/#plfa_plfa-part2-Confluence-12639" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-12664" href="../Confluence/#plfa_plfa-part2-Confluence-2611" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-12666" href="../Confluence/#plfa_plfa-part2-Confluence-12641" class="Bound">M′</a>
       <a id="plfa_plfa-part2-Confluence-12676" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-12678" href="../Confluence/#plfa_plfa-part2-Confluence-7529" class="Function">par-subst</a> <a id="plfa_plfa-part2-Confluence-12688" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-12689" href="../Untyped/#plfa_plfa-part2-Untyped-7207" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Confluence-12700" href="../Confluence/#plfa_plfa-part2-Confluence-12639" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-12701" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-12703" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-12704" href="../Untyped/#plfa_plfa-part2-Untyped-7207" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Confluence-12715" href="../Confluence/#plfa_plfa-part2-Confluence-12641" class="Bound">M′</a><a id="plfa_plfa-part2-Confluence-12717" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-12719" href="../Confluence/#plfa_plfa-part2-Confluence-12614" class="Function">par-subst-zero</a> <a id="plfa_plfa-part2-Confluence-12734" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-12735" href="../Confluence/#plfa_plfa-part2-Confluence-12735" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-12736" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-12738" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-12739" href="../Confluence/#plfa_plfa-part2-Confluence-12739" class="Bound">M′</a><a id="plfa_plfa-part2-Confluence-12741" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-12743" href="../Confluence/#plfa_plfa-part2-Confluence-12743" class="Bound">p</a> <a id="plfa_plfa-part2-Confluence-12745" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-12746" href="../Confluence/#plfa_plfa-part2-Confluence-12746" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-12747" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-12749" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-12750" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Confluence-12751" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-12753" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-12755" href="../Confluence/#plfa_plfa-part2-Confluence-12743" class="Bound">p</a>
<a id="plfa_plfa-part2-Confluence-12757" href="../Confluence/#plfa_plfa-part2-Confluence-12614" class="Function">par-subst-zero</a> <a id="plfa_plfa-part2-Confluence-12772" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-12773" href="../Confluence/#plfa_plfa-part2-Confluence-12773" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-12774" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-12776" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-12777" href="../Confluence/#plfa_plfa-part2-Confluence-12777" class="Bound">M′</a><a id="plfa_plfa-part2-Confluence-12779" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-12781" href="../Confluence/#plfa_plfa-part2-Confluence-12781" class="Bound">p</a> <a id="plfa_plfa-part2-Confluence-12783" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-12784" href="../Confluence/#plfa_plfa-part2-Confluence-12784" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-12785" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-12787" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-12788" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Confluence-12790" href="../Confluence/#plfa_plfa-part2-Confluence-12790" class="Bound">x</a><a id="plfa_plfa-part2-Confluence-12791" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-12793" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-12795" href="../Confluence/#plfa_plfa-part2-Confluence-2660" class="InductiveConstructor">pvar</a>
</pre><p>We conclude this section with the desired corollary, that substitution respects parallel reduction.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-sub-par"></a><a id="plfa_plfa-part2-Confluence-12914" href="../Confluence/#plfa_plfa-part2-Confluence-12914" class="Function">sub-par</a> <a id="plfa_plfa-part2-Confluence-12922" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-12924" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-12926" href="../Confluence/#plfa_plfa-part2-Confluence-12926" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-12928" href="../Confluence/#plfa_plfa-part2-Confluence-12928" class="Bound">A</a> <a id="plfa_plfa-part2-Confluence-12930" href="../Confluence/#plfa_plfa-part2-Confluence-12930" class="Bound">B</a><a id="plfa_plfa-part2-Confluence-12931" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-12933" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-12934" href="../Confluence/#plfa_plfa-part2-Confluence-12934" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-12936" href="../Confluence/#plfa_plfa-part2-Confluence-12936" class="Bound">N′</a> <a id="plfa_plfa-part2-Confluence-12939" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-12941" href="../Confluence/#plfa_plfa-part2-Confluence-12926" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-12943" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-12945" href="../Confluence/#plfa_plfa-part2-Confluence-12928" class="Bound">A</a> <a id="plfa_plfa-part2-Confluence-12947" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-12949" href="../Confluence/#plfa_plfa-part2-Confluence-12930" class="Bound">B</a><a id="plfa_plfa-part2-Confluence-12950" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-12952" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-12953" href="../Confluence/#plfa_plfa-part2-Confluence-12953" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-12955" href="../Confluence/#plfa_plfa-part2-Confluence-12955" class="Bound">M′</a> <a id="plfa_plfa-part2-Confluence-12958" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-12960" href="../Confluence/#plfa_plfa-part2-Confluence-12926" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-12962" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-12964" href="../Confluence/#plfa_plfa-part2-Confluence-12928" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-12965" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Confluence-12969" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-12971" href="../Confluence/#plfa_plfa-part2-Confluence-12934" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-12973" href="../Confluence/#plfa_plfa-part2-Confluence-2611" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-12975" href="../Confluence/#plfa_plfa-part2-Confluence-12936" class="Bound">N′</a>
  <a id="plfa_plfa-part2-Confluence-12980" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-12982" href="../Confluence/#plfa_plfa-part2-Confluence-12953" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-12984" href="../Confluence/#plfa_plfa-part2-Confluence-2611" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-12986" href="../Confluence/#plfa_plfa-part2-Confluence-12955" class="Bound">M′</a>
    <a id="plfa_plfa-part2-Confluence-12993" class="Comment">--------------------------</a>
  <a id="plfa_plfa-part2-Confluence-13022" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-13024" href="../Confluence/#plfa_plfa-part2-Confluence-12934" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-13026" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Confluence-13028" href="../Confluence/#plfa_plfa-part2-Confluence-12953" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-13030" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a> <a id="plfa_plfa-part2-Confluence-13032" href="../Confluence/#plfa_plfa-part2-Confluence-2611" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-13034" href="../Confluence/#plfa_plfa-part2-Confluence-12936" class="Bound">N′</a> <a id="plfa_plfa-part2-Confluence-13037" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Confluence-13039" href="../Confluence/#plfa_plfa-part2-Confluence-12955" class="Bound">M′</a> <a id="plfa_plfa-part2-Confluence-13042" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a>
<a id="plfa_plfa-part2-Confluence-13044" href="../Confluence/#plfa_plfa-part2-Confluence-12914" class="Function">sub-par</a> <a id="plfa_plfa-part2-Confluence-13052" href="../Confluence/#plfa_plfa-part2-Confluence-13052" class="Bound">pn</a> <a id="plfa_plfa-part2-Confluence-13055" href="../Confluence/#plfa_plfa-part2-Confluence-13055" class="Bound">pm</a> <a id="plfa_plfa-part2-Confluence-13058" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-13060" href="../Confluence/#plfa_plfa-part2-Confluence-10683" class="Function">subst-par</a> <a id="plfa_plfa-part2-Confluence-13070" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-13071" href="../Confluence/#plfa_plfa-part2-Confluence-12614" class="Function">par-subst-zero</a> <a id="plfa_plfa-part2-Confluence-13086" href="../Confluence/#plfa_plfa-part2-Confluence-13055" class="Bound">pm</a><a id="plfa_plfa-part2-Confluence-13088" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-13090" href="../Confluence/#plfa_plfa-part2-Confluence-13052" class="Bound">pn</a>
</pre><h2 id="parallel-reduction-satisfies-the-diamond-property">Parallel reduction satisfies the diamond property</h2><p>The heart of the confluence proof is made of stone, or rather, of diamond! We show that parallel reduction satisfies the diamond property: that if <code>M ⇛ N</code> and <code>M ⇛ N′</code>, then <code>N ⇛ L</code> and <code>N′ ⇛ L</code> for some <code>L</code>. The typical proof is an induction on <code>M ⇛ N</code> and <code>M ⇛ N′</code> so that every possible pair gives rise to a witness <code>L</code> given by performing enough beta reductions in parallel.</p><p>However, a simpler approach is to perform as many beta reductions in parallel as possible on <code>M</code>, say <code>M ⁺</code>, and then show that <code>N</code> also parallel reduces to <code>M ⁺</code>. The desired property may be illustrated as</p><pre><code>    M
   /|
  / |
 /  |
N   2
 \  |
  \ |
   \|
    M⁺</code></pre><p>where downward lines are instances of <code>⇛</code>, so we call it the <em>triangle property</em>.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-_⁺"></a><a id="plfa_plfa-part2-Confluence-13925" href="../Confluence/#plfa_plfa-part2-Confluence-13925" class="Function Operator">_⁺</a> <a id="plfa_plfa-part2-Confluence-13928" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-13930" class="Symbol">∀</a> <a id="plfa_plfa-part2-Confluence-13932" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-13933" href="../Confluence/#plfa_plfa-part2-Confluence-13933" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-13935" href="../Confluence/#plfa_plfa-part2-Confluence-13935" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-13936" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Confluence-13940" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-13942" href="../Confluence/#plfa_plfa-part2-Confluence-13933" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-13944" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-13946" href="../Confluence/#plfa_plfa-part2-Confluence-13935" class="Bound">A</a> <a id="plfa_plfa-part2-Confluence-13948" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-13950" href="../Confluence/#plfa_plfa-part2-Confluence-13933" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-13952" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-13954" href="../Confluence/#plfa_plfa-part2-Confluence-13935" class="Bound">A</a>
<a id="plfa_plfa-part2-Confluence-13956" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-13957" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Confluence-13959" href="../Confluence/#plfa_plfa-part2-Confluence-13959" class="Bound">x</a><a id="plfa_plfa-part2-Confluence-13960" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-13962" href="../Confluence/#plfa_plfa-part2-Confluence-13925" class="Function Operator">⁺</a>       <a id="plfa_plfa-part2-Confluence-13970" class="Symbol">=</a>  <a id="plfa_plfa-part2-Confluence-13973" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Confluence-13975" href="../Confluence/#plfa_plfa-part2-Confluence-13959" class="Bound">x</a>
<a id="plfa_plfa-part2-Confluence-13977" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-13978" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-13980" href="../Confluence/#plfa_plfa-part2-Confluence-13980" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-13981" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-13983" href="../Confluence/#plfa_plfa-part2-Confluence-13925" class="Function Operator">⁺</a>       <a id="plfa_plfa-part2-Confluence-13991" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-13993" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-13995" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-13996" href="../Confluence/#plfa_plfa-part2-Confluence-13980" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-13998" href="../Confluence/#plfa_plfa-part2-Confluence-13925" class="Function Operator">⁺</a><a id="plfa_plfa-part2-Confluence-13999" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-14001" class="Symbol">((</a><a id="plfa_plfa-part2-Confluence-14003" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-14005" href="../Confluence/#plfa_plfa-part2-Confluence-14005" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-14006" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-14008" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-14010" href="../Confluence/#plfa_plfa-part2-Confluence-14010" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-14011" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-14013" href="../Confluence/#plfa_plfa-part2-Confluence-13925" class="Function Operator">⁺</a> <a id="plfa_plfa-part2-Confluence-14015" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-14017" href="../Confluence/#plfa_plfa-part2-Confluence-14005" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-14019" href="../Confluence/#plfa_plfa-part2-Confluence-13925" class="Function Operator">⁺</a> <a id="plfa_plfa-part2-Confluence-14021" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Confluence-14023" href="../Confluence/#plfa_plfa-part2-Confluence-14010" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-14025" href="../Confluence/#plfa_plfa-part2-Confluence-13925" class="Function Operator">⁺</a> <a id="plfa_plfa-part2-Confluence-14027" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a>
<a id="plfa_plfa-part2-Confluence-14029" class="CatchallClause Symbol">(</a><a id="plfa_plfa-part2-Confluence-14030" href="../Confluence/#plfa_plfa-part2-Confluence-14030" class="CatchallClause Bound">L</a><a id="plfa_plfa-part2-Confluence-14031" class="CatchallClause"> </a><a id="plfa_plfa-part2-Confluence-14032" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="CatchallClause InductiveConstructor Operator">·</a><a id="plfa_plfa-part2-Confluence-14033" class="CatchallClause"> </a><a id="plfa_plfa-part2-Confluence-14034" href="../Confluence/#plfa_plfa-part2-Confluence-14034" class="CatchallClause Bound">M</a><a id="plfa_plfa-part2-Confluence-14035" class="CatchallClause Symbol">)</a><a id="plfa_plfa-part2-Confluence-14036" class="CatchallClause"> </a><a id="plfa_plfa-part2-Confluence-14037" href="../Confluence/#plfa_plfa-part2-Confluence-13925" class="CatchallClause Function Operator">⁺</a>     <a id="plfa_plfa-part2-Confluence-14043" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-14045" href="../Confluence/#plfa_plfa-part2-Confluence-14030" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-14047" href="../Confluence/#plfa_plfa-part2-Confluence-13925" class="Function Operator">⁺</a> <a id="plfa_plfa-part2-Confluence-14049" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-14051" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-14052" href="../Confluence/#plfa_plfa-part2-Confluence-14034" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-14054" href="../Confluence/#plfa_plfa-part2-Confluence-13925" class="Function Operator">⁺</a><a id="plfa_plfa-part2-Confluence-14055" class="Symbol">)</a>

<a id="plfa_plfa-part2-Confluence-par-triangle"></a><a id="plfa_plfa-part2-Confluence-14058" href="../Confluence/#plfa_plfa-part2-Confluence-14058" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-14071" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-14073" class="Symbol">∀</a> <a id="plfa_plfa-part2-Confluence-14075" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-14076" href="../Confluence/#plfa_plfa-part2-Confluence-14076" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-14078" href="../Confluence/#plfa_plfa-part2-Confluence-14078" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-14079" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-14081" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-14082" href="../Confluence/#plfa_plfa-part2-Confluence-14082" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-14084" href="../Confluence/#plfa_plfa-part2-Confluence-14084" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-14086" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-14088" href="../Confluence/#plfa_plfa-part2-Confluence-14076" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-14090" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-14092" href="../Confluence/#plfa_plfa-part2-Confluence-14078" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-14093" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Confluence-14097" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-14099" href="../Confluence/#plfa_plfa-part2-Confluence-14082" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-14101" href="../Confluence/#plfa_plfa-part2-Confluence-2611" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-14103" href="../Confluence/#plfa_plfa-part2-Confluence-14084" class="Bound">N</a>
    <a id="plfa_plfa-part2-Confluence-14109" class="Comment">-------</a>
  <a id="plfa_plfa-part2-Confluence-14119" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-14121" href="../Confluence/#plfa_plfa-part2-Confluence-14084" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-14123" href="../Confluence/#plfa_plfa-part2-Confluence-2611" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-14125" href="../Confluence/#plfa_plfa-part2-Confluence-14082" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-14127" href="../Confluence/#plfa_plfa-part2-Confluence-13925" class="Function Operator">⁺</a>
<a id="plfa_plfa-part2-Confluence-14129" href="../Confluence/#plfa_plfa-part2-Confluence-14058" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-14142" href="../Confluence/#plfa_plfa-part2-Confluence-2660" class="InductiveConstructor">pvar</a>          <a id="plfa_plfa-part2-Confluence-14156" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-14158" href="../Confluence/#plfa_plfa-part2-Confluence-2660" class="InductiveConstructor">pvar</a>
<a id="plfa_plfa-part2-Confluence-14163" href="../Confluence/#plfa_plfa-part2-Confluence-14058" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-14176" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-14177" href="../Confluence/#plfa_plfa-part2-Confluence-2724" class="InductiveConstructor">pabs</a> <a id="plfa_plfa-part2-Confluence-14182" href="../Confluence/#plfa_plfa-part2-Confluence-14182" class="Bound">p</a><a id="plfa_plfa-part2-Confluence-14183" class="Symbol">)</a>      <a id="plfa_plfa-part2-Confluence-14190" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-14192" href="../Confluence/#plfa_plfa-part2-Confluence-2724" class="InductiveConstructor">pabs</a> <a id="plfa_plfa-part2-Confluence-14197" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-14198" href="../Confluence/#plfa_plfa-part2-Confluence-14058" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-14211" href="../Confluence/#plfa_plfa-part2-Confluence-14182" class="Bound">p</a><a id="plfa_plfa-part2-Confluence-14212" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-14214" href="../Confluence/#plfa_plfa-part2-Confluence-14058" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-14227" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-14228" href="../Confluence/#plfa_plfa-part2-Confluence-2910" class="InductiveConstructor">pbeta</a> <a id="plfa_plfa-part2-Confluence-14234" href="../Confluence/#plfa_plfa-part2-Confluence-14234" class="Bound">p1</a> <a id="plfa_plfa-part2-Confluence-14237" href="../Confluence/#plfa_plfa-part2-Confluence-14237" class="Bound">p2</a><a id="plfa_plfa-part2-Confluence-14239" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-14241" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-14243" href="../Confluence/#plfa_plfa-part2-Confluence-12914" class="Function">sub-par</a> <a id="plfa_plfa-part2-Confluence-14251" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-14252" href="../Confluence/#plfa_plfa-part2-Confluence-14058" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-14265" href="../Confluence/#plfa_plfa-part2-Confluence-14234" class="Bound">p1</a><a id="plfa_plfa-part2-Confluence-14267" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-14269" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-14270" href="../Confluence/#plfa_plfa-part2-Confluence-14058" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-14283" href="../Confluence/#plfa_plfa-part2-Confluence-14237" class="Bound">p2</a><a id="plfa_plfa-part2-Confluence-14285" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-14287" href="../Confluence/#plfa_plfa-part2-Confluence-14058" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-14300" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-14301" href="../Confluence/#plfa_plfa-part2-Confluence-2804" class="InductiveConstructor">papp</a> <a id="plfa_plfa-part2-Confluence-14306" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-14307" class="Argument">L</a> <a id="plfa_plfa-part2-Confluence-14309" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-14311" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-14313" class="Symbol">_</a> <a id="plfa_plfa-part2-Confluence-14315" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-14317" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-14318" href="../Confluence/#plfa_plfa-part2-Confluence-2724" class="InductiveConstructor">pabs</a> <a id="plfa_plfa-part2-Confluence-14323" href="../Confluence/#plfa_plfa-part2-Confluence-14323" class="Bound">p1</a><a id="plfa_plfa-part2-Confluence-14325" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-14327" href="../Confluence/#plfa_plfa-part2-Confluence-14327" class="Bound">p2</a><a id="plfa_plfa-part2-Confluence-14329" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-14331" class="Symbol">=</a>
  <a id="plfa_plfa-part2-Confluence-14335" href="../Confluence/#plfa_plfa-part2-Confluence-2910" class="InductiveConstructor">pbeta</a> <a id="plfa_plfa-part2-Confluence-14341" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-14342" href="../Confluence/#plfa_plfa-part2-Confluence-14058" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-14355" href="../Confluence/#plfa_plfa-part2-Confluence-14323" class="Bound">p1</a><a id="plfa_plfa-part2-Confluence-14357" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-14359" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-14360" href="../Confluence/#plfa_plfa-part2-Confluence-14058" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-14373" href="../Confluence/#plfa_plfa-part2-Confluence-14327" class="Bound">p2</a><a id="plfa_plfa-part2-Confluence-14375" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-14377" href="../Confluence/#plfa_plfa-part2-Confluence-14058" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-14390" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-14391" href="../Confluence/#plfa_plfa-part2-Confluence-2804" class="InductiveConstructor">papp</a> <a id="plfa_plfa-part2-Confluence-14396" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-14397" class="Argument">L</a> <a id="plfa_plfa-part2-Confluence-14399" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-14401" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Confluence-14403" class="Symbol">_}</a>   <a id="plfa_plfa-part2-Confluence-14408" href="../Confluence/#plfa_plfa-part2-Confluence-14408" class="Bound">p1</a> <a id="plfa_plfa-part2-Confluence-14411" href="../Confluence/#plfa_plfa-part2-Confluence-14411" class="Bound">p2</a><a id="plfa_plfa-part2-Confluence-14413" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-14415" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-14417" href="../Confluence/#plfa_plfa-part2-Confluence-2804" class="InductiveConstructor">papp</a> <a id="plfa_plfa-part2-Confluence-14422" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-14423" href="../Confluence/#plfa_plfa-part2-Confluence-14058" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-14436" href="../Confluence/#plfa_plfa-part2-Confluence-14408" class="Bound">p1</a><a id="plfa_plfa-part2-Confluence-14438" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-14440" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-14441" href="../Confluence/#plfa_plfa-part2-Confluence-14058" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-14454" href="../Confluence/#plfa_plfa-part2-Confluence-14411" class="Bound">p2</a><a id="plfa_plfa-part2-Confluence-14456" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-14458" href="../Confluence/#plfa_plfa-part2-Confluence-14058" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-14471" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-14472" href="../Confluence/#plfa_plfa-part2-Confluence-2804" class="InductiveConstructor">papp</a> <a id="plfa_plfa-part2-Confluence-14477" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-14478" class="Argument">L</a> <a id="plfa_plfa-part2-Confluence-14480" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-14482" class="Symbol">_</a> <a id="plfa_plfa-part2-Confluence-14484" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-14486" class="Symbol">_}</a> <a id="plfa_plfa-part2-Confluence-14489" href="../Confluence/#plfa_plfa-part2-Confluence-14489" class="Bound">p1</a> <a id="plfa_plfa-part2-Confluence-14492" href="../Confluence/#plfa_plfa-part2-Confluence-14492" class="Bound">p2</a><a id="plfa_plfa-part2-Confluence-14494" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-14496" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-14498" href="../Confluence/#plfa_plfa-part2-Confluence-2804" class="InductiveConstructor">papp</a> <a id="plfa_plfa-part2-Confluence-14503" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-14504" href="../Confluence/#plfa_plfa-part2-Confluence-14058" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-14517" href="../Confluence/#plfa_plfa-part2-Confluence-14489" class="Bound">p1</a><a id="plfa_plfa-part2-Confluence-14519" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-14521" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-14522" href="../Confluence/#plfa_plfa-part2-Confluence-14058" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-14535" href="../Confluence/#plfa_plfa-part2-Confluence-14492" class="Bound">p2</a><a id="plfa_plfa-part2-Confluence-14537" class="Symbol">)</a>
</pre><p>The proof of the triangle property is an induction on <code>M ⇛ N</code>.</p><ul><li><p>Suppose <code>x ⇛ x</code>. Clearly <code>x ⁺ = x</code>, so <code>x ⇛ x ⁺</code>.</p></li><li><p>Suppose <code>ƛ M ⇛ ƛ N</code>. By the induction hypothesis we have <code>N ⇛ M ⁺</code> and by definition <code>(λ M) ⁺ = λ (M ⁺)</code>, so we conclude that <code>λ N ⇛ λ (M ⁺)</code>.</p></li><li><p>Suppose <code>(λ N) · M ⇛ N′ [ M′ ]</code>. By the induction hypothesis, we have <code>N′ ⇛ N ⁺</code> and <code>M′ ⇛ M ⁺</code>. Since substitution respects parallel reduction, it follows that <code>N′ [ M′ ] ⇛ N ⁺ [ M ⁺ ]</code>, but the right hand side is exactly <code>((λ N) · M) ⁺</code>, hence <code>N′ [ M′ ] ⇛ ((λ N) · M) ⁺</code>.</p></li><li><p>Suppose <code>(λ L) · M ⇛ (λ L′) · M′</code>. By the induction hypothesis we have <code>L′ ⇛ L ⁺</code> and <code>M′ ⇛ M ⁺</code>; by definition <code>((λ L) · M) ⁺ = L ⁺ [ M ⁺ ]</code>. It follows <code>(λ L′) · M′ ⇛ L ⁺ [ M ⁺ ]</code>.</p></li><li><p>Suppose <code>x · M ⇛ x · M′</code>. By the induction hypothesis we have <code>M′ ⇛ M ⁺</code> and <code>x ⇛ x ⁺</code> so that <code>x · M′ ⇛ x · M ⁺</code>. The remaining case is proved in the same way, so we ignore it. (As there is currently no way in Agda to expand the catch-all pattern in the definition of <code>_⁺</code> for us before checking the right-hand side, we have to write down the remaining case explicitly.)</p></li></ul><p>The diamond property then follows by halving the diamond into two triangles.</p><pre><code>    M
   /|\
  / | \
 /  |  \
N   2   N′
 \  |  /
  \ | /
   \|/
    M⁺</code></pre><p>That is, the diamond property is proved by applying the triangle property on each side with the same confluent term <code>M ⁺</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-par-diamond"></a><a id="plfa_plfa-part2-Confluence-15990" href="../Confluence/#plfa_plfa-part2-Confluence-15990" class="Function">par-diamond</a> <a id="plfa_plfa-part2-Confluence-16002" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-16004" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-16006" href="../Confluence/#plfa_plfa-part2-Confluence-16006" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-16008" href="../Confluence/#plfa_plfa-part2-Confluence-16008" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-16009" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-16011" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-16012" href="../Confluence/#plfa_plfa-part2-Confluence-16012" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-16014" href="../Confluence/#plfa_plfa-part2-Confluence-16014" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-16016" href="../Confluence/#plfa_plfa-part2-Confluence-16016" class="Bound">N′</a> <a id="plfa_plfa-part2-Confluence-16019" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-16021" href="../Confluence/#plfa_plfa-part2-Confluence-16006" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-16023" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-16025" href="../Confluence/#plfa_plfa-part2-Confluence-16008" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-16026" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Confluence-16030" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-16032" href="../Confluence/#plfa_plfa-part2-Confluence-16012" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-16034" href="../Confluence/#plfa_plfa-part2-Confluence-2611" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-16036" href="../Confluence/#plfa_plfa-part2-Confluence-16014" class="Bound">N</a>
  <a id="plfa_plfa-part2-Confluence-16040" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-16042" href="../Confluence/#plfa_plfa-part2-Confluence-16012" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-16044" href="../Confluence/#plfa_plfa-part2-Confluence-2611" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-16046" href="../Confluence/#plfa_plfa-part2-Confluence-16016" class="Bound">N′</a>
    <a id="plfa_plfa-part2-Confluence-16053" class="Comment">---------------------------------</a>
  <a id="plfa_plfa-part2-Confluence-16089" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-16091" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#925" class="Function">Σ[</a> <a id="plfa_plfa-part2-Confluence-16094" href="../Confluence/#plfa_plfa-part2-Confluence-16094" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-16096" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#925" class="Function">∈</a> <a id="plfa_plfa-part2-Confluence-16098" href="../Confluence/#plfa_plfa-part2-Confluence-16006" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-16100" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-16102" href="../Confluence/#plfa_plfa-part2-Confluence-16008" class="Bound">A</a> <a id="plfa_plfa-part2-Confluence-16104" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#925" class="Function">]</a> <a id="plfa_plfa-part2-Confluence-16106" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-16107" href="../Confluence/#plfa_plfa-part2-Confluence-16014" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-16109" href="../Confluence/#plfa_plfa-part2-Confluence-2611" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-16111" href="../Confluence/#plfa_plfa-part2-Confluence-16094" class="Bound">L</a><a id="plfa_plfa-part2-Confluence-16112" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-16114" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#1176" class="Function Operator">×</a> <a id="plfa_plfa-part2-Confluence-16116" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-16117" href="../Confluence/#plfa_plfa-part2-Confluence-16016" class="Bound">N′</a> <a id="plfa_plfa-part2-Confluence-16120" href="../Confluence/#plfa_plfa-part2-Confluence-2611" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-16122" href="../Confluence/#plfa_plfa-part2-Confluence-16094" class="Bound">L</a><a id="plfa_plfa-part2-Confluence-16123" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-16125" href="../Confluence/#plfa_plfa-part2-Confluence-15990" class="Function">par-diamond</a> <a id="plfa_plfa-part2-Confluence-16137" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-16138" class="Argument">M</a> <a id="plfa_plfa-part2-Confluence-16140" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-16142" href="../Confluence/#plfa_plfa-part2-Confluence-16142" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-16143" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-16145" href="../Confluence/#plfa_plfa-part2-Confluence-16145" class="Bound">p1</a> <a id="plfa_plfa-part2-Confluence-16148" href="../Confluence/#plfa_plfa-part2-Confluence-16148" class="Bound">p2</a> <a id="plfa_plfa-part2-Confluence-16151" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-16153" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-16155" href="../Confluence/#plfa_plfa-part2-Confluence-16142" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-16157" href="../Confluence/#plfa_plfa-part2-Confluence-13925" class="Function Operator">⁺</a> <a id="plfa_plfa-part2-Confluence-16159" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-16161" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-16163" href="../Confluence/#plfa_plfa-part2-Confluence-14058" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-16176" href="../Confluence/#plfa_plfa-part2-Confluence-16145" class="Bound">p1</a> <a id="plfa_plfa-part2-Confluence-16179" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-16181" href="../Confluence/#plfa_plfa-part2-Confluence-14058" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-16194" href="../Confluence/#plfa_plfa-part2-Confluence-16148" class="Bound">p2</a> <a id="plfa_plfa-part2-Confluence-16197" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-16199" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟩</a>
</pre><p>This step is optional, though, in the presence of triangle property.</p><h4 id="exercise-practice">Exercise (practice)</h4><ul><li><p>Prove the diamond property <code>par-diamond</code> directly by induction on <code>M ⇛ N</code> and <code>M ⇛ N′</code>.</p></li><li><p>Draw pictures that represent the proofs of each of the six cases in the direct proof of <code>par-diamond</code>. The pictures should consist of nodes and directed edges, where each node is labeled with a term and each edge represents parallel reduction.</p></li></ul><h2 id="proof-of-confluence-for-parallel-reduction">Proof of confluence for parallel reduction</h2><p>As promised at the beginning, the proof that parallel reduction is confluent is easy now that we know it satisfies the triangle property. We just need to prove the strip lemma, which states that if <code>M ⇛ N</code> and <code>M ⇛* N′</code>, then <code>N ⇛* L</code> and <code>N′ ⇛ L</code> for some <code>L</code>. The following diagram illustrates the strip lemma</p><pre><code>    M
   / \
  1   *
 /     \
N       N′
 \     /
  *   1
   \ /
    L</code></pre><p>where downward lines are instances of <code>⇛</code> or <code>⇛*</code>, depending on how they are marked.</p><p>The proof of the strip lemma is a straightforward induction on <code>M ⇛* N′</code>, using the triangle property in the induction step.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-strip"></a><a id="plfa_plfa-part2-Confluence-17334" href="../Confluence/#plfa_plfa-part2-Confluence-17334" class="Function">strip</a> <a id="plfa_plfa-part2-Confluence-17340" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-17342" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-17344" href="../Confluence/#plfa_plfa-part2-Confluence-17344" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-17346" href="../Confluence/#plfa_plfa-part2-Confluence-17346" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-17347" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-17349" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-17350" href="../Confluence/#plfa_plfa-part2-Confluence-17350" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-17352" href="../Confluence/#plfa_plfa-part2-Confluence-17352" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-17354" href="../Confluence/#plfa_plfa-part2-Confluence-17354" class="Bound">N′</a> <a id="plfa_plfa-part2-Confluence-17357" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-17359" href="../Confluence/#plfa_plfa-part2-Confluence-17344" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-17361" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-17363" href="../Confluence/#plfa_plfa-part2-Confluence-17346" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-17364" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Confluence-17368" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-17370" href="../Confluence/#plfa_plfa-part2-Confluence-17350" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-17372" href="../Confluence/#plfa_plfa-part2-Confluence-2611" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-17374" href="../Confluence/#plfa_plfa-part2-Confluence-17352" class="Bound">N</a>
  <a id="plfa_plfa-part2-Confluence-17378" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-17380" href="../Confluence/#plfa_plfa-part2-Confluence-17350" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-17382" href="../Confluence/#plfa_plfa-part2-Confluence-3722" class="Datatype Operator">⇛*</a> <a id="plfa_plfa-part2-Confluence-17385" href="../Confluence/#plfa_plfa-part2-Confluence-17354" class="Bound">N′</a>
    <a id="plfa_plfa-part2-Confluence-17392" class="Comment">------------------------------------</a>
  <a id="plfa_plfa-part2-Confluence-17431" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-17433" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#925" class="Function">Σ[</a> <a id="plfa_plfa-part2-Confluence-17436" href="../Confluence/#plfa_plfa-part2-Confluence-17436" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-17438" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#925" class="Function">∈</a> <a id="plfa_plfa-part2-Confluence-17440" href="../Confluence/#plfa_plfa-part2-Confluence-17344" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-17442" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-17444" href="../Confluence/#plfa_plfa-part2-Confluence-17346" class="Bound">A</a> <a id="plfa_plfa-part2-Confluence-17446" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#925" class="Function">]</a> <a id="plfa_plfa-part2-Confluence-17448" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-17449" href="../Confluence/#plfa_plfa-part2-Confluence-17352" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-17451" href="../Confluence/#plfa_plfa-part2-Confluence-3722" class="Datatype Operator">⇛*</a> <a id="plfa_plfa-part2-Confluence-17454" href="../Confluence/#plfa_plfa-part2-Confluence-17436" class="Bound">L</a><a id="plfa_plfa-part2-Confluence-17455" class="Symbol">)</a>  <a id="plfa_plfa-part2-Confluence-17458" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#1176" class="Function Operator">×</a>  <a id="plfa_plfa-part2-Confluence-17461" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-17462" href="../Confluence/#plfa_plfa-part2-Confluence-17354" class="Bound">N′</a> <a id="plfa_plfa-part2-Confluence-17465" href="../Confluence/#plfa_plfa-part2-Confluence-2611" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-17467" href="../Confluence/#plfa_plfa-part2-Confluence-17436" class="Bound">L</a><a id="plfa_plfa-part2-Confluence-17468" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-17470" href="../Confluence/#plfa_plfa-part2-Confluence-17334" class="Function">strip</a><a id="plfa_plfa-part2-Confluence-17475" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-17476" href="../Confluence/#plfa_plfa-part2-Confluence-17476" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-17477" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-17479" href="../Confluence/#plfa_plfa-part2-Confluence-17479" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-17480" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-17482" href="../Confluence/#plfa_plfa-part2-Confluence-17482" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-17483" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-17485" href="../Confluence/#plfa_plfa-part2-Confluence-17485" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-17486" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-17488" href="../Confluence/#plfa_plfa-part2-Confluence-17488" class="Bound">N′</a><a id="plfa_plfa-part2-Confluence-17490" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-17492" href="../Confluence/#plfa_plfa-part2-Confluence-17492" class="Bound">mn</a> <a id="plfa_plfa-part2-Confluence-17495" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-17496" href="../Confluence/#plfa_plfa-part2-Confluence-17482" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-17498" href="../Confluence/#plfa_plfa-part2-Confluence-3772" class="InductiveConstructor Operator">∎</a><a id="plfa_plfa-part2-Confluence-17499" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-17501" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-17503" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-17505" href="../Confluence/#plfa_plfa-part2-Confluence-17485" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-17507" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-17509" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-17511" href="../Confluence/#plfa_plfa-part2-Confluence-17485" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-17513" href="../Confluence/#plfa_plfa-part2-Confluence-3772" class="InductiveConstructor Operator">∎</a> <a id="plfa_plfa-part2-Confluence-17515" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-17517" href="../Confluence/#plfa_plfa-part2-Confluence-17492" class="Bound">mn</a> <a id="plfa_plfa-part2-Confluence-17520" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-17522" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part2-Confluence-17524" href="../Confluence/#plfa_plfa-part2-Confluence-17334" class="Function">strip</a><a id="plfa_plfa-part2-Confluence-17529" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-17530" href="../Confluence/#plfa_plfa-part2-Confluence-17530" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-17531" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-17533" href="../Confluence/#plfa_plfa-part2-Confluence-17533" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-17534" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-17536" href="../Confluence/#plfa_plfa-part2-Confluence-17536" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-17537" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-17539" href="../Confluence/#plfa_plfa-part2-Confluence-17539" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-17540" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-17542" href="../Confluence/#plfa_plfa-part2-Confluence-17542" class="Bound">N′</a><a id="plfa_plfa-part2-Confluence-17544" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-17546" href="../Confluence/#plfa_plfa-part2-Confluence-17546" class="Bound">mn</a> <a id="plfa_plfa-part2-Confluence-17549" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-17550" href="../Confluence/#plfa_plfa-part2-Confluence-17536" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-17552" href="../Confluence/#plfa_plfa-part2-Confluence-3828" class="InductiveConstructor Operator">⇛⟨</a> <a id="plfa_plfa-part2-Confluence-17555" href="../Confluence/#plfa_plfa-part2-Confluence-17555" class="Bound">mm&#39;</a> <a id="plfa_plfa-part2-Confluence-17559" href="../Confluence/#plfa_plfa-part2-Confluence-3828" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-17561" href="../Confluence/#plfa_plfa-part2-Confluence-17561" class="Bound">m&#39;n&#39;</a><a id="plfa_plfa-part2-Confluence-17565" class="Symbol">)</a>
  <a id="plfa_plfa-part2-Confluence-17569" class="Keyword">with</a> <a id="plfa_plfa-part2-Confluence-17574" href="../Confluence/#plfa_plfa-part2-Confluence-17334" class="Function">strip</a> <a id="plfa_plfa-part2-Confluence-17580" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-17581" href="../Confluence/#plfa_plfa-part2-Confluence-14058" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-17594" href="../Confluence/#plfa_plfa-part2-Confluence-17555" class="Bound">mm&#39;</a><a id="plfa_plfa-part2-Confluence-17597" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-17599" href="../Confluence/#plfa_plfa-part2-Confluence-17561" class="Bound">m&#39;n&#39;</a>
<a id="plfa_plfa-part2-Confluence-17604" class="Symbol">...</a> <a id="plfa_plfa-part2-Confluence-17608" class="Symbol">|</a> <a id="plfa_plfa-part2-Confluence-17610" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-17612" href="../Confluence/#plfa_plfa-part2-Confluence-17612" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-17614" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-17616" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-17618" href="../Confluence/#plfa_plfa-part2-Confluence-17618" class="Bound">ll&#39;</a> <a id="plfa_plfa-part2-Confluence-17622" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-17624" href="../Confluence/#plfa_plfa-part2-Confluence-17624" class="Bound">n&#39;l&#39;</a> <a id="plfa_plfa-part2-Confluence-17629" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-17631" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-17633" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-17635" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-17637" href="../Confluence/#plfa_plfa-part2-Confluence-17612" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-17639" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-17641" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-17643" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-17645" href="../Confluence/#plfa_plfa-part2-Confluence-3828" class="InductiveConstructor Operator">⇛⟨</a> <a id="plfa_plfa-part2-Confluence-17648" href="../Confluence/#plfa_plfa-part2-Confluence-14058" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-17661" class="Bound">mn</a> <a id="plfa_plfa-part2-Confluence-17664" href="../Confluence/#plfa_plfa-part2-Confluence-3828" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-17666" href="../Confluence/#plfa_plfa-part2-Confluence-17618" class="Bound">ll&#39;</a> <a id="plfa_plfa-part2-Confluence-17670" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-17672" href="../Confluence/#plfa_plfa-part2-Confluence-17624" class="Bound">n&#39;l&#39;</a> <a id="plfa_plfa-part2-Confluence-17677" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-17679" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟩</a>
</pre><p>The proof of confluence for parallel reduction is now proved by induction on the sequence <code>M ⇛* N</code>, using the above lemma in the induction step.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-par-confluence"></a><a id="plfa_plfa-part2-Confluence-17840" href="../Confluence/#plfa_plfa-part2-Confluence-17840" class="Function">par-confluence</a> <a id="plfa_plfa-part2-Confluence-17855" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-17857" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-17859" href="../Confluence/#plfa_plfa-part2-Confluence-17859" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-17861" href="../Confluence/#plfa_plfa-part2-Confluence-17861" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-17862" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-17864" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-17865" href="../Confluence/#plfa_plfa-part2-Confluence-17865" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-17867" href="../Confluence/#plfa_plfa-part2-Confluence-17867" class="Bound">M₁</a> <a id="plfa_plfa-part2-Confluence-17870" href="../Confluence/#plfa_plfa-part2-Confluence-17870" class="Bound">M₂</a> <a id="plfa_plfa-part2-Confluence-17873" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-17875" href="../Confluence/#plfa_plfa-part2-Confluence-17859" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-17877" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-17879" href="../Confluence/#plfa_plfa-part2-Confluence-17861" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-17880" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Confluence-17884" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-17886" href="../Confluence/#plfa_plfa-part2-Confluence-17865" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-17888" href="../Confluence/#plfa_plfa-part2-Confluence-3722" class="Datatype Operator">⇛*</a> <a id="plfa_plfa-part2-Confluence-17891" href="../Confluence/#plfa_plfa-part2-Confluence-17867" class="Bound">M₁</a>
  <a id="plfa_plfa-part2-Confluence-17896" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-17898" href="../Confluence/#plfa_plfa-part2-Confluence-17865" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-17900" href="../Confluence/#plfa_plfa-part2-Confluence-3722" class="Datatype Operator">⇛*</a> <a id="plfa_plfa-part2-Confluence-17903" href="../Confluence/#plfa_plfa-part2-Confluence-17870" class="Bound">M₂</a>
    <a id="plfa_plfa-part2-Confluence-17910" class="Comment">------------------------------------</a>
  <a id="plfa_plfa-part2-Confluence-17949" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-17951" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#925" class="Function">Σ[</a> <a id="plfa_plfa-part2-Confluence-17954" href="../Confluence/#plfa_plfa-part2-Confluence-17954" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-17956" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#925" class="Function">∈</a> <a id="plfa_plfa-part2-Confluence-17958" href="../Confluence/#plfa_plfa-part2-Confluence-17859" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-17960" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-17962" href="../Confluence/#plfa_plfa-part2-Confluence-17861" class="Bound">A</a> <a id="plfa_plfa-part2-Confluence-17964" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#925" class="Function">]</a> <a id="plfa_plfa-part2-Confluence-17966" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-17967" href="../Confluence/#plfa_plfa-part2-Confluence-17867" class="Bound">M₁</a> <a id="plfa_plfa-part2-Confluence-17970" href="../Confluence/#plfa_plfa-part2-Confluence-3722" class="Datatype Operator">⇛*</a> <a id="plfa_plfa-part2-Confluence-17973" href="../Confluence/#plfa_plfa-part2-Confluence-17954" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-17974" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-17976" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#1176" class="Function Operator">×</a> <a id="plfa_plfa-part2-Confluence-17978" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-17979" href="../Confluence/#plfa_plfa-part2-Confluence-17870" class="Bound">M₂</a> <a id="plfa_plfa-part2-Confluence-17982" href="../Confluence/#plfa_plfa-part2-Confluence-3722" class="Datatype Operator">⇛*</a> <a id="plfa_plfa-part2-Confluence-17985" href="../Confluence/#plfa_plfa-part2-Confluence-17954" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-17986" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-17988" href="../Confluence/#plfa_plfa-part2-Confluence-17840" class="Function">par-confluence</a> <a id="plfa_plfa-part2-Confluence-18003" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-18004" href="../Confluence/#plfa_plfa-part2-Confluence-18004" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-18005" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-18007" href="../Confluence/#plfa_plfa-part2-Confluence-18007" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-18008" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-18010" href="../Confluence/#plfa_plfa-part2-Confluence-18010" class="Bound">L</a><a id="plfa_plfa-part2-Confluence-18011" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-18013" class="DottedPattern Symbol">.</a><a id="plfa_plfa-part2-Confluence-18014" href="../Confluence/#plfa_plfa-part2-Confluence-18010" class="DottedPattern Bound">L</a><a id="plfa_plfa-part2-Confluence-18015" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-18017" href="../Confluence/#plfa_plfa-part2-Confluence-18017" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-18018" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-18020" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-18021" href="../Confluence/#plfa_plfa-part2-Confluence-18010" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-18023" href="../Confluence/#plfa_plfa-part2-Confluence-3772" class="InductiveConstructor Operator">∎</a><a id="plfa_plfa-part2-Confluence-18024" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-18026" href="../Confluence/#plfa_plfa-part2-Confluence-18026" class="Bound">L⇛*N</a> <a id="plfa_plfa-part2-Confluence-18031" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-18033" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-18035" href="../Confluence/#plfa_plfa-part2-Confluence-18017" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-18037" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-18039" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-18041" href="../Confluence/#plfa_plfa-part2-Confluence-18026" class="Bound">L⇛*N</a> <a id="plfa_plfa-part2-Confluence-18046" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-18048" href="../Confluence/#plfa_plfa-part2-Confluence-18017" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-18050" href="../Confluence/#plfa_plfa-part2-Confluence-3772" class="InductiveConstructor Operator">∎</a> <a id="plfa_plfa-part2-Confluence-18052" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-18054" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part2-Confluence-18056" href="../Confluence/#plfa_plfa-part2-Confluence-17840" class="Function">par-confluence</a> <a id="plfa_plfa-part2-Confluence-18071" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-18072" href="../Confluence/#plfa_plfa-part2-Confluence-18072" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-18073" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-18075" href="../Confluence/#plfa_plfa-part2-Confluence-18075" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-18076" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-18078" href="../Confluence/#plfa_plfa-part2-Confluence-18078" class="Bound">L</a><a id="plfa_plfa-part2-Confluence-18079" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-18081" href="../Confluence/#plfa_plfa-part2-Confluence-18081" class="Bound">M₁′</a><a id="plfa_plfa-part2-Confluence-18084" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-18086" href="../Confluence/#plfa_plfa-part2-Confluence-18086" class="Bound">M₂</a><a id="plfa_plfa-part2-Confluence-18088" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-18090" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-18091" href="../Confluence/#plfa_plfa-part2-Confluence-18078" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-18093" href="../Confluence/#plfa_plfa-part2-Confluence-3828" class="InductiveConstructor Operator">⇛⟨</a> <a id="plfa_plfa-part2-Confluence-18096" href="../Confluence/#plfa_plfa-part2-Confluence-18096" class="Bound">L⇛M₁</a> <a id="plfa_plfa-part2-Confluence-18101" href="../Confluence/#plfa_plfa-part2-Confluence-3828" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-18103" href="../Confluence/#plfa_plfa-part2-Confluence-18103" class="Bound">M₁⇛*M₁′</a><a id="plfa_plfa-part2-Confluence-18110" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-18112" href="../Confluence/#plfa_plfa-part2-Confluence-18112" class="Bound">L⇛*M₂</a>
    <a id="plfa_plfa-part2-Confluence-18122" class="Keyword">with</a> <a id="plfa_plfa-part2-Confluence-18127" href="../Confluence/#plfa_plfa-part2-Confluence-17334" class="Function">strip</a> <a id="plfa_plfa-part2-Confluence-18133" href="../Confluence/#plfa_plfa-part2-Confluence-18096" class="Bound">L⇛M₁</a> <a id="plfa_plfa-part2-Confluence-18138" href="../Confluence/#plfa_plfa-part2-Confluence-18112" class="Bound">L⇛*M₂</a>
<a id="plfa_plfa-part2-Confluence-18144" class="Symbol">...</a> <a id="plfa_plfa-part2-Confluence-18148" class="Symbol">|</a> <a id="plfa_plfa-part2-Confluence-18150" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-18152" href="../Confluence/#plfa_plfa-part2-Confluence-18152" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-18154" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-18156" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-18158" href="../Confluence/#plfa_plfa-part2-Confluence-18158" class="Bound">M₁⇛*N</a> <a id="plfa_plfa-part2-Confluence-18164" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-18166" href="../Confluence/#plfa_plfa-part2-Confluence-18166" class="Bound">M₂⇛N</a> <a id="plfa_plfa-part2-Confluence-18171" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-18173" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟩</a>
      <a id="plfa_plfa-part2-Confluence-18181" class="Keyword">with</a> <a id="plfa_plfa-part2-Confluence-18186" href="../Confluence/#plfa_plfa-part2-Confluence-17840" class="Function">par-confluence</a> <a id="plfa_plfa-part2-Confluence-18201" class="Bound">M₁⇛*M₁′</a> <a id="plfa_plfa-part2-Confluence-18209" href="../Confluence/#plfa_plfa-part2-Confluence-18158" class="Bound">M₁⇛*N</a>
<a id="plfa_plfa-part2-Confluence-18215" class="Symbol">...</a>   <a id="plfa_plfa-part2-Confluence-18221" class="Symbol">|</a> <a id="plfa_plfa-part2-Confluence-18223" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-18225" href="../Confluence/#plfa_plfa-part2-Confluence-18225" class="Bound">N′</a> <a id="plfa_plfa-part2-Confluence-18228" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-18230" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-18232" href="../Confluence/#plfa_plfa-part2-Confluence-18232" class="Bound">M₁′⇛*N′</a> <a id="plfa_plfa-part2-Confluence-18240" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-18242" href="../Confluence/#plfa_plfa-part2-Confluence-18242" class="Bound">N⇛*N′</a> <a id="plfa_plfa-part2-Confluence-18248" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-18250" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-18252" class="Symbol">=</a>
        <a id="plfa_plfa-part2-Confluence-18262" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-18264" href="../Confluence/#plfa_plfa-part2-Confluence-18225" class="Bound">N′</a> <a id="plfa_plfa-part2-Confluence-18267" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-18269" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-18271" href="../Confluence/#plfa_plfa-part2-Confluence-18232" class="Bound">M₁′⇛*N′</a> <a id="plfa_plfa-part2-Confluence-18279" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-18281" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-18282" class="Bound">M₂</a> <a id="plfa_plfa-part2-Confluence-18285" href="../Confluence/#plfa_plfa-part2-Confluence-3828" class="InductiveConstructor Operator">⇛⟨</a> <a id="plfa_plfa-part2-Confluence-18288" class="Bound">M₂⇛N</a> <a id="plfa_plfa-part2-Confluence-18293" href="../Confluence/#plfa_plfa-part2-Confluence-3828" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-18295" href="../Confluence/#plfa_plfa-part2-Confluence-18242" class="Bound">N⇛*N′</a><a id="plfa_plfa-part2-Confluence-18300" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-18302" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-18304" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟩</a>
</pre><p>The step case may be illustrated as follows:</p><pre><code>        L
       / \
      1   *
     /     \
    M₁ (a)  M₂
   / \     /
  *   *   1
 /     \ /
M₁′(b)  N
 \     /
  *   *
   \ /
    N′</code></pre><p>where downward lines are instances of <code>⇛</code> or <code>⇛*</code>, depending on how they are marked. Here <code>(a)</code> holds by <code>strip</code> and <code>(b)</code> holds by induction.</p><h2 id="proof-of-confluence-for-reduction">Proof of confluence for reduction</h2><p>Confluence of reduction is a corollary of confluence for parallel reduction. From <code>L —↠ M₁</code> and <code>L —↠ M₂</code> we have <code>L ⇛* M₁</code> and <code>L ⇛* M₂</code> by <code>betas-pars</code>. Then by confluence we obtain some <code>L</code> such that <code>M₁ ⇛* N</code> and <code>M₂ ⇛* N</code>, from which we conclude that <code>M₁ —↠ N</code> and <code>M₂ —↠ N</code> by <code>pars-betas</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-confluence"></a><a id="plfa_plfa-part2-Confluence-19037" href="../Confluence/#plfa_plfa-part2-Confluence-19037" class="Function">confluence</a> <a id="plfa_plfa-part2-Confluence-19048" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-19050" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-19052" href="../Confluence/#plfa_plfa-part2-Confluence-19052" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-19054" href="../Confluence/#plfa_plfa-part2-Confluence-19054" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-19055" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-19057" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-19058" href="../Confluence/#plfa_plfa-part2-Confluence-19058" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-19060" href="../Confluence/#plfa_plfa-part2-Confluence-19060" class="Bound">M₁</a> <a id="plfa_plfa-part2-Confluence-19063" href="../Confluence/#plfa_plfa-part2-Confluence-19063" class="Bound">M₂</a> <a id="plfa_plfa-part2-Confluence-19066" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-19068" href="../Confluence/#plfa_plfa-part2-Confluence-19052" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-19070" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-19072" href="../Confluence/#plfa_plfa-part2-Confluence-19054" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-19073" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Confluence-19077" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-19079" href="../Confluence/#plfa_plfa-part2-Confluence-19058" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-19081" href="../Untyped/#plfa_plfa-part2-Untyped-10990" class="Datatype Operator">—↠</a> <a id="plfa_plfa-part2-Confluence-19084" href="../Confluence/#plfa_plfa-part2-Confluence-19060" class="Bound">M₁</a>
  <a id="plfa_plfa-part2-Confluence-19089" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-19091" href="../Confluence/#plfa_plfa-part2-Confluence-19058" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-19093" href="../Untyped/#plfa_plfa-part2-Untyped-10990" class="Datatype Operator">—↠</a> <a id="plfa_plfa-part2-Confluence-19096" href="../Confluence/#plfa_plfa-part2-Confluence-19063" class="Bound">M₂</a>
    <a id="plfa_plfa-part2-Confluence-19103" class="Comment">-----------------------------------</a>
  <a id="plfa_plfa-part2-Confluence-19141" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-19143" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#925" class="Function">Σ[</a> <a id="plfa_plfa-part2-Confluence-19146" href="../Confluence/#plfa_plfa-part2-Confluence-19146" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-19148" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#925" class="Function">∈</a> <a id="plfa_plfa-part2-Confluence-19150" href="../Confluence/#plfa_plfa-part2-Confluence-19052" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-19152" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-19154" href="../Confluence/#plfa_plfa-part2-Confluence-19054" class="Bound">A</a> <a id="plfa_plfa-part2-Confluence-19156" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#925" class="Function">]</a> <a id="plfa_plfa-part2-Confluence-19158" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-19159" href="../Confluence/#plfa_plfa-part2-Confluence-19060" class="Bound">M₁</a> <a id="plfa_plfa-part2-Confluence-19162" href="../Untyped/#plfa_plfa-part2-Untyped-10990" class="Datatype Operator">—↠</a> <a id="plfa_plfa-part2-Confluence-19165" href="../Confluence/#plfa_plfa-part2-Confluence-19146" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-19166" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-19168" href="https://agda.github.io/agda-stdlib/v1.7.2/Data.Product.html#1176" class="Function Operator">×</a> <a id="plfa_plfa-part2-Confluence-19170" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-19171" href="../Confluence/#plfa_plfa-part2-Confluence-19063" class="Bound">M₂</a> <a id="plfa_plfa-part2-Confluence-19174" href="../Untyped/#plfa_plfa-part2-Untyped-10990" class="Datatype Operator">—↠</a> <a id="plfa_plfa-part2-Confluence-19177" href="../Confluence/#plfa_plfa-part2-Confluence-19146" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-19178" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-19180" href="../Confluence/#plfa_plfa-part2-Confluence-19037" class="Function">confluence</a> <a id="plfa_plfa-part2-Confluence-19191" href="../Confluence/#plfa_plfa-part2-Confluence-19191" class="Bound">L↠M₁</a> <a id="plfa_plfa-part2-Confluence-19196" href="../Confluence/#plfa_plfa-part2-Confluence-19196" class="Bound">L↠M₂</a>
    <a id="plfa_plfa-part2-Confluence-19205" class="Keyword">with</a> <a id="plfa_plfa-part2-Confluence-19210" href="../Confluence/#plfa_plfa-part2-Confluence-17840" class="Function">par-confluence</a> <a id="plfa_plfa-part2-Confluence-19225" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-19226" href="../Confluence/#plfa_plfa-part2-Confluence-4936" class="Function">betas-pars</a> <a id="plfa_plfa-part2-Confluence-19237" href="../Confluence/#plfa_plfa-part2-Confluence-19191" class="Bound">L↠M₁</a><a id="plfa_plfa-part2-Confluence-19241" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-19243" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-19244" href="../Confluence/#plfa_plfa-part2-Confluence-4936" class="Function">betas-pars</a> <a id="plfa_plfa-part2-Confluence-19255" href="../Confluence/#plfa_plfa-part2-Confluence-19196" class="Bound">L↠M₂</a><a id="plfa_plfa-part2-Confluence-19259" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-19261" class="Symbol">...</a> <a id="plfa_plfa-part2-Confluence-19265" class="Symbol">|</a> <a id="plfa_plfa-part2-Confluence-19267" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-19269" href="../Confluence/#plfa_plfa-part2-Confluence-19269" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-19271" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-19273" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-19275" href="../Confluence/#plfa_plfa-part2-Confluence-19275" class="Bound">M₁⇛N</a> <a id="plfa_plfa-part2-Confluence-19280" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-19282" href="../Confluence/#plfa_plfa-part2-Confluence-19282" class="Bound">M₂⇛N</a> <a id="plfa_plfa-part2-Confluence-19287" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-19289" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-19291" class="Symbol">=</a>
      <a id="plfa_plfa-part2-Confluence-19299" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-19301" href="../Confluence/#plfa_plfa-part2-Confluence-19269" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-19303" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-19305" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-19307" href="../Confluence/#plfa_plfa-part2-Confluence-6842" class="Function">pars-betas</a> <a id="plfa_plfa-part2-Confluence-19318" href="../Confluence/#plfa_plfa-part2-Confluence-19275" class="Bound">M₁⇛N</a> <a id="plfa_plfa-part2-Confluence-19323" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-19325" href="../Confluence/#plfa_plfa-part2-Confluence-6842" class="Function">pars-betas</a> <a id="plfa_plfa-part2-Confluence-19336" href="../Confluence/#plfa_plfa-part2-Confluence-19282" class="Bound">M₂⇛N</a> <a id="plfa_plfa-part2-Confluence-19341" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-19343" href="../Confluence/#plfa_plfa-part2-Confluence-2197" class="InductiveConstructor Operator">⟩</a>
</pre><h2 id="notes">Notes</h2><p>This mechanized proof of confluence is loosely based on several sources including <span class="citation" data-cites="Schafer:2015">Schäfer, Tebbi, and Smolka (2015)</span>, <span class="citation" data-cites="Takahashi:1995">Takahashi (1995)</span>, <span class="citation" data-cites="Pfenning:1992">Pfenning (1992)</span>, and Nipkow and Berghofer’s mechanization in Isabelle, which is based on a paper by <span class="citation" data-cites="Nipkow:1996">Nipkow (1996)</span>.</p><h2 id="unicode">Unicode</h2><p>This chapter uses the following unicode:</p><pre><code>⇛  U+21DB  RIGHTWARDS TRIPLE ARROW (\r== or \Rrightarrow)
⁺  U+207A  SUPERSCRIPT PLUS SIGN   (\^+)</code></pre><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list"><div id="ref-Nipkow:1996" class="csl-entry" role="listitem">Nipkow, Tobias. 1996. <span>“More Church-Rosser Proofs (in Isabelle/HOL).”</span> In <em>Proceedings of the 13th International Conference on Automated Deduction: Automated Deduction</em>, 733–47. CADE-13. Berlin, Heidelberg: Springer-Verlag.</div><div id="ref-Pfenning:1992" class="csl-entry" role="listitem">Pfenning, Frank. 1992. <span>“A Proof of the Church-Rosser Theorem and Its Representation in a Logical Framework.”</span> CMU-CS-92-186. Carnegie Mellon University; Carnegie Mellon University.</div><div id="ref-Schafer:2015" class="csl-entry" role="listitem">Schäfer, Steven, Tobias Tebbi, and Gert Smolka. 2015. <span>“Autosubst: Reasoning with de Bruijn Terms and Parallel Substitutions.”</span> In <em>Interactive Theorem Proving: 6th International Conference, ITP 2015, Nanjing, China, August 24-27, 2015, Proceedings 6</em>, 359–74. Springer.</div><div id="ref-Takahashi:1995" class="csl-entry" role="listitem">Takahashi, M. 1995. <span>“Parallel Reductions in λ-Calculus.”</span> <em>Information and Computation</em> 118 (1): 120–27. https://doi.org/<a href="https://doi.org/10.1006/inco.1995.1057">https://doi.org/10.1006/inco.1995.1057</a>.</div></div></div><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Untyped/">Prev</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/part2/Confluence.lagda.md">Source</a></li><li class="separator">•</li><li><a class="pagelink" href="../BigStep/">Next</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card" aria-label="Site"><data class="u-url" href="../"></data><div class="wrapper"><h2 class="footer-heading">Programming Language Foundations in Agda</h2><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk"><i class="far fa-envelope"></i>  wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><i class="fab fa-github"></i>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works"><i class="far fa-envelope"></i>  me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><i class="fab fa-github"></i>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><i class="fab fa-twitter"></i>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu"><i class="far fa-envelope"></i>  jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><i class="fab fa-github"></i>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><i class="fab fa-twitter"></i>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></div></footer></body></html>