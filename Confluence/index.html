<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../assets/css/light.css" integrity="sha512-J8Ko83OT11zQ2/+vowqJ0Ovx2JEWUBNPTbNptixluYAHAO009R7GVxRQNKA+Wq4skbsdZr1AEOjF2AeQmKt3/A==" title="Light" id="stylesheet-light"><link rel="stylesheet" href="../assets/css/dark.css" integrity="sha512-kK/Wf2991I8CFsf5/Qu/2GIm2Enzw8H70RQ/yHNIb6iGTPF/SKE0B+kxTG2HjcFOgcjfKxZ9Jr4bvSfuKraNWw==" title="Dark" id="stylesheet-dark" disabled><title>Programming Language Foundations in Agda – Confluence</title><script src="../assets/js/anchor.js" integrity="sha512-Y5IMGqYQp36NYYdEL6gXISLsHNpx0LxW0NS0twvYBvXI8GH5PZa1g5gm1B5lxg6tlFyUAiOOfgKL/NIn0dtY4w==" id="script-anchor"></script><script src="../assets/js/darkmode.js" integrity="sha512-iUX9HnSphH4WbMv88MYJEFtLfkCtTHrvWyFwjigSm5GkwHv1L31GP5grIGDo7kI2jftuYVvt4xu4qeCn2fKbww==" id="script-darkmode"></script><script src="../assets/js/main.js" integrity="sha512-X7aZg6IUKq1TvTVjSureaMGKZ/ylbAD7kxiU2w42IUgh4lUTWoOsoIWzNvrqkwBJdQ1y2GsS67gtsv39Uuq6ew==" id="script-main"></script></head><body><header class="site-header" aria-label="Site"><div class="wrapper"><a class="site-title" href="../">Programming Language Foundations in Agda</a><nav class="site-nav" aria-label="Site"><input type="checkbox" id="nav-trigger" class="nav-trigger"><label for="nav-trigger"><span class="menu-icon"><svg class="svg-icon grey" viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span></label><div class="trigger"><a class="page-link" href="../">The Book</a> <a class="page-link" href="../Announcements/">Announcements</a> <a class="page-link" href="../GettingStarted/">Getting Started</a> <a class="page-link" href="../Citing/">Citing</a> <a class="page-link" href="https://agda-zh.github.io/PLFA-zh/">中文</a> <a class="page-link" onclick="window.darkmode.toggle()"><i id="darkmode-trigger" class="fas fa-moon"></i> </a><a class="page-link" href="../plfa.epub"><i class="fa fa-book"></i></a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Untyped/">Prev</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/part2/Confluence.lagda.md">Source</a></li><li class="separator">•</li><li><a class="pagelink" href="../BigStep/">Next</a></li><li class="separator">•</li></ul></nav><header class="post-header" aria-label="Chapter"><h1 class="post-title">Confluence: Confluence of untyped lambda calculus</h1></header><div class="post-content"><pre class="Agda"><a id="plfa_plfa-part2-Confluence-107" class="Keyword">module</a> <a id="plfa_plfa-part2-Confluence-114" href="../Confluence/#" class="Module">plfa.part2.Confluence</a> <a id="plfa_plfa-part2-Confluence-136" class="Keyword">where</a>
</pre><h2 id="introduction">Introduction</h2><p>In this chapter we prove that beta reduction is <em>confluent</em>, a property also known as <em>Church-Rosser</em>. That is, if there are reduction sequences from any term <code>L</code> to two different terms <code>M₁</code> and <code>M₂</code>, then there exist reduction sequences from those two terms to some common term <code>N</code>. In pictures:</p><pre><code>    L
   / \
  /   \
 /     \
M₁      M₂
 \     /
  \   /
   \ /
    N</code></pre><p>where downward lines are instances of <code>—↠</code>.</p><p>Confluence is studied in many other kinds of rewrite systems besides the lambda calculus, and it is well known how to prove confluence in rewrite systems that enjoy the <em>diamond property</em>, a single-step version of confluence. Let <code>⇛</code> be a relation. Then <code>⇛</code> has the diamond property if whenever <code>L ⇛ M₁</code> and <code>L ⇛ M₂</code>, then there exists an <code>N</code> such that <code>M₁ ⇛ N</code> and <code>M₂ ⇛ N</code>. This is just an instance of the same picture above, where downward lines are now instance of <code>⇛</code>. If we write <code>⇛*</code> for the reflexive and transitive closure of <code>⇛</code>, then confluence of <code>⇛*</code> follows immediately from the diamond property.</p><p>Unfortunately, reduction in the lambda calculus does not satisfy the diamond property. Here is a counter example.</p><pre><code>(λ x. x x)((λ x. x) a) —→ (λ x. x x) a
(λ x. x x)((λ x. x) a) —→ ((λ x. x) a) ((λ x. x) a)</code></pre><p>Both terms can reduce to <code>a a</code>, but the second term requires two steps to get there, not one.</p><p>To side-step this problem, we’ll define an auxiliary reduction relation, called <em>parallel reduction</em>, that can perform many reductions simultaneously and thereby satisfy the diamond property. Furthermore, we show that a parallel reduction sequence exists between any two terms if and only if a beta reduction sequence exists between them. Thus, we can reduce the proof of confluence for beta reduction to confluence for parallel reduction.</p><h2 id="imports">Imports</h2><pre class="Agda"><a id="plfa_plfa-part2-Confluence-2000" class="Keyword">open</a> <a id="plfa_plfa-part2-Confluence-2005" class="Keyword">import</a> <a id="plfa_plfa-part2-Confluence-2012" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="plfa_plfa-part2-Confluence-2050" class="Keyword">using</a> <a id="plfa_plfa-part2-Confluence-2056" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-2057" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡_</a><a id="plfa_plfa-part2-Confluence-2060" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2062" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Confluence-2066" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-2068" class="Keyword">open</a> <a id="plfa_plfa-part2-Confluence-2073" class="Keyword">import</a> <a id="plfa_plfa-part2-Confluence-2080" href="https://agda.github.io/agda-stdlib/v2.1/Function.Base.html" class="Module">Function.Base</a> <a id="plfa_plfa-part2-Confluence-2094" class="Keyword">using</a> <a id="plfa_plfa-part2-Confluence-2100" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-2101" href="https://agda.github.io/agda-stdlib/v2.1/Function.Base.html#1115" class="Function Operator">_∘_</a><a id="plfa_plfa-part2-Confluence-2104" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-2106" class="Keyword">open</a> <a id="plfa_plfa-part2-Confluence-2111" class="Keyword">import</a> <a id="plfa_plfa-part2-Confluence-2118" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html" class="Module">Data.Product.Base</a> <a id="plfa_plfa-part2-Confluence-2136" class="Keyword">using</a> <a id="plfa_plfa-part2-Confluence-2142" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-2143" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1618" class="Function Operator">_×_</a><a id="plfa_plfa-part2-Confluence-2146" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2148" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Sigma.html#165" class="Record">Σ</a><a id="plfa_plfa-part2-Confluence-2149" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2151" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1244" class="Function">Σ-syntax</a><a id="plfa_plfa-part2-Confluence-2159" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2161" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#852" class="Function">∃</a><a id="plfa_plfa-part2-Confluence-2162" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2164" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1371" class="Function">∃-syntax</a><a id="plfa_plfa-part2-Confluence-2172" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2174" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#636" class="Field">proj₁</a><a id="plfa_plfa-part2-Confluence-2179" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2181" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#650" class="Field">proj₂</a><a id="plfa_plfa-part2-Confluence-2186" class="Symbol">)</a>
  <a id="plfa_plfa-part2-Confluence-2190" class="Keyword">renaming</a> <a id="plfa_plfa-part2-Confluence-2199" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-2200" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">_,_</a> <a id="plfa_plfa-part2-Confluence-2204" class="Symbol">to</a> <a id="plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="plfa_plfa-part2-Confluence-2212" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-2214" class="Keyword">open</a> <a id="plfa_plfa-part2-Confluence-2219" class="Keyword">import</a> <a id="plfa_plfa-part2-Confluence-2226" href="../Substitution/#" class="Module">plfa.part2.Substitution</a> <a id="plfa_plfa-part2-Confluence-2250" class="Keyword">using</a> <a id="plfa_plfa-part2-Confluence-2256" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-2257" href="../Substitution/#plfa_plfa-part2-Substitution-2133" class="Function">Rename</a><a id="plfa_plfa-part2-Confluence-2263" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2265" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a><a id="plfa_plfa-part2-Confluence-2270" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-2272" class="Keyword">open</a> <a id="plfa_plfa-part2-Confluence-2277" class="Keyword">import</a> <a id="plfa_plfa-part2-Confluence-2284" href="../Untyped/#" class="Module">plfa.part2.Untyped</a>
  <a id="plfa_plfa-part2-Confluence-2305" class="Keyword">using</a> <a id="plfa_plfa-part2-Confluence-2311" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-2312" href="../Untyped/#plfa_plfa-part2-Untyped-9826" class="Datatype Operator">_—→_</a><a id="plfa_plfa-part2-Confluence-2316" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2318" href="../Untyped/#plfa_plfa-part2-Untyped-10056" class="InductiveConstructor">β</a><a id="plfa_plfa-part2-Confluence-2319" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2321" href="../Untyped/#plfa_plfa-part2-Untyped-9876" class="InductiveConstructor">ξ₁</a><a id="plfa_plfa-part2-Confluence-2323" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2325" href="../Untyped/#plfa_plfa-part2-Untyped-9966" class="InductiveConstructor">ξ₂</a><a id="plfa_plfa-part2-Confluence-2327" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2329" href="../Untyped/#plfa_plfa-part2-Untyped-10164" class="InductiveConstructor">ζ</a><a id="plfa_plfa-part2-Confluence-2330" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2332" href="../Untyped/#plfa_plfa-part2-Untyped-10958" class="Datatype Operator">_—↠_</a><a id="plfa_plfa-part2-Confluence-2336" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2338" href="../Untyped/#plfa_plfa-part2-Untyped-11188" class="Function Operator">begin_</a><a id="plfa_plfa-part2-Confluence-2344" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2346" href="../Untyped/#plfa_plfa-part2-Untyped-11146" class="InductiveConstructor Operator">_—→⟨_⟩_</a><a id="plfa_plfa-part2-Confluence-2353" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2355" href="../Untyped/#plfa_plfa-part2-Untyped-21979" class="Function Operator">_—↠⟨_⟩_</a><a id="plfa_plfa-part2-Confluence-2362" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2364" href="../Untyped/#plfa_plfa-part2-Untyped-11004" class="InductiveConstructor Operator">_∎</a><a id="plfa_plfa-part2-Confluence-2366" class="Symbol">;</a>
  <a id="plfa_plfa-part2-Confluence-2370" href="../Untyped/#plfa_plfa-part2-Untyped-23884" class="Function">abs-cong</a><a id="plfa_plfa-part2-Confluence-2378" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2380" href="../Untyped/#plfa_plfa-part2-Untyped-22879" class="Function">appL-cong</a><a id="plfa_plfa-part2-Confluence-2389" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2391" href="../Untyped/#plfa_plfa-part2-Untyped-23652" class="Function">appR-cong</a><a id="plfa_plfa-part2-Confluence-2400" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2402" href="../Untyped/#plfa_plfa-part2-Untyped-21705" class="Function">—↠-trans</a><a id="plfa_plfa-part2-Confluence-2410" class="Symbol">;</a>
  <a id="plfa_plfa-part2-Confluence-2414" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">_⊢_</a><a id="plfa_plfa-part2-Confluence-2417" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2419" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">_∋_</a><a id="plfa_plfa-part2-Confluence-2422" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2424" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`_</a><a id="plfa_plfa-part2-Confluence-2426" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2428" href="../Untyped/#plfa_plfa-part2-Untyped-4782" class="Function Operator">#_</a><a id="plfa_plfa-part2-Confluence-2430" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2432" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">_,_</a><a id="plfa_plfa-part2-Confluence-2435" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2437" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-2438" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2440" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ_</a><a id="plfa_plfa-part2-Confluence-2442" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2444" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">_·_</a><a id="plfa_plfa-part2-Confluence-2447" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2449" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">_[_]</a><a id="plfa_plfa-part2-Confluence-2453" class="Symbol">;</a>
  <a id="plfa_plfa-part2-Confluence-2457" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a><a id="plfa_plfa-part2-Confluence-2463" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2465" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a><a id="plfa_plfa-part2-Confluence-2468" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2470" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a><a id="plfa_plfa-part2-Confluence-2474" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2476" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Confluence-2477" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2479" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part2-Confluence-2481" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2483" href="../Untyped/#plfa_plfa-part2-Untyped-6759" class="Function">subst</a><a id="plfa_plfa-part2-Confluence-2488" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2490" href="../Untyped/#plfa_plfa-part2-Untyped-7175" class="Function">subst-zero</a><a id="plfa_plfa-part2-Confluence-2500" class="Symbol">;</a> <a id="plfa_plfa-part2-Confluence-2502" href="../Untyped/#plfa_plfa-part2-Untyped-2750" class="Datatype">Context</a><a id="plfa_plfa-part2-Confluence-2509" class="Symbol">)</a>
</pre><h2 id="parallel-reduction">Parallel Reduction</h2><p>The parallel reduction relation is defined as follows.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-2603" class="Keyword">infix</a> <a id="plfa_plfa-part2-Confluence-2609" class="Number">2</a> <a id="plfa_plfa-part2-Confluence-2611" href="../Confluence/#plfa_plfa-part2-Confluence-2621" class="Datatype Operator">_⇛_</a>

<a id="plfa_plfa-part2-Confluence-2616" class="Keyword">data</a> <a id="plfa_plfa-part2-Confluence-_⇛_"></a><a id="plfa_plfa-part2-Confluence-2621" href="../Confluence/#plfa_plfa-part2-Confluence-2621" class="Datatype Operator">_⇛_</a> <a id="plfa_plfa-part2-Confluence-2625" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-2627" class="Symbol">∀</a> <a id="plfa_plfa-part2-Confluence-2629" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-2630" href="../Confluence/#plfa_plfa-part2-Confluence-2630" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-2632" href="../Confluence/#plfa_plfa-part2-Confluence-2632" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-2633" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-2635" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-2637" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-2638" href="../Confluence/#plfa_plfa-part2-Confluence-2630" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-2640" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-2642" href="../Confluence/#plfa_plfa-part2-Confluence-2632" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-2643" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-2645" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-2647" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-2648" href="../Confluence/#plfa_plfa-part2-Confluence-2630" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-2650" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-2652" href="../Confluence/#plfa_plfa-part2-Confluence-2632" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-2653" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-2655" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-2657" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Primitive.html#388" class="Primitive">Set</a> <a id="plfa_plfa-part2-Confluence-2661" class="Keyword">where</a>

  <a id="plfa_plfa-part2-Confluence-_⇛_.pvar"></a><a id="plfa_plfa-part2-Confluence-2670" href="../Confluence/#plfa_plfa-part2-Confluence-2670" class="InductiveConstructor">pvar</a> <a id="plfa_plfa-part2-Confluence-2675" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-2677" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-2679" href="../Confluence/#plfa_plfa-part2-Confluence-2679" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-2681" href="../Confluence/#plfa_plfa-part2-Confluence-2681" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-2682" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-2684" href="../Confluence/#plfa_plfa-part2-Confluence-2684" class="Bound">x</a> <a id="plfa_plfa-part2-Confluence-2686" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-2688" href="../Confluence/#plfa_plfa-part2-Confluence-2679" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-2690" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Confluence-2692" href="../Confluence/#plfa_plfa-part2-Confluence-2681" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-2693" class="Symbol">}</a>
      <a id="plfa_plfa-part2-Confluence-2701" class="Comment">---------</a>
    <a id="plfa_plfa-part2-Confluence-2715" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-2717" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-2718" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Confluence-2720" href="../Confluence/#plfa_plfa-part2-Confluence-2684" class="Bound">x</a><a id="plfa_plfa-part2-Confluence-2721" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-2723" href="../Confluence/#plfa_plfa-part2-Confluence-2621" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-2725" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-2726" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Confluence-2728" href="../Confluence/#plfa_plfa-part2-Confluence-2684" class="Bound">x</a><a id="plfa_plfa-part2-Confluence-2729" class="Symbol">)</a>

  <a id="plfa_plfa-part2-Confluence-_⇛_.pabs"></a><a id="plfa_plfa-part2-Confluence-2734" href="../Confluence/#plfa_plfa-part2-Confluence-2734" class="InductiveConstructor">pabs</a> <a id="plfa_plfa-part2-Confluence-2739" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-2741" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-2743" href="../Confluence/#plfa_plfa-part2-Confluence-2743" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-2744" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-2746" href="../Confluence/#plfa_plfa-part2-Confluence-2746" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-2748" href="../Confluence/#plfa_plfa-part2-Confluence-2748" class="Bound">N′</a> <a id="plfa_plfa-part2-Confluence-2751" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-2753" href="../Confluence/#plfa_plfa-part2-Confluence-2743" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-2755" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-2757" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-Confluence-2759" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-2761" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-2762" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Confluence-2768" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-2770" href="../Confluence/#plfa_plfa-part2-Confluence-2746" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-2772" href="../Confluence/#plfa_plfa-part2-Confluence-2621" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-2774" href="../Confluence/#plfa_plfa-part2-Confluence-2748" class="Bound">N′</a>
      <a id="plfa_plfa-part2-Confluence-2783" class="Comment">----------</a>
    <a id="plfa_plfa-part2-Confluence-2798" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-2800" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-2802" href="../Confluence/#plfa_plfa-part2-Confluence-2746" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-2804" href="../Confluence/#plfa_plfa-part2-Confluence-2621" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-2806" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-2808" href="../Confluence/#plfa_plfa-part2-Confluence-2748" class="Bound">N′</a>

  <a id="plfa_plfa-part2-Confluence-_⇛_.papp"></a><a id="plfa_plfa-part2-Confluence-2814" href="../Confluence/#plfa_plfa-part2-Confluence-2814" class="InductiveConstructor">papp</a> <a id="plfa_plfa-part2-Confluence-2819" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-2821" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-2823" href="../Confluence/#plfa_plfa-part2-Confluence-2823" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-2824" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-2826" href="../Confluence/#plfa_plfa-part2-Confluence-2826" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-2828" href="../Confluence/#plfa_plfa-part2-Confluence-2828" class="Bound">L′</a> <a id="plfa_plfa-part2-Confluence-2831" href="../Confluence/#plfa_plfa-part2-Confluence-2831" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-2833" href="../Confluence/#plfa_plfa-part2-Confluence-2833" class="Bound">M′</a> <a id="plfa_plfa-part2-Confluence-2836" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-2838" href="../Confluence/#plfa_plfa-part2-Confluence-2823" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-2840" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-2842" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-2843" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Confluence-2849" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-2851" href="../Confluence/#plfa_plfa-part2-Confluence-2826" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-2853" href="../Confluence/#plfa_plfa-part2-Confluence-2621" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-2855" href="../Confluence/#plfa_plfa-part2-Confluence-2828" class="Bound">L′</a>
    <a id="plfa_plfa-part2-Confluence-2862" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-2864" href="../Confluence/#plfa_plfa-part2-Confluence-2831" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-2866" href="../Confluence/#plfa_plfa-part2-Confluence-2621" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-2868" href="../Confluence/#plfa_plfa-part2-Confluence-2833" class="Bound">M′</a>
      <a id="plfa_plfa-part2-Confluence-2877" class="Comment">-----------------</a>
    <a id="plfa_plfa-part2-Confluence-2899" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-2901" href="../Confluence/#plfa_plfa-part2-Confluence-2826" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-2903" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-2905" href="../Confluence/#plfa_plfa-part2-Confluence-2831" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-2907" href="../Confluence/#plfa_plfa-part2-Confluence-2621" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-2909" href="../Confluence/#plfa_plfa-part2-Confluence-2828" class="Bound">L′</a> <a id="plfa_plfa-part2-Confluence-2912" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-2914" href="../Confluence/#plfa_plfa-part2-Confluence-2833" class="Bound">M′</a>

  <a id="plfa_plfa-part2-Confluence-_⇛_.pbeta"></a><a id="plfa_plfa-part2-Confluence-2920" href="../Confluence/#plfa_plfa-part2-Confluence-2920" class="InductiveConstructor">pbeta</a> <a id="plfa_plfa-part2-Confluence-2926" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-2928" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-2930" href="../Confluence/#plfa_plfa-part2-Confluence-2930" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-2931" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-2933" href="../Confluence/#plfa_plfa-part2-Confluence-2933" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-2935" href="../Confluence/#plfa_plfa-part2-Confluence-2935" class="Bound">N′</a>  <a id="plfa_plfa-part2-Confluence-2939" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-2941" href="../Confluence/#plfa_plfa-part2-Confluence-2930" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-2943" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-2945" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-Confluence-2947" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-2949" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-2950" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-2952" href="../Confluence/#plfa_plfa-part2-Confluence-2952" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-2954" href="../Confluence/#plfa_plfa-part2-Confluence-2954" class="Bound">M′</a> <a id="plfa_plfa-part2-Confluence-2957" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-2959" href="../Confluence/#plfa_plfa-part2-Confluence-2930" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-2961" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-2963" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-2964" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Confluence-2970" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-2972" href="../Confluence/#plfa_plfa-part2-Confluence-2933" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-2974" href="../Confluence/#plfa_plfa-part2-Confluence-2621" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-2976" href="../Confluence/#plfa_plfa-part2-Confluence-2935" class="Bound">N′</a>
    <a id="plfa_plfa-part2-Confluence-2983" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-2985" href="../Confluence/#plfa_plfa-part2-Confluence-2952" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-2987" href="../Confluence/#plfa_plfa-part2-Confluence-2621" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-2989" href="../Confluence/#plfa_plfa-part2-Confluence-2954" class="Bound">M′</a>
      <a id="plfa_plfa-part2-Confluence-2998" class="Comment">-----------------------</a>
    <a id="plfa_plfa-part2-Confluence-3026" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-3028" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-3029" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-3031" href="../Confluence/#plfa_plfa-part2-Confluence-2933" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-3032" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-3034" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-3036" href="../Confluence/#plfa_plfa-part2-Confluence-2952" class="Bound">M</a>  <a id="plfa_plfa-part2-Confluence-3039" href="../Confluence/#plfa_plfa-part2-Confluence-2621" class="Datatype Operator">⇛</a>  <a id="plfa_plfa-part2-Confluence-3042" href="../Confluence/#plfa_plfa-part2-Confluence-2935" class="Bound">N′</a> <a id="plfa_plfa-part2-Confluence-3045" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">[</a> <a id="plfa_plfa-part2-Confluence-3047" href="../Confluence/#plfa_plfa-part2-Confluence-2954" class="Bound">M′</a> <a id="plfa_plfa-part2-Confluence-3050" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">]</a>
</pre><p>The first three rules are congruences that reduce each of their parts simultaneously. The last rule reduces a lambda term and term in parallel followed by a beta step.</p><p>We remark that the <code>pabs</code>, <code>papp</code>, and <code>pbeta</code> rules perform reduction on all their subexpressions simultaneously. Also, the <code>pabs</code> rule is akin to the <code>ζ</code> rule and <code>pbeta</code> is akin to <code>β</code>.</p><p>Parallel reduction is reflexive.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-par-refl"></a><a id="plfa_plfa-part2-Confluence-3457" href="../Confluence/#plfa_plfa-part2-Confluence-3457" class="Function">par-refl</a> <a id="plfa_plfa-part2-Confluence-3466" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-3468" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-3470" href="../Confluence/#plfa_plfa-part2-Confluence-3470" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-3472" href="../Confluence/#plfa_plfa-part2-Confluence-3472" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-3473" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-3475" href="../Confluence/#plfa_plfa-part2-Confluence-3475" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-3477" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-3479" href="../Confluence/#plfa_plfa-part2-Confluence-3470" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-3481" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-3483" href="../Confluence/#plfa_plfa-part2-Confluence-3472" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-3484" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-3486" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-3488" href="../Confluence/#plfa_plfa-part2-Confluence-3475" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-3490" href="../Confluence/#plfa_plfa-part2-Confluence-2621" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-3492" href="../Confluence/#plfa_plfa-part2-Confluence-3475" class="Bound">M</a>
<a id="plfa_plfa-part2-Confluence-3494" href="../Confluence/#plfa_plfa-part2-Confluence-3457" class="Function">par-refl</a> <a id="plfa_plfa-part2-Confluence-3503" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-3504" href="../Confluence/#plfa_plfa-part2-Confluence-3504" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-3505" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-3507" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-3508" href="../Confluence/#plfa_plfa-part2-Confluence-3508" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-3509" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-3511" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-3512" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Confluence-3514" href="../Confluence/#plfa_plfa-part2-Confluence-3514" class="Bound">x</a><a id="plfa_plfa-part2-Confluence-3515" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-3517" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-3519" href="../Confluence/#plfa_plfa-part2-Confluence-2670" class="InductiveConstructor">pvar</a>
<a id="plfa_plfa-part2-Confluence-3524" href="../Confluence/#plfa_plfa-part2-Confluence-3457" class="Function">par-refl</a> <a id="plfa_plfa-part2-Confluence-3533" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-3534" href="../Confluence/#plfa_plfa-part2-Confluence-3534" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-3535" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-3537" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-3538" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-3539" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-3541" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-3542" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-3544" href="../Confluence/#plfa_plfa-part2-Confluence-3544" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-3545" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-3547" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-3549" href="../Confluence/#plfa_plfa-part2-Confluence-2734" class="InductiveConstructor">pabs</a> <a id="plfa_plfa-part2-Confluence-3554" href="../Confluence/#plfa_plfa-part2-Confluence-3457" class="Function">par-refl</a>
<a id="plfa_plfa-part2-Confluence-3563" href="../Confluence/#plfa_plfa-part2-Confluence-3457" class="Function">par-refl</a> <a id="plfa_plfa-part2-Confluence-3572" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-3573" href="../Confluence/#plfa_plfa-part2-Confluence-3573" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-3574" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-3576" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-3577" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-3578" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-3580" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-3581" href="../Confluence/#plfa_plfa-part2-Confluence-3581" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-3583" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-3585" href="../Confluence/#plfa_plfa-part2-Confluence-3585" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-3586" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-3588" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-3590" href="../Confluence/#plfa_plfa-part2-Confluence-2814" class="InductiveConstructor">papp</a> <a id="plfa_plfa-part2-Confluence-3595" href="../Confluence/#plfa_plfa-part2-Confluence-3457" class="Function">par-refl</a> <a id="plfa_plfa-part2-Confluence-3604" href="../Confluence/#plfa_plfa-part2-Confluence-3457" class="Function">par-refl</a>
</pre><p>We define the sequences of parallel reduction as follows.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-3684" class="Keyword">infix</a>  <a id="plfa_plfa-part2-Confluence-3691" class="Number">2</a> <a id="plfa_plfa-part2-Confluence-3693" href="../Confluence/#plfa_plfa-part2-Confluence-3732" class="Datatype Operator">_⇛*_</a>
<a id="plfa_plfa-part2-Confluence-3698" class="Keyword">infixr</a> <a id="plfa_plfa-part2-Confluence-3705" class="Number">2</a> <a id="plfa_plfa-part2-Confluence-3707" href="../Confluence/#plfa_plfa-part2-Confluence-3838" class="InductiveConstructor Operator">_⇛⟨_⟩_</a>
<a id="plfa_plfa-part2-Confluence-3714" class="Keyword">infix</a>  <a id="plfa_plfa-part2-Confluence-3721" class="Number">3</a> <a id="plfa_plfa-part2-Confluence-3723" href="../Confluence/#plfa_plfa-part2-Confluence-3782" class="InductiveConstructor Operator">_∎</a>

<a id="plfa_plfa-part2-Confluence-3727" class="Keyword">data</a> <a id="plfa_plfa-part2-Confluence-_⇛*_"></a><a id="plfa_plfa-part2-Confluence-3732" href="../Confluence/#plfa_plfa-part2-Confluence-3732" class="Datatype Operator">_⇛*_</a> <a id="plfa_plfa-part2-Confluence-3737" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-3739" class="Symbol">∀</a> <a id="plfa_plfa-part2-Confluence-3741" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-3742" href="../Confluence/#plfa_plfa-part2-Confluence-3742" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-3744" href="../Confluence/#plfa_plfa-part2-Confluence-3744" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-3745" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-3747" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-3749" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-3750" href="../Confluence/#plfa_plfa-part2-Confluence-3742" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-3752" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-3754" href="../Confluence/#plfa_plfa-part2-Confluence-3744" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-3755" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-3757" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-3759" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-3760" href="../Confluence/#plfa_plfa-part2-Confluence-3742" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-3762" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-3764" href="../Confluence/#plfa_plfa-part2-Confluence-3744" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-3765" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-3767" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-3769" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Primitive.html#388" class="Primitive">Set</a> <a id="plfa_plfa-part2-Confluence-3773" class="Keyword">where</a>

  <a id="plfa_plfa-part2-Confluence-_⇛*_._∎"></a><a id="plfa_plfa-part2-Confluence-3782" href="../Confluence/#plfa_plfa-part2-Confluence-3782" class="InductiveConstructor Operator">_∎</a> <a id="plfa_plfa-part2-Confluence-3785" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-3787" class="Symbol">∀</a> <a id="plfa_plfa-part2-Confluence-3789" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-3790" href="../Confluence/#plfa_plfa-part2-Confluence-3790" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-3792" href="../Confluence/#plfa_plfa-part2-Confluence-3792" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-3793" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-3795" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-3796" href="../Confluence/#plfa_plfa-part2-Confluence-3796" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-3798" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-3800" href="../Confluence/#plfa_plfa-part2-Confluence-3790" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-3802" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-3804" href="../Confluence/#plfa_plfa-part2-Confluence-3792" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-3805" class="Symbol">)</a>
      <a id="plfa_plfa-part2-Confluence-3813" class="Comment">--------</a>
    <a id="plfa_plfa-part2-Confluence-3826" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-3828" href="../Confluence/#plfa_plfa-part2-Confluence-3796" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-3830" href="../Confluence/#plfa_plfa-part2-Confluence-3732" class="Datatype Operator">⇛*</a> <a id="plfa_plfa-part2-Confluence-3833" href="../Confluence/#plfa_plfa-part2-Confluence-3796" class="Bound">M</a>

  <a id="plfa_plfa-part2-Confluence-_⇛*_._⇛⟨_⟩_"></a><a id="plfa_plfa-part2-Confluence-3838" href="../Confluence/#plfa_plfa-part2-Confluence-3838" class="InductiveConstructor Operator">_⇛⟨_⟩_</a> <a id="plfa_plfa-part2-Confluence-3845" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-3847" class="Symbol">∀</a> <a id="plfa_plfa-part2-Confluence-3849" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-3850" href="../Confluence/#plfa_plfa-part2-Confluence-3850" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-3852" href="../Confluence/#plfa_plfa-part2-Confluence-3852" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-3853" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-3855" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-3856" href="../Confluence/#plfa_plfa-part2-Confluence-3856" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-3858" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-3860" href="../Confluence/#plfa_plfa-part2-Confluence-3850" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-3862" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-3864" href="../Confluence/#plfa_plfa-part2-Confluence-3852" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-3865" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-3867" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-3868" href="../Confluence/#plfa_plfa-part2-Confluence-3868" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-3870" href="../Confluence/#plfa_plfa-part2-Confluence-3870" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-3872" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-3874" href="../Confluence/#plfa_plfa-part2-Confluence-3850" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-3876" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-3878" href="../Confluence/#plfa_plfa-part2-Confluence-3852" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-3879" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Confluence-3885" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-3887" href="../Confluence/#plfa_plfa-part2-Confluence-3856" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-3889" href="../Confluence/#plfa_plfa-part2-Confluence-2621" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-3891" href="../Confluence/#plfa_plfa-part2-Confluence-3868" class="Bound">M</a>
    <a id="plfa_plfa-part2-Confluence-3897" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-3899" href="../Confluence/#plfa_plfa-part2-Confluence-3868" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-3901" href="../Confluence/#plfa_plfa-part2-Confluence-3732" class="Datatype Operator">⇛*</a> <a id="plfa_plfa-part2-Confluence-3904" href="../Confluence/#plfa_plfa-part2-Confluence-3870" class="Bound">N</a>
      <a id="plfa_plfa-part2-Confluence-3912" class="Comment">---------</a>
    <a id="plfa_plfa-part2-Confluence-3926" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-3928" href="../Confluence/#plfa_plfa-part2-Confluence-3856" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-3930" href="../Confluence/#plfa_plfa-part2-Confluence-3732" class="Datatype Operator">⇛*</a> <a id="plfa_plfa-part2-Confluence-3933" href="../Confluence/#plfa_plfa-part2-Confluence-3870" class="Bound">N</a>
</pre><h4 id="exercise-par-diamond-eg-practice">Exercise <code>par-diamond-eg</code> (practice)</h4><p>Revisit the counter example to the diamond property for reduction by showing that the diamond property holds for parallel reduction in that case.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-4139" class="Comment">-- Your code goes here</a>
</pre><h2 id="equivalence-between-parallel-reduction-and-reduction">Equivalence between parallel reduction and reduction</h2><p>Here we prove that for any <code>M</code> and <code>N</code>, <code>M ⇛* N</code> if and only if <code>M —↠ N</code>. The only-if direction is particularly easy. We start by showing that if <code>M —→ N</code>, then <code>M ⇛ N</code>. The proof is by induction on the reduction <code>M —→ N</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-beta-par"></a><a id="plfa_plfa-part2-Confluence-4457" href="../Confluence/#plfa_plfa-part2-Confluence-4457" class="Function">beta-par</a> <a id="plfa_plfa-part2-Confluence-4466" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-4468" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-4470" href="../Confluence/#plfa_plfa-part2-Confluence-4470" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-4472" href="../Confluence/#plfa_plfa-part2-Confluence-4472" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-4473" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-4475" href="../Confluence/#plfa_plfa-part2-Confluence-4475" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-4477" href="../Confluence/#plfa_plfa-part2-Confluence-4477" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-4479" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-4481" href="../Confluence/#plfa_plfa-part2-Confluence-4470" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-4483" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-4485" href="../Confluence/#plfa_plfa-part2-Confluence-4472" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-4486" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Confluence-4490" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-4492" href="../Confluence/#plfa_plfa-part2-Confluence-4475" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-4494" href="../Untyped/#plfa_plfa-part2-Untyped-9826" class="Datatype Operator">—→</a> <a id="plfa_plfa-part2-Confluence-4497" href="../Confluence/#plfa_plfa-part2-Confluence-4477" class="Bound">N</a>
    <a id="plfa_plfa-part2-Confluence-4503" class="Comment">------</a>
  <a id="plfa_plfa-part2-Confluence-4512" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-4514" href="../Confluence/#plfa_plfa-part2-Confluence-4475" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-4516" href="../Confluence/#plfa_plfa-part2-Confluence-2621" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-4518" href="../Confluence/#plfa_plfa-part2-Confluence-4477" class="Bound">N</a>
<a id="plfa_plfa-part2-Confluence-4520" href="../Confluence/#plfa_plfa-part2-Confluence-4457" class="Function">beta-par</a> <a id="plfa_plfa-part2-Confluence-4529" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-4530" href="../Confluence/#plfa_plfa-part2-Confluence-4530" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-4531" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-4533" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-4534" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-4535" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-4537" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-4538" href="../Confluence/#plfa_plfa-part2-Confluence-4538" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-4540" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-4542" href="../Confluence/#plfa_plfa-part2-Confluence-4542" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-4543" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-4545" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-4546" href="../Untyped/#plfa_plfa-part2-Untyped-9876" class="InductiveConstructor">ξ₁</a> <a id="plfa_plfa-part2-Confluence-4549" href="../Confluence/#plfa_plfa-part2-Confluence-4549" class="Bound">r</a><a id="plfa_plfa-part2-Confluence-4550" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-4552" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-4554" href="../Confluence/#plfa_plfa-part2-Confluence-2814" class="InductiveConstructor">papp</a> <a id="plfa_plfa-part2-Confluence-4559" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-4560" href="../Confluence/#plfa_plfa-part2-Confluence-4457" class="Function">beta-par</a> <a id="plfa_plfa-part2-Confluence-4569" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-4570" class="Argument">M</a> <a id="plfa_plfa-part2-Confluence-4572" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-4574" href="../Confluence/#plfa_plfa-part2-Confluence-4538" class="Bound">L</a><a id="plfa_plfa-part2-Confluence-4575" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-4577" href="../Confluence/#plfa_plfa-part2-Confluence-4549" class="Bound">r</a><a id="plfa_plfa-part2-Confluence-4578" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-4580" href="../Confluence/#plfa_plfa-part2-Confluence-3457" class="Function">par-refl</a>
<a id="plfa_plfa-part2-Confluence-4589" href="../Confluence/#plfa_plfa-part2-Confluence-4457" class="Function">beta-par</a> <a id="plfa_plfa-part2-Confluence-4598" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-4599" href="../Confluence/#plfa_plfa-part2-Confluence-4599" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-4600" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-4602" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-4603" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-4604" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-4606" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-4607" href="../Confluence/#plfa_plfa-part2-Confluence-4607" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-4609" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-4611" href="../Confluence/#plfa_plfa-part2-Confluence-4611" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-4612" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-4614" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-4615" href="../Untyped/#plfa_plfa-part2-Untyped-9966" class="InductiveConstructor">ξ₂</a> <a id="plfa_plfa-part2-Confluence-4618" href="../Confluence/#plfa_plfa-part2-Confluence-4618" class="Bound">r</a><a id="plfa_plfa-part2-Confluence-4619" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-4621" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-4623" href="../Confluence/#plfa_plfa-part2-Confluence-2814" class="InductiveConstructor">papp</a> <a id="plfa_plfa-part2-Confluence-4628" href="../Confluence/#plfa_plfa-part2-Confluence-3457" class="Function">par-refl</a> <a id="plfa_plfa-part2-Confluence-4637" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-4638" href="../Confluence/#plfa_plfa-part2-Confluence-4457" class="Function">beta-par</a> <a id="plfa_plfa-part2-Confluence-4647" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-4648" class="Argument">M</a> <a id="plfa_plfa-part2-Confluence-4650" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-4652" href="../Confluence/#plfa_plfa-part2-Confluence-4611" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-4653" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-4655" href="../Confluence/#plfa_plfa-part2-Confluence-4618" class="Bound">r</a><a id="plfa_plfa-part2-Confluence-4656" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-4658" href="../Confluence/#plfa_plfa-part2-Confluence-4457" class="Function">beta-par</a> <a id="plfa_plfa-part2-Confluence-4667" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-4668" href="../Confluence/#plfa_plfa-part2-Confluence-4668" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-4669" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-4671" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-4672" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-4673" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-4675" class="Symbol">{(</a><a id="plfa_plfa-part2-Confluence-4677" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-4679" href="../Confluence/#plfa_plfa-part2-Confluence-4679" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-4680" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-4682" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-4684" href="../Confluence/#plfa_plfa-part2-Confluence-4684" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-4685" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-4687" href="../Untyped/#plfa_plfa-part2-Untyped-10056" class="InductiveConstructor">β</a> <a id="plfa_plfa-part2-Confluence-4689" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-4691" href="../Confluence/#plfa_plfa-part2-Confluence-2920" class="InductiveConstructor">pbeta</a> <a id="plfa_plfa-part2-Confluence-4697" href="../Confluence/#plfa_plfa-part2-Confluence-3457" class="Function">par-refl</a> <a id="plfa_plfa-part2-Confluence-4706" href="../Confluence/#plfa_plfa-part2-Confluence-3457" class="Function">par-refl</a>
<a id="plfa_plfa-part2-Confluence-4715" href="../Confluence/#plfa_plfa-part2-Confluence-4457" class="Function">beta-par</a> <a id="plfa_plfa-part2-Confluence-4724" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-4725" href="../Confluence/#plfa_plfa-part2-Confluence-4725" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-4726" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-4728" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-4729" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-4730" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-4732" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-4733" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-4735" href="../Confluence/#plfa_plfa-part2-Confluence-4735" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-4736" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-4738" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-4739" href="../Untyped/#plfa_plfa-part2-Untyped-10164" class="InductiveConstructor">ζ</a> <a id="plfa_plfa-part2-Confluence-4741" href="../Confluence/#plfa_plfa-part2-Confluence-4741" class="Bound">r</a><a id="plfa_plfa-part2-Confluence-4742" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-4744" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-4746" href="../Confluence/#plfa_plfa-part2-Confluence-2734" class="InductiveConstructor">pabs</a> <a id="plfa_plfa-part2-Confluence-4751" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-4752" href="../Confluence/#plfa_plfa-part2-Confluence-4457" class="Function">beta-par</a> <a id="plfa_plfa-part2-Confluence-4761" href="../Confluence/#plfa_plfa-part2-Confluence-4741" class="Bound">r</a><a id="plfa_plfa-part2-Confluence-4762" class="Symbol">)</a>
</pre><p>With this lemma in hand we complete the only-if direction, that <code>M —↠ N</code> implies <code>M ⇛* N</code>. The proof is a straightforward induction on the reduction sequence <code>M —↠ N</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-betas-pars"></a><a id="plfa_plfa-part2-Confluence-4946" href="../Confluence/#plfa_plfa-part2-Confluence-4946" class="Function">betas-pars</a> <a id="plfa_plfa-part2-Confluence-4957" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-4959" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-4961" href="../Confluence/#plfa_plfa-part2-Confluence-4961" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-4963" href="../Confluence/#plfa_plfa-part2-Confluence-4963" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-4964" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-4966" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-4967" href="../Confluence/#plfa_plfa-part2-Confluence-4967" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-4969" href="../Confluence/#plfa_plfa-part2-Confluence-4969" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-4971" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-4973" href="../Confluence/#plfa_plfa-part2-Confluence-4961" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-4975" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-4977" href="../Confluence/#plfa_plfa-part2-Confluence-4963" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-4978" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Confluence-4982" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-4984" href="../Confluence/#plfa_plfa-part2-Confluence-4967" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-4986" href="../Untyped/#plfa_plfa-part2-Untyped-10958" class="Datatype Operator">—↠</a> <a id="plfa_plfa-part2-Confluence-4989" href="../Confluence/#plfa_plfa-part2-Confluence-4969" class="Bound">N</a>
    <a id="plfa_plfa-part2-Confluence-4995" class="Comment">------</a>
  <a id="plfa_plfa-part2-Confluence-5004" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-5006" href="../Confluence/#plfa_plfa-part2-Confluence-4967" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-5008" href="../Confluence/#plfa_plfa-part2-Confluence-3732" class="Datatype Operator">⇛*</a> <a id="plfa_plfa-part2-Confluence-5011" href="../Confluence/#plfa_plfa-part2-Confluence-4969" class="Bound">N</a>
<a id="plfa_plfa-part2-Confluence-5013" href="../Confluence/#plfa_plfa-part2-Confluence-4946" class="Function">betas-pars</a> <a id="plfa_plfa-part2-Confluence-5024" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5025" href="../Confluence/#plfa_plfa-part2-Confluence-5025" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-5026" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5028" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5029" href="../Confluence/#plfa_plfa-part2-Confluence-5029" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-5030" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5032" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5033" href="../Confluence/#plfa_plfa-part2-Confluence-5033" class="Bound">M₁</a><a id="plfa_plfa-part2-Confluence-5035" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5037" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5038" class="DottedPattern Symbol">.</a><a id="plfa_plfa-part2-Confluence-5039" href="../Confluence/#plfa_plfa-part2-Confluence-5033" class="DottedPattern Bound">M₁</a><a id="plfa_plfa-part2-Confluence-5041" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5043" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-5044" href="../Confluence/#plfa_plfa-part2-Confluence-5033" class="Bound">M₁</a> <a id="plfa_plfa-part2-Confluence-5047" href="../Untyped/#plfa_plfa-part2-Untyped-11004" class="InductiveConstructor Operator">∎</a><a id="plfa_plfa-part2-Confluence-5048" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-5050" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-5052" href="../Confluence/#plfa_plfa-part2-Confluence-5033" class="Bound">M₁</a> <a id="plfa_plfa-part2-Confluence-5055" href="../Confluence/#plfa_plfa-part2-Confluence-3782" class="InductiveConstructor Operator">∎</a>
<a id="plfa_plfa-part2-Confluence-5057" href="../Confluence/#plfa_plfa-part2-Confluence-4946" class="Function">betas-pars</a> <a id="plfa_plfa-part2-Confluence-5068" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5069" href="../Confluence/#plfa_plfa-part2-Confluence-5069" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-5070" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5072" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5073" href="../Confluence/#plfa_plfa-part2-Confluence-5073" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-5074" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5076" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5077" class="DottedPattern Symbol">.</a><a id="plfa_plfa-part2-Confluence-5078" href="../Confluence/#plfa_plfa-part2-Confluence-5086" class="DottedPattern Bound">L</a><a id="plfa_plfa-part2-Confluence-5079" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5081" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5082" href="../Confluence/#plfa_plfa-part2-Confluence-5082" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-5083" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5085" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-5086" href="../Confluence/#plfa_plfa-part2-Confluence-5086" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-5088" href="../Untyped/#plfa_plfa-part2-Untyped-11146" class="InductiveConstructor Operator">—→⟨</a> <a id="plfa_plfa-part2-Confluence-5092" href="../Confluence/#plfa_plfa-part2-Confluence-5092" class="Bound">b</a> <a id="plfa_plfa-part2-Confluence-5094" href="../Untyped/#plfa_plfa-part2-Untyped-11146" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-5096" href="../Confluence/#plfa_plfa-part2-Confluence-5096" class="Bound">bs</a><a id="plfa_plfa-part2-Confluence-5098" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-5100" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Confluence-5105" href="../Confluence/#plfa_plfa-part2-Confluence-5086" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-5107" href="../Confluence/#plfa_plfa-part2-Confluence-3838" class="InductiveConstructor Operator">⇛⟨</a> <a id="plfa_plfa-part2-Confluence-5110" href="../Confluence/#plfa_plfa-part2-Confluence-4457" class="Function">beta-par</a> <a id="plfa_plfa-part2-Confluence-5119" href="../Confluence/#plfa_plfa-part2-Confluence-5092" class="Bound">b</a> <a id="plfa_plfa-part2-Confluence-5121" href="../Confluence/#plfa_plfa-part2-Confluence-3838" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-5123" href="../Confluence/#plfa_plfa-part2-Confluence-4946" class="Function">betas-pars</a> <a id="plfa_plfa-part2-Confluence-5134" href="../Confluence/#plfa_plfa-part2-Confluence-5096" class="Bound">bs</a>
</pre><p>Now for the other direction, that <code>M ⇛* N</code> implies <code>M —↠ N</code>. The proof of this direction is a bit different because it’s not the case that <code>M ⇛ N</code> implies <code>M —→ N</code>. After all, <code>M ⇛ N</code> performs many reductions. So instead we shall prove that <code>M ⇛ N</code> implies <code>M —↠ N</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-par-betas"></a><a id="plfa_plfa-part2-Confluence-5419" href="../Confluence/#plfa_plfa-part2-Confluence-5419" class="Function">par-betas</a> <a id="plfa_plfa-part2-Confluence-5429" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-5431" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-5433" href="../Confluence/#plfa_plfa-part2-Confluence-5433" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-5435" href="../Confluence/#plfa_plfa-part2-Confluence-5435" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-5436" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-5438" href="../Confluence/#plfa_plfa-part2-Confluence-5438" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-5440" href="../Confluence/#plfa_plfa-part2-Confluence-5440" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-5442" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-5444" href="../Confluence/#plfa_plfa-part2-Confluence-5433" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-5446" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-5448" href="../Confluence/#plfa_plfa-part2-Confluence-5435" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-5449" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Confluence-5453" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-5455" href="../Confluence/#plfa_plfa-part2-Confluence-5438" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-5457" href="../Confluence/#plfa_plfa-part2-Confluence-2621" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-5459" href="../Confluence/#plfa_plfa-part2-Confluence-5440" class="Bound">N</a>
    <a id="plfa_plfa-part2-Confluence-5465" class="Comment">------</a>
  <a id="plfa_plfa-part2-Confluence-5474" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-5476" href="../Confluence/#plfa_plfa-part2-Confluence-5438" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-5478" href="../Untyped/#plfa_plfa-part2-Untyped-10958" class="Datatype Operator">—↠</a> <a id="plfa_plfa-part2-Confluence-5481" href="../Confluence/#plfa_plfa-part2-Confluence-5440" class="Bound">N</a>
<a id="plfa_plfa-part2-Confluence-5483" href="../Confluence/#plfa_plfa-part2-Confluence-5419" class="Function">par-betas</a> <a id="plfa_plfa-part2-Confluence-5493" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5494" href="../Confluence/#plfa_plfa-part2-Confluence-5494" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-5495" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5497" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5498" href="../Confluence/#plfa_plfa-part2-Confluence-5498" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-5499" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5501" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5502" class="DottedPattern Symbol">.(</a><a id="plfa_plfa-part2-Confluence-5504" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="DottedPattern InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Confluence-5506" class="DottedPattern Symbol">_)</a><a id="plfa_plfa-part2-Confluence-5508" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5510" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-5511" href="../Confluence/#plfa_plfa-part2-Confluence-2670" class="InductiveConstructor">pvar</a><a id="plfa_plfa-part2-Confluence-5515" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5516" class="Argument">x</a> <a id="plfa_plfa-part2-Confluence-5518" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-5520" href="../Confluence/#plfa_plfa-part2-Confluence-5520" class="Bound">x</a><a id="plfa_plfa-part2-Confluence-5521" class="Symbol">})</a> <a id="plfa_plfa-part2-Confluence-5524" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-5526" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-5527" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Confluence-5529" href="../Confluence/#plfa_plfa-part2-Confluence-5520" class="Bound">x</a><a id="plfa_plfa-part2-Confluence-5530" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-5532" href="../Untyped/#plfa_plfa-part2-Untyped-11004" class="InductiveConstructor Operator">∎</a>
<a id="plfa_plfa-part2-Confluence-5534" href="../Confluence/#plfa_plfa-part2-Confluence-5419" class="Function">par-betas</a> <a id="plfa_plfa-part2-Confluence-5544" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5545" href="../Confluence/#plfa_plfa-part2-Confluence-5545" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-5546" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5548" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5549" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-5550" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5552" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5553" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-5555" href="../Confluence/#plfa_plfa-part2-Confluence-5555" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-5556" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5558" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-5559" href="../Confluence/#plfa_plfa-part2-Confluence-2734" class="InductiveConstructor">pabs</a> <a id="plfa_plfa-part2-Confluence-5564" href="../Confluence/#plfa_plfa-part2-Confluence-5564" class="Bound">p</a><a id="plfa_plfa-part2-Confluence-5565" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-5567" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-5569" href="../Untyped/#plfa_plfa-part2-Untyped-23884" class="Function">abs-cong</a> <a id="plfa_plfa-part2-Confluence-5578" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-5579" href="../Confluence/#plfa_plfa-part2-Confluence-5419" class="Function">par-betas</a> <a id="plfa_plfa-part2-Confluence-5589" href="../Confluence/#plfa_plfa-part2-Confluence-5564" class="Bound">p</a><a id="plfa_plfa-part2-Confluence-5590" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-5592" href="../Confluence/#plfa_plfa-part2-Confluence-5419" class="Function">par-betas</a> <a id="plfa_plfa-part2-Confluence-5602" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5603" href="../Confluence/#plfa_plfa-part2-Confluence-5603" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-5604" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5606" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5607" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-5608" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5610" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5611" href="../Confluence/#plfa_plfa-part2-Confluence-5611" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-5613" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-5615" href="../Confluence/#plfa_plfa-part2-Confluence-5615" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-5616" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5618" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-5619" href="../Confluence/#plfa_plfa-part2-Confluence-2814" class="InductiveConstructor">papp</a> <a id="plfa_plfa-part2-Confluence-5624" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5625" class="Argument">L</a> <a id="plfa_plfa-part2-Confluence-5627" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-5629" href="../Confluence/#plfa_plfa-part2-Confluence-5611" class="Bound">L</a><a id="plfa_plfa-part2-Confluence-5630" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-5632" href="../Confluence/#plfa_plfa-part2-Confluence-5632" class="Bound">L′</a><a id="plfa_plfa-part2-Confluence-5634" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-5636" href="../Confluence/#plfa_plfa-part2-Confluence-5615" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-5637" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-5639" href="../Confluence/#plfa_plfa-part2-Confluence-5639" class="Bound">M′</a><a id="plfa_plfa-part2-Confluence-5641" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5643" href="../Confluence/#plfa_plfa-part2-Confluence-5643" class="Bound">p₁</a> <a id="plfa_plfa-part2-Confluence-5646" href="../Confluence/#plfa_plfa-part2-Confluence-5646" class="Bound">p₂</a><a id="plfa_plfa-part2-Confluence-5648" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-5650" class="Symbol">=</a>
    <a id="plfa_plfa-part2-Confluence-5656" href="../Untyped/#plfa_plfa-part2-Untyped-11188" class="Function Operator">begin</a>
    <a id="plfa_plfa-part2-Confluence-5666" href="../Confluence/#plfa_plfa-part2-Confluence-5611" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-5668" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-5670" href="../Confluence/#plfa_plfa-part2-Confluence-5615" class="Bound">M</a>   <a id="plfa_plfa-part2-Confluence-5674" href="../Untyped/#plfa_plfa-part2-Untyped-21979" class="Function Operator">—↠⟨</a> <a id="plfa_plfa-part2-Confluence-5678" href="../Untyped/#plfa_plfa-part2-Untyped-22879" class="Function">appL-cong</a><a id="plfa_plfa-part2-Confluence-5687" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5688" class="Argument">M</a> <a id="plfa_plfa-part2-Confluence-5690" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-5692" href="../Confluence/#plfa_plfa-part2-Confluence-5615" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-5693" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5695" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-5696" href="../Confluence/#plfa_plfa-part2-Confluence-5419" class="Function">par-betas</a> <a id="plfa_plfa-part2-Confluence-5706" href="../Confluence/#plfa_plfa-part2-Confluence-5643" class="Bound">p₁</a><a id="plfa_plfa-part2-Confluence-5708" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-5710" href="../Untyped/#plfa_plfa-part2-Untyped-21979" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part2-Confluence-5716" href="../Confluence/#plfa_plfa-part2-Confluence-5632" class="Bound">L′</a> <a id="plfa_plfa-part2-Confluence-5719" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-5721" href="../Confluence/#plfa_plfa-part2-Confluence-5615" class="Bound">M</a>  <a id="plfa_plfa-part2-Confluence-5724" href="../Untyped/#plfa_plfa-part2-Untyped-21979" class="Function Operator">—↠⟨</a> <a id="plfa_plfa-part2-Confluence-5728" href="../Untyped/#plfa_plfa-part2-Untyped-23652" class="Function">appR-cong</a> <a id="plfa_plfa-part2-Confluence-5738" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-5739" href="../Confluence/#plfa_plfa-part2-Confluence-5419" class="Function">par-betas</a> <a id="plfa_plfa-part2-Confluence-5749" href="../Confluence/#plfa_plfa-part2-Confluence-5646" class="Bound">p₂</a><a id="plfa_plfa-part2-Confluence-5751" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-5753" href="../Untyped/#plfa_plfa-part2-Untyped-21979" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part2-Confluence-5759" href="../Confluence/#plfa_plfa-part2-Confluence-5632" class="Bound">L′</a> <a id="plfa_plfa-part2-Confluence-5762" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-5764" href="../Confluence/#plfa_plfa-part2-Confluence-5639" class="Bound">M′</a>
    <a id="plfa_plfa-part2-Confluence-5771" href="../Untyped/#plfa_plfa-part2-Untyped-11004" class="InductiveConstructor Operator">∎</a>
<a id="plfa_plfa-part2-Confluence-5773" href="../Confluence/#plfa_plfa-part2-Confluence-5419" class="Function">par-betas</a> <a id="plfa_plfa-part2-Confluence-5783" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5784" href="../Confluence/#plfa_plfa-part2-Confluence-5784" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-5785" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5787" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5788" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-5789" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5791" class="Symbol">{(</a><a id="plfa_plfa-part2-Confluence-5793" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-5795" href="../Confluence/#plfa_plfa-part2-Confluence-5795" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-5796" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-5798" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-5800" href="../Confluence/#plfa_plfa-part2-Confluence-5800" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-5801" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5803" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-5804" href="../Confluence/#plfa_plfa-part2-Confluence-2920" class="InductiveConstructor">pbeta</a><a id="plfa_plfa-part2-Confluence-5809" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5810" class="Argument">N′</a> <a id="plfa_plfa-part2-Confluence-5813" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-5815" href="../Confluence/#plfa_plfa-part2-Confluence-5815" class="Bound">N′</a><a id="plfa_plfa-part2-Confluence-5817" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-5819" class="Argument">M′</a> <a id="plfa_plfa-part2-Confluence-5822" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-5824" href="../Confluence/#plfa_plfa-part2-Confluence-5824" class="Bound">M′</a><a id="plfa_plfa-part2-Confluence-5826" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5828" href="../Confluence/#plfa_plfa-part2-Confluence-5828" class="Bound">p₁</a> <a id="plfa_plfa-part2-Confluence-5831" href="../Confluence/#plfa_plfa-part2-Confluence-5831" class="Bound">p₂</a><a id="plfa_plfa-part2-Confluence-5833" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-5835" class="Symbol">=</a>
    <a id="plfa_plfa-part2-Confluence-5841" href="../Untyped/#plfa_plfa-part2-Untyped-11188" class="Function Operator">begin</a>
    <a id="plfa_plfa-part2-Confluence-5851" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-5852" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-5854" href="../Confluence/#plfa_plfa-part2-Confluence-5795" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-5855" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-5857" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-5859" href="../Confluence/#plfa_plfa-part2-Confluence-5800" class="Bound">M</a>                    <a id="plfa_plfa-part2-Confluence-5880" href="../Untyped/#plfa_plfa-part2-Untyped-21979" class="Function Operator">—↠⟨</a> <a id="plfa_plfa-part2-Confluence-5884" href="../Untyped/#plfa_plfa-part2-Untyped-22879" class="Function">appL-cong</a><a id="plfa_plfa-part2-Confluence-5893" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5894" class="Argument">M</a> <a id="plfa_plfa-part2-Confluence-5896" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-5898" href="../Confluence/#plfa_plfa-part2-Confluence-5800" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-5899" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5901" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-5902" href="../Untyped/#plfa_plfa-part2-Untyped-23884" class="Function">abs-cong</a> <a id="plfa_plfa-part2-Confluence-5911" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-5912" href="../Confluence/#plfa_plfa-part2-Confluence-5419" class="Function">par-betas</a> <a id="plfa_plfa-part2-Confluence-5922" href="../Confluence/#plfa_plfa-part2-Confluence-5828" class="Bound">p₁</a><a id="plfa_plfa-part2-Confluence-5924" class="Symbol">))</a> <a id="plfa_plfa-part2-Confluence-5927" href="../Untyped/#plfa_plfa-part2-Untyped-21979" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part2-Confluence-5933" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-5934" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-5936" href="../Confluence/#plfa_plfa-part2-Confluence-5815" class="Bound">N′</a><a id="plfa_plfa-part2-Confluence-5938" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-5940" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-5942" href="../Confluence/#plfa_plfa-part2-Confluence-5800" class="Bound">M</a>                   <a id="plfa_plfa-part2-Confluence-5962" href="../Untyped/#plfa_plfa-part2-Untyped-21979" class="Function Operator">—↠⟨</a> <a id="plfa_plfa-part2-Confluence-5966" href="../Untyped/#plfa_plfa-part2-Untyped-23652" class="Function">appR-cong</a><a id="plfa_plfa-part2-Confluence-5975" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-5976" class="Argument">L</a> <a id="plfa_plfa-part2-Confluence-5978" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-5980" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-5982" href="../Confluence/#plfa_plfa-part2-Confluence-5815" class="Bound">N′</a><a id="plfa_plfa-part2-Confluence-5984" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-5986" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-5987" href="../Confluence/#plfa_plfa-part2-Confluence-5419" class="Function">par-betas</a> <a id="plfa_plfa-part2-Confluence-5997" href="../Confluence/#plfa_plfa-part2-Confluence-5831" class="Bound">p₂</a><a id="plfa_plfa-part2-Confluence-5999" class="Symbol">)</a>  <a id="plfa_plfa-part2-Confluence-6002" href="../Untyped/#plfa_plfa-part2-Untyped-21979" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part2-Confluence-6008" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-6009" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-6011" href="../Confluence/#plfa_plfa-part2-Confluence-5815" class="Bound">N′</a><a id="plfa_plfa-part2-Confluence-6013" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-6015" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-6017" href="../Confluence/#plfa_plfa-part2-Confluence-5824" class="Bound">M′</a>                  <a id="plfa_plfa-part2-Confluence-6037" href="../Untyped/#plfa_plfa-part2-Untyped-11146" class="InductiveConstructor Operator">—→⟨</a> <a id="plfa_plfa-part2-Confluence-6041" href="../Untyped/#plfa_plfa-part2-Untyped-10056" class="InductiveConstructor">β</a> <a id="plfa_plfa-part2-Confluence-6043" href="../Untyped/#plfa_plfa-part2-Untyped-11146" class="InductiveConstructor Operator">⟩</a>
     <a id="plfa_plfa-part2-Confluence-6050" href="../Confluence/#plfa_plfa-part2-Confluence-5815" class="Bound">N′</a> <a id="plfa_plfa-part2-Confluence-6053" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">[</a> <a id="plfa_plfa-part2-Confluence-6055" href="../Confluence/#plfa_plfa-part2-Confluence-5824" class="Bound">M′</a> <a id="plfa_plfa-part2-Confluence-6058" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">]</a>
    <a id="plfa_plfa-part2-Confluence-6064" href="../Untyped/#plfa_plfa-part2-Untyped-11004" class="InductiveConstructor Operator">∎</a>
</pre><p>The proof is by induction on <code>M ⇛ N</code>.</p><ul><li><p>Suppose <code>x ⇛ x</code>. We immediately have <code>x —↠ x</code>.</p></li><li><p>Suppose <code>ƛ N ⇛ ƛ N′</code> because <code>N ⇛ N′</code>. By the induction hypothesis we have <code>N —↠ N′</code>. We conclude that <code>ƛ N —↠ ƛ N′</code> because <code>—↠</code> is a congruence.</p></li><li><p>Suppose <code>L · M ⇛ L′ · M′</code> because <code>L ⇛ L′</code> and <code>M ⇛ M′</code>. By the induction hypothesis, we have <code>L —↠ L′</code> and <code>M —↠ M′</code>. So <code>L · M —↠ L′ · M</code> and then <code>L′ · M —↠ L′ · M′</code> because <code>—↠</code> is a congruence.</p></li><li><p>Suppose <code>(ƛ N) · M ⇛ N′ [ M′ ]</code> because <code>N ⇛ N′</code> and <code>M ⇛ M′</code>. By similar reasoning, we have <code>(ƛ N) · M —↠ (ƛ N′) · M′</code> which we can following with the β reduction <code>(ƛ N′) · M′ —→ N′ [ M′ ]</code>.</p></li></ul><p>With this lemma in hand, we complete the proof that <code>M ⇛* N</code> implies <code>M —↠ N</code> with a simple induction on <code>M ⇛* N</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-pars-betas"></a><a id="plfa_plfa-part2-Confluence-6852" href="../Confluence/#plfa_plfa-part2-Confluence-6852" class="Function">pars-betas</a> <a id="plfa_plfa-part2-Confluence-6863" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-6865" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-6867" href="../Confluence/#plfa_plfa-part2-Confluence-6867" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-6869" href="../Confluence/#plfa_plfa-part2-Confluence-6869" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-6870" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-6872" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-6873" href="../Confluence/#plfa_plfa-part2-Confluence-6873" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-6875" href="../Confluence/#plfa_plfa-part2-Confluence-6875" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-6877" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-6879" href="../Confluence/#plfa_plfa-part2-Confluence-6867" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-6881" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-6883" href="../Confluence/#plfa_plfa-part2-Confluence-6869" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-6884" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Confluence-6888" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-6890" href="../Confluence/#plfa_plfa-part2-Confluence-6873" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-6892" href="../Confluence/#plfa_plfa-part2-Confluence-3732" class="Datatype Operator">⇛*</a> <a id="plfa_plfa-part2-Confluence-6895" href="../Confluence/#plfa_plfa-part2-Confluence-6875" class="Bound">N</a>
    <a id="plfa_plfa-part2-Confluence-6901" class="Comment">------</a>
  <a id="plfa_plfa-part2-Confluence-6910" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-6912" href="../Confluence/#plfa_plfa-part2-Confluence-6873" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-6914" href="../Untyped/#plfa_plfa-part2-Untyped-10958" class="Datatype Operator">—↠</a> <a id="plfa_plfa-part2-Confluence-6917" href="../Confluence/#plfa_plfa-part2-Confluence-6875" class="Bound">N</a>
<a id="plfa_plfa-part2-Confluence-6919" href="../Confluence/#plfa_plfa-part2-Confluence-6852" class="Function">pars-betas</a> <a id="plfa_plfa-part2-Confluence-6930" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-6931" href="../Confluence/#plfa_plfa-part2-Confluence-6931" class="Bound">M₁</a> <a id="plfa_plfa-part2-Confluence-6934" href="../Confluence/#plfa_plfa-part2-Confluence-3782" class="InductiveConstructor Operator">∎</a><a id="plfa_plfa-part2-Confluence-6935" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-6937" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-6939" href="../Confluence/#plfa_plfa-part2-Confluence-6931" class="Bound">M₁</a> <a id="plfa_plfa-part2-Confluence-6942" href="../Untyped/#plfa_plfa-part2-Untyped-11004" class="InductiveConstructor Operator">∎</a>
<a id="plfa_plfa-part2-Confluence-6944" href="../Confluence/#plfa_plfa-part2-Confluence-6852" class="Function">pars-betas</a> <a id="plfa_plfa-part2-Confluence-6955" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-6956" href="../Confluence/#plfa_plfa-part2-Confluence-6956" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-6958" href="../Confluence/#plfa_plfa-part2-Confluence-3838" class="InductiveConstructor Operator">⇛⟨</a> <a id="plfa_plfa-part2-Confluence-6961" href="../Confluence/#plfa_plfa-part2-Confluence-6961" class="Bound">p</a> <a id="plfa_plfa-part2-Confluence-6963" href="../Confluence/#plfa_plfa-part2-Confluence-3838" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-6965" href="../Confluence/#plfa_plfa-part2-Confluence-6965" class="Bound">ps</a><a id="plfa_plfa-part2-Confluence-6967" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-6969" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-6971" href="../Untyped/#plfa_plfa-part2-Untyped-21705" class="Function">—↠-trans</a> <a id="plfa_plfa-part2-Confluence-6980" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-6981" href="../Confluence/#plfa_plfa-part2-Confluence-5419" class="Function">par-betas</a> <a id="plfa_plfa-part2-Confluence-6991" href="../Confluence/#plfa_plfa-part2-Confluence-6961" class="Bound">p</a><a id="plfa_plfa-part2-Confluence-6992" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-6994" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-6995" href="../Confluence/#plfa_plfa-part2-Confluence-6852" class="Function">pars-betas</a> <a id="plfa_plfa-part2-Confluence-7006" href="../Confluence/#plfa_plfa-part2-Confluence-6965" class="Bound">ps</a><a id="plfa_plfa-part2-Confluence-7008" class="Symbol">)</a>
</pre><h2 id="substitution-lemma-for-parallel-reduction">Substitution lemma for parallel reduction</h2><p>Our next goal is to prove the diamond property for parallel reduction. But to do that, we need to prove that substitution respects parallel reduction. That is, if <code>N ⇛ N′</code> and <code>M ⇛ M′</code>, then <code>N [ M ] ⇛ N′ [ M′ ]</code>. We cannot prove this directly by induction, so we generalize it to: if <code>N ⇛ N′</code> and the substitution <code>σ</code> pointwise parallel reduces to <code>τ</code>, then <code>subst σ N ⇛ subst τ N′</code>. We define the notion of pointwise parallel reduction of a substitution as follows.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-par-subst"></a><a id="plfa_plfa-part2-Confluence-7539" href="../Confluence/#plfa_plfa-part2-Confluence-7539" class="Function">par-subst</a> <a id="plfa_plfa-part2-Confluence-7549" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-7551" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-7553" href="../Confluence/#plfa_plfa-part2-Confluence-7553" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-7555" href="../Confluence/#plfa_plfa-part2-Confluence-7555" class="Bound">Δ</a><a id="plfa_plfa-part2-Confluence-7556" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-7558" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-7560" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Confluence-7566" href="../Confluence/#plfa_plfa-part2-Confluence-7553" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-7568" href="../Confluence/#plfa_plfa-part2-Confluence-7555" class="Bound">Δ</a> <a id="plfa_plfa-part2-Confluence-7570" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-7572" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Confluence-7578" href="../Confluence/#plfa_plfa-part2-Confluence-7553" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-7580" href="../Confluence/#plfa_plfa-part2-Confluence-7555" class="Bound">Δ</a> <a id="plfa_plfa-part2-Confluence-7582" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-7584" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="plfa_plfa-part2-Confluence-7588" href="../Confluence/#plfa_plfa-part2-Confluence-7539" class="Function">par-subst</a> <a id="plfa_plfa-part2-Confluence-7598" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-7599" href="../Confluence/#plfa_plfa-part2-Confluence-7599" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-7600" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-7602" href="../Confluence/#plfa_plfa-part2-Confluence-7602" class="Bound">Δ</a><a id="plfa_plfa-part2-Confluence-7603" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-7605" href="../Confluence/#plfa_plfa-part2-Confluence-7605" class="Bound">σ</a> <a id="plfa_plfa-part2-Confluence-7607" href="../Confluence/#plfa_plfa-part2-Confluence-7607" class="Bound">σ′</a> <a id="plfa_plfa-part2-Confluence-7610" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-7612" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-7614" href="../Confluence/#plfa_plfa-part2-Confluence-7614" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-7615" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-7617" href="../Confluence/#plfa_plfa-part2-Confluence-7617" class="Bound">x</a> <a id="plfa_plfa-part2-Confluence-7619" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-7621" href="../Confluence/#plfa_plfa-part2-Confluence-7599" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-7623" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Confluence-7625" href="../Confluence/#plfa_plfa-part2-Confluence-7614" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-7626" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-7628" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-7630" href="../Confluence/#plfa_plfa-part2-Confluence-7605" class="Bound">σ</a> <a id="plfa_plfa-part2-Confluence-7632" href="../Confluence/#plfa_plfa-part2-Confluence-7617" class="Bound">x</a> <a id="plfa_plfa-part2-Confluence-7634" href="../Confluence/#plfa_plfa-part2-Confluence-2621" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-7636" href="../Confluence/#plfa_plfa-part2-Confluence-7607" class="Bound">σ′</a> <a id="plfa_plfa-part2-Confluence-7639" href="../Confluence/#plfa_plfa-part2-Confluence-7617" class="Bound">x</a>
</pre><p>In the type of <code>par-subst</code> we make use of the shorthand <code>Subst Γ Δ</code> for the type of a substitution. Similarly, we shall make use of <code>Rename Γ Δ</code> for the type of a renaming. Both are defined in Chapter <a href="../Substitution/">Substitution</a> and have the following meaning.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-7919" href="../Confluence/#plfa_plfa-part2-Confluence-7919" class="Function">_</a> <a id="plfa_plfa-part2-Confluence-7921" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-7923" class="Symbol">∀(</a><a id="plfa_plfa-part2-Confluence-7925" href="../Confluence/#plfa_plfa-part2-Confluence-7925" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-7927" href="../Confluence/#plfa_plfa-part2-Confluence-7927" class="Bound">Δ</a> <a id="plfa_plfa-part2-Confluence-7929" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-7931" href="../Untyped/#plfa_plfa-part2-Untyped-2750" class="Datatype">Context</a><a id="plfa_plfa-part2-Confluence-7938" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-7940" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-7942" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Primitive.html#388" class="Primitive">Set₁</a>
<a id="plfa_plfa-part2-Confluence-7947" class="Symbol">_</a> <a id="plfa_plfa-part2-Confluence-7949" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-7951" class="Symbol">λ</a> <a id="plfa_plfa-part2-Confluence-7953" href="../Confluence/#plfa_plfa-part2-Confluence-7953" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-7955" href="../Confluence/#plfa_plfa-part2-Confluence-7955" class="Bound">Δ</a> <a id="plfa_plfa-part2-Confluence-7957" class="Symbol">→</a>   <a id="plfa_plfa-part2-Confluence-7961" href="../Substitution/#plfa_plfa-part2-Substitution-2133" class="Function">Rename</a> <a id="plfa_plfa-part2-Confluence-7968" href="../Confluence/#plfa_plfa-part2-Confluence-7953" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-7970" href="../Confluence/#plfa_plfa-part2-Confluence-7955" class="Bound">Δ</a> <a id="plfa_plfa-part2-Confluence-7972" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Confluence-7974" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-7976" href="../Confluence/#plfa_plfa-part2-Confluence-7976" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-7977" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-7979" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-7981" href="../Confluence/#plfa_plfa-part2-Confluence-7953" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-7983" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Confluence-7985" href="../Confluence/#plfa_plfa-part2-Confluence-7976" class="Bound">A</a> <a id="plfa_plfa-part2-Confluence-7987" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-7989" href="../Confluence/#plfa_plfa-part2-Confluence-7955" class="Bound">Δ</a> <a id="plfa_plfa-part2-Confluence-7991" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Confluence-7993" href="../Confluence/#plfa_plfa-part2-Confluence-7976" class="Bound">A</a>

<a id="plfa_plfa-part2-Confluence-7996" href="../Confluence/#plfa_plfa-part2-Confluence-7996" class="Function">_</a> <a id="plfa_plfa-part2-Confluence-7998" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-8000" class="Symbol">∀(</a><a id="plfa_plfa-part2-Confluence-8002" href="../Confluence/#plfa_plfa-part2-Confluence-8002" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-8004" href="../Confluence/#plfa_plfa-part2-Confluence-8004" class="Bound">Δ</a> <a id="plfa_plfa-part2-Confluence-8006" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-8008" href="../Untyped/#plfa_plfa-part2-Untyped-2750" class="Datatype">Context</a><a id="plfa_plfa-part2-Confluence-8015" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-8017" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-8019" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Primitive.html#388" class="Primitive">Set₁</a>
<a id="plfa_plfa-part2-Confluence-8024" class="Symbol">_</a> <a id="plfa_plfa-part2-Confluence-8026" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-8028" class="Symbol">λ</a> <a id="plfa_plfa-part2-Confluence-8030" href="../Confluence/#plfa_plfa-part2-Confluence-8030" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-8032" href="../Confluence/#plfa_plfa-part2-Confluence-8032" class="Bound">Δ</a> <a id="plfa_plfa-part2-Confluence-8034" class="Symbol">→</a>   <a id="plfa_plfa-part2-Confluence-8038" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Confluence-8044" href="../Confluence/#plfa_plfa-part2-Confluence-8030" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-8046" href="../Confluence/#plfa_plfa-part2-Confluence-8032" class="Bound">Δ</a> <a id="plfa_plfa-part2-Confluence-8048" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Confluence-8050" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-8052" href="../Confluence/#plfa_plfa-part2-Confluence-8052" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-8053" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-8055" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-8057" href="../Confluence/#plfa_plfa-part2-Confluence-8030" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-8059" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Confluence-8061" href="../Confluence/#plfa_plfa-part2-Confluence-8052" class="Bound">A</a> <a id="plfa_plfa-part2-Confluence-8063" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-8065" href="../Confluence/#plfa_plfa-part2-Confluence-8032" class="Bound">Δ</a> <a id="plfa_plfa-part2-Confluence-8067" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-8069" href="../Confluence/#plfa_plfa-part2-Confluence-8052" class="Bound">A</a>
</pre><p>Because substitution depends on the extension function <code>exts</code>, which in turn relies on <code>rename</code>, we start with a version of the substitution lemma, called <code>par-rename</code>, that is specialized to renamings. The proof of <code>par-rename</code> relies on the fact that renaming and substitution commute with one another, which is a lemma that we import from Chapter <a href="../Substitution/">Substitution</a> and restate here.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-rename-subst-commute"></a><a id="plfa_plfa-part2-Confluence-8485" href="../Confluence/#plfa_plfa-part2-Confluence-8485" class="Function">rename-subst-commute</a> <a id="plfa_plfa-part2-Confluence-8506" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-8508" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-8510" href="../Confluence/#plfa_plfa-part2-Confluence-8510" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-8512" href="../Confluence/#plfa_plfa-part2-Confluence-8512" class="Bound">Δ</a><a id="plfa_plfa-part2-Confluence-8513" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-8515" href="../Confluence/#plfa_plfa-part2-Confluence-8515" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-8517" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-8519" href="../Confluence/#plfa_plfa-part2-Confluence-8510" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-8521" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-8523" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-Confluence-8525" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-8527" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-8528" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-8530" href="../Confluence/#plfa_plfa-part2-Confluence-8530" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-8532" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-8534" href="../Confluence/#plfa_plfa-part2-Confluence-8510" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-8536" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-8538" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-8539" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-8541" href="../Confluence/#plfa_plfa-part2-Confluence-8541" class="Bound">ρ</a> <a id="plfa_plfa-part2-Confluence-8543" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-8545" href="../Substitution/#plfa_plfa-part2-Substitution-2133" class="Function">Rename</a> <a id="plfa_plfa-part2-Confluence-8552" href="../Confluence/#plfa_plfa-part2-Confluence-8510" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-8554" href="../Confluence/#plfa_plfa-part2-Confluence-8512" class="Bound">Δ</a> <a id="plfa_plfa-part2-Confluence-8556" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Confluence-8562" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-8564" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-8565" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Confluence-8572" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-8573" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Confluence-8577" href="../Confluence/#plfa_plfa-part2-Confluence-8541" class="Bound">ρ</a><a id="plfa_plfa-part2-Confluence-8578" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-8580" href="../Confluence/#plfa_plfa-part2-Confluence-8515" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-8581" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-8583" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">[</a> <a id="plfa_plfa-part2-Confluence-8585" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Confluence-8592" href="../Confluence/#plfa_plfa-part2-Confluence-8541" class="Bound">ρ</a> <a id="plfa_plfa-part2-Confluence-8594" href="../Confluence/#plfa_plfa-part2-Confluence-8530" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-8596" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">]</a> <a id="plfa_plfa-part2-Confluence-8598" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Confluence-8600" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Confluence-8607" href="../Confluence/#plfa_plfa-part2-Confluence-8541" class="Bound">ρ</a> <a id="plfa_plfa-part2-Confluence-8609" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-8610" href="../Confluence/#plfa_plfa-part2-Confluence-8515" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-8612" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">[</a> <a id="plfa_plfa-part2-Confluence-8614" href="../Confluence/#plfa_plfa-part2-Confluence-8530" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-8616" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">]</a><a id="plfa_plfa-part2-Confluence-8617" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-8619" href="../Confluence/#plfa_plfa-part2-Confluence-8485" class="Function">rename-subst-commute</a> <a id="plfa_plfa-part2-Confluence-8640" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-8641" class="Argument">N</a> <a id="plfa_plfa-part2-Confluence-8643" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-8645" href="../Confluence/#plfa_plfa-part2-Confluence-8645" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-8646" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-8648" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-8650" href="../Substitution/#plfa_plfa-part2-Substitution-27849" class="Function">plfa.part2.Substitution.rename-subst-commute</a> <a id="plfa_plfa-part2-Confluence-8695" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-8696" class="Argument">N</a> <a id="plfa_plfa-part2-Confluence-8698" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-8700" href="../Confluence/#plfa_plfa-part2-Confluence-8645" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-8701" class="Symbol">}</a>
</pre><p>Now for the <code>par-rename</code> lemma.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-par-rename"></a><a id="plfa_plfa-part2-Confluence-8749" href="../Confluence/#plfa_plfa-part2-Confluence-8749" class="Function">par-rename</a> <a id="plfa_plfa-part2-Confluence-8760" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-8762" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-8764" href="../Confluence/#plfa_plfa-part2-Confluence-8764" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-8766" href="../Confluence/#plfa_plfa-part2-Confluence-8766" class="Bound">Δ</a> <a id="plfa_plfa-part2-Confluence-8768" href="../Confluence/#plfa_plfa-part2-Confluence-8768" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-8769" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-8771" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-8772" href="../Confluence/#plfa_plfa-part2-Confluence-8772" class="Bound">ρ</a> <a id="plfa_plfa-part2-Confluence-8774" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-8776" href="../Substitution/#plfa_plfa-part2-Substitution-2133" class="Function">Rename</a> <a id="plfa_plfa-part2-Confluence-8783" href="../Confluence/#plfa_plfa-part2-Confluence-8764" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-8785" href="../Confluence/#plfa_plfa-part2-Confluence-8766" class="Bound">Δ</a><a id="plfa_plfa-part2-Confluence-8786" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-8788" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-8789" href="../Confluence/#plfa_plfa-part2-Confluence-8789" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-8791" href="../Confluence/#plfa_plfa-part2-Confluence-8791" class="Bound">M′</a> <a id="plfa_plfa-part2-Confluence-8794" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-8796" href="../Confluence/#plfa_plfa-part2-Confluence-8764" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-8798" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-8800" href="../Confluence/#plfa_plfa-part2-Confluence-8768" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-8801" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Confluence-8805" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-8807" href="../Confluence/#plfa_plfa-part2-Confluence-8789" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-8809" href="../Confluence/#plfa_plfa-part2-Confluence-2621" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-8811" href="../Confluence/#plfa_plfa-part2-Confluence-8791" class="Bound">M′</a>
    <a id="plfa_plfa-part2-Confluence-8818" class="Comment">------------------------</a>
  <a id="plfa_plfa-part2-Confluence-8845" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-8847" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Confluence-8854" href="../Confluence/#plfa_plfa-part2-Confluence-8772" class="Bound">ρ</a> <a id="plfa_plfa-part2-Confluence-8856" href="../Confluence/#plfa_plfa-part2-Confluence-8789" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-8858" href="../Confluence/#plfa_plfa-part2-Confluence-2621" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-8860" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Confluence-8867" href="../Confluence/#plfa_plfa-part2-Confluence-8772" class="Bound">ρ</a> <a id="plfa_plfa-part2-Confluence-8869" href="../Confluence/#plfa_plfa-part2-Confluence-8791" class="Bound">M′</a>
<a id="plfa_plfa-part2-Confluence-8872" href="../Confluence/#plfa_plfa-part2-Confluence-8749" class="Function">par-rename</a> <a id="plfa_plfa-part2-Confluence-8883" href="../Confluence/#plfa_plfa-part2-Confluence-2670" class="InductiveConstructor">pvar</a> <a id="plfa_plfa-part2-Confluence-8888" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-8890" href="../Confluence/#plfa_plfa-part2-Confluence-2670" class="InductiveConstructor">pvar</a>
<a id="plfa_plfa-part2-Confluence-8895" href="../Confluence/#plfa_plfa-part2-Confluence-8749" class="Function">par-rename</a> <a id="plfa_plfa-part2-Confluence-8906" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-8907" href="../Confluence/#plfa_plfa-part2-Confluence-2734" class="InductiveConstructor">pabs</a> <a id="plfa_plfa-part2-Confluence-8912" href="../Confluence/#plfa_plfa-part2-Confluence-8912" class="Bound">p</a><a id="plfa_plfa-part2-Confluence-8913" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-8915" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-8917" href="../Confluence/#plfa_plfa-part2-Confluence-2734" class="InductiveConstructor">pabs</a> <a id="plfa_plfa-part2-Confluence-8922" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-8923" href="../Confluence/#plfa_plfa-part2-Confluence-8749" class="Function">par-rename</a> <a id="plfa_plfa-part2-Confluence-8934" href="../Confluence/#plfa_plfa-part2-Confluence-8912" class="Bound">p</a><a id="plfa_plfa-part2-Confluence-8935" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-8937" href="../Confluence/#plfa_plfa-part2-Confluence-8749" class="Function">par-rename</a> <a id="plfa_plfa-part2-Confluence-8948" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-8949" href="../Confluence/#plfa_plfa-part2-Confluence-2814" class="InductiveConstructor">papp</a> <a id="plfa_plfa-part2-Confluence-8954" href="../Confluence/#plfa_plfa-part2-Confluence-8954" class="Bound">p₁</a> <a id="plfa_plfa-part2-Confluence-8957" href="../Confluence/#plfa_plfa-part2-Confluence-8957" class="Bound">p₂</a><a id="plfa_plfa-part2-Confluence-8959" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-8961" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-8963" href="../Confluence/#plfa_plfa-part2-Confluence-2814" class="InductiveConstructor">papp</a> <a id="plfa_plfa-part2-Confluence-8968" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-8969" href="../Confluence/#plfa_plfa-part2-Confluence-8749" class="Function">par-rename</a> <a id="plfa_plfa-part2-Confluence-8980" href="../Confluence/#plfa_plfa-part2-Confluence-8954" class="Bound">p₁</a><a id="plfa_plfa-part2-Confluence-8982" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-8984" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-8985" href="../Confluence/#plfa_plfa-part2-Confluence-8749" class="Function">par-rename</a> <a id="plfa_plfa-part2-Confluence-8996" href="../Confluence/#plfa_plfa-part2-Confluence-8957" class="Bound">p₂</a><a id="plfa_plfa-part2-Confluence-8998" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-9000" href="../Confluence/#plfa_plfa-part2-Confluence-8749" class="Function">par-rename</a> <a id="plfa_plfa-part2-Confluence-9011" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-9012" href="../Confluence/#plfa_plfa-part2-Confluence-9012" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-9013" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-9015" href="../Confluence/#plfa_plfa-part2-Confluence-9015" class="Bound">Δ</a><a id="plfa_plfa-part2-Confluence-9016" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-9018" href="../Confluence/#plfa_plfa-part2-Confluence-9018" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-9019" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-9021" href="../Confluence/#plfa_plfa-part2-Confluence-9021" class="Bound">ρ</a><a id="plfa_plfa-part2-Confluence-9022" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-9024" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-9025" href="../Confluence/#plfa_plfa-part2-Confluence-2920" class="InductiveConstructor">pbeta</a><a id="plfa_plfa-part2-Confluence-9030" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-9031" href="../Confluence/#plfa_plfa-part2-Confluence-9012" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-9032" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-9034" href="../Confluence/#plfa_plfa-part2-Confluence-9034" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-9035" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-9037" href="../Confluence/#plfa_plfa-part2-Confluence-9037" class="Bound">N′</a><a id="plfa_plfa-part2-Confluence-9039" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-9041" href="../Confluence/#plfa_plfa-part2-Confluence-9041" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-9042" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-9044" href="../Confluence/#plfa_plfa-part2-Confluence-9044" class="Bound">M′</a><a id="plfa_plfa-part2-Confluence-9046" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-9048" href="../Confluence/#plfa_plfa-part2-Confluence-9048" class="Bound">p₁</a> <a id="plfa_plfa-part2-Confluence-9051" href="../Confluence/#plfa_plfa-part2-Confluence-9051" class="Bound">p₂</a><a id="plfa_plfa-part2-Confluence-9053" class="Symbol">)</a>
    <a id="plfa_plfa-part2-Confluence-9059" class="Keyword">with</a> <a id="plfa_plfa-part2-Confluence-9064" href="../Confluence/#plfa_plfa-part2-Confluence-2920" class="InductiveConstructor">pbeta</a> <a id="plfa_plfa-part2-Confluence-9070" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-9071" href="../Confluence/#plfa_plfa-part2-Confluence-8749" class="Function">par-rename</a><a id="plfa_plfa-part2-Confluence-9081" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-9082" class="Argument">ρ</a> <a id="plfa_plfa-part2-Confluence-9084" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-9086" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Confluence-9090" href="../Confluence/#plfa_plfa-part2-Confluence-9021" class="Bound">ρ</a><a id="plfa_plfa-part2-Confluence-9091" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-9093" href="../Confluence/#plfa_plfa-part2-Confluence-9048" class="Bound">p₁</a><a id="plfa_plfa-part2-Confluence-9095" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-9097" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-9098" href="../Confluence/#plfa_plfa-part2-Confluence-8749" class="Function">par-rename</a><a id="plfa_plfa-part2-Confluence-9108" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-9109" class="Argument">ρ</a> <a id="plfa_plfa-part2-Confluence-9111" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-9113" href="../Confluence/#plfa_plfa-part2-Confluence-9021" class="Bound">ρ</a><a id="plfa_plfa-part2-Confluence-9114" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-9116" href="../Confluence/#plfa_plfa-part2-Confluence-9051" class="Bound">p₂</a><a id="plfa_plfa-part2-Confluence-9118" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-9120" class="Symbol">...</a> <a id="plfa_plfa-part2-Confluence-9124" class="Symbol">|</a> <a id="plfa_plfa-part2-Confluence-9126" href="../Confluence/#plfa_plfa-part2-Confluence-9126" class="Bound">G</a> <a id="plfa_plfa-part2-Confluence-9128" class="Keyword">rewrite</a> <a id="plfa_plfa-part2-Confluence-9136" href="../Confluence/#plfa_plfa-part2-Confluence-8485" class="Function">rename-subst-commute</a><a id="plfa_plfa-part2-Confluence-9156" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-9157" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-9158" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-9160" class="Bound">Δ</a><a id="plfa_plfa-part2-Confluence-9161" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-9163" class="Bound">N′</a><a id="plfa_plfa-part2-Confluence-9165" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-9167" class="Bound">M′</a><a id="plfa_plfa-part2-Confluence-9169" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-9171" class="Bound">ρ</a><a id="plfa_plfa-part2-Confluence-9172" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-9174" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-9176" href="../Confluence/#plfa_plfa-part2-Confluence-9126" class="Bound">G</a>

</pre><p>The proof is by induction on <code>M ⇛ M′</code>. The first three cases are straightforward so we just consider the last one for <code>pbeta</code>.</p><ul><li>Suppose <code>(ƛ N) · M ⇛ N′ [ M′ ]</code> because <code>N ⇛ N′</code> and <code>M ⇛ M′</code>. By the induction hypothesis, we have <code>rename (ext ρ) N ⇛ rename (ext ρ) N′</code> and <code>rename ρ M ⇛ rename ρ M′</code>. So by <code>pbeta</code> we have <code>(ƛ rename (ext ρ) N) · (rename ρ M) ⇛ (rename (ext ρ) N) [ rename ρ M ]</code>. However, to conclude we instead need parallel reduction to <code>rename ρ (N [ M ])</code>. But thankfully, renaming and substitution commute with one another.</li></ul><p>With the <code>par-rename</code> lemma in hand, it is straightforward to show that extending substitutions preserves the pointwise parallel reduction relation.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-par-subst-exts"></a><a id="plfa_plfa-part2-Confluence-9909" href="../Confluence/#plfa_plfa-part2-Confluence-9909" class="Function">par-subst-exts</a> <a id="plfa_plfa-part2-Confluence-9924" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-9926" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-9928" href="../Confluence/#plfa_plfa-part2-Confluence-9928" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-9930" href="../Confluence/#plfa_plfa-part2-Confluence-9930" class="Bound">Δ</a><a id="plfa_plfa-part2-Confluence-9931" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-9933" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-9934" href="../Confluence/#plfa_plfa-part2-Confluence-9934" class="Bound">σ</a> <a id="plfa_plfa-part2-Confluence-9936" href="../Confluence/#plfa_plfa-part2-Confluence-9936" class="Bound">τ</a> <a id="plfa_plfa-part2-Confluence-9938" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-9940" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Confluence-9946" href="../Confluence/#plfa_plfa-part2-Confluence-9928" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-9948" href="../Confluence/#plfa_plfa-part2-Confluence-9930" class="Bound">Δ</a><a id="plfa_plfa-part2-Confluence-9949" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Confluence-9953" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-9955" href="../Confluence/#plfa_plfa-part2-Confluence-7539" class="Function">par-subst</a> <a id="plfa_plfa-part2-Confluence-9965" href="../Confluence/#plfa_plfa-part2-Confluence-9934" class="Bound">σ</a> <a id="plfa_plfa-part2-Confluence-9967" href="../Confluence/#plfa_plfa-part2-Confluence-9936" class="Bound">τ</a>
    <a id="plfa_plfa-part2-Confluence-9973" class="Comment">------------------------------------------</a>
  <a id="plfa_plfa-part2-Confluence-10018" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-10020" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-10022" href="../Confluence/#plfa_plfa-part2-Confluence-10022" class="Bound">B</a><a id="plfa_plfa-part2-Confluence-10023" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10025" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-10027" href="../Confluence/#plfa_plfa-part2-Confluence-7539" class="Function">par-subst</a> <a id="plfa_plfa-part2-Confluence-10037" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-10038" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Confluence-10043" href="../Confluence/#plfa_plfa-part2-Confluence-9934" class="Bound">σ</a> <a id="plfa_plfa-part2-Confluence-10045" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10046" class="Argument">B</a> <a id="plfa_plfa-part2-Confluence-10048" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-10050" href="../Confluence/#plfa_plfa-part2-Confluence-10022" class="Bound">B</a><a id="plfa_plfa-part2-Confluence-10051" class="Symbol">})</a> <a id="plfa_plfa-part2-Confluence-10054" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-10055" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Confluence-10060" href="../Confluence/#plfa_plfa-part2-Confluence-9936" class="Bound">τ</a><a id="plfa_plfa-part2-Confluence-10061" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-10063" href="../Confluence/#plfa_plfa-part2-Confluence-9909" class="Function">par-subst-exts</a> <a id="plfa_plfa-part2-Confluence-10078" href="../Confluence/#plfa_plfa-part2-Confluence-10078" class="Bound">s</a> <a id="plfa_plfa-part2-Confluence-10080" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10081" class="Argument">x</a> <a id="plfa_plfa-part2-Confluence-10083" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-10085" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Confluence-10086" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10088" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-10090" href="../Confluence/#plfa_plfa-part2-Confluence-2670" class="InductiveConstructor">pvar</a>
<a id="plfa_plfa-part2-Confluence-10095" href="../Confluence/#plfa_plfa-part2-Confluence-9909" class="Function">par-subst-exts</a> <a id="plfa_plfa-part2-Confluence-10110" href="../Confluence/#plfa_plfa-part2-Confluence-10110" class="Bound">s</a> <a id="plfa_plfa-part2-Confluence-10112" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10113" class="Argument">x</a> <a id="plfa_plfa-part2-Confluence-10115" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-10117" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Confluence-10119" href="../Confluence/#plfa_plfa-part2-Confluence-10119" class="Bound">x</a><a id="plfa_plfa-part2-Confluence-10120" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10122" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-10124" href="../Confluence/#plfa_plfa-part2-Confluence-8749" class="Function">par-rename</a> <a id="plfa_plfa-part2-Confluence-10135" href="../Confluence/#plfa_plfa-part2-Confluence-10110" class="Bound">s</a>
</pre><p>The next lemma that we need for proving that substitution respects parallel reduction is the following which states that simultaneous substitution commutes with single substitution. We import this lemma from Chapter <a href="../Substitution/">Substitution</a> and restate it below.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-subst-commute"></a><a id="plfa_plfa-part2-Confluence-10420" href="../Confluence/#plfa_plfa-part2-Confluence-10420" class="Function">subst-commute</a> <a id="plfa_plfa-part2-Confluence-10434" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-10436" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-10438" href="../Confluence/#plfa_plfa-part2-Confluence-10438" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-10440" href="../Confluence/#plfa_plfa-part2-Confluence-10440" class="Bound">Δ</a><a id="plfa_plfa-part2-Confluence-10441" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-10443" href="../Confluence/#plfa_plfa-part2-Confluence-10443" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-10445" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-10447" href="../Confluence/#plfa_plfa-part2-Confluence-10438" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-10449" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-10451" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-Confluence-10453" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-10455" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-10456" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-10458" href="../Confluence/#plfa_plfa-part2-Confluence-10458" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-10460" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-10462" href="../Confluence/#plfa_plfa-part2-Confluence-10438" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-10464" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-10466" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-10467" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-10469" href="../Confluence/#plfa_plfa-part2-Confluence-10469" class="Bound">σ</a> <a id="plfa_plfa-part2-Confluence-10471" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-10473" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Confluence-10479" href="../Confluence/#plfa_plfa-part2-Confluence-10438" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-10481" href="../Confluence/#plfa_plfa-part2-Confluence-10440" class="Bound">Δ</a> <a id="plfa_plfa-part2-Confluence-10483" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Confluence-10487" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-10489" href="../Untyped/#plfa_plfa-part2-Untyped-6759" class="Function">subst</a> <a id="plfa_plfa-part2-Confluence-10495" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-10496" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Confluence-10501" href="../Confluence/#plfa_plfa-part2-Confluence-10469" class="Bound">σ</a><a id="plfa_plfa-part2-Confluence-10502" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-10504" href="../Confluence/#plfa_plfa-part2-Confluence-10443" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-10506" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">[</a> <a id="plfa_plfa-part2-Confluence-10508" href="../Untyped/#plfa_plfa-part2-Untyped-6759" class="Function">subst</a> <a id="plfa_plfa-part2-Confluence-10514" href="../Confluence/#plfa_plfa-part2-Confluence-10469" class="Bound">σ</a> <a id="plfa_plfa-part2-Confluence-10516" href="../Confluence/#plfa_plfa-part2-Confluence-10458" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-10518" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">]</a> <a id="plfa_plfa-part2-Confluence-10520" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Confluence-10522" href="../Untyped/#plfa_plfa-part2-Untyped-6759" class="Function">subst</a> <a id="plfa_plfa-part2-Confluence-10528" href="../Confluence/#plfa_plfa-part2-Confluence-10469" class="Bound">σ</a> <a id="plfa_plfa-part2-Confluence-10530" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-10531" href="../Confluence/#plfa_plfa-part2-Confluence-10443" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-10533" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">[</a> <a id="plfa_plfa-part2-Confluence-10535" href="../Confluence/#plfa_plfa-part2-Confluence-10458" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-10537" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">]</a><a id="plfa_plfa-part2-Confluence-10538" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-10540" href="../Confluence/#plfa_plfa-part2-Confluence-10420" class="Function">subst-commute</a> <a id="plfa_plfa-part2-Confluence-10554" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10555" class="Argument">N</a> <a id="plfa_plfa-part2-Confluence-10557" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-10559" href="../Confluence/#plfa_plfa-part2-Confluence-10559" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-10560" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10562" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-10564" href="../Substitution/#plfa_plfa-part2-Substitution-26304" class="Function">plfa.part2.Substitution.subst-commute</a> <a id="plfa_plfa-part2-Confluence-10602" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10603" class="Argument">N</a> <a id="plfa_plfa-part2-Confluence-10605" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-10607" href="../Confluence/#plfa_plfa-part2-Confluence-10559" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-10608" class="Symbol">}</a>
</pre><p>We are ready to prove that substitution respects parallel reduction.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-subst-par"></a><a id="plfa_plfa-part2-Confluence-10693" href="../Confluence/#plfa_plfa-part2-Confluence-10693" class="Function">subst-par</a> <a id="plfa_plfa-part2-Confluence-10703" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-10705" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-10707" href="../Confluence/#plfa_plfa-part2-Confluence-10707" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-10709" href="../Confluence/#plfa_plfa-part2-Confluence-10709" class="Bound">Δ</a> <a id="plfa_plfa-part2-Confluence-10711" href="../Confluence/#plfa_plfa-part2-Confluence-10711" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-10712" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10714" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10715" href="../Confluence/#plfa_plfa-part2-Confluence-10715" class="Bound">σ</a> <a id="plfa_plfa-part2-Confluence-10717" href="../Confluence/#plfa_plfa-part2-Confluence-10717" class="Bound">τ</a> <a id="plfa_plfa-part2-Confluence-10719" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-10721" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Confluence-10727" href="../Confluence/#plfa_plfa-part2-Confluence-10707" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-10729" href="../Confluence/#plfa_plfa-part2-Confluence-10709" class="Bound">Δ</a><a id="plfa_plfa-part2-Confluence-10730" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10732" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10733" href="../Confluence/#plfa_plfa-part2-Confluence-10733" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-10735" href="../Confluence/#plfa_plfa-part2-Confluence-10735" class="Bound">M′</a> <a id="plfa_plfa-part2-Confluence-10738" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-10740" href="../Confluence/#plfa_plfa-part2-Confluence-10707" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-10742" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-10744" href="../Confluence/#plfa_plfa-part2-Confluence-10711" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-10745" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Confluence-10749" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-10751" href="../Confluence/#plfa_plfa-part2-Confluence-7539" class="Function">par-subst</a> <a id="plfa_plfa-part2-Confluence-10761" href="../Confluence/#plfa_plfa-part2-Confluence-10715" class="Bound">σ</a> <a id="plfa_plfa-part2-Confluence-10763" href="../Confluence/#plfa_plfa-part2-Confluence-10717" class="Bound">τ</a>  <a id="plfa_plfa-part2-Confluence-10766" class="Symbol">→</a>  <a id="plfa_plfa-part2-Confluence-10769" href="../Confluence/#plfa_plfa-part2-Confluence-10733" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-10771" href="../Confluence/#plfa_plfa-part2-Confluence-2621" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-10773" href="../Confluence/#plfa_plfa-part2-Confluence-10735" class="Bound">M′</a>
    <a id="plfa_plfa-part2-Confluence-10780" class="Comment">--------------------------</a>
  <a id="plfa_plfa-part2-Confluence-10809" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-10811" href="../Untyped/#plfa_plfa-part2-Untyped-6759" class="Function">subst</a> <a id="plfa_plfa-part2-Confluence-10817" href="../Confluence/#plfa_plfa-part2-Confluence-10715" class="Bound">σ</a> <a id="plfa_plfa-part2-Confluence-10819" href="../Confluence/#plfa_plfa-part2-Confluence-10733" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-10821" href="../Confluence/#plfa_plfa-part2-Confluence-2621" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-10823" href="../Untyped/#plfa_plfa-part2-Untyped-6759" class="Function">subst</a> <a id="plfa_plfa-part2-Confluence-10829" href="../Confluence/#plfa_plfa-part2-Confluence-10717" class="Bound">τ</a> <a id="plfa_plfa-part2-Confluence-10831" href="../Confluence/#plfa_plfa-part2-Confluence-10735" class="Bound">M′</a>
<a id="plfa_plfa-part2-Confluence-10834" href="../Confluence/#plfa_plfa-part2-Confluence-10693" class="Function">subst-par</a> <a id="plfa_plfa-part2-Confluence-10844" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10845" href="../Confluence/#plfa_plfa-part2-Confluence-10845" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-10846" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10848" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10849" href="../Confluence/#plfa_plfa-part2-Confluence-10849" class="Bound">Δ</a><a id="plfa_plfa-part2-Confluence-10850" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10852" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10853" href="../Confluence/#plfa_plfa-part2-Confluence-10853" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-10854" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10856" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10857" href="../Confluence/#plfa_plfa-part2-Confluence-10857" class="Bound">σ</a><a id="plfa_plfa-part2-Confluence-10858" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10860" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10861" href="../Confluence/#plfa_plfa-part2-Confluence-10861" class="Bound">τ</a><a id="plfa_plfa-part2-Confluence-10862" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10864" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10865" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Confluence-10867" href="../Confluence/#plfa_plfa-part2-Confluence-10867" class="Bound">x</a><a id="plfa_plfa-part2-Confluence-10868" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10870" href="../Confluence/#plfa_plfa-part2-Confluence-10870" class="Bound">s</a> <a id="plfa_plfa-part2-Confluence-10872" href="../Confluence/#plfa_plfa-part2-Confluence-2670" class="InductiveConstructor">pvar</a> <a id="plfa_plfa-part2-Confluence-10877" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-10879" href="../Confluence/#plfa_plfa-part2-Confluence-10870" class="Bound">s</a>
<a id="plfa_plfa-part2-Confluence-10881" href="../Confluence/#plfa_plfa-part2-Confluence-10693" class="Function">subst-par</a> <a id="plfa_plfa-part2-Confluence-10891" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10892" href="../Confluence/#plfa_plfa-part2-Confluence-10892" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-10893" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10895" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10896" href="../Confluence/#plfa_plfa-part2-Confluence-10896" class="Bound">Δ</a><a id="plfa_plfa-part2-Confluence-10897" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10899" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10900" href="../Confluence/#plfa_plfa-part2-Confluence-10900" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-10901" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10903" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10904" href="../Confluence/#plfa_plfa-part2-Confluence-10904" class="Bound">σ</a><a id="plfa_plfa-part2-Confluence-10905" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10907" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10908" href="../Confluence/#plfa_plfa-part2-Confluence-10908" class="Bound">τ</a><a id="plfa_plfa-part2-Confluence-10909" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10911" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10912" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-10914" href="../Confluence/#plfa_plfa-part2-Confluence-10914" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-10915" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10917" href="../Confluence/#plfa_plfa-part2-Confluence-10917" class="Bound">s</a> <a id="plfa_plfa-part2-Confluence-10919" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-10920" href="../Confluence/#plfa_plfa-part2-Confluence-2734" class="InductiveConstructor">pabs</a> <a id="plfa_plfa-part2-Confluence-10925" href="../Confluence/#plfa_plfa-part2-Confluence-10925" class="Bound">p</a><a id="plfa_plfa-part2-Confluence-10926" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-10928" class="Symbol">=</a>
  <a id="plfa_plfa-part2-Confluence-10932" href="../Confluence/#plfa_plfa-part2-Confluence-2734" class="InductiveConstructor">pabs</a> <a id="plfa_plfa-part2-Confluence-10937" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-10938" href="../Confluence/#plfa_plfa-part2-Confluence-10693" class="Function">subst-par</a> <a id="plfa_plfa-part2-Confluence-10948" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10949" class="Argument">σ</a> <a id="plfa_plfa-part2-Confluence-10951" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-10953" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Confluence-10958" href="../Confluence/#plfa_plfa-part2-Confluence-10904" class="Bound">σ</a><a id="plfa_plfa-part2-Confluence-10959" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10961" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10962" class="Argument">τ</a> <a id="plfa_plfa-part2-Confluence-10964" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-10966" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Confluence-10971" href="../Confluence/#plfa_plfa-part2-Confluence-10908" class="Bound">τ</a><a id="plfa_plfa-part2-Confluence-10972" class="Symbol">}</a>
        <a id="plfa_plfa-part2-Confluence-10982" class="Symbol">(λ</a> <a id="plfa_plfa-part2-Confluence-10985" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-10986" href="../Confluence/#plfa_plfa-part2-Confluence-10986" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-10987" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-10989" href="../Confluence/#plfa_plfa-part2-Confluence-10989" class="Bound">x</a><a id="plfa_plfa-part2-Confluence-10990" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-10992" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-10994" href="../Confluence/#plfa_plfa-part2-Confluence-9909" class="Function">par-subst-exts</a> <a id="plfa_plfa-part2-Confluence-11009" href="../Confluence/#plfa_plfa-part2-Confluence-10917" class="Bound">s</a> <a id="plfa_plfa-part2-Confluence-11011" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-11012" class="Argument">x</a> <a id="plfa_plfa-part2-Confluence-11014" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-11016" href="../Confluence/#plfa_plfa-part2-Confluence-10989" class="Bound">x</a><a id="plfa_plfa-part2-Confluence-11017" class="Symbol">})</a> <a id="plfa_plfa-part2-Confluence-11020" href="../Confluence/#plfa_plfa-part2-Confluence-10925" class="Bound">p</a><a id="plfa_plfa-part2-Confluence-11021" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-11023" href="../Confluence/#plfa_plfa-part2-Confluence-10693" class="Function">subst-par</a> <a id="plfa_plfa-part2-Confluence-11033" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-11034" href="../Confluence/#plfa_plfa-part2-Confluence-11034" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-11035" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-11037" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-11038" href="../Confluence/#plfa_plfa-part2-Confluence-11038" class="Bound">Δ</a><a id="plfa_plfa-part2-Confluence-11039" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-11041" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-11042" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-11043" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-11045" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-11046" href="../Confluence/#plfa_plfa-part2-Confluence-11046" class="Bound">σ</a><a id="plfa_plfa-part2-Confluence-11047" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-11049" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-11050" href="../Confluence/#plfa_plfa-part2-Confluence-11050" class="Bound">τ</a><a id="plfa_plfa-part2-Confluence-11051" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-11053" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-11054" href="../Confluence/#plfa_plfa-part2-Confluence-11054" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-11056" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-11058" href="../Confluence/#plfa_plfa-part2-Confluence-11058" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-11059" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-11061" href="../Confluence/#plfa_plfa-part2-Confluence-11061" class="Bound">s</a> <a id="plfa_plfa-part2-Confluence-11063" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-11064" href="../Confluence/#plfa_plfa-part2-Confluence-2814" class="InductiveConstructor">papp</a> <a id="plfa_plfa-part2-Confluence-11069" href="../Confluence/#plfa_plfa-part2-Confluence-11069" class="Bound">p₁</a> <a id="plfa_plfa-part2-Confluence-11072" href="../Confluence/#plfa_plfa-part2-Confluence-11072" class="Bound">p₂</a><a id="plfa_plfa-part2-Confluence-11074" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-11076" class="Symbol">=</a>
  <a id="plfa_plfa-part2-Confluence-11080" href="../Confluence/#plfa_plfa-part2-Confluence-2814" class="InductiveConstructor">papp</a> <a id="plfa_plfa-part2-Confluence-11085" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-11086" href="../Confluence/#plfa_plfa-part2-Confluence-10693" class="Function">subst-par</a> <a id="plfa_plfa-part2-Confluence-11096" href="../Confluence/#plfa_plfa-part2-Confluence-11061" class="Bound">s</a> <a id="plfa_plfa-part2-Confluence-11098" href="../Confluence/#plfa_plfa-part2-Confluence-11069" class="Bound">p₁</a><a id="plfa_plfa-part2-Confluence-11100" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-11102" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-11103" href="../Confluence/#plfa_plfa-part2-Confluence-10693" class="Function">subst-par</a> <a id="plfa_plfa-part2-Confluence-11113" href="../Confluence/#plfa_plfa-part2-Confluence-11061" class="Bound">s</a> <a id="plfa_plfa-part2-Confluence-11115" href="../Confluence/#plfa_plfa-part2-Confluence-11072" class="Bound">p₂</a><a id="plfa_plfa-part2-Confluence-11117" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-11119" href="../Confluence/#plfa_plfa-part2-Confluence-10693" class="Function">subst-par</a> <a id="plfa_plfa-part2-Confluence-11129" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-11130" href="../Confluence/#plfa_plfa-part2-Confluence-11130" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-11131" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-11133" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-11134" href="../Confluence/#plfa_plfa-part2-Confluence-11134" class="Bound">Δ</a><a id="plfa_plfa-part2-Confluence-11135" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-11137" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-11138" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Confluence-11139" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-11141" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-11142" href="../Confluence/#plfa_plfa-part2-Confluence-11142" class="Bound">σ</a><a id="plfa_plfa-part2-Confluence-11143" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-11145" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-11146" href="../Confluence/#plfa_plfa-part2-Confluence-11146" class="Bound">τ</a><a id="plfa_plfa-part2-Confluence-11147" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-11149" class="Symbol">{(</a><a id="plfa_plfa-part2-Confluence-11151" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-11153" href="../Confluence/#plfa_plfa-part2-Confluence-11153" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-11154" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-11156" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-11158" href="../Confluence/#plfa_plfa-part2-Confluence-11158" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-11159" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-11161" href="../Confluence/#plfa_plfa-part2-Confluence-11161" class="Bound">s</a> <a id="plfa_plfa-part2-Confluence-11163" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-11164" href="../Confluence/#plfa_plfa-part2-Confluence-2920" class="InductiveConstructor">pbeta</a><a id="plfa_plfa-part2-Confluence-11169" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-11170" class="Argument">N′</a> <a id="plfa_plfa-part2-Confluence-11173" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-11175" href="../Confluence/#plfa_plfa-part2-Confluence-11175" class="Bound">N′</a><a id="plfa_plfa-part2-Confluence-11177" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-11179" class="Argument">M′</a> <a id="plfa_plfa-part2-Confluence-11182" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-11184" href="../Confluence/#plfa_plfa-part2-Confluence-11184" class="Bound">M′</a><a id="plfa_plfa-part2-Confluence-11186" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-11188" href="../Confluence/#plfa_plfa-part2-Confluence-11188" class="Bound">p₁</a> <a id="plfa_plfa-part2-Confluence-11191" href="../Confluence/#plfa_plfa-part2-Confluence-11191" class="Bound">p₂</a><a id="plfa_plfa-part2-Confluence-11193" class="Symbol">)</a>
    <a id="plfa_plfa-part2-Confluence-11199" class="Keyword">with</a> <a id="plfa_plfa-part2-Confluence-11204" href="../Confluence/#plfa_plfa-part2-Confluence-2920" class="InductiveConstructor">pbeta</a> <a id="plfa_plfa-part2-Confluence-11210" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-11211" href="../Confluence/#plfa_plfa-part2-Confluence-10693" class="Function">subst-par</a><a id="plfa_plfa-part2-Confluence-11220" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-11221" class="Argument">σ</a> <a id="plfa_plfa-part2-Confluence-11223" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-11225" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Confluence-11230" href="../Confluence/#plfa_plfa-part2-Confluence-11142" class="Bound">σ</a><a id="plfa_plfa-part2-Confluence-11231" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-11233" class="Argument">τ</a> <a id="plfa_plfa-part2-Confluence-11235" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-11237" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Confluence-11242" href="../Confluence/#plfa_plfa-part2-Confluence-11146" class="Bound">τ</a><a id="plfa_plfa-part2-Confluence-11243" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-11245" class="Argument">M</a> <a id="plfa_plfa-part2-Confluence-11247" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-11249" href="../Confluence/#plfa_plfa-part2-Confluence-11153" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-11250" class="Symbol">}</a>
                        <a id="plfa_plfa-part2-Confluence-11276" class="Symbol">(λ{</a><a id="plfa_plfa-part2-Confluence-11279" href="../Confluence/#plfa_plfa-part2-Confluence-11279" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-11280" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-11282" href="../Confluence/#plfa_plfa-part2-Confluence-11282" class="Bound">x</a><a id="plfa_plfa-part2-Confluence-11283" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-11285" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-11287" href="../Confluence/#plfa_plfa-part2-Confluence-9909" class="Function">par-subst-exts</a> <a id="plfa_plfa-part2-Confluence-11302" href="../Confluence/#plfa_plfa-part2-Confluence-11161" class="Bound">s</a> <a id="plfa_plfa-part2-Confluence-11304" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-11305" class="Argument">x</a> <a id="plfa_plfa-part2-Confluence-11307" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-11309" href="../Confluence/#plfa_plfa-part2-Confluence-11282" class="Bound">x</a><a id="plfa_plfa-part2-Confluence-11310" class="Symbol">})</a> <a id="plfa_plfa-part2-Confluence-11313" href="../Confluence/#plfa_plfa-part2-Confluence-11188" class="Bound">p₁</a><a id="plfa_plfa-part2-Confluence-11315" class="Symbol">)</a>
               <a id="plfa_plfa-part2-Confluence-11332" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-11333" href="../Confluence/#plfa_plfa-part2-Confluence-10693" class="Function">subst-par</a> <a id="plfa_plfa-part2-Confluence-11343" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-11344" class="Argument">σ</a> <a id="plfa_plfa-part2-Confluence-11346" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-11348" href="../Confluence/#plfa_plfa-part2-Confluence-11142" class="Bound">σ</a><a id="plfa_plfa-part2-Confluence-11349" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-11351" href="../Confluence/#plfa_plfa-part2-Confluence-11161" class="Bound">s</a> <a id="plfa_plfa-part2-Confluence-11353" href="../Confluence/#plfa_plfa-part2-Confluence-11191" class="Bound">p₂</a><a id="plfa_plfa-part2-Confluence-11355" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-11357" class="Symbol">...</a> <a id="plfa_plfa-part2-Confluence-11361" class="Symbol">|</a> <a id="plfa_plfa-part2-Confluence-11363" href="../Confluence/#plfa_plfa-part2-Confluence-11363" class="Bound">G</a> <a id="plfa_plfa-part2-Confluence-11365" class="Keyword">rewrite</a> <a id="plfa_plfa-part2-Confluence-11373" href="../Confluence/#plfa_plfa-part2-Confluence-10420" class="Function">subst-commute</a><a id="plfa_plfa-part2-Confluence-11386" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-11387" class="Argument">N</a> <a id="plfa_plfa-part2-Confluence-11389" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-11391" class="Bound">N′</a><a id="plfa_plfa-part2-Confluence-11393" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-11395" class="Argument">M</a> <a id="plfa_plfa-part2-Confluence-11397" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-11399" class="Bound">M′</a><a id="plfa_plfa-part2-Confluence-11401" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-11403" class="Argument">σ</a> <a id="plfa_plfa-part2-Confluence-11405" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-11407" class="Bound">τ</a><a id="plfa_plfa-part2-Confluence-11408" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-11410" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-11412" href="../Confluence/#plfa_plfa-part2-Confluence-11363" class="Bound">G</a>
</pre><p>We proceed by induction on <code>M ⇛ M′</code>.</p><ul><li><p>Suppose <code>x ⇛ x</code>. We conclude that <code>σ x ⇛ τ x</code> using the premise <code>par-subst σ τ</code>.</p></li><li><p>Suppose <code>ƛ N ⇛ ƛ N′</code> because <code>N ⇛ N′</code>. To use the induction hypothesis, we need <code>par-subst (exts σ) (exts τ)</code>, which we obtain by <code>par-subst-exts</code>. So we have <code>subst (exts σ) N ⇛ subst (exts τ) N′</code> and conclude by rule <code>pabs</code>.</p></li><li><p>Suppose <code>L · M ⇛ L′ · M′</code> because <code>L ⇛ L′</code> and <code>M ⇛ M′</code>. By the induction hypothesis we have <code>subst σ L ⇛ subst τ L′</code> and <code>subst σ M ⇛ subst τ M′</code>, so we conclude by rule <code>papp</code>.</p></li><li><p>Suppose <code>(ƛ N) · M ⇛ N′ [ M′ ]</code> because <code>N ⇛ N′</code> and <code>M ⇛ M′</code>. Again we obtain <code>par-subst (exts σ) (exts τ)</code> by <code>par-subst-exts</code>. So by the induction hypothesis, we have <code>subst (exts σ) N ⇛ subst (exts τ) N′</code> and <code>subst σ M ⇛ subst τ M′</code>. Then by rule <code>pbeta</code>, we have parallel reduction to <code>subst (exts τ) N′ [ subst τ M′ ]</code>. Substitution commutes with itself in the following sense. For any σ, N, and M, we have</p><pre><code>  (subst (exts σ) N) [ subst σ M ] ≡ subst σ (N [ M ])</code></pre><p>So we have parallel reduction to <code>subst τ (N′ [ M′ ])</code>.</p></li></ul><p>Of course, if <code>M ⇛ M′</code>, then <code>subst-zero M</code> pointwise parallel reduces to <code>subst-zero M′</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-par-subst-zero"></a><a id="plfa_plfa-part2-Confluence-12624" href="../Confluence/#plfa_plfa-part2-Confluence-12624" class="Function">par-subst-zero</a> <a id="plfa_plfa-part2-Confluence-12639" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-12641" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-12643" href="../Confluence/#plfa_plfa-part2-Confluence-12643" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-12644" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-12646" href="../Confluence/#plfa_plfa-part2-Confluence-12646" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-12647" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-12649" href="../Confluence/#plfa_plfa-part2-Confluence-12649" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-12651" href="../Confluence/#plfa_plfa-part2-Confluence-12651" class="Bound">M′</a> <a id="plfa_plfa-part2-Confluence-12654" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-12656" href="../Confluence/#plfa_plfa-part2-Confluence-12643" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-12658" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-12660" href="../Confluence/#plfa_plfa-part2-Confluence-12646" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-12661" class="Symbol">}</a>
       <a id="plfa_plfa-part2-Confluence-12670" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-12672" href="../Confluence/#plfa_plfa-part2-Confluence-12649" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-12674" href="../Confluence/#plfa_plfa-part2-Confluence-2621" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-12676" href="../Confluence/#plfa_plfa-part2-Confluence-12651" class="Bound">M′</a>
       <a id="plfa_plfa-part2-Confluence-12686" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-12688" href="../Confluence/#plfa_plfa-part2-Confluence-7539" class="Function">par-subst</a> <a id="plfa_plfa-part2-Confluence-12698" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-12699" href="../Untyped/#plfa_plfa-part2-Untyped-7175" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Confluence-12710" href="../Confluence/#plfa_plfa-part2-Confluence-12649" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-12711" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-12713" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-12714" href="../Untyped/#plfa_plfa-part2-Untyped-7175" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Confluence-12725" href="../Confluence/#plfa_plfa-part2-Confluence-12651" class="Bound">M′</a><a id="plfa_plfa-part2-Confluence-12727" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-12729" href="../Confluence/#plfa_plfa-part2-Confluence-12624" class="Function">par-subst-zero</a> <a id="plfa_plfa-part2-Confluence-12744" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-12745" href="../Confluence/#plfa_plfa-part2-Confluence-12745" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-12746" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-12748" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-12749" href="../Confluence/#plfa_plfa-part2-Confluence-12749" class="Bound">M′</a><a id="plfa_plfa-part2-Confluence-12751" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-12753" href="../Confluence/#plfa_plfa-part2-Confluence-12753" class="Bound">p</a> <a id="plfa_plfa-part2-Confluence-12755" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-12756" href="../Confluence/#plfa_plfa-part2-Confluence-12756" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-12757" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-12759" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-12760" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Confluence-12761" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-12763" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-12765" href="../Confluence/#plfa_plfa-part2-Confluence-12753" class="Bound">p</a>
<a id="plfa_plfa-part2-Confluence-12767" href="../Confluence/#plfa_plfa-part2-Confluence-12624" class="Function">par-subst-zero</a> <a id="plfa_plfa-part2-Confluence-12782" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-12783" href="../Confluence/#plfa_plfa-part2-Confluence-12783" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-12784" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-12786" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-12787" href="../Confluence/#plfa_plfa-part2-Confluence-12787" class="Bound">M′</a><a id="plfa_plfa-part2-Confluence-12789" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-12791" href="../Confluence/#plfa_plfa-part2-Confluence-12791" class="Bound">p</a> <a id="plfa_plfa-part2-Confluence-12793" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-12794" href="../Confluence/#plfa_plfa-part2-Confluence-12794" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-12795" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-12797" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-12798" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Confluence-12800" href="../Confluence/#plfa_plfa-part2-Confluence-12800" class="Bound">x</a><a id="plfa_plfa-part2-Confluence-12801" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-12803" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-12805" href="../Confluence/#plfa_plfa-part2-Confluence-2670" class="InductiveConstructor">pvar</a>
</pre><p>We conclude this section with the desired corollary, that substitution respects parallel reduction.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-sub-par"></a><a id="plfa_plfa-part2-Confluence-12924" href="../Confluence/#plfa_plfa-part2-Confluence-12924" class="Function">sub-par</a> <a id="plfa_plfa-part2-Confluence-12932" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-12934" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-12936" href="../Confluence/#plfa_plfa-part2-Confluence-12936" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-12938" href="../Confluence/#plfa_plfa-part2-Confluence-12938" class="Bound">A</a> <a id="plfa_plfa-part2-Confluence-12940" href="../Confluence/#plfa_plfa-part2-Confluence-12940" class="Bound">B</a><a id="plfa_plfa-part2-Confluence-12941" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-12943" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-12944" href="../Confluence/#plfa_plfa-part2-Confluence-12944" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-12946" href="../Confluence/#plfa_plfa-part2-Confluence-12946" class="Bound">N′</a> <a id="plfa_plfa-part2-Confluence-12949" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-12951" href="../Confluence/#plfa_plfa-part2-Confluence-12936" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-12953" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-12955" href="../Confluence/#plfa_plfa-part2-Confluence-12938" class="Bound">A</a> <a id="plfa_plfa-part2-Confluence-12957" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-12959" href="../Confluence/#plfa_plfa-part2-Confluence-12940" class="Bound">B</a><a id="plfa_plfa-part2-Confluence-12960" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-12962" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-12963" href="../Confluence/#plfa_plfa-part2-Confluence-12963" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-12965" href="../Confluence/#plfa_plfa-part2-Confluence-12965" class="Bound">M′</a> <a id="plfa_plfa-part2-Confluence-12968" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-12970" href="../Confluence/#plfa_plfa-part2-Confluence-12936" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-12972" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-12974" href="../Confluence/#plfa_plfa-part2-Confluence-12938" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-12975" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Confluence-12979" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-12981" href="../Confluence/#plfa_plfa-part2-Confluence-12944" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-12983" href="../Confluence/#plfa_plfa-part2-Confluence-2621" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-12985" href="../Confluence/#plfa_plfa-part2-Confluence-12946" class="Bound">N′</a>
  <a id="plfa_plfa-part2-Confluence-12990" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-12992" href="../Confluence/#plfa_plfa-part2-Confluence-12963" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-12994" href="../Confluence/#plfa_plfa-part2-Confluence-2621" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-12996" href="../Confluence/#plfa_plfa-part2-Confluence-12965" class="Bound">M′</a>
    <a id="plfa_plfa-part2-Confluence-13003" class="Comment">--------------------------</a>
  <a id="plfa_plfa-part2-Confluence-13032" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-13034" href="../Confluence/#plfa_plfa-part2-Confluence-12944" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-13036" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">[</a> <a id="plfa_plfa-part2-Confluence-13038" href="../Confluence/#plfa_plfa-part2-Confluence-12963" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-13040" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">]</a> <a id="plfa_plfa-part2-Confluence-13042" href="../Confluence/#plfa_plfa-part2-Confluence-2621" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-13044" href="../Confluence/#plfa_plfa-part2-Confluence-12946" class="Bound">N′</a> <a id="plfa_plfa-part2-Confluence-13047" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">[</a> <a id="plfa_plfa-part2-Confluence-13049" href="../Confluence/#plfa_plfa-part2-Confluence-12965" class="Bound">M′</a> <a id="plfa_plfa-part2-Confluence-13052" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">]</a>
<a id="plfa_plfa-part2-Confluence-13054" href="../Confluence/#plfa_plfa-part2-Confluence-12924" class="Function">sub-par</a> <a id="plfa_plfa-part2-Confluence-13062" href="../Confluence/#plfa_plfa-part2-Confluence-13062" class="Bound">pn</a> <a id="plfa_plfa-part2-Confluence-13065" href="../Confluence/#plfa_plfa-part2-Confluence-13065" class="Bound">pm</a> <a id="plfa_plfa-part2-Confluence-13068" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-13070" href="../Confluence/#plfa_plfa-part2-Confluence-10693" class="Function">subst-par</a> <a id="plfa_plfa-part2-Confluence-13080" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-13081" href="../Confluence/#plfa_plfa-part2-Confluence-12624" class="Function">par-subst-zero</a> <a id="plfa_plfa-part2-Confluence-13096" href="../Confluence/#plfa_plfa-part2-Confluence-13065" class="Bound">pm</a><a id="plfa_plfa-part2-Confluence-13098" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-13100" href="../Confluence/#plfa_plfa-part2-Confluence-13062" class="Bound">pn</a>
</pre><h2 id="parallel-reduction-satisfies-the-diamond-property">Parallel reduction satisfies the diamond property</h2><p>The heart of the confluence proof is made of stone, or rather, of diamond! We show that parallel reduction satisfies the diamond property: that if <code>M ⇛ N</code> and <code>M ⇛ N′</code>, then <code>N ⇛ L</code> and <code>N′ ⇛ L</code> for some <code>L</code>. The typical proof is an induction on <code>M ⇛ N</code> and <code>M ⇛ N′</code> so that every possible pair gives rise to a witness <code>L</code> given by performing enough beta reductions in parallel.</p><p>However, a simpler approach is to perform as many beta reductions in parallel as possible on <code>M</code>, say <code>M ⁺</code>, and then show that <code>N</code> also parallel reduces to <code>M ⁺</code>. The desired property may be illustrated as</p><pre><code>    M
   /|
  / |
 /  |
N   2
 \  |
  \ |
   \|
    M⁺</code></pre><p>where downward lines are instances of <code>⇛</code>, so we call it the <em>triangle property</em>.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-_⁺"></a><a id="plfa_plfa-part2-Confluence-13935" href="../Confluence/#plfa_plfa-part2-Confluence-13935" class="Function Operator">_⁺</a> <a id="plfa_plfa-part2-Confluence-13938" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-13940" class="Symbol">∀</a> <a id="plfa_plfa-part2-Confluence-13942" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-13943" href="../Confluence/#plfa_plfa-part2-Confluence-13943" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-13945" href="../Confluence/#plfa_plfa-part2-Confluence-13945" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-13946" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Confluence-13950" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-13952" href="../Confluence/#plfa_plfa-part2-Confluence-13943" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-13954" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-13956" href="../Confluence/#plfa_plfa-part2-Confluence-13945" class="Bound">A</a> <a id="plfa_plfa-part2-Confluence-13958" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-13960" href="../Confluence/#plfa_plfa-part2-Confluence-13943" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-13962" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-13964" href="../Confluence/#plfa_plfa-part2-Confluence-13945" class="Bound">A</a>
<a id="plfa_plfa-part2-Confluence-13966" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-13967" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Confluence-13969" href="../Confluence/#plfa_plfa-part2-Confluence-13969" class="Bound">x</a><a id="plfa_plfa-part2-Confluence-13970" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-13972" href="../Confluence/#plfa_plfa-part2-Confluence-13935" class="Function Operator">⁺</a>       <a id="plfa_plfa-part2-Confluence-13980" class="Symbol">=</a>  <a id="plfa_plfa-part2-Confluence-13983" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Confluence-13985" href="../Confluence/#plfa_plfa-part2-Confluence-13969" class="Bound">x</a>
<a id="plfa_plfa-part2-Confluence-13987" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-13988" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-13990" href="../Confluence/#plfa_plfa-part2-Confluence-13990" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-13991" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-13993" href="../Confluence/#plfa_plfa-part2-Confluence-13935" class="Function Operator">⁺</a>       <a id="plfa_plfa-part2-Confluence-14001" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-14003" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-14005" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-14006" href="../Confluence/#plfa_plfa-part2-Confluence-13990" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-14008" href="../Confluence/#plfa_plfa-part2-Confluence-13935" class="Function Operator">⁺</a><a id="plfa_plfa-part2-Confluence-14009" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-14011" class="Symbol">((</a><a id="plfa_plfa-part2-Confluence-14013" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-14015" href="../Confluence/#plfa_plfa-part2-Confluence-14015" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-14016" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-14018" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-14020" href="../Confluence/#plfa_plfa-part2-Confluence-14020" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-14021" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-14023" href="../Confluence/#plfa_plfa-part2-Confluence-13935" class="Function Operator">⁺</a> <a id="plfa_plfa-part2-Confluence-14025" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-14027" href="../Confluence/#plfa_plfa-part2-Confluence-14015" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-14029" href="../Confluence/#plfa_plfa-part2-Confluence-13935" class="Function Operator">⁺</a> <a id="plfa_plfa-part2-Confluence-14031" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">[</a> <a id="plfa_plfa-part2-Confluence-14033" href="../Confluence/#plfa_plfa-part2-Confluence-14020" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-14035" href="../Confluence/#plfa_plfa-part2-Confluence-13935" class="Function Operator">⁺</a> <a id="plfa_plfa-part2-Confluence-14037" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">]</a>
<a id="plfa_plfa-part2-Confluence-14039" class="CatchallClause Symbol">(</a><a id="plfa_plfa-part2-Confluence-14040" href="../Confluence/#plfa_plfa-part2-Confluence-14040" class="CatchallClause Bound">L</a><a id="plfa_plfa-part2-Confluence-14041" class="CatchallClause"> </a><a id="plfa_plfa-part2-Confluence-14042" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="CatchallClause InductiveConstructor Operator">·</a><a id="plfa_plfa-part2-Confluence-14043" class="CatchallClause"> </a><a id="plfa_plfa-part2-Confluence-14044" href="../Confluence/#plfa_plfa-part2-Confluence-14044" class="CatchallClause Bound">M</a><a id="plfa_plfa-part2-Confluence-14045" class="CatchallClause Symbol">)</a><a id="plfa_plfa-part2-Confluence-14046" class="CatchallClause"> </a><a id="plfa_plfa-part2-Confluence-14047" href="../Confluence/#plfa_plfa-part2-Confluence-13935" class="CatchallClause Function Operator">⁺</a>     <a id="plfa_plfa-part2-Confluence-14053" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-14055" href="../Confluence/#plfa_plfa-part2-Confluence-14040" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-14057" href="../Confluence/#plfa_plfa-part2-Confluence-13935" class="Function Operator">⁺</a> <a id="plfa_plfa-part2-Confluence-14059" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-14061" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-14062" href="../Confluence/#plfa_plfa-part2-Confluence-14044" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-14064" href="../Confluence/#plfa_plfa-part2-Confluence-13935" class="Function Operator">⁺</a><a id="plfa_plfa-part2-Confluence-14065" class="Symbol">)</a>

<a id="plfa_plfa-part2-Confluence-par-triangle"></a><a id="plfa_plfa-part2-Confluence-14068" href="../Confluence/#plfa_plfa-part2-Confluence-14068" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-14081" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-14083" class="Symbol">∀</a> <a id="plfa_plfa-part2-Confluence-14085" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-14086" href="../Confluence/#plfa_plfa-part2-Confluence-14086" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-14088" href="../Confluence/#plfa_plfa-part2-Confluence-14088" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-14089" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-14091" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-14092" href="../Confluence/#plfa_plfa-part2-Confluence-14092" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-14094" href="../Confluence/#plfa_plfa-part2-Confluence-14094" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-14096" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-14098" href="../Confluence/#plfa_plfa-part2-Confluence-14086" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-14100" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-14102" href="../Confluence/#plfa_plfa-part2-Confluence-14088" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-14103" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Confluence-14107" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-14109" href="../Confluence/#plfa_plfa-part2-Confluence-14092" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-14111" href="../Confluence/#plfa_plfa-part2-Confluence-2621" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-14113" href="../Confluence/#plfa_plfa-part2-Confluence-14094" class="Bound">N</a>
    <a id="plfa_plfa-part2-Confluence-14119" class="Comment">-------</a>
  <a id="plfa_plfa-part2-Confluence-14129" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-14131" href="../Confluence/#plfa_plfa-part2-Confluence-14094" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-14133" href="../Confluence/#plfa_plfa-part2-Confluence-2621" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-14135" href="../Confluence/#plfa_plfa-part2-Confluence-14092" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-14137" href="../Confluence/#plfa_plfa-part2-Confluence-13935" class="Function Operator">⁺</a>
<a id="plfa_plfa-part2-Confluence-14139" href="../Confluence/#plfa_plfa-part2-Confluence-14068" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-14152" href="../Confluence/#plfa_plfa-part2-Confluence-2670" class="InductiveConstructor">pvar</a>          <a id="plfa_plfa-part2-Confluence-14166" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-14168" href="../Confluence/#plfa_plfa-part2-Confluence-2670" class="InductiveConstructor">pvar</a>
<a id="plfa_plfa-part2-Confluence-14173" href="../Confluence/#plfa_plfa-part2-Confluence-14068" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-14186" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-14187" href="../Confluence/#plfa_plfa-part2-Confluence-2734" class="InductiveConstructor">pabs</a> <a id="plfa_plfa-part2-Confluence-14192" href="../Confluence/#plfa_plfa-part2-Confluence-14192" class="Bound">p</a><a id="plfa_plfa-part2-Confluence-14193" class="Symbol">)</a>      <a id="plfa_plfa-part2-Confluence-14200" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-14202" href="../Confluence/#plfa_plfa-part2-Confluence-2734" class="InductiveConstructor">pabs</a> <a id="plfa_plfa-part2-Confluence-14207" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-14208" href="../Confluence/#plfa_plfa-part2-Confluence-14068" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-14221" href="../Confluence/#plfa_plfa-part2-Confluence-14192" class="Bound">p</a><a id="plfa_plfa-part2-Confluence-14222" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-14224" href="../Confluence/#plfa_plfa-part2-Confluence-14068" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-14237" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-14238" href="../Confluence/#plfa_plfa-part2-Confluence-2920" class="InductiveConstructor">pbeta</a> <a id="plfa_plfa-part2-Confluence-14244" href="../Confluence/#plfa_plfa-part2-Confluence-14244" class="Bound">p1</a> <a id="plfa_plfa-part2-Confluence-14247" href="../Confluence/#plfa_plfa-part2-Confluence-14247" class="Bound">p2</a><a id="plfa_plfa-part2-Confluence-14249" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-14251" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-14253" href="../Confluence/#plfa_plfa-part2-Confluence-12924" class="Function">sub-par</a> <a id="plfa_plfa-part2-Confluence-14261" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-14262" href="../Confluence/#plfa_plfa-part2-Confluence-14068" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-14275" href="../Confluence/#plfa_plfa-part2-Confluence-14244" class="Bound">p1</a><a id="plfa_plfa-part2-Confluence-14277" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-14279" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-14280" href="../Confluence/#plfa_plfa-part2-Confluence-14068" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-14293" href="../Confluence/#plfa_plfa-part2-Confluence-14247" class="Bound">p2</a><a id="plfa_plfa-part2-Confluence-14295" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-14297" href="../Confluence/#plfa_plfa-part2-Confluence-14068" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-14310" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-14311" href="../Confluence/#plfa_plfa-part2-Confluence-2814" class="InductiveConstructor">papp</a> <a id="plfa_plfa-part2-Confluence-14316" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-14317" class="Argument">L</a> <a id="plfa_plfa-part2-Confluence-14319" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-14321" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Confluence-14323" class="Symbol">_</a> <a id="plfa_plfa-part2-Confluence-14325" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-14327" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-14328" href="../Confluence/#plfa_plfa-part2-Confluence-2734" class="InductiveConstructor">pabs</a> <a id="plfa_plfa-part2-Confluence-14333" href="../Confluence/#plfa_plfa-part2-Confluence-14333" class="Bound">p1</a><a id="plfa_plfa-part2-Confluence-14335" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-14337" href="../Confluence/#plfa_plfa-part2-Confluence-14337" class="Bound">p2</a><a id="plfa_plfa-part2-Confluence-14339" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-14341" class="Symbol">=</a>
  <a id="plfa_plfa-part2-Confluence-14345" href="../Confluence/#plfa_plfa-part2-Confluence-2920" class="InductiveConstructor">pbeta</a> <a id="plfa_plfa-part2-Confluence-14351" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-14352" href="../Confluence/#plfa_plfa-part2-Confluence-14068" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-14365" href="../Confluence/#plfa_plfa-part2-Confluence-14333" class="Bound">p1</a><a id="plfa_plfa-part2-Confluence-14367" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-14369" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-14370" href="../Confluence/#plfa_plfa-part2-Confluence-14068" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-14383" href="../Confluence/#plfa_plfa-part2-Confluence-14337" class="Bound">p2</a><a id="plfa_plfa-part2-Confluence-14385" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-14387" href="../Confluence/#plfa_plfa-part2-Confluence-14068" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-14400" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-14401" href="../Confluence/#plfa_plfa-part2-Confluence-2814" class="InductiveConstructor">papp</a> <a id="plfa_plfa-part2-Confluence-14406" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-14407" class="Argument">L</a> <a id="plfa_plfa-part2-Confluence-14409" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-14411" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Confluence-14413" class="Symbol">_}</a>   <a id="plfa_plfa-part2-Confluence-14418" href="../Confluence/#plfa_plfa-part2-Confluence-14418" class="Bound">p1</a> <a id="plfa_plfa-part2-Confluence-14421" href="../Confluence/#plfa_plfa-part2-Confluence-14421" class="Bound">p2</a><a id="plfa_plfa-part2-Confluence-14423" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-14425" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-14427" href="../Confluence/#plfa_plfa-part2-Confluence-2814" class="InductiveConstructor">papp</a> <a id="plfa_plfa-part2-Confluence-14432" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-14433" href="../Confluence/#plfa_plfa-part2-Confluence-14068" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-14446" href="../Confluence/#plfa_plfa-part2-Confluence-14418" class="Bound">p1</a><a id="plfa_plfa-part2-Confluence-14448" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-14450" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-14451" href="../Confluence/#plfa_plfa-part2-Confluence-14068" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-14464" href="../Confluence/#plfa_plfa-part2-Confluence-14421" class="Bound">p2</a><a id="plfa_plfa-part2-Confluence-14466" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-14468" href="../Confluence/#plfa_plfa-part2-Confluence-14068" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-14481" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-14482" href="../Confluence/#plfa_plfa-part2-Confluence-2814" class="InductiveConstructor">papp</a> <a id="plfa_plfa-part2-Confluence-14487" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-14488" class="Argument">L</a> <a id="plfa_plfa-part2-Confluence-14490" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-14492" class="Symbol">_</a> <a id="plfa_plfa-part2-Confluence-14494" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Confluence-14496" class="Symbol">_}</a> <a id="plfa_plfa-part2-Confluence-14499" href="../Confluence/#plfa_plfa-part2-Confluence-14499" class="Bound">p1</a> <a id="plfa_plfa-part2-Confluence-14502" href="../Confluence/#plfa_plfa-part2-Confluence-14502" class="Bound">p2</a><a id="plfa_plfa-part2-Confluence-14504" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-14506" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-14508" href="../Confluence/#plfa_plfa-part2-Confluence-2814" class="InductiveConstructor">papp</a> <a id="plfa_plfa-part2-Confluence-14513" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-14514" href="../Confluence/#plfa_plfa-part2-Confluence-14068" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-14527" href="../Confluence/#plfa_plfa-part2-Confluence-14499" class="Bound">p1</a><a id="plfa_plfa-part2-Confluence-14529" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-14531" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-14532" href="../Confluence/#plfa_plfa-part2-Confluence-14068" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-14545" href="../Confluence/#plfa_plfa-part2-Confluence-14502" class="Bound">p2</a><a id="plfa_plfa-part2-Confluence-14547" class="Symbol">)</a>
</pre><p>The proof of the triangle property is an induction on <code>M ⇛ N</code>.</p><ul><li><p>Suppose <code>x ⇛ x</code>. Clearly <code>x ⁺ = x</code>, so <code>x ⇛ x ⁺</code>.</p></li><li><p>Suppose <code>ƛ M ⇛ ƛ N</code>. By the induction hypothesis we have <code>N ⇛ M ⁺</code> and by definition <code>(λ M) ⁺ = λ (M ⁺)</code>, so we conclude that <code>λ N ⇛ λ (M ⁺)</code>.</p></li><li><p>Suppose <code>(λ N) · M ⇛ N′ [ M′ ]</code>. By the induction hypothesis, we have <code>N′ ⇛ N ⁺</code> and <code>M′ ⇛ M ⁺</code>. Since substitution respects parallel reduction, it follows that <code>N′ [ M′ ] ⇛ N ⁺ [ M ⁺ ]</code>, but the right hand side is exactly <code>((λ N) · M) ⁺</code>, hence <code>N′ [ M′ ] ⇛ ((λ N) · M) ⁺</code>.</p></li><li><p>Suppose <code>(λ L) · M ⇛ (λ L′) · M′</code>. By the induction hypothesis we have <code>L′ ⇛ L ⁺</code> and <code>M′ ⇛ M ⁺</code>; by definition <code>((λ L) · M) ⁺ = L ⁺ [ M ⁺ ]</code>. It follows <code>(λ L′) · M′ ⇛ L ⁺ [ M ⁺ ]</code>.</p></li><li><p>Suppose <code>x · M ⇛ x · M′</code>. By the induction hypothesis we have <code>M′ ⇛ M ⁺</code> and <code>x ⇛ x ⁺</code> so that <code>x · M′ ⇛ x · M ⁺</code>. The remaining case is proved in the same way, so we ignore it. (As there is currently no way in Agda to expand the catch-all pattern in the definition of <code>_⁺</code> for us before checking the right-hand side, we have to write down the remaining case explicitly.)</p></li></ul><p>The diamond property then follows by halving the diamond into two triangles.</p><pre><code>    M
   /|\
  / | \
 /  |  \
N   2   N′
 \  |  /
  \ | /
   \|/
    M⁺</code></pre><p>That is, the diamond property is proved by applying the triangle property on each side with the same confluent term <code>M ⁺</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-par-diamond"></a><a id="plfa_plfa-part2-Confluence-16000" href="../Confluence/#plfa_plfa-part2-Confluence-16000" class="Function">par-diamond</a> <a id="plfa_plfa-part2-Confluence-16012" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-16014" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-16016" href="../Confluence/#plfa_plfa-part2-Confluence-16016" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-16018" href="../Confluence/#plfa_plfa-part2-Confluence-16018" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-16019" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-16021" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-16022" href="../Confluence/#plfa_plfa-part2-Confluence-16022" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-16024" href="../Confluence/#plfa_plfa-part2-Confluence-16024" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-16026" href="../Confluence/#plfa_plfa-part2-Confluence-16026" class="Bound">N′</a> <a id="plfa_plfa-part2-Confluence-16029" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-16031" href="../Confluence/#plfa_plfa-part2-Confluence-16016" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-16033" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-16035" href="../Confluence/#plfa_plfa-part2-Confluence-16018" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-16036" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Confluence-16040" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-16042" href="../Confluence/#plfa_plfa-part2-Confluence-16022" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-16044" href="../Confluence/#plfa_plfa-part2-Confluence-2621" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-16046" href="../Confluence/#plfa_plfa-part2-Confluence-16024" class="Bound">N</a>
  <a id="plfa_plfa-part2-Confluence-16050" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-16052" href="../Confluence/#plfa_plfa-part2-Confluence-16022" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-16054" href="../Confluence/#plfa_plfa-part2-Confluence-2621" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-16056" href="../Confluence/#plfa_plfa-part2-Confluence-16026" class="Bound">N′</a>
    <a id="plfa_plfa-part2-Confluence-16063" class="Comment">---------------------------------</a>
  <a id="plfa_plfa-part2-Confluence-16099" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-16101" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1244" class="Function">Σ[</a> <a id="plfa_plfa-part2-Confluence-16104" href="../Confluence/#plfa_plfa-part2-Confluence-16104" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-16106" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1244" class="Function">∈</a> <a id="plfa_plfa-part2-Confluence-16108" href="../Confluence/#plfa_plfa-part2-Confluence-16016" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-16110" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-16112" href="../Confluence/#plfa_plfa-part2-Confluence-16018" class="Bound">A</a> <a id="plfa_plfa-part2-Confluence-16114" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1244" class="Function">]</a> <a id="plfa_plfa-part2-Confluence-16116" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-16117" href="../Confluence/#plfa_plfa-part2-Confluence-16024" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-16119" href="../Confluence/#plfa_plfa-part2-Confluence-2621" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-16121" href="../Confluence/#plfa_plfa-part2-Confluence-16104" class="Bound">L</a><a id="plfa_plfa-part2-Confluence-16122" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-16124" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="plfa_plfa-part2-Confluence-16126" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-16127" href="../Confluence/#plfa_plfa-part2-Confluence-16026" class="Bound">N′</a> <a id="plfa_plfa-part2-Confluence-16130" href="../Confluence/#plfa_plfa-part2-Confluence-2621" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-16132" href="../Confluence/#plfa_plfa-part2-Confluence-16104" class="Bound">L</a><a id="plfa_plfa-part2-Confluence-16133" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-16135" href="../Confluence/#plfa_plfa-part2-Confluence-16000" class="Function">par-diamond</a> <a id="plfa_plfa-part2-Confluence-16147" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-16148" class="Argument">M</a> <a id="plfa_plfa-part2-Confluence-16150" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-16152" href="../Confluence/#plfa_plfa-part2-Confluence-16152" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-16153" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-16155" href="../Confluence/#plfa_plfa-part2-Confluence-16155" class="Bound">p1</a> <a id="plfa_plfa-part2-Confluence-16158" href="../Confluence/#plfa_plfa-part2-Confluence-16158" class="Bound">p2</a> <a id="plfa_plfa-part2-Confluence-16161" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-16163" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-16165" href="../Confluence/#plfa_plfa-part2-Confluence-16152" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-16167" href="../Confluence/#plfa_plfa-part2-Confluence-13935" class="Function Operator">⁺</a> <a id="plfa_plfa-part2-Confluence-16169" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-16171" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-16173" href="../Confluence/#plfa_plfa-part2-Confluence-14068" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-16186" href="../Confluence/#plfa_plfa-part2-Confluence-16155" class="Bound">p1</a> <a id="plfa_plfa-part2-Confluence-16189" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-16191" href="../Confluence/#plfa_plfa-part2-Confluence-14068" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-16204" href="../Confluence/#plfa_plfa-part2-Confluence-16158" class="Bound">p2</a> <a id="plfa_plfa-part2-Confluence-16207" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-16209" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟩</a>
</pre><p>This step is optional, though, in the presence of triangle property.</p><h4 id="exercise-practice">Exercise (practice)</h4><ul><li><p>Prove the diamond property <code>par-diamond</code> directly by induction on <code>M ⇛ N</code> and <code>M ⇛ N′</code>.</p></li><li><p>Draw pictures that represent the proofs of each of the six cases in the direct proof of <code>par-diamond</code>. The pictures should consist of nodes and directed edges, where each node is labeled with a term and each edge represents parallel reduction.</p></li></ul><h2 id="proof-of-confluence-for-parallel-reduction">Proof of confluence for parallel reduction</h2><p>As promised at the beginning, the proof that parallel reduction is confluent is easy now that we know it satisfies the triangle property. We just need to prove the strip lemma, which states that if <code>M ⇛ N</code> and <code>M ⇛* N′</code>, then <code>N ⇛* L</code> and <code>N′ ⇛ L</code> for some <code>L</code>. The following diagram illustrates the strip lemma</p><pre><code>    M
   / \
  1   *
 /     \
N       N′
 \     /
  *   1
   \ /
    L</code></pre><p>where downward lines are instances of <code>⇛</code> or <code>⇛*</code>, depending on how they are marked.</p><p>The proof of the strip lemma is a straightforward induction on <code>M ⇛* N′</code>, using the triangle property in the induction step.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-strip"></a><a id="plfa_plfa-part2-Confluence-17344" href="../Confluence/#plfa_plfa-part2-Confluence-17344" class="Function">strip</a> <a id="plfa_plfa-part2-Confluence-17350" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-17352" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-17354" href="../Confluence/#plfa_plfa-part2-Confluence-17354" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-17356" href="../Confluence/#plfa_plfa-part2-Confluence-17356" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-17357" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-17359" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-17360" href="../Confluence/#plfa_plfa-part2-Confluence-17360" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-17362" href="../Confluence/#plfa_plfa-part2-Confluence-17362" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-17364" href="../Confluence/#plfa_plfa-part2-Confluence-17364" class="Bound">N′</a> <a id="plfa_plfa-part2-Confluence-17367" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-17369" href="../Confluence/#plfa_plfa-part2-Confluence-17354" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-17371" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-17373" href="../Confluence/#plfa_plfa-part2-Confluence-17356" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-17374" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Confluence-17378" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-17380" href="../Confluence/#plfa_plfa-part2-Confluence-17360" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-17382" href="../Confluence/#plfa_plfa-part2-Confluence-2621" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-17384" href="../Confluence/#plfa_plfa-part2-Confluence-17362" class="Bound">N</a>
  <a id="plfa_plfa-part2-Confluence-17388" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-17390" href="../Confluence/#plfa_plfa-part2-Confluence-17360" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-17392" href="../Confluence/#plfa_plfa-part2-Confluence-3732" class="Datatype Operator">⇛*</a> <a id="plfa_plfa-part2-Confluence-17395" href="../Confluence/#plfa_plfa-part2-Confluence-17364" class="Bound">N′</a>
    <a id="plfa_plfa-part2-Confluence-17402" class="Comment">------------------------------------</a>
  <a id="plfa_plfa-part2-Confluence-17441" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-17443" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1244" class="Function">Σ[</a> <a id="plfa_plfa-part2-Confluence-17446" href="../Confluence/#plfa_plfa-part2-Confluence-17446" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-17448" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1244" class="Function">∈</a> <a id="plfa_plfa-part2-Confluence-17450" href="../Confluence/#plfa_plfa-part2-Confluence-17354" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-17452" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-17454" href="../Confluence/#plfa_plfa-part2-Confluence-17356" class="Bound">A</a> <a id="plfa_plfa-part2-Confluence-17456" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1244" class="Function">]</a> <a id="plfa_plfa-part2-Confluence-17458" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-17459" href="../Confluence/#plfa_plfa-part2-Confluence-17362" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-17461" href="../Confluence/#plfa_plfa-part2-Confluence-3732" class="Datatype Operator">⇛*</a> <a id="plfa_plfa-part2-Confluence-17464" href="../Confluence/#plfa_plfa-part2-Confluence-17446" class="Bound">L</a><a id="plfa_plfa-part2-Confluence-17465" class="Symbol">)</a>  <a id="plfa_plfa-part2-Confluence-17468" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1618" class="Function Operator">×</a>  <a id="plfa_plfa-part2-Confluence-17471" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-17472" href="../Confluence/#plfa_plfa-part2-Confluence-17364" class="Bound">N′</a> <a id="plfa_plfa-part2-Confluence-17475" href="../Confluence/#plfa_plfa-part2-Confluence-2621" class="Datatype Operator">⇛</a> <a id="plfa_plfa-part2-Confluence-17477" href="../Confluence/#plfa_plfa-part2-Confluence-17446" class="Bound">L</a><a id="plfa_plfa-part2-Confluence-17478" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-17480" href="../Confluence/#plfa_plfa-part2-Confluence-17344" class="Function">strip</a><a id="plfa_plfa-part2-Confluence-17485" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-17486" href="../Confluence/#plfa_plfa-part2-Confluence-17486" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-17487" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-17489" href="../Confluence/#plfa_plfa-part2-Confluence-17489" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-17490" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-17492" href="../Confluence/#plfa_plfa-part2-Confluence-17492" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-17493" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-17495" href="../Confluence/#plfa_plfa-part2-Confluence-17495" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-17496" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-17498" href="../Confluence/#plfa_plfa-part2-Confluence-17498" class="Bound">N′</a><a id="plfa_plfa-part2-Confluence-17500" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-17502" href="../Confluence/#plfa_plfa-part2-Confluence-17502" class="Bound">mn</a> <a id="plfa_plfa-part2-Confluence-17505" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-17506" href="../Confluence/#plfa_plfa-part2-Confluence-17492" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-17508" href="../Confluence/#plfa_plfa-part2-Confluence-3782" class="InductiveConstructor Operator">∎</a><a id="plfa_plfa-part2-Confluence-17509" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-17511" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-17513" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-17515" href="../Confluence/#plfa_plfa-part2-Confluence-17495" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-17517" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-17519" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-17521" href="../Confluence/#plfa_plfa-part2-Confluence-17495" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-17523" href="../Confluence/#plfa_plfa-part2-Confluence-3782" class="InductiveConstructor Operator">∎</a> <a id="plfa_plfa-part2-Confluence-17525" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-17527" href="../Confluence/#plfa_plfa-part2-Confluence-17502" class="Bound">mn</a> <a id="plfa_plfa-part2-Confluence-17530" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-17532" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part2-Confluence-17534" href="../Confluence/#plfa_plfa-part2-Confluence-17344" class="Function">strip</a><a id="plfa_plfa-part2-Confluence-17539" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-17540" href="../Confluence/#plfa_plfa-part2-Confluence-17540" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-17541" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-17543" href="../Confluence/#plfa_plfa-part2-Confluence-17543" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-17544" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-17546" href="../Confluence/#plfa_plfa-part2-Confluence-17546" class="Bound">M</a><a id="plfa_plfa-part2-Confluence-17547" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-17549" href="../Confluence/#plfa_plfa-part2-Confluence-17549" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-17550" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-17552" href="../Confluence/#plfa_plfa-part2-Confluence-17552" class="Bound">N′</a><a id="plfa_plfa-part2-Confluence-17554" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-17556" href="../Confluence/#plfa_plfa-part2-Confluence-17556" class="Bound">mn</a> <a id="plfa_plfa-part2-Confluence-17559" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-17560" href="../Confluence/#plfa_plfa-part2-Confluence-17546" class="Bound">M</a> <a id="plfa_plfa-part2-Confluence-17562" href="../Confluence/#plfa_plfa-part2-Confluence-3838" class="InductiveConstructor Operator">⇛⟨</a> <a id="plfa_plfa-part2-Confluence-17565" href="../Confluence/#plfa_plfa-part2-Confluence-17565" class="Bound">mm&#39;</a> <a id="plfa_plfa-part2-Confluence-17569" href="../Confluence/#plfa_plfa-part2-Confluence-3838" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-17571" href="../Confluence/#plfa_plfa-part2-Confluence-17571" class="Bound">m&#39;n&#39;</a><a id="plfa_plfa-part2-Confluence-17575" class="Symbol">)</a>
  <a id="plfa_plfa-part2-Confluence-17579" class="Keyword">with</a> <a id="plfa_plfa-part2-Confluence-17584" href="../Confluence/#plfa_plfa-part2-Confluence-17344" class="Function">strip</a> <a id="plfa_plfa-part2-Confluence-17590" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-17591" href="../Confluence/#plfa_plfa-part2-Confluence-14068" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-17604" href="../Confluence/#plfa_plfa-part2-Confluence-17565" class="Bound">mm&#39;</a><a id="plfa_plfa-part2-Confluence-17607" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-17609" href="../Confluence/#plfa_plfa-part2-Confluence-17571" class="Bound">m&#39;n&#39;</a>
<a id="plfa_plfa-part2-Confluence-17614" class="Symbol">...</a> <a id="plfa_plfa-part2-Confluence-17618" class="Symbol">|</a> <a id="plfa_plfa-part2-Confluence-17620" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-17622" href="../Confluence/#plfa_plfa-part2-Confluence-17622" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-17624" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-17626" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-17628" href="../Confluence/#plfa_plfa-part2-Confluence-17628" class="Bound">ll&#39;</a> <a id="plfa_plfa-part2-Confluence-17632" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-17634" href="../Confluence/#plfa_plfa-part2-Confluence-17634" class="Bound">n&#39;l&#39;</a> <a id="plfa_plfa-part2-Confluence-17639" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-17641" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-17643" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-17645" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-17647" href="../Confluence/#plfa_plfa-part2-Confluence-17622" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-17649" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-17651" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-17653" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-17655" href="../Confluence/#plfa_plfa-part2-Confluence-3838" class="InductiveConstructor Operator">⇛⟨</a> <a id="plfa_plfa-part2-Confluence-17658" href="../Confluence/#plfa_plfa-part2-Confluence-14068" class="Function">par-triangle</a> <a id="plfa_plfa-part2-Confluence-17671" class="Bound">mn</a> <a id="plfa_plfa-part2-Confluence-17674" href="../Confluence/#plfa_plfa-part2-Confluence-3838" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-17676" href="../Confluence/#plfa_plfa-part2-Confluence-17628" class="Bound">ll&#39;</a> <a id="plfa_plfa-part2-Confluence-17680" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-17682" href="../Confluence/#plfa_plfa-part2-Confluence-17634" class="Bound">n&#39;l&#39;</a> <a id="plfa_plfa-part2-Confluence-17687" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-17689" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟩</a>
</pre><p>The proof of confluence for parallel reduction is now proved by induction on the sequence <code>M ⇛* N</code>, using the above lemma in the induction step.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-par-confluence"></a><a id="plfa_plfa-part2-Confluence-17850" href="../Confluence/#plfa_plfa-part2-Confluence-17850" class="Function">par-confluence</a> <a id="plfa_plfa-part2-Confluence-17865" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-17867" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-17869" href="../Confluence/#plfa_plfa-part2-Confluence-17869" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-17871" href="../Confluence/#plfa_plfa-part2-Confluence-17871" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-17872" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-17874" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-17875" href="../Confluence/#plfa_plfa-part2-Confluence-17875" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-17877" href="../Confluence/#plfa_plfa-part2-Confluence-17877" class="Bound">M₁</a> <a id="plfa_plfa-part2-Confluence-17880" href="../Confluence/#plfa_plfa-part2-Confluence-17880" class="Bound">M₂</a> <a id="plfa_plfa-part2-Confluence-17883" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-17885" href="../Confluence/#plfa_plfa-part2-Confluence-17869" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-17887" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-17889" href="../Confluence/#plfa_plfa-part2-Confluence-17871" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-17890" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Confluence-17894" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-17896" href="../Confluence/#plfa_plfa-part2-Confluence-17875" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-17898" href="../Confluence/#plfa_plfa-part2-Confluence-3732" class="Datatype Operator">⇛*</a> <a id="plfa_plfa-part2-Confluence-17901" href="../Confluence/#plfa_plfa-part2-Confluence-17877" class="Bound">M₁</a>
  <a id="plfa_plfa-part2-Confluence-17906" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-17908" href="../Confluence/#plfa_plfa-part2-Confluence-17875" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-17910" href="../Confluence/#plfa_plfa-part2-Confluence-3732" class="Datatype Operator">⇛*</a> <a id="plfa_plfa-part2-Confluence-17913" href="../Confluence/#plfa_plfa-part2-Confluence-17880" class="Bound">M₂</a>
    <a id="plfa_plfa-part2-Confluence-17920" class="Comment">------------------------------------</a>
  <a id="plfa_plfa-part2-Confluence-17959" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-17961" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1244" class="Function">Σ[</a> <a id="plfa_plfa-part2-Confluence-17964" href="../Confluence/#plfa_plfa-part2-Confluence-17964" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-17966" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1244" class="Function">∈</a> <a id="plfa_plfa-part2-Confluence-17968" href="../Confluence/#plfa_plfa-part2-Confluence-17869" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-17970" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-17972" href="../Confluence/#plfa_plfa-part2-Confluence-17871" class="Bound">A</a> <a id="plfa_plfa-part2-Confluence-17974" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1244" class="Function">]</a> <a id="plfa_plfa-part2-Confluence-17976" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-17977" href="../Confluence/#plfa_plfa-part2-Confluence-17877" class="Bound">M₁</a> <a id="plfa_plfa-part2-Confluence-17980" href="../Confluence/#plfa_plfa-part2-Confluence-3732" class="Datatype Operator">⇛*</a> <a id="plfa_plfa-part2-Confluence-17983" href="../Confluence/#plfa_plfa-part2-Confluence-17964" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-17984" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-17986" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="plfa_plfa-part2-Confluence-17988" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-17989" href="../Confluence/#plfa_plfa-part2-Confluence-17880" class="Bound">M₂</a> <a id="plfa_plfa-part2-Confluence-17992" href="../Confluence/#plfa_plfa-part2-Confluence-3732" class="Datatype Operator">⇛*</a> <a id="plfa_plfa-part2-Confluence-17995" href="../Confluence/#plfa_plfa-part2-Confluence-17964" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-17996" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-17998" href="../Confluence/#plfa_plfa-part2-Confluence-17850" class="Function">par-confluence</a> <a id="plfa_plfa-part2-Confluence-18013" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-18014" href="../Confluence/#plfa_plfa-part2-Confluence-18014" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-18015" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-18017" href="../Confluence/#plfa_plfa-part2-Confluence-18017" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-18018" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-18020" href="../Confluence/#plfa_plfa-part2-Confluence-18020" class="Bound">L</a><a id="plfa_plfa-part2-Confluence-18021" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-18023" class="DottedPattern Symbol">.</a><a id="plfa_plfa-part2-Confluence-18024" href="../Confluence/#plfa_plfa-part2-Confluence-18020" class="DottedPattern Bound">L</a><a id="plfa_plfa-part2-Confluence-18025" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-18027" href="../Confluence/#plfa_plfa-part2-Confluence-18027" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-18028" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-18030" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-18031" href="../Confluence/#plfa_plfa-part2-Confluence-18020" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-18033" href="../Confluence/#plfa_plfa-part2-Confluence-3782" class="InductiveConstructor Operator">∎</a><a id="plfa_plfa-part2-Confluence-18034" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-18036" href="../Confluence/#plfa_plfa-part2-Confluence-18036" class="Bound">L⇛*N</a> <a id="plfa_plfa-part2-Confluence-18041" class="Symbol">=</a> <a id="plfa_plfa-part2-Confluence-18043" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-18045" href="../Confluence/#plfa_plfa-part2-Confluence-18027" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-18047" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-18049" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-18051" href="../Confluence/#plfa_plfa-part2-Confluence-18036" class="Bound">L⇛*N</a> <a id="plfa_plfa-part2-Confluence-18056" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-18058" href="../Confluence/#plfa_plfa-part2-Confluence-18027" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-18060" href="../Confluence/#plfa_plfa-part2-Confluence-3782" class="InductiveConstructor Operator">∎</a> <a id="plfa_plfa-part2-Confluence-18062" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-18064" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part2-Confluence-18066" href="../Confluence/#plfa_plfa-part2-Confluence-17850" class="Function">par-confluence</a> <a id="plfa_plfa-part2-Confluence-18081" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-18082" href="../Confluence/#plfa_plfa-part2-Confluence-18082" class="Bound">Γ</a><a id="plfa_plfa-part2-Confluence-18083" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-18085" href="../Confluence/#plfa_plfa-part2-Confluence-18085" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-18086" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-18088" href="../Confluence/#plfa_plfa-part2-Confluence-18088" class="Bound">L</a><a id="plfa_plfa-part2-Confluence-18089" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-18091" href="../Confluence/#plfa_plfa-part2-Confluence-18091" class="Bound">M₁′</a><a id="plfa_plfa-part2-Confluence-18094" class="Symbol">}{</a><a id="plfa_plfa-part2-Confluence-18096" href="../Confluence/#plfa_plfa-part2-Confluence-18096" class="Bound">M₂</a><a id="plfa_plfa-part2-Confluence-18098" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-18100" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-18101" href="../Confluence/#plfa_plfa-part2-Confluence-18088" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-18103" href="../Confluence/#plfa_plfa-part2-Confluence-3838" class="InductiveConstructor Operator">⇛⟨</a> <a id="plfa_plfa-part2-Confluence-18106" href="../Confluence/#plfa_plfa-part2-Confluence-18106" class="Bound">L⇛M₁</a> <a id="plfa_plfa-part2-Confluence-18111" href="../Confluence/#plfa_plfa-part2-Confluence-3838" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-18113" href="../Confluence/#plfa_plfa-part2-Confluence-18113" class="Bound">M₁⇛*M₁′</a><a id="plfa_plfa-part2-Confluence-18120" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-18122" href="../Confluence/#plfa_plfa-part2-Confluence-18122" class="Bound">L⇛*M₂</a>
    <a id="plfa_plfa-part2-Confluence-18132" class="Keyword">with</a> <a id="plfa_plfa-part2-Confluence-18137" href="../Confluence/#plfa_plfa-part2-Confluence-17344" class="Function">strip</a> <a id="plfa_plfa-part2-Confluence-18143" href="../Confluence/#plfa_plfa-part2-Confluence-18106" class="Bound">L⇛M₁</a> <a id="plfa_plfa-part2-Confluence-18148" href="../Confluence/#plfa_plfa-part2-Confluence-18122" class="Bound">L⇛*M₂</a>
<a id="plfa_plfa-part2-Confluence-18154" class="Symbol">...</a> <a id="plfa_plfa-part2-Confluence-18158" class="Symbol">|</a> <a id="plfa_plfa-part2-Confluence-18160" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-18162" href="../Confluence/#plfa_plfa-part2-Confluence-18162" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-18164" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-18166" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-18168" href="../Confluence/#plfa_plfa-part2-Confluence-18168" class="Bound">M₁⇛*N</a> <a id="plfa_plfa-part2-Confluence-18174" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-18176" href="../Confluence/#plfa_plfa-part2-Confluence-18176" class="Bound">M₂⇛N</a> <a id="plfa_plfa-part2-Confluence-18181" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-18183" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟩</a>
      <a id="plfa_plfa-part2-Confluence-18191" class="Keyword">with</a> <a id="plfa_plfa-part2-Confluence-18196" href="../Confluence/#plfa_plfa-part2-Confluence-17850" class="Function">par-confluence</a> <a id="plfa_plfa-part2-Confluence-18211" class="Bound">M₁⇛*M₁′</a> <a id="plfa_plfa-part2-Confluence-18219" href="../Confluence/#plfa_plfa-part2-Confluence-18168" class="Bound">M₁⇛*N</a>
<a id="plfa_plfa-part2-Confluence-18225" class="Symbol">...</a>   <a id="plfa_plfa-part2-Confluence-18231" class="Symbol">|</a> <a id="plfa_plfa-part2-Confluence-18233" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-18235" href="../Confluence/#plfa_plfa-part2-Confluence-18235" class="Bound">N′</a> <a id="plfa_plfa-part2-Confluence-18238" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-18240" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-18242" href="../Confluence/#plfa_plfa-part2-Confluence-18242" class="Bound">M₁′⇛*N′</a> <a id="plfa_plfa-part2-Confluence-18250" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-18252" href="../Confluence/#plfa_plfa-part2-Confluence-18252" class="Bound">N⇛*N′</a> <a id="plfa_plfa-part2-Confluence-18258" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-18260" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-18262" class="Symbol">=</a>
        <a id="plfa_plfa-part2-Confluence-18272" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-18274" href="../Confluence/#plfa_plfa-part2-Confluence-18235" class="Bound">N′</a> <a id="plfa_plfa-part2-Confluence-18277" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-18279" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-18281" href="../Confluence/#plfa_plfa-part2-Confluence-18242" class="Bound">M₁′⇛*N′</a> <a id="plfa_plfa-part2-Confluence-18289" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-18291" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-18292" class="Bound">M₂</a> <a id="plfa_plfa-part2-Confluence-18295" href="../Confluence/#plfa_plfa-part2-Confluence-3838" class="InductiveConstructor Operator">⇛⟨</a> <a id="plfa_plfa-part2-Confluence-18298" class="Bound">M₂⇛N</a> <a id="plfa_plfa-part2-Confluence-18303" href="../Confluence/#plfa_plfa-part2-Confluence-3838" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-18305" href="../Confluence/#plfa_plfa-part2-Confluence-18252" class="Bound">N⇛*N′</a><a id="plfa_plfa-part2-Confluence-18310" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-18312" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-18314" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟩</a>
</pre><p>The step case may be illustrated as follows:</p><pre><code>        L
       / \
      1   *
     /     \
    M₁ (a)  M₂
   / \     /
  *   *   1
 /     \ /
M₁′(b)  N
 \     /
  *   *
   \ /
    N′</code></pre><p>where downward lines are instances of <code>⇛</code> or <code>⇛*</code>, depending on how they are marked. Here <code>(a)</code> holds by <code>strip</code> and <code>(b)</code> holds by induction.</p><h2 id="proof-of-confluence-for-reduction">Proof of confluence for reduction</h2><p>Confluence of reduction is a corollary of confluence for parallel reduction. From <code>L —↠ M₁</code> and <code>L —↠ M₂</code> we have <code>L ⇛* M₁</code> and <code>L ⇛* M₂</code> by <code>betas-pars</code>. Then by confluence we obtain some <code>L</code> such that <code>M₁ ⇛* N</code> and <code>M₂ ⇛* N</code>, from which we conclude that <code>M₁ —↠ N</code> and <code>M₂ —↠ N</code> by <code>pars-betas</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Confluence-confluence"></a><a id="plfa_plfa-part2-Confluence-19047" href="../Confluence/#plfa_plfa-part2-Confluence-19047" class="Function">confluence</a> <a id="plfa_plfa-part2-Confluence-19058" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-19060" class="Symbol">∀{</a><a id="plfa_plfa-part2-Confluence-19062" href="../Confluence/#plfa_plfa-part2-Confluence-19062" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-19064" href="../Confluence/#plfa_plfa-part2-Confluence-19064" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-19065" class="Symbol">}</a> <a id="plfa_plfa-part2-Confluence-19067" class="Symbol">{</a><a id="plfa_plfa-part2-Confluence-19068" href="../Confluence/#plfa_plfa-part2-Confluence-19068" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-19070" href="../Confluence/#plfa_plfa-part2-Confluence-19070" class="Bound">M₁</a> <a id="plfa_plfa-part2-Confluence-19073" href="../Confluence/#plfa_plfa-part2-Confluence-19073" class="Bound">M₂</a> <a id="plfa_plfa-part2-Confluence-19076" class="Symbol">:</a> <a id="plfa_plfa-part2-Confluence-19078" href="../Confluence/#plfa_plfa-part2-Confluence-19062" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-19080" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-19082" href="../Confluence/#plfa_plfa-part2-Confluence-19064" class="Bound">A</a><a id="plfa_plfa-part2-Confluence-19083" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Confluence-19087" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-19089" href="../Confluence/#plfa_plfa-part2-Confluence-19068" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-19091" href="../Untyped/#plfa_plfa-part2-Untyped-10958" class="Datatype Operator">—↠</a> <a id="plfa_plfa-part2-Confluence-19094" href="../Confluence/#plfa_plfa-part2-Confluence-19070" class="Bound">M₁</a>
  <a id="plfa_plfa-part2-Confluence-19099" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-19101" href="../Confluence/#plfa_plfa-part2-Confluence-19068" class="Bound">L</a> <a id="plfa_plfa-part2-Confluence-19103" href="../Untyped/#plfa_plfa-part2-Untyped-10958" class="Datatype Operator">—↠</a> <a id="plfa_plfa-part2-Confluence-19106" href="../Confluence/#plfa_plfa-part2-Confluence-19073" class="Bound">M₂</a>
    <a id="plfa_plfa-part2-Confluence-19113" class="Comment">-----------------------------------</a>
  <a id="plfa_plfa-part2-Confluence-19151" class="Symbol">→</a> <a id="plfa_plfa-part2-Confluence-19153" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1244" class="Function">Σ[</a> <a id="plfa_plfa-part2-Confluence-19156" href="../Confluence/#plfa_plfa-part2-Confluence-19156" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-19158" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1244" class="Function">∈</a> <a id="plfa_plfa-part2-Confluence-19160" href="../Confluence/#plfa_plfa-part2-Confluence-19062" class="Bound">Γ</a> <a id="plfa_plfa-part2-Confluence-19162" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Confluence-19164" href="../Confluence/#plfa_plfa-part2-Confluence-19064" class="Bound">A</a> <a id="plfa_plfa-part2-Confluence-19166" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1244" class="Function">]</a> <a id="plfa_plfa-part2-Confluence-19168" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-19169" href="../Confluence/#plfa_plfa-part2-Confluence-19070" class="Bound">M₁</a> <a id="plfa_plfa-part2-Confluence-19172" href="../Untyped/#plfa_plfa-part2-Untyped-10958" class="Datatype Operator">—↠</a> <a id="plfa_plfa-part2-Confluence-19175" href="../Confluence/#plfa_plfa-part2-Confluence-19156" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-19176" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-19178" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="plfa_plfa-part2-Confluence-19180" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-19181" href="../Confluence/#plfa_plfa-part2-Confluence-19073" class="Bound">M₂</a> <a id="plfa_plfa-part2-Confluence-19184" href="../Untyped/#plfa_plfa-part2-Untyped-10958" class="Datatype Operator">—↠</a> <a id="plfa_plfa-part2-Confluence-19187" href="../Confluence/#plfa_plfa-part2-Confluence-19156" class="Bound">N</a><a id="plfa_plfa-part2-Confluence-19188" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-19190" href="../Confluence/#plfa_plfa-part2-Confluence-19047" class="Function">confluence</a> <a id="plfa_plfa-part2-Confluence-19201" href="../Confluence/#plfa_plfa-part2-Confluence-19201" class="Bound">L↠M₁</a> <a id="plfa_plfa-part2-Confluence-19206" href="../Confluence/#plfa_plfa-part2-Confluence-19206" class="Bound">L↠M₂</a>
    <a id="plfa_plfa-part2-Confluence-19215" class="Keyword">with</a> <a id="plfa_plfa-part2-Confluence-19220" href="../Confluence/#plfa_plfa-part2-Confluence-17850" class="Function">par-confluence</a> <a id="plfa_plfa-part2-Confluence-19235" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-19236" href="../Confluence/#plfa_plfa-part2-Confluence-4946" class="Function">betas-pars</a> <a id="plfa_plfa-part2-Confluence-19247" href="../Confluence/#plfa_plfa-part2-Confluence-19201" class="Bound">L↠M₁</a><a id="plfa_plfa-part2-Confluence-19251" class="Symbol">)</a> <a id="plfa_plfa-part2-Confluence-19253" class="Symbol">(</a><a id="plfa_plfa-part2-Confluence-19254" href="../Confluence/#plfa_plfa-part2-Confluence-4946" class="Function">betas-pars</a> <a id="plfa_plfa-part2-Confluence-19265" href="../Confluence/#plfa_plfa-part2-Confluence-19206" class="Bound">L↠M₂</a><a id="plfa_plfa-part2-Confluence-19269" class="Symbol">)</a>
<a id="plfa_plfa-part2-Confluence-19271" class="Symbol">...</a> <a id="plfa_plfa-part2-Confluence-19275" class="Symbol">|</a> <a id="plfa_plfa-part2-Confluence-19277" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-19279" href="../Confluence/#plfa_plfa-part2-Confluence-19279" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-19281" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-19283" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-19285" href="../Confluence/#plfa_plfa-part2-Confluence-19285" class="Bound">M₁⇛N</a> <a id="plfa_plfa-part2-Confluence-19290" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-19292" href="../Confluence/#plfa_plfa-part2-Confluence-19292" class="Bound">M₂⇛N</a> <a id="plfa_plfa-part2-Confluence-19297" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-19299" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-19301" class="Symbol">=</a>
      <a id="plfa_plfa-part2-Confluence-19309" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-19311" href="../Confluence/#plfa_plfa-part2-Confluence-19279" class="Bound">N</a> <a id="plfa_plfa-part2-Confluence-19313" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-19315" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Confluence-19317" href="../Confluence/#plfa_plfa-part2-Confluence-6852" class="Function">pars-betas</a> <a id="plfa_plfa-part2-Confluence-19328" href="../Confluence/#plfa_plfa-part2-Confluence-19285" class="Bound">M₁⇛N</a> <a id="plfa_plfa-part2-Confluence-19333" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Confluence-19335" href="../Confluence/#plfa_plfa-part2-Confluence-6852" class="Function">pars-betas</a> <a id="plfa_plfa-part2-Confluence-19346" href="../Confluence/#plfa_plfa-part2-Confluence-19292" class="Bound">M₂⇛N</a> <a id="plfa_plfa-part2-Confluence-19351" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Confluence-19353" href="../Confluence/#plfa_plfa-part2-Confluence-2207" class="InductiveConstructor Operator">⟩</a>
</pre><h2 id="notes">Notes</h2><p>This mechanized proof of confluence is loosely based on several sources including <span class="citation" data-cites="Schafer:2015">Schäfer, Tebbi, and Smolka (2015)</span>, <span class="citation" data-cites="Takahashi:1995">Takahashi (1995)</span>, <span class="citation" data-cites="Pfenning:1992">Pfenning (1992)</span>, and Nipkow and Berghofer’s mechanization in Isabelle, which is based on a paper by <span class="citation" data-cites="Nipkow:1996">Nipkow (1996)</span>.</p><h2 id="unicode">Unicode</h2><p>This chapter uses the following unicode:</p><pre><code>⇛  U+21DB  RIGHTWARDS TRIPLE ARROW (\r== or \Rrightarrow)
⁺  U+207A  SUPERSCRIPT PLUS SIGN   (\^+)</code></pre><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list"><div id="ref-Nipkow:1996" class="csl-entry" role="listitem">Nipkow, Tobias. 1996. <span>“More Church-Rosser Proofs (in Isabelle/HOL).”</span> In <em>Proceedings of the 13th International Conference on Automated Deduction: Automated Deduction</em>, 733–47. CADE-13. Berlin, Heidelberg: Springer-Verlag.</div><div id="ref-Pfenning:1992" class="csl-entry" role="listitem">Pfenning, Frank. 1992. <span>“A Proof of the Church-Rosser Theorem and Its Representation in a Logical Framework.”</span> CMU-CS-92-186. Carnegie Mellon University; Carnegie Mellon University.</div><div id="ref-Schafer:2015" class="csl-entry" role="listitem">Schäfer, Steven, Tobias Tebbi, and Gert Smolka. 2015. <span>“Autosubst: Reasoning with de Bruijn Terms and Parallel Substitutions.”</span> In <em>Interactive Theorem Proving: 6th International Conference, ITP 2015, Nanjing, China, August 24-27, 2015, Proceedings 6</em>, 359–74. Springer.</div><div id="ref-Takahashi:1995" class="csl-entry" role="listitem">Takahashi, M. 1995. <span>“Parallel Reductions in λ-Calculus.”</span> <em>Information and Computation</em> 118 (1): 120–27. https://doi.org/<a href="https://doi.org/10.1006/inco.1995.1057">https://doi.org/10.1006/inco.1995.1057</a>.</div></div></div><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Untyped/">Prev</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/part2/Confluence.lagda.md">Source</a></li><li class="separator">•</li><li><a class="pagelink" href="../BigStep/">Next</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card" aria-label="Site"><data class="u-url" href="../"></data><div class="wrapper"><h2 class="footer-heading">Programming Language Foundations in Agda</h2><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk"><i class="far fa-envelope"></i>  wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><i class="fab fa-github"></i>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works"><i class="far fa-envelope"></i>  me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><i class="fab fa-github"></i>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><i class="fab fa-twitter"></i>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu"><i class="far fa-envelope"></i>  jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><i class="fab fa-github"></i>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><i class="fab fa-twitter"></i>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></div></footer></body></html>