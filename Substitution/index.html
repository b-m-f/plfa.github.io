<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../assets/css/light.css" integrity="sha512-J8Ko83OT11zQ2/+vowqJ0Ovx2JEWUBNPTbNptixluYAHAO009R7GVxRQNKA+Wq4skbsdZr1AEOjF2AeQmKt3/A==" title="Light" id="stylesheet-light"><link rel="stylesheet" href="../assets/css/dark.css" integrity="sha512-kK/Wf2991I8CFsf5/Qu/2GIm2Enzw8H70RQ/yHNIb6iGTPF/SKE0B+kxTG2HjcFOgcjfKxZ9Jr4bvSfuKraNWw==" title="Dark" id="stylesheet-dark" disabled><title>Programming Language Foundations in Agda – Substitution</title><script src="../assets/js/anchor.js" integrity="sha512-Y5IMGqYQp36NYYdEL6gXISLsHNpx0LxW0NS0twvYBvXI8GH5PZa1g5gm1B5lxg6tlFyUAiOOfgKL/NIn0dtY4w==" id="script-anchor"></script><script src="../assets/js/darkmode.js" integrity="sha512-iUX9HnSphH4WbMv88MYJEFtLfkCtTHrvWyFwjigSm5GkwHv1L31GP5grIGDo7kI2jftuYVvt4xu4qeCn2fKbww==" id="script-darkmode"></script><script src="../assets/js/main.js" integrity="sha512-X7aZg6IUKq1TvTVjSureaMGKZ/ylbAD7kxiU2w42IUgh4lUTWoOsoIWzNvrqkwBJdQ1y2GsS67gtsv39Uuq6ew==" id="script-main"></script></head><body><header class="site-header" aria-label="Site"><div class="wrapper"><a class="site-title" href="../">Programming Language Foundations in Agda</a><nav class="site-nav" aria-label="Site"><input type="checkbox" id="nav-trigger" class="nav-trigger"><label for="nav-trigger"><span class="menu-icon"><svg class="svg-icon grey" viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span></label><div class="trigger"><a class="page-link" href="../">The Book</a> <a class="page-link" href="../Announcements/">Announcements</a> <a class="page-link" href="../GettingStarted/">Getting Started</a> <a class="page-link" href="../Citing/">Citing</a> <a class="page-link" href="https://agda-zh.github.io/PLFA-zh/">中文</a> <a class="page-link" onclick="window.darkmode.toggle()"><i id="darkmode-trigger" class="fas fa-moon"></i> </a><a class="page-link" href="../plfa.epub"><i class="fa fa-book"></i></a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../ContextualEquivalence/">Prev</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/part2/Substitution.lagda.md">Source</a></li><li class="separator">•</li><li><a class="pagelink" href="../Acknowledgements/">Next</a></li><li class="separator">•</li></ul></nav><header class="post-header" aria-label="Chapter"><h1 class="post-title">Substitution: Substitution in the untyped lambda calculus</h1></header><div class="post-content"><pre class="Agda"><a id="plfa_plfa-part2-Substitution-118" class="Keyword">module</a> <a id="plfa_plfa-part2-Substitution-125" href="../Substitution/#" class="Module">plfa.part2.Substitution</a> <a id="plfa_plfa-part2-Substitution-149" class="Keyword">where</a>
</pre><h2 id="introduction">Introduction</h2><p>The primary purpose of this chapter is to prove that substitution commutes with itself. Barendregt (1984) refers to this as the substitution lemma:</p><pre><code>M [x:=N] [y:=L] = M [y:=L] [x:= N[y:=L] ]</code></pre><p>In our setting, with de Bruijn indices for variables, the statement of the lemma becomes:</p><pre><code>M [ N ] [ L ] ≡  M〔 L 〕[ N [ L ] ]                     (substitution)</code></pre><p>where the notation <code>M 〔 L 〕</code> is for substituting L for index 1 inside M. In addition, because we define substitution in terms of parallel substitution, we have the following generalization, replacing the substitution of L with an arbitrary parallel substitution σ.</p><pre><code>subst σ (M [ N ]) ≡ (subst (exts σ) M) [ subst σ N ]    (subst-commute)</code></pre><p>The special case for renamings is also useful.</p><pre><code>rename ρ (M [ N ]) ≡ (rename (ext ρ) M) [ rename ρ N ]
                                                 (rename-subst-commute)</code></pre><p>The secondary purpose of this chapter is to define the σ algebra of parallel substitution due to Abadi, Cardelli, Curien, and Levy (1991). The equations of this algebra not only help us prove the substitution lemma, but they are generally useful. Furthermore, when the equations are applied from left to right, they form a rewrite system that <em>decides</em> whether any two substitutions are equal.</p><h2 id="imports">Imports</h2><pre class="Agda"><a id="plfa_plfa-part2-Substitution-1482" class="Keyword">import</a> <a id="plfa_plfa-part2-Substitution-1489" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="plfa_plfa-part2-Substitution-1527" class="Symbol">as</a> <a id="plfa_plfa-part2-Substitution-1530" class="Module">Eq</a>
<a id="plfa_plfa-part2-Substitution-1533" class="Keyword">open</a> <a id="plfa_plfa-part2-Substitution-1538" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.html" class="Module">Eq</a> <a id="plfa_plfa-part2-Substitution-1541" class="Keyword">using</a> <a id="plfa_plfa-part2-Substitution-1547" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-1548" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">_≡_</a><a id="plfa_plfa-part2-Substitution-1551" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1553" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Substitution-1557" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1559" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1693" class="Function">sym</a><a id="plfa_plfa-part2-Substitution-1562" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1564" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a><a id="plfa_plfa-part2-Substitution-1568" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1570" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1376" class="Function">cong₂</a><a id="plfa_plfa-part2-Substitution-1575" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1577" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1470" class="Function">cong-app</a><a id="plfa_plfa-part2-Substitution-1585" class="Symbol">)</a>
<a id="plfa_plfa-part2-Substitution-1587" class="Keyword">open</a> <a id="plfa_plfa-part2-Substitution-1592" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2717" class="Module">Eq.≡-Reasoning</a> <a id="plfa_plfa-part2-Substitution-1607" class="Keyword">using</a> <a id="plfa_plfa-part2-Substitution-1613" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-1614" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin_</a><a id="plfa_plfa-part2-Substitution-1620" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1622" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">_≡⟨⟩_</a><a id="plfa_plfa-part2-Substitution-1627" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1629" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">step-≡</a><a id="plfa_plfa-part2-Substitution-1635" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1637" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">_∎</a><a id="plfa_plfa-part2-Substitution-1639" class="Symbol">)</a>
<a id="plfa_plfa-part2-Substitution-1641" class="Keyword">open</a> <a id="plfa_plfa-part2-Substitution-1646" class="Keyword">import</a> <a id="plfa_plfa-part2-Substitution-1653" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.html" class="Module">Function</a> <a id="plfa_plfa-part2-Substitution-1662" class="Keyword">using</a> <a id="plfa_plfa-part2-Substitution-1668" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-1669" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">_∘_</a><a id="plfa_plfa-part2-Substitution-1672" class="Symbol">)</a>
<a id="plfa_plfa-part2-Substitution-1674" class="Keyword">open</a> <a id="plfa_plfa-part2-Substitution-1679" class="Keyword">import</a> <a id="plfa_plfa-part2-Substitution-1686" href="../Untyped/#" class="Module">plfa.part2.Untyped</a>
     <a id="plfa_plfa-part2-Substitution-1710" class="Keyword">using</a> <a id="plfa_plfa-part2-Substitution-1716" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-1717" href="../Untyped/#plfa_plfa-part2-Untyped-2490" class="Datatype">Type</a><a id="plfa_plfa-part2-Substitution-1721" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1723" href="../Untyped/#plfa_plfa-part2-Untyped-2782" class="Datatype">Context</a><a id="plfa_plfa-part2-Substitution-1730" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1732" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">_⊢_</a><a id="plfa_plfa-part2-Substitution-1735" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1737" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-1738" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1740" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">_∋_</a><a id="plfa_plfa-part2-Substitution-1743" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1745" href="../Untyped/#plfa_plfa-part2-Untyped-2804" class="InductiveConstructor">∅</a><a id="plfa_plfa-part2-Substitution-1746" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1748" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">_,_</a><a id="plfa_plfa-part2-Substitution-1751" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1753" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-1754" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1756" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part2-Substitution-1758" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1760" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`_</a><a id="plfa_plfa-part2-Substitution-1762" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1764" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ_</a><a id="plfa_plfa-part2-Substitution-1766" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1768" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">_·_</a><a id="plfa_plfa-part2-Substitution-1771" class="Symbol">;</a>
            <a id="plfa_plfa-part2-Substitution-1785" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a><a id="plfa_plfa-part2-Substitution-1791" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1793" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a><a id="plfa_plfa-part2-Substitution-1798" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1800" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a><a id="plfa_plfa-part2-Substitution-1803" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1805" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a><a id="plfa_plfa-part2-Substitution-1809" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1811" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">_[_]</a><a id="plfa_plfa-part2-Substitution-1815" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1817" href="../Untyped/#plfa_plfa-part2-Untyped-7207" class="Function">subst-zero</a><a id="plfa_plfa-part2-Substitution-1827" class="Symbol">)</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-1842" class="Keyword">postulate</a>
  <a id="plfa_plfa-part2-Substitution-extensionality"></a><a id="plfa_plfa-part2-Substitution-1854" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-1869" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-1871" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-1873" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-1874" href="../Substitution/#plfa_plfa-part2-Substitution-1874" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-1876" href="../Substitution/#plfa_plfa-part2-Substitution-1876" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-1878" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-1880" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a><a id="plfa_plfa-part2-Substitution-1883" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-1885" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-1886" href="../Substitution/#plfa_plfa-part2-Substitution-1886" class="Bound">f</a> <a id="plfa_plfa-part2-Substitution-1888" href="../Substitution/#plfa_plfa-part2-Substitution-1888" class="Bound">g</a> <a id="plfa_plfa-part2-Substitution-1890" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-1892" href="../Substitution/#plfa_plfa-part2-Substitution-1874" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-1894" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-1896" href="../Substitution/#plfa_plfa-part2-Substitution-1876" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-1897" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Substitution-1903" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-1905" class="Symbol">(∀</a> <a id="plfa_plfa-part2-Substitution-1908" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-1909" href="../Substitution/#plfa_plfa-part2-Substitution-1909" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-1911" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-1913" href="../Substitution/#plfa_plfa-part2-Substitution-1874" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-1914" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-1916" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-1918" href="../Substitution/#plfa_plfa-part2-Substitution-1886" class="Bound">f</a> <a id="plfa_plfa-part2-Substitution-1920" href="../Substitution/#plfa_plfa-part2-Substitution-1909" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-1922" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-1924" href="../Substitution/#plfa_plfa-part2-Substitution-1888" class="Bound">g</a> <a id="plfa_plfa-part2-Substitution-1926" href="../Substitution/#plfa_plfa-part2-Substitution-1909" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-1927" class="Symbol">)</a>
      <a id="plfa_plfa-part2-Substitution-1935" class="Comment">-----------------------</a>
    <a id="plfa_plfa-part2-Substitution-1963" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-1965" href="../Substitution/#plfa_plfa-part2-Substitution-1886" class="Bound">f</a> <a id="plfa_plfa-part2-Substitution-1967" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-1969" href="../Substitution/#plfa_plfa-part2-Substitution-1888" class="Bound">g</a>
</pre><h2 id="notation">Notation</h2><p>We introduce the following shorthand for the type of a <em>renaming</em> from variables in context <code>Γ</code> to variables in context <code>Δ</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-Rename"></a><a id="plfa_plfa-part2-Substitution-2123" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-2130" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-2132" href="../Untyped/#plfa_plfa-part2-Untyped-2782" class="Datatype">Context</a> <a id="plfa_plfa-part2-Substitution-2140" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2142" href="../Untyped/#plfa_plfa-part2-Untyped-2782" class="Datatype">Context</a> <a id="plfa_plfa-part2-Substitution-2150" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2152" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a>
<a id="plfa_plfa-part2-Substitution-2156" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-2163" href="../Substitution/#plfa_plfa-part2-Substitution-2163" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-2165" href="../Substitution/#plfa_plfa-part2-Substitution-2165" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-2167" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-2169" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-2171" href="../Substitution/#plfa_plfa-part2-Substitution-2171" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-2172" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-2174" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2176" href="../Substitution/#plfa_plfa-part2-Substitution-2163" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-2178" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-2180" href="../Substitution/#plfa_plfa-part2-Substitution-2171" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-2182" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2184" href="../Substitution/#plfa_plfa-part2-Substitution-2165" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-2186" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-2188" href="../Substitution/#plfa_plfa-part2-Substitution-2171" class="Bound">A</a>
</pre><p>Similarly, we introduce the following shorthand for the type of a <em>substitution</em> from variables in context <code>Γ</code> to terms in context <code>Δ</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-Subst"></a><a id="plfa_plfa-part2-Substitution-2340" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-2346" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-2348" href="../Untyped/#plfa_plfa-part2-Untyped-2782" class="Datatype">Context</a> <a id="plfa_plfa-part2-Substitution-2356" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2358" href="../Untyped/#plfa_plfa-part2-Untyped-2782" class="Datatype">Context</a> <a id="plfa_plfa-part2-Substitution-2366" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2368" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a>
<a id="plfa_plfa-part2-Substitution-2372" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-2378" href="../Substitution/#plfa_plfa-part2-Substitution-2378" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-2380" href="../Substitution/#plfa_plfa-part2-Substitution-2380" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-2382" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-2384" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-2386" href="../Substitution/#plfa_plfa-part2-Substitution-2386" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-2387" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-2389" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2391" href="../Substitution/#plfa_plfa-part2-Substitution-2378" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-2393" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-2395" href="../Substitution/#plfa_plfa-part2-Substitution-2386" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-2397" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2399" href="../Substitution/#plfa_plfa-part2-Substitution-2380" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-2401" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-2403" href="../Substitution/#plfa_plfa-part2-Substitution-2386" class="Bound">A</a>
</pre><p>We use the following more succinct notation for the <code>subst</code> function.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-⟪_⟫"></a><a id="plfa_plfa-part2-Substitution-2489" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪_⟫</a> <a id="plfa_plfa-part2-Substitution-2493" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-2495" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-2497" href="../Substitution/#plfa_plfa-part2-Substitution-2497" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-2499" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-2501" href="../Substitution/#plfa_plfa-part2-Substitution-2501" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-2502" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-2504" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2506" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-2512" href="../Substitution/#plfa_plfa-part2-Substitution-2497" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-2514" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-2516" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2518" href="../Substitution/#plfa_plfa-part2-Substitution-2497" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-2520" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-2522" href="../Substitution/#plfa_plfa-part2-Substitution-2501" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-2524" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2526" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-2528" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-2530" href="../Substitution/#plfa_plfa-part2-Substitution-2501" class="Bound">A</a>
<a id="plfa_plfa-part2-Substitution-2532" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-2534" href="../Substitution/#plfa_plfa-part2-Substitution-2534" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-2536" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-2538" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-2540" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-2542" href="../Substitution/#plfa_plfa-part2-Substitution-2542" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-2544" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2546" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-2552" href="../Substitution/#plfa_plfa-part2-Substitution-2534" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-2554" href="../Substitution/#plfa_plfa-part2-Substitution-2542" class="Bound">M</a>
</pre><h2 id="the-σ-algebra-of-substitution">The σ algebra of substitution</h2><p>A substitution maps de Bruijn indices (natural numbers) to terms, so we can view a substitution simply as a sequence of terms, or more precisely, as an infinite sequence of terms. The σ algebra consists of four operations for building such sequences: identity <code>ids</code>, shift <code>↑</code>, cons <code>M • σ</code>, and sequencing <code>σ ⨟ τ</code>. The sequence <code>0, 1, 2, ...</code> is constructed by the identity substitution.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-ids"></a><a id="plfa_plfa-part2-Substitution-2995" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-2999" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-3001" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-3003" href="../Substitution/#plfa_plfa-part2-Substitution-3003" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-3004" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-3006" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-3008" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-3014" href="../Substitution/#plfa_plfa-part2-Substitution-3003" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-3016" href="../Substitution/#plfa_plfa-part2-Substitution-3003" class="Bound">Γ</a>
<a id="plfa_plfa-part2-Substitution-3018" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-3022" href="../Substitution/#plfa_plfa-part2-Substitution-3022" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-3024" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-3026" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-3028" href="../Substitution/#plfa_plfa-part2-Substitution-3022" class="Bound">x</a>
</pre><p>The shift operation <code>↑</code> constructs the sequence</p><pre><code>1, 2, 3, ...</code></pre><p>and is defined as follows.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-↑"></a><a id="plfa_plfa-part2-Substitution-3138" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a> <a id="plfa_plfa-part2-Substitution-3140" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-3142" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-3144" href="../Substitution/#plfa_plfa-part2-Substitution-3144" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-3146" href="../Substitution/#plfa_plfa-part2-Substitution-3146" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-3147" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-3149" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-3151" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-3157" href="../Substitution/#plfa_plfa-part2-Substitution-3144" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-3159" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-3160" href="../Substitution/#plfa_plfa-part2-Substitution-3144" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-3162" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-3164" href="../Substitution/#plfa_plfa-part2-Substitution-3146" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-3165" class="Symbol">)</a>
<a id="plfa_plfa-part2-Substitution-3167" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a> <a id="plfa_plfa-part2-Substitution-3169" href="../Substitution/#plfa_plfa-part2-Substitution-3169" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-3171" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-3173" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-3175" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-3176" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-3178" href="../Substitution/#plfa_plfa-part2-Substitution-3169" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-3179" class="Symbol">)</a>
</pre><p>Given a term <code>M</code> and substitution <code>σ</code>, the operation <code>M • σ</code> constructs the sequence</p><pre><code>M , σ 0, σ 1, σ 2, ...</code></pre><p>This operation is analogous to the <code>cons</code> operation of Lisp.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-3370" class="Keyword">infixr</a> <a id="plfa_plfa-part2-Substitution-3377" class="Number">6</a> <a id="plfa_plfa-part2-Substitution-3379" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">_•_</a>

<a id="plfa_plfa-part2-Substitution-_•_"></a><a id="plfa_plfa-part2-Substitution-3384" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">_•_</a> <a id="plfa_plfa-part2-Substitution-3388" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-3390" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-3392" href="../Substitution/#plfa_plfa-part2-Substitution-3392" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-3394" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-3396" href="../Substitution/#plfa_plfa-part2-Substitution-3396" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-3397" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-3399" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-3401" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-3402" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-3404" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-3406" href="../Substitution/#plfa_plfa-part2-Substitution-3396" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-3407" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-3409" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-3411" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-3417" href="../Substitution/#plfa_plfa-part2-Substitution-3392" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-3419" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-3421" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-3423" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-3429" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-3430" href="../Substitution/#plfa_plfa-part2-Substitution-3392" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-3432" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-3434" href="../Substitution/#plfa_plfa-part2-Substitution-3396" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-3435" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-3437" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Bound">Δ</a>
<a id="plfa_plfa-part2-Substitution-3439" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-3440" href="../Substitution/#plfa_plfa-part2-Substitution-3440" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-3442" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-3444" href="../Substitution/#plfa_plfa-part2-Substitution-3444" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-3445" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-3447" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-Substitution-3449" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-3451" href="../Substitution/#plfa_plfa-part2-Substitution-3440" class="Bound">M</a>
<a id="plfa_plfa-part2-Substitution-3453" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-3454" href="../Substitution/#plfa_plfa-part2-Substitution-3454" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-3456" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-3458" href="../Substitution/#plfa_plfa-part2-Substitution-3458" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-3459" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-3461" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-3462" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-3464" href="../Substitution/#plfa_plfa-part2-Substitution-3464" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-3465" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-3467" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-3469" href="../Substitution/#plfa_plfa-part2-Substitution-3458" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-3471" href="../Substitution/#plfa_plfa-part2-Substitution-3464" class="Bound">x</a>
</pre><p>Given two substitutions <code>σ</code> and <code>τ</code>, the sequencing operation <code>σ ⨟ τ</code> composes the two substitutions by first applying <code>σ</code> and then applying <code>τ</code>. So it produces the sequence</p><pre><code>⟪τ⟫(σ 0), ⟪τ⟫(σ 1), ⟪τ⟫(σ 2), ...</code></pre><p>Here is the definition.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-3725" class="Keyword">infixr</a> <a id="plfa_plfa-part2-Substitution-3732" class="Number">5</a> <a id="plfa_plfa-part2-Substitution-3734" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">_⨟_</a>

<a id="plfa_plfa-part2-Substitution-_⨟_"></a><a id="plfa_plfa-part2-Substitution-3739" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">_⨟_</a> <a id="plfa_plfa-part2-Substitution-3743" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-3745" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-3747" href="../Substitution/#plfa_plfa-part2-Substitution-3747" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-3749" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-3751" href="../Substitution/#plfa_plfa-part2-Substitution-3751" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-3752" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-3754" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-3756" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-3762" href="../Substitution/#plfa_plfa-part2-Substitution-3747" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-3764" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-3766" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-3768" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-3774" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-3776" href="../Substitution/#plfa_plfa-part2-Substitution-3751" class="Bound">Σ</a> <a id="plfa_plfa-part2-Substitution-3778" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-3780" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-3786" href="../Substitution/#plfa_plfa-part2-Substitution-3747" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-3788" href="../Substitution/#plfa_plfa-part2-Substitution-3751" class="Bound">Σ</a>
<a id="plfa_plfa-part2-Substitution-3790" href="../Substitution/#plfa_plfa-part2-Substitution-3790" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-3792" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-3794" href="../Substitution/#plfa_plfa-part2-Substitution-3794" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-3796" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-3798" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-3800" href="../Substitution/#plfa_plfa-part2-Substitution-3794" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-3802" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-3804" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-3806" href="../Substitution/#plfa_plfa-part2-Substitution-3790" class="Bound">σ</a>
</pre><p>For the sequencing operation, Abadi et al. use the notation of function composition, writing <code>σ ∘ τ</code>, but still with <code>σ</code> applied before <code>τ</code>, which is the opposite of standard mathematical practice. We instead write <code>σ ⨟ τ</code>, because semicolon is the standard notation for forward function composition.</p><h2 id="the-σ-algebra-equations">The σ algebra equations</h2><p>The σ algebra includes the following equations.</p><pre><code>(sub-head)  ⟪ M • σ ⟫ (` Z) ≡ M
(sub-tail)  ↑ ⨟ (M • σ)    ≡ σ
(sub-η)     (⟪ σ ⟫ (` Z)) • (↑ ⨟ σ) ≡ σ
(Z-shift)   (` Z) • ↑      ≡ ids

(sub-id)    ⟪ ids ⟫ M      ≡ M
(sub-app)   ⟪ σ ⟫ (L · M)  ≡ (⟪ σ ⟫ L) · (⟪ σ ⟫ M)
(sub-abs)   ⟪ σ ⟫ (ƛ N) ≡ ƛ ⟪ (` Z) • (σ ⨟ ↑) ⟫ N
(sub-sub)   ⟪ τ ⟫ ⟪ σ ⟫ M  ≡ ⟪ σ ⨟ τ ⟫ M

(sub-idL)   ids ⨟ σ        ≡ σ
(sub-idR)   σ ⨟ ids        ≡ σ
(sub-assoc) (σ ⨟ τ) ⨟ θ    ≡ σ ⨟ (τ ⨟ θ)
(sub-dist)  (M • σ) ⨟ τ    ≡ (⟪ τ ⟫ M) • (σ ⨟ τ)</code></pre><p>The first group of equations describe how the <code>•</code> operator acts like cons. The equation <code>sub-head</code> says that the variable zero <code>Z</code> returns the head of the sequence (it acts like the <code>car</code> of Lisp). Similarly, <code>sub-tail</code> says that sequencing with shift <code>↑</code> returns the tail of the sequence (it acts like <code>cdr</code> of Lisp). The <code>sub-η</code> equation is the η-expansion rule for sequences, saying that taking the head and tail of a sequence, and then cons’ing them together yields the original sequence. The <code>Z-shift</code> equation says that cons’ing zero onto the shifted sequence produces the identity sequence.</p><p>The next four equations involve applying substitutions to terms. The equation <code>sub-id</code> says that the identity substitution returns the term unchanged. The equations <code>sub-app</code> and <code>sub-abs</code> says that substitution is a congruence for the lambda calculus. The <code>sub-sub</code> equation says that the sequence operator <code>⨟</code> behaves as intended.</p><p>The last four equations concern the sequencing of substitutions. The first two equations, <code>sub-idL</code> and <code>sub-idR</code>, say that <code>ids</code> is the left and right unit of the sequencing operator. The <code>sub-assoc</code> equation says that sequencing is associative. Finally, <code>sub-dist</code> says that post-sequencing distributes through cons.</p><h2 id="relating-the-σ-algebra-and-substitution-functions">Relating the σ algebra and substitution functions</h2><p>The definitions of substitution <code>N [ M ]</code> and parallel substitution <code>subst σ N</code> depend on several auxiliary functions: <code>rename</code>, <code>exts</code>, <code>ext</code>, and <code>subst-zero</code>. We shall relate those functions to terms in the σ algebra.</p><p>To begin with, renaming can be expressed in terms of substitution. We have</p><pre><code>rename ρ M ≡ ⟪ ren ρ ⟫ M               (rename-subst-ren)</code></pre><p>where <code>ren</code> turns a renaming <code>ρ</code> into a substitution by post-composing <code>ρ</code> with the identity substitution.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-ren"></a><a id="plfa_plfa-part2-Substitution-6492" href="../Substitution/#plfa_plfa-part2-Substitution-6492" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-6496" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-6498" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-6500" href="../Substitution/#plfa_plfa-part2-Substitution-6500" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-6502" href="../Substitution/#plfa_plfa-part2-Substitution-6502" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-6503" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-6505" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-6507" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-6514" href="../Substitution/#plfa_plfa-part2-Substitution-6500" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-6516" href="../Substitution/#plfa_plfa-part2-Substitution-6502" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-6518" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-6520" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-6526" href="../Substitution/#plfa_plfa-part2-Substitution-6500" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-6528" href="../Substitution/#plfa_plfa-part2-Substitution-6502" class="Bound">Δ</a>
<a id="plfa_plfa-part2-Substitution-6530" href="../Substitution/#plfa_plfa-part2-Substitution-6492" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-6534" href="../Substitution/#plfa_plfa-part2-Substitution-6534" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-6536" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-6538" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-6542" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-6544" href="../Substitution/#plfa_plfa-part2-Substitution-6534" class="Bound">ρ</a>
</pre><p>When the renaming is the increment function, then it is equivalent to shift.</p><pre><code>ren S_ ≡ ↑                             (ren-shift)

rename S_ M ≡ ⟪ ↑ ⟫ M                  (rename-shift)</code></pre><p>Renaming with the identity renaming leaves the term unchanged.</p><pre><code>rename (λ {A} x → x) M ≡ M             (rename-id)</code></pre><p>Next we relate the <code>exts</code> function to the σ algebra. Recall that the <code>exts</code> function extends a substitution as follows:</p><pre><code>exts σ = ` Z, rename S_ (σ 0), rename S_ (σ 1), rename S_ (σ 2), ...</code></pre><p>So <code>exts</code> is equivalent to cons’ing Z onto the sequence formed by applying <code>σ</code> and then shifting.</p><pre><code>exts σ ≡ ` Z • (σ ⨟ ↑)                (exts-cons-shift)</code></pre><p>The <code>ext</code> function does the same job as <code>exts</code> but for renamings instead of substitutions. So composing <code>ext</code> with <code>ren</code> is the same as composing <code>ren</code> with <code>exts</code>.</p><pre><code>ren (ext ρ) ≡ exts (ren ρ)            (ren-ext)</code></pre><p>Thus, we can recast the <code>exts-cons-shift</code> equation in terms of renamings.</p><pre><code>ren (ext ρ) ≡ ` Z • (ren ρ ⨟ ↑)       (ext-cons-Z-shift)</code></pre><p>It is also useful to specialize the <code>sub-sub</code> equation of the σ algebra to the situation where the first substitution is a renaming.</p><pre><code>⟪ σ ⟫ (rename ρ M) ≡ ⟪ σ ∘ ρ ⟫ M       (rename-subst)</code></pre><p>The <code>subst-zero M</code> substitution is equivalent to cons’ing <code>M</code> onto the identity substitution.</p><pre><code>subst-zero M ≡ M • ids                (subst-Z-cons-ids)</code></pre><p>Finally, sequencing <code>exts σ</code> with <code>subst-zero M</code> is equivalent to cons’ing <code>M</code> onto <code>σ</code>.</p><pre><code>exts σ ⨟ subst-zero M ≡ (M • σ)       (subst-zero-exts-cons)</code></pre><h2 id="proofs-of-sub-head-sub-tail-sub-η-z-shift-sub-idl-sub-dist-and-sub-app">Proofs of sub-head, sub-tail, sub-η, Z-shift, sub-idL, sub-dist, and sub-app</h2><p>We start with the proofs that are immediate from the definitions of the operators.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-sub-head"></a><a id="plfa_plfa-part2-Substitution-8257" href="../Substitution/#plfa_plfa-part2-Substitution-8257" class="Function">sub-head</a> <a id="plfa_plfa-part2-Substitution-8266" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8268" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-8270" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8271" href="../Substitution/#plfa_plfa-part2-Substitution-8271" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-8273" href="../Substitution/#plfa_plfa-part2-Substitution-8273" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-8274" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8276" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8277" href="../Substitution/#plfa_plfa-part2-Substitution-8277" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-8278" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8280" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8281" href="../Substitution/#plfa_plfa-part2-Substitution-8281" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-8283" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8285" href="../Substitution/#plfa_plfa-part2-Substitution-8273" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-8287" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-8289" href="../Substitution/#plfa_plfa-part2-Substitution-8277" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-8290" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-8292" href="../Substitution/#plfa_plfa-part2-Substitution-8292" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-8294" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8296" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-8302" href="../Substitution/#plfa_plfa-part2-Substitution-8271" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-8304" href="../Substitution/#plfa_plfa-part2-Substitution-8273" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-8305" class="Symbol">}</a>
         <a id="plfa_plfa-part2-Substitution-8316" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-8318" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-8320" href="../Substitution/#plfa_plfa-part2-Substitution-8281" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-8322" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-8324" href="../Substitution/#plfa_plfa-part2-Substitution-8292" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-8326" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-8328" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-8329" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-8331" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-8332" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-8334" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-8336" href="../Substitution/#plfa_plfa-part2-Substitution-8281" class="Bound">M</a>
<a id="plfa_plfa-part2-Substitution-8338" href="../Substitution/#plfa_plfa-part2-Substitution-8257" class="Function">sub-head</a> <a id="plfa_plfa-part2-Substitution-8347" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8349" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-sub-tail"></a><a id="plfa_plfa-part2-Substitution-8367" href="../Substitution/#plfa_plfa-part2-Substitution-8367" class="Function">sub-tail</a> <a id="plfa_plfa-part2-Substitution-8376" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8378" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-8380" href="../Substitution/#plfa_plfa-part2-Substitution-8380" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-8382" href="../Substitution/#plfa_plfa-part2-Substitution-8382" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-8383" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8385" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8386" href="../Substitution/#plfa_plfa-part2-Substitution-8386" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-8388" href="../Substitution/#plfa_plfa-part2-Substitution-8388" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-8389" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8391" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8392" href="../Substitution/#plfa_plfa-part2-Substitution-8392" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-8394" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8396" href="../Substitution/#plfa_plfa-part2-Substitution-8382" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-8398" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-8400" href="../Substitution/#plfa_plfa-part2-Substitution-8386" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-8401" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8403" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8404" href="../Substitution/#plfa_plfa-part2-Substitution-8404" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-8406" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8408" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-8414" href="../Substitution/#plfa_plfa-part2-Substitution-8380" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-8416" href="../Substitution/#plfa_plfa-part2-Substitution-8382" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-8417" class="Symbol">}</a>
         <a id="plfa_plfa-part2-Substitution-8428" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-8430" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-8431" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a> <a id="plfa_plfa-part2-Substitution-8433" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-8435" href="../Substitution/#plfa_plfa-part2-Substitution-8392" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-8437" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-8439" href="../Substitution/#plfa_plfa-part2-Substitution-8404" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-8440" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-8442" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8443" class="Argument">A</a> <a id="plfa_plfa-part2-Substitution-8445" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8447" href="../Substitution/#plfa_plfa-part2-Substitution-8388" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-8448" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8450" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-8452" href="../Substitution/#plfa_plfa-part2-Substitution-8404" class="Bound">σ</a>
<a id="plfa_plfa-part2-Substitution-8454" href="../Substitution/#plfa_plfa-part2-Substitution-8367" class="Function">sub-tail</a> <a id="plfa_plfa-part2-Substitution-8463" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8465" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-8480" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-8482" href="../Substitution/#plfa_plfa-part2-Substitution-8482" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-8484" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-8486" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-sub-η"></a><a id="plfa_plfa-part2-Substitution-8504" href="../Substitution/#plfa_plfa-part2-Substitution-8504" class="Function">sub-η</a> <a id="plfa_plfa-part2-Substitution-8510" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8512" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-8514" href="../Substitution/#plfa_plfa-part2-Substitution-8514" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-8516" href="../Substitution/#plfa_plfa-part2-Substitution-8516" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-8517" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8519" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8520" href="../Substitution/#plfa_plfa-part2-Substitution-8520" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-8522" href="../Substitution/#plfa_plfa-part2-Substitution-8522" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-8523" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8525" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8526" href="../Substitution/#plfa_plfa-part2-Substitution-8526" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-8528" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8530" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-8536" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-8537" href="../Substitution/#plfa_plfa-part2-Substitution-8514" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-8539" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-8541" href="../Substitution/#plfa_plfa-part2-Substitution-8520" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-8542" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-8544" href="../Substitution/#plfa_plfa-part2-Substitution-8516" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-8545" class="Symbol">}</a>
      <a id="plfa_plfa-part2-Substitution-8553" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-8555" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-8556" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-8558" href="../Substitution/#plfa_plfa-part2-Substitution-8526" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-8560" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-8562" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-8563" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-8565" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-8566" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-8568" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-8570" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-8571" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a> <a id="plfa_plfa-part2-Substitution-8573" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-8575" href="../Substitution/#plfa_plfa-part2-Substitution-8526" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-8576" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-8579" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8580" class="Argument">A</a> <a id="plfa_plfa-part2-Substitution-8582" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8584" href="../Substitution/#plfa_plfa-part2-Substitution-8522" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-8585" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8587" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-8589" href="../Substitution/#plfa_plfa-part2-Substitution-8526" class="Bound">σ</a>
<a id="plfa_plfa-part2-Substitution-8591" href="../Substitution/#plfa_plfa-part2-Substitution-8504" class="Function">sub-η</a> <a id="plfa_plfa-part2-Substitution-8597" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8598" href="../Substitution/#plfa_plfa-part2-Substitution-8598" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-8599" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-8601" href="../Substitution/#plfa_plfa-part2-Substitution-8601" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-8602" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-8604" href="../Substitution/#plfa_plfa-part2-Substitution-8604" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-8605" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-8607" href="../Substitution/#plfa_plfa-part2-Substitution-8607" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-8608" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-8610" href="../Substitution/#plfa_plfa-part2-Substitution-8610" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-8611" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8613" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8615" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-8630" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-8632" href="../Substitution/#plfa_plfa-part2-Substitution-8632" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-8634" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-8636" href="../Substitution/#plfa_plfa-part2-Substitution-8654" class="Function">lemma</a>
   <a id="plfa_plfa-part2-Substitution-8645" class="Keyword">where</a>
   <a id="plfa_plfa-part2-Substitution-8654" href="../Substitution/#plfa_plfa-part2-Substitution-8654" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-8660" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8662" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-8664" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8665" href="../Substitution/#plfa_plfa-part2-Substitution-8665" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-8666" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8668" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-8670" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-8672" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-8674" href="../Substitution/#plfa_plfa-part2-Substitution-8610" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-8676" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-8678" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-8679" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-8681" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-8682" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-8685" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-8687" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-8688" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a> <a id="plfa_plfa-part2-Substitution-8690" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-8692" href="../Substitution/#plfa_plfa-part2-Substitution-8610" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-8693" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-8696" href="../Substitution/#plfa_plfa-part2-Substitution-8665" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-8698" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-8700" href="../Substitution/#plfa_plfa-part2-Substitution-8610" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-8702" href="../Substitution/#plfa_plfa-part2-Substitution-8665" class="Bound">x</a>
   <a id="plfa_plfa-part2-Substitution-8707" href="../Substitution/#plfa_plfa-part2-Substitution-8654" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-8713" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8714" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-8716" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8718" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-8719" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8721" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8723" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
   <a id="plfa_plfa-part2-Substitution-8731" href="../Substitution/#plfa_plfa-part2-Substitution-8654" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-8737" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8738" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-8740" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8742" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-8744" href="../Substitution/#plfa_plfa-part2-Substitution-8744" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-8745" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8747" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8749" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-Z-shift"></a><a id="plfa_plfa-part2-Substitution-8767" href="../Substitution/#plfa_plfa-part2-Substitution-8767" class="Function">Z-shift</a> <a id="plfa_plfa-part2-Substitution-8775" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8777" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-8779" href="../Substitution/#plfa_plfa-part2-Substitution-8779" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-8780" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-8782" href="../Substitution/#plfa_plfa-part2-Substitution-8782" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-8784" href="../Substitution/#plfa_plfa-part2-Substitution-8784" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-8785" class="Symbol">}</a>
        <a id="plfa_plfa-part2-Substitution-8795" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-8797" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-8799" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-8801" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-8802" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-8804" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-8806" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-8807" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-8809" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-8811" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-8815" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8816" href="../Substitution/#plfa_plfa-part2-Substitution-8779" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-8818" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-8820" href="../Substitution/#plfa_plfa-part2-Substitution-8782" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-8821" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8823" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8824" href="../Substitution/#plfa_plfa-part2-Substitution-8784" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-8825" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-8827" href="../Substitution/#plfa_plfa-part2-Substitution-8767" class="Function">Z-shift</a> <a id="plfa_plfa-part2-Substitution-8835" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8836" href="../Substitution/#plfa_plfa-part2-Substitution-8836" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-8837" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-8839" href="../Substitution/#plfa_plfa-part2-Substitution-8839" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-8840" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-8842" href="../Substitution/#plfa_plfa-part2-Substitution-8842" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-8843" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8845" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8847" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-8862" href="../Substitution/#plfa_plfa-part2-Substitution-8880" class="Function">lemma</a>
   <a id="plfa_plfa-part2-Substitution-8871" class="Keyword">where</a>
   <a id="plfa_plfa-part2-Substitution-8880" href="../Substitution/#plfa_plfa-part2-Substitution-8880" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-8886" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8888" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-8889" href="../Substitution/#plfa_plfa-part2-Substitution-8889" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-8891" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8893" href="../Substitution/#plfa_plfa-part2-Substitution-8836" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-8895" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-8897" href="../Substitution/#plfa_plfa-part2-Substitution-8839" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-8899" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-8901" href="../Substitution/#plfa_plfa-part2-Substitution-8842" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-8902" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-8904" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-8906" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-8908" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-8910" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-8911" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-8913" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-8915" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-8916" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-8918" href="../Substitution/#plfa_plfa-part2-Substitution-8889" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-8920" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-8922" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-8926" href="../Substitution/#plfa_plfa-part2-Substitution-8889" class="Bound">x</a>
   <a id="plfa_plfa-part2-Substitution-8931" href="../Substitution/#plfa_plfa-part2-Substitution-8880" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-8937" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-Substitution-8939" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8941" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
   <a id="plfa_plfa-part2-Substitution-8949" href="../Substitution/#plfa_plfa-part2-Substitution-8880" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-8955" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-8956" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-8958" href="../Substitution/#plfa_plfa-part2-Substitution-8958" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-8959" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-8961" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8963" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-sub-idL"></a><a id="plfa_plfa-part2-Substitution-8981" href="../Substitution/#plfa_plfa-part2-Substitution-8981" class="Function">sub-idL</a> <a id="plfa_plfa-part2-Substitution-8989" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8991" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-8993" href="../Substitution/#plfa_plfa-part2-Substitution-8993" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-8995" href="../Substitution/#plfa_plfa-part2-Substitution-8995" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-8996" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8998" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8999" href="../Substitution/#plfa_plfa-part2-Substitution-8999" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-9001" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9003" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-9009" href="../Substitution/#plfa_plfa-part2-Substitution-8993" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-9011" href="../Substitution/#plfa_plfa-part2-Substitution-8995" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-9012" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9014" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9015" href="../Substitution/#plfa_plfa-part2-Substitution-9015" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-9016" class="Symbol">}</a>
       <a id="plfa_plfa-part2-Substitution-9025" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-9027" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-9031" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-9033" href="../Substitution/#plfa_plfa-part2-Substitution-8999" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-9035" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-9037" href="../Substitution/#plfa_plfa-part2-Substitution-8999" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-9039" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9040" href="../Substitution/#plfa_plfa-part2-Substitution-9015" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-9041" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-9043" href="../Substitution/#plfa_plfa-part2-Substitution-8981" class="Function">sub-idL</a> <a id="plfa_plfa-part2-Substitution-9051" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-9053" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-9068" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-9070" href="../Substitution/#plfa_plfa-part2-Substitution-9070" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-9072" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-9074" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-sub-dist"></a><a id="plfa_plfa-part2-Substitution-9092" href="../Substitution/#plfa_plfa-part2-Substitution-9092" class="Function">sub-dist</a> <a id="plfa_plfa-part2-Substitution-9101" class="Symbol">:</a>  <a id="plfa_plfa-part2-Substitution-9104" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-9106" href="../Substitution/#plfa_plfa-part2-Substitution-9106" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-9108" href="../Substitution/#plfa_plfa-part2-Substitution-9108" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-9110" href="../Substitution/#plfa_plfa-part2-Substitution-9110" class="Bound">Σ</a> <a id="plfa_plfa-part2-Substitution-9112" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9114" href="../Untyped/#plfa_plfa-part2-Untyped-2782" class="Datatype">Context</a><a id="plfa_plfa-part2-Substitution-9121" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9123" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9124" href="../Substitution/#plfa_plfa-part2-Substitution-9124" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-9126" href="../Substitution/#plfa_plfa-part2-Substitution-9126" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-9127" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9129" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9130" href="../Substitution/#plfa_plfa-part2-Substitution-9130" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-9132" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9134" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-9140" href="../Substitution/#plfa_plfa-part2-Substitution-9106" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-9142" href="../Substitution/#plfa_plfa-part2-Substitution-9108" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-9143" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9145" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9146" href="../Substitution/#plfa_plfa-part2-Substitution-9146" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-9148" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9150" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-9156" href="../Substitution/#plfa_plfa-part2-Substitution-9108" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-9158" href="../Substitution/#plfa_plfa-part2-Substitution-9110" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-9159" class="Symbol">}</a>
              <a id="plfa_plfa-part2-Substitution-9175" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9176" href="../Substitution/#plfa_plfa-part2-Substitution-9176" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-9178" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9180" href="../Substitution/#plfa_plfa-part2-Substitution-9108" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-9182" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-9184" href="../Substitution/#plfa_plfa-part2-Substitution-9124" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-9185" class="Symbol">}</a>
         <a id="plfa_plfa-part2-Substitution-9196" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-9198" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-9200" href="../Substitution/#plfa_plfa-part2-Substitution-9176" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-9202" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-9204" href="../Substitution/#plfa_plfa-part2-Substitution-9130" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-9205" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-9207" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-9209" href="../Substitution/#plfa_plfa-part2-Substitution-9146" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-9210" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-9212" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-9214" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-9216" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-9222" href="../Substitution/#plfa_plfa-part2-Substitution-9146" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-9224" href="../Substitution/#plfa_plfa-part2-Substitution-9176" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-9225" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-9227" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-9229" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-9230" href="../Substitution/#plfa_plfa-part2-Substitution-9130" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-9232" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-9234" href="../Substitution/#plfa_plfa-part2-Substitution-9146" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-9235" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-9238" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9239" href="../Substitution/#plfa_plfa-part2-Substitution-9126" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-9240" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-9242" href="../Substitution/#plfa_plfa-part2-Substitution-9092" class="Function">sub-dist</a> <a id="plfa_plfa-part2-Substitution-9251" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9252" href="../Substitution/#plfa_plfa-part2-Substitution-9252" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-9253" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-9255" href="../Substitution/#plfa_plfa-part2-Substitution-9255" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-9256" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-9258" href="../Substitution/#plfa_plfa-part2-Substitution-9258" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-9259" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-9261" href="../Substitution/#plfa_plfa-part2-Substitution-9261" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-9262" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-9264" href="../Substitution/#plfa_plfa-part2-Substitution-9264" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-9265" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-9267" href="../Substitution/#plfa_plfa-part2-Substitution-9267" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-9268" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-9270" href="../Substitution/#plfa_plfa-part2-Substitution-9270" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-9271" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-9273" href="../Substitution/#plfa_plfa-part2-Substitution-9273" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-9274" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9276" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-9278" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-9293" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-9295" href="../Substitution/#plfa_plfa-part2-Substitution-9295" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-9297" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-9299" href="../Substitution/#plfa_plfa-part2-Substitution-9323" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-9305" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9306" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-9308" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-9310" href="../Substitution/#plfa_plfa-part2-Substitution-9295" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-9311" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-9315" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-9323" href="../Substitution/#plfa_plfa-part2-Substitution-9323" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-9329" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9331" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-9333" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9334" href="../Substitution/#plfa_plfa-part2-Substitution-9334" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-9336" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9338" href="../Substitution/#plfa_plfa-part2-Substitution-9252" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-9340" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-9342" href="../Substitution/#plfa_plfa-part2-Substitution-9261" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-9344" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-9346" href="../Substitution/#plfa_plfa-part2-Substitution-9264" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-9347" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9349" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-9351" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-9353" href="../Substitution/#plfa_plfa-part2-Substitution-9273" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-9355" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-9357" href="../Substitution/#plfa_plfa-part2-Substitution-9267" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-9358" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-9360" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-9362" href="../Substitution/#plfa_plfa-part2-Substitution-9270" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-9363" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-9365" href="../Substitution/#plfa_plfa-part2-Substitution-9334" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-9367" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-9369" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-9371" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-9377" href="../Substitution/#plfa_plfa-part2-Substitution-9270" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-9379" href="../Substitution/#plfa_plfa-part2-Substitution-9273" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-9380" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-9382" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-9384" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-9385" href="../Substitution/#plfa_plfa-part2-Substitution-9267" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-9387" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-9389" href="../Substitution/#plfa_plfa-part2-Substitution-9270" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-9390" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-9393" href="../Substitution/#plfa_plfa-part2-Substitution-9334" class="Bound">x</a>
  <a id="plfa_plfa-part2-Substitution-9397" href="../Substitution/#plfa_plfa-part2-Substitution-9323" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-9403" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9404" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-9406" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-9408" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-9409" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9411" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-9413" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="plfa_plfa-part2-Substitution-9420" href="../Substitution/#plfa_plfa-part2-Substitution-9323" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-9426" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9427" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-9429" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-9431" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-9433" href="../Substitution/#plfa_plfa-part2-Substitution-9433" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-9434" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9436" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-9438" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-sub-app"></a><a id="plfa_plfa-part2-Substitution-9456" href="../Substitution/#plfa_plfa-part2-Substitution-9456" class="Function">sub-app</a> <a id="plfa_plfa-part2-Substitution-9464" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9466" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-9468" href="../Substitution/#plfa_plfa-part2-Substitution-9468" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-9470" href="../Substitution/#plfa_plfa-part2-Substitution-9470" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-9471" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9473" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9474" href="../Substitution/#plfa_plfa-part2-Substitution-9474" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-9476" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9478" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-9484" href="../Substitution/#plfa_plfa-part2-Substitution-9468" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-9486" href="../Substitution/#plfa_plfa-part2-Substitution-9470" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-9487" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9489" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9490" href="../Substitution/#plfa_plfa-part2-Substitution-9490" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-9492" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9494" href="../Substitution/#plfa_plfa-part2-Substitution-9468" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-9496" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-9498" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-9499" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-9501" href="../Substitution/#plfa_plfa-part2-Substitution-9501" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-9503" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9505" href="../Substitution/#plfa_plfa-part2-Substitution-9468" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-9507" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-9509" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-9510" class="Symbol">}</a>
        <a id="plfa_plfa-part2-Substitution-9520" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-9522" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-9524" href="../Substitution/#plfa_plfa-part2-Substitution-9474" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-9526" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-9528" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-9529" href="../Substitution/#plfa_plfa-part2-Substitution-9490" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-9531" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Substitution-9533" href="../Substitution/#plfa_plfa-part2-Substitution-9501" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-9534" class="Symbol">)</a>  <a id="plfa_plfa-part2-Substitution-9537" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-9539" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-9540" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-9542" href="../Substitution/#plfa_plfa-part2-Substitution-9474" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-9544" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-9546" href="../Substitution/#plfa_plfa-part2-Substitution-9490" class="Bound">L</a><a id="plfa_plfa-part2-Substitution-9547" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-9549" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Substitution-9551" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-9552" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-9554" href="../Substitution/#plfa_plfa-part2-Substitution-9474" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-9556" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-9558" href="../Substitution/#plfa_plfa-part2-Substitution-9501" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-9559" class="Symbol">)</a>
<a id="plfa_plfa-part2-Substitution-9561" href="../Substitution/#plfa_plfa-part2-Substitution-9456" class="Function">sub-app</a> <a id="plfa_plfa-part2-Substitution-9569" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-9571" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><h2 id="interlude-congruences">Interlude: congruences</h2><p>In this section we establish congruence rules for the σ algebra operators <code>•</code> and <code>⨟</code> and for <code>subst</code> and its helper functions <code>ext</code>, <code>rename</code>, <code>exts</code>, and <code>subst-zero</code>. These congruence rules help with the equational reasoning in the later sections of this chapter.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-cong-ext"></a><a id="plfa_plfa-part2-Substitution-9885" href="../Substitution/#plfa_plfa-part2-Substitution-9885" class="Function">cong-ext</a> <a id="plfa_plfa-part2-Substitution-9894" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9896" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-9898" href="../Substitution/#plfa_plfa-part2-Substitution-9898" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-9900" href="../Substitution/#plfa_plfa-part2-Substitution-9900" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-9901" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-9903" href="../Substitution/#plfa_plfa-part2-Substitution-9903" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-9905" href="../Substitution/#plfa_plfa-part2-Substitution-9905" class="Bound">ρ′</a> <a id="plfa_plfa-part2-Substitution-9908" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9910" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-9917" href="../Substitution/#plfa_plfa-part2-Substitution-9898" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-9919" href="../Substitution/#plfa_plfa-part2-Substitution-9900" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-9920" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-9922" href="../Substitution/#plfa_plfa-part2-Substitution-9922" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-9923" class="Symbol">}</a>
   <a id="plfa_plfa-part2-Substitution-9928" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-9930" class="Symbol">(∀{</a><a id="plfa_plfa-part2-Substitution-9933" href="../Substitution/#plfa_plfa-part2-Substitution-9933" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-9934" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9936" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-9938" href="../Substitution/#plfa_plfa-part2-Substitution-9903" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-9940" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-9942" href="../Substitution/#plfa_plfa-part2-Substitution-9905" class="Bound">ρ′</a> <a id="plfa_plfa-part2-Substitution-9945" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9946" href="../Substitution/#plfa_plfa-part2-Substitution-9933" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-9947" class="Symbol">})</a>
     <a id="plfa_plfa-part2-Substitution-9955" class="Comment">---------------------------------</a>
   <a id="plfa_plfa-part2-Substitution-9992" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-9994" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-9996" href="../Substitution/#plfa_plfa-part2-Substitution-9996" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-9997" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9999" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10001" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-10005" href="../Substitution/#plfa_plfa-part2-Substitution-9903" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-10007" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10008" class="Argument">B</a> <a id="plfa_plfa-part2-Substitution-10010" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10012" href="../Substitution/#plfa_plfa-part2-Substitution-9922" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-10013" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10015" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-10017" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-10021" href="../Substitution/#plfa_plfa-part2-Substitution-9905" class="Bound">ρ′</a> <a id="plfa_plfa-part2-Substitution-10024" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10025" href="../Substitution/#plfa_plfa-part2-Substitution-9996" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-10026" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-10028" href="../Substitution/#plfa_plfa-part2-Substitution-9885" class="Function">cong-ext</a><a id="plfa_plfa-part2-Substitution-10036" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10037" href="../Substitution/#plfa_plfa-part2-Substitution-10037" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-10038" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10040" href="../Substitution/#plfa_plfa-part2-Substitution-10040" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-10041" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10043" href="../Substitution/#plfa_plfa-part2-Substitution-10043" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-10044" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10046" href="../Substitution/#plfa_plfa-part2-Substitution-10046" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-10048" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10050" href="../Substitution/#plfa_plfa-part2-Substitution-10050" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-10051" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10053" href="../Substitution/#plfa_plfa-part2-Substitution-10053" class="Bound">rr</a> <a id="plfa_plfa-part2-Substitution-10056" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10057" href="../Substitution/#plfa_plfa-part2-Substitution-10057" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-10058" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10060" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10062" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-10077" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-10079" href="../Substitution/#plfa_plfa-part2-Substitution-10079" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-10081" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10083" href="../Substitution/#plfa_plfa-part2-Substitution-10103" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-10089" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10090" href="../Substitution/#plfa_plfa-part2-Substitution-10079" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-10091" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-10095" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-10103" href="../Substitution/#plfa_plfa-part2-Substitution-10103" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-10109" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-10111" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-10113" href="../Substitution/#plfa_plfa-part2-Substitution-10113" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-10115" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-10117" href="../Substitution/#plfa_plfa-part2-Substitution-10037" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-10119" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-10121" href="../Substitution/#plfa_plfa-part2-Substitution-10050" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-10123" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-10125" href="../Substitution/#plfa_plfa-part2-Substitution-10057" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-10126" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10128" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10130" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-10134" href="../Substitution/#plfa_plfa-part2-Substitution-10043" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-10136" href="../Substitution/#plfa_plfa-part2-Substitution-10113" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-10138" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-10140" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-10144" href="../Substitution/#plfa_plfa-part2-Substitution-10046" class="Bound">ρ′</a> <a id="plfa_plfa-part2-Substitution-10147" href="../Substitution/#plfa_plfa-part2-Substitution-10113" class="Bound">x</a>
  <a id="plfa_plfa-part2-Substitution-10151" href="../Substitution/#plfa_plfa-part2-Substitution-10103" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-10157" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10158" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-10159" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10161" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10163" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="plfa_plfa-part2-Substitution-10170" href="../Substitution/#plfa_plfa-part2-Substitution-10103" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-10176" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10177" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-10179" href="../Substitution/#plfa_plfa-part2-Substitution-10179" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-10180" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10182" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10184" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-10189" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Substitution-10192" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-10193" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1470" class="Function">cong-app</a> <a id="plfa_plfa-part2-Substitution-10202" href="../Substitution/#plfa_plfa-part2-Substitution-10053" class="Bound">rr</a> <a id="plfa_plfa-part2-Substitution-10205" href="../Substitution/#plfa_plfa-part2-Substitution-10179" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-10206" class="Symbol">)</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-cong-rename"></a><a id="plfa_plfa-part2-Substitution-10221" href="../Substitution/#plfa_plfa-part2-Substitution-10221" class="Function">cong-rename</a> <a id="plfa_plfa-part2-Substitution-10233" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-10235" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-10237" href="../Substitution/#plfa_plfa-part2-Substitution-10237" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-10239" href="../Substitution/#plfa_plfa-part2-Substitution-10239" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-10240" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10242" href="../Substitution/#plfa_plfa-part2-Substitution-10242" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-10244" href="../Substitution/#plfa_plfa-part2-Substitution-10244" class="Bound">ρ′</a> <a id="plfa_plfa-part2-Substitution-10247" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-10249" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-10256" href="../Substitution/#plfa_plfa-part2-Substitution-10237" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-10258" href="../Substitution/#plfa_plfa-part2-Substitution-10239" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-10259" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10261" href="../Substitution/#plfa_plfa-part2-Substitution-10261" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-10262" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10264" href="../Substitution/#plfa_plfa-part2-Substitution-10264" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-10266" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-10268" href="../Substitution/#plfa_plfa-part2-Substitution-10237" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-10270" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-10272" href="../Substitution/#plfa_plfa-part2-Substitution-10261" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-10273" class="Symbol">}</a>
        <a id="plfa_plfa-part2-Substitution-10283" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10285" class="Symbol">(∀{</a><a id="plfa_plfa-part2-Substitution-10288" href="../Substitution/#plfa_plfa-part2-Substitution-10288" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-10289" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10291" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10293" href="../Substitution/#plfa_plfa-part2-Substitution-10242" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-10295" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-10297" href="../Substitution/#plfa_plfa-part2-Substitution-10244" class="Bound">ρ′</a> <a id="plfa_plfa-part2-Substitution-10300" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10301" href="../Substitution/#plfa_plfa-part2-Substitution-10288" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-10302" class="Symbol">})</a>
          <a id="plfa_plfa-part2-Substitution-10315" class="Comment">------------------------</a>
        <a id="plfa_plfa-part2-Substitution-10348" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10350" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-10357" href="../Substitution/#plfa_plfa-part2-Substitution-10242" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-10359" href="../Substitution/#plfa_plfa-part2-Substitution-10264" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-10361" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-10363" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-10370" href="../Substitution/#plfa_plfa-part2-Substitution-10244" class="Bound">ρ′</a> <a id="plfa_plfa-part2-Substitution-10373" href="../Substitution/#plfa_plfa-part2-Substitution-10264" class="Bound">M</a>
<a id="plfa_plfa-part2-Substitution-10375" href="../Substitution/#plfa_plfa-part2-Substitution-10221" class="Function">cong-rename</a> <a id="plfa_plfa-part2-Substitution-10387" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10388" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-10390" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10392" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-10394" href="../Substitution/#plfa_plfa-part2-Substitution-10394" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-10395" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10397" href="../Substitution/#plfa_plfa-part2-Substitution-10397" class="Bound">rr</a> <a id="plfa_plfa-part2-Substitution-10400" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10402" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-10407" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`_</a> <a id="plfa_plfa-part2-Substitution-10410" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-10411" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1470" class="Function">cong-app</a> <a id="plfa_plfa-part2-Substitution-10420" href="../Substitution/#plfa_plfa-part2-Substitution-10397" class="Bound">rr</a> <a id="plfa_plfa-part2-Substitution-10423" href="../Substitution/#plfa_plfa-part2-Substitution-10394" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-10424" class="Symbol">)</a>
<a id="plfa_plfa-part2-Substitution-10426" href="../Substitution/#plfa_plfa-part2-Substitution-10221" class="Function">cong-rename</a> <a id="plfa_plfa-part2-Substitution-10438" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10439" class="Argument">ρ</a> <a id="plfa_plfa-part2-Substitution-10441" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10443" href="../Substitution/#plfa_plfa-part2-Substitution-10443" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-10444" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10446" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10447" class="Argument">ρ′</a> <a id="plfa_plfa-part2-Substitution-10450" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10452" href="../Substitution/#plfa_plfa-part2-Substitution-10452" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-10454" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10456" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10457" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-10459" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10461" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-10463" href="../Substitution/#plfa_plfa-part2-Substitution-10463" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-10464" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10466" href="../Substitution/#plfa_plfa-part2-Substitution-10466" class="Bound">rr</a> <a id="plfa_plfa-part2-Substitution-10469" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-10474" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-10479" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ_</a> <a id="plfa_plfa-part2-Substitution-10482" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-10483" href="../Substitution/#plfa_plfa-part2-Substitution-10221" class="Function">cong-rename</a> <a id="plfa_plfa-part2-Substitution-10495" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10496" class="Argument">ρ</a> <a id="plfa_plfa-part2-Substitution-10498" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10500" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-10504" href="../Substitution/#plfa_plfa-part2-Substitution-10443" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-10505" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10507" class="Argument">ρ′</a> <a id="plfa_plfa-part2-Substitution-10510" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10512" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-10516" href="../Substitution/#plfa_plfa-part2-Substitution-10452" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-10518" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10520" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-10522" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10524" href="../Substitution/#plfa_plfa-part2-Substitution-10463" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-10525" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10527" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-10528" href="../Substitution/#plfa_plfa-part2-Substitution-9885" class="Function">cong-ext</a> <a id="plfa_plfa-part2-Substitution-10537" href="../Substitution/#plfa_plfa-part2-Substitution-10466" class="Bound">rr</a><a id="plfa_plfa-part2-Substitution-10539" class="Symbol">))</a>
<a id="plfa_plfa-part2-Substitution-10542" href="../Substitution/#plfa_plfa-part2-Substitution-10221" class="Function">cong-rename</a> <a id="plfa_plfa-part2-Substitution-10554" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10555" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-10557" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10559" href="../Substitution/#plfa_plfa-part2-Substitution-10559" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-10561" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Substitution-10563" href="../Substitution/#plfa_plfa-part2-Substitution-10563" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-10564" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10566" href="../Substitution/#plfa_plfa-part2-Substitution-10566" class="Bound">rr</a> <a id="plfa_plfa-part2-Substitution-10569" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-10574" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1376" class="Function">cong₂</a> <a id="plfa_plfa-part2-Substitution-10580" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">_·_</a> <a id="plfa_plfa-part2-Substitution-10584" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-10585" href="../Substitution/#plfa_plfa-part2-Substitution-10221" class="Function">cong-rename</a> <a id="plfa_plfa-part2-Substitution-10597" href="../Substitution/#plfa_plfa-part2-Substitution-10566" class="Bound">rr</a><a id="plfa_plfa-part2-Substitution-10599" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-10601" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-10602" href="../Substitution/#plfa_plfa-part2-Substitution-10221" class="Function">cong-rename</a> <a id="plfa_plfa-part2-Substitution-10614" href="../Substitution/#plfa_plfa-part2-Substitution-10566" class="Bound">rr</a><a id="plfa_plfa-part2-Substitution-10616" class="Symbol">)</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-cong-exts"></a><a id="plfa_plfa-part2-Substitution-10631" href="../Substitution/#plfa_plfa-part2-Substitution-10631" class="Function">cong-exts</a> <a id="plfa_plfa-part2-Substitution-10641" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-10643" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-10645" href="../Substitution/#plfa_plfa-part2-Substitution-10645" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-10647" href="../Substitution/#plfa_plfa-part2-Substitution-10647" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-10648" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10650" href="../Substitution/#plfa_plfa-part2-Substitution-10650" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-10652" href="../Substitution/#plfa_plfa-part2-Substitution-10652" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-10655" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-10657" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-10663" href="../Substitution/#plfa_plfa-part2-Substitution-10645" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-10665" href="../Substitution/#plfa_plfa-part2-Substitution-10647" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-10666" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10668" href="../Substitution/#plfa_plfa-part2-Substitution-10668" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-10669" class="Symbol">}</a>
   <a id="plfa_plfa-part2-Substitution-10674" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10676" class="Symbol">(∀{</a><a id="plfa_plfa-part2-Substitution-10679" href="../Substitution/#plfa_plfa-part2-Substitution-10679" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-10680" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10682" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10684" href="../Substitution/#plfa_plfa-part2-Substitution-10650" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-10686" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-10688" href="../Substitution/#plfa_plfa-part2-Substitution-10652" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-10691" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10692" href="../Substitution/#plfa_plfa-part2-Substitution-10679" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-10693" class="Symbol">})</a>
     <a id="plfa_plfa-part2-Substitution-10701" class="Comment">-----------------------------------</a>
   <a id="plfa_plfa-part2-Substitution-10740" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10742" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-10744" href="../Substitution/#plfa_plfa-part2-Substitution-10744" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-10745" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10747" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10749" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-10754" href="../Substitution/#plfa_plfa-part2-Substitution-10650" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-10756" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10757" class="Argument">B</a> <a id="plfa_plfa-part2-Substitution-10759" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10761" href="../Substitution/#plfa_plfa-part2-Substitution-10668" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-10762" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10764" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-10766" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-10771" href="../Substitution/#plfa_plfa-part2-Substitution-10652" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-10774" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10775" href="../Substitution/#plfa_plfa-part2-Substitution-10744" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-10776" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-10778" href="../Substitution/#plfa_plfa-part2-Substitution-10631" class="Function">cong-exts</a><a id="plfa_plfa-part2-Substitution-10787" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10788" href="../Substitution/#plfa_plfa-part2-Substitution-10788" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-10789" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10791" href="../Substitution/#plfa_plfa-part2-Substitution-10791" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-10792" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10794" href="../Substitution/#plfa_plfa-part2-Substitution-10794" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-10795" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10797" href="../Substitution/#plfa_plfa-part2-Substitution-10797" class="Bound">σ′</a><a id="plfa_plfa-part2-Substitution-10799" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10801" href="../Substitution/#plfa_plfa-part2-Substitution-10801" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-10802" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10804" href="../Substitution/#plfa_plfa-part2-Substitution-10804" class="Bound">ss</a> <a id="plfa_plfa-part2-Substitution-10807" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10808" href="../Substitution/#plfa_plfa-part2-Substitution-10808" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-10809" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10811" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10813" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-10828" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-10830" href="../Substitution/#plfa_plfa-part2-Substitution-10830" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-10832" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10834" href="../Substitution/#plfa_plfa-part2-Substitution-10856" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-10840" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10841" href="../Substitution/#plfa_plfa-part2-Substitution-10830" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-10842" class="Symbol">}</a>
   <a id="plfa_plfa-part2-Substitution-10847" class="Keyword">where</a>
   <a id="plfa_plfa-part2-Substitution-10856" href="../Substitution/#plfa_plfa-part2-Substitution-10856" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-10862" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-10864" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-10866" href="../Substitution/#plfa_plfa-part2-Substitution-10866" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-10867" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10869" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10871" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-10876" href="../Substitution/#plfa_plfa-part2-Substitution-10794" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-10878" href="../Substitution/#plfa_plfa-part2-Substitution-10866" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-10880" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-10882" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-10887" href="../Substitution/#plfa_plfa-part2-Substitution-10797" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-10890" href="../Substitution/#plfa_plfa-part2-Substitution-10866" class="Bound">x</a>
   <a id="plfa_plfa-part2-Substitution-10895" href="../Substitution/#plfa_plfa-part2-Substitution-10856" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-10901" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10902" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-10903" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10905" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10907" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
   <a id="plfa_plfa-part2-Substitution-10915" href="../Substitution/#plfa_plfa-part2-Substitution-10856" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-10921" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10922" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-10924" href="../Substitution/#plfa_plfa-part2-Substitution-10924" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-10925" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10927" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10929" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-10934" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-10935" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-10942" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part2-Substitution-10944" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-10946" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-10947" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1470" class="Function">cong-app</a> <a id="plfa_plfa-part2-Substitution-10956" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-10957" href="../Substitution/#plfa_plfa-part2-Substitution-10804" class="Bound">ss</a> <a id="plfa_plfa-part2-Substitution-10960" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10961" href="../Substitution/#plfa_plfa-part2-Substitution-10808" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-10962" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-10965" href="../Substitution/#plfa_plfa-part2-Substitution-10924" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-10966" class="Symbol">)</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-cong-sub"></a><a id="plfa_plfa-part2-Substitution-10981" href="../Substitution/#plfa_plfa-part2-Substitution-10981" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-10990" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-10992" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-10994" href="../Substitution/#plfa_plfa-part2-Substitution-10994" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-10996" href="../Substitution/#plfa_plfa-part2-Substitution-10996" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-10997" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10999" href="../Substitution/#plfa_plfa-part2-Substitution-10999" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-11001" href="../Substitution/#plfa_plfa-part2-Substitution-11001" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-11004" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-11006" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-11012" href="../Substitution/#plfa_plfa-part2-Substitution-10994" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-11014" href="../Substitution/#plfa_plfa-part2-Substitution-10996" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-11015" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11017" href="../Substitution/#plfa_plfa-part2-Substitution-11017" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11018" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11020" href="../Substitution/#plfa_plfa-part2-Substitution-11020" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-11022" href="../Substitution/#plfa_plfa-part2-Substitution-11022" class="Bound">M′</a> <a id="plfa_plfa-part2-Substitution-11025" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-11027" href="../Substitution/#plfa_plfa-part2-Substitution-10994" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-11029" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-11031" href="../Substitution/#plfa_plfa-part2-Substitution-11017" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11032" class="Symbol">}</a>
            <a id="plfa_plfa-part2-Substitution-11046" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11048" class="Symbol">(∀{</a><a id="plfa_plfa-part2-Substitution-11051" href="../Substitution/#plfa_plfa-part2-Substitution-11051" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11052" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11054" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11056" href="../Substitution/#plfa_plfa-part2-Substitution-10999" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-11058" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-11060" href="../Substitution/#plfa_plfa-part2-Substitution-11001" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-11063" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11064" href="../Substitution/#plfa_plfa-part2-Substitution-11051" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11065" class="Symbol">})</a>  <a id="plfa_plfa-part2-Substitution-11069" class="Symbol">→</a>  <a id="plfa_plfa-part2-Substitution-11072" href="../Substitution/#plfa_plfa-part2-Substitution-11020" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-11074" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-11076" href="../Substitution/#plfa_plfa-part2-Substitution-11022" class="Bound">M′</a>
              <a id="plfa_plfa-part2-Substitution-11093" class="Comment">------------------------------</a>
            <a id="plfa_plfa-part2-Substitution-11136" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11138" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-11144" href="../Substitution/#plfa_plfa-part2-Substitution-10999" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-11146" href="../Substitution/#plfa_plfa-part2-Substitution-11020" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-11148" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-11150" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-11156" href="../Substitution/#plfa_plfa-part2-Substitution-11001" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-11159" href="../Substitution/#plfa_plfa-part2-Substitution-11022" class="Bound">M′</a>
<a id="plfa_plfa-part2-Substitution-11162" href="../Substitution/#plfa_plfa-part2-Substitution-10981" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-11171" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11172" href="../Substitution/#plfa_plfa-part2-Substitution-11172" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-11173" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11175" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11176" href="../Substitution/#plfa_plfa-part2-Substitution-11176" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-11177" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11179" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11180" href="../Substitution/#plfa_plfa-part2-Substitution-11180" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-11181" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11183" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11184" href="../Substitution/#plfa_plfa-part2-Substitution-11184" class="Bound">σ′</a><a id="plfa_plfa-part2-Substitution-11186" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11188" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11189" href="../Substitution/#plfa_plfa-part2-Substitution-11189" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11190" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11192" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11193" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-11195" href="../Substitution/#plfa_plfa-part2-Substitution-11195" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-11196" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11198" href="../Substitution/#plfa_plfa-part2-Substitution-11198" class="Bound">ss</a> <a id="plfa_plfa-part2-Substitution-11201" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-11206" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-11208" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1470" class="Function">cong-app</a> <a id="plfa_plfa-part2-Substitution-11217" href="../Substitution/#plfa_plfa-part2-Substitution-11198" class="Bound">ss</a> <a id="plfa_plfa-part2-Substitution-11220" href="../Substitution/#plfa_plfa-part2-Substitution-11195" class="Bound">x</a>
<a id="plfa_plfa-part2-Substitution-11222" href="../Substitution/#plfa_plfa-part2-Substitution-10981" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-11231" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11232" href="../Substitution/#plfa_plfa-part2-Substitution-11232" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-11233" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11235" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11236" href="../Substitution/#plfa_plfa-part2-Substitution-11236" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-11237" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11239" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11240" href="../Substitution/#plfa_plfa-part2-Substitution-11240" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-11241" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11243" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11244" href="../Substitution/#plfa_plfa-part2-Substitution-11244" class="Bound">σ′</a><a id="plfa_plfa-part2-Substitution-11246" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11248" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11249" href="../Substitution/#plfa_plfa-part2-Substitution-11249" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11250" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11252" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11253" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-11255" href="../Substitution/#plfa_plfa-part2-Substitution-11255" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-11256" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11258" href="../Substitution/#plfa_plfa-part2-Substitution-11258" class="Bound">ss</a> <a id="plfa_plfa-part2-Substitution-11261" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-11266" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-11271" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-11276" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ_</a> <a id="plfa_plfa-part2-Substitution-11279" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-11280" href="../Substitution/#plfa_plfa-part2-Substitution-10981" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-11289" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11290" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-11292" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-11294" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-11299" href="../Substitution/#plfa_plfa-part2-Substitution-11240" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-11300" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11302" class="Argument">σ′</a> <a id="plfa_plfa-part2-Substitution-11305" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-11307" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-11312" href="../Substitution/#plfa_plfa-part2-Substitution-11244" class="Bound">σ′</a><a id="plfa_plfa-part2-Substitution-11314" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11316" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11317" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-11319" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-11321" href="../Substitution/#plfa_plfa-part2-Substitution-11255" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-11322" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11324" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-11325" href="../Substitution/#plfa_plfa-part2-Substitution-10631" class="Function">cong-exts</a> <a id="plfa_plfa-part2-Substitution-11335" href="../Substitution/#plfa_plfa-part2-Substitution-11258" class="Bound">ss</a><a id="plfa_plfa-part2-Substitution-11337" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-11339" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Substitution-11343" class="Symbol">)</a>
<a id="plfa_plfa-part2-Substitution-11345" href="../Substitution/#plfa_plfa-part2-Substitution-10981" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-11354" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11355" href="../Substitution/#plfa_plfa-part2-Substitution-11355" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-11356" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11358" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11359" href="../Substitution/#plfa_plfa-part2-Substitution-11359" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-11360" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11362" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11363" href="../Substitution/#plfa_plfa-part2-Substitution-11363" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-11364" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11366" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11367" href="../Substitution/#plfa_plfa-part2-Substitution-11367" class="Bound">σ′</a><a id="plfa_plfa-part2-Substitution-11369" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11371" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11372" href="../Substitution/#plfa_plfa-part2-Substitution-11372" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11373" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11375" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11376" href="../Substitution/#plfa_plfa-part2-Substitution-11376" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-11378" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Substitution-11380" href="../Substitution/#plfa_plfa-part2-Substitution-11380" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-11381" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11383" href="../Substitution/#plfa_plfa-part2-Substitution-11383" class="Bound">ss</a> <a id="plfa_plfa-part2-Substitution-11386" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-11391" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-11396" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1376" class="Function">cong₂</a> <a id="plfa_plfa-part2-Substitution-11402" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">_·_</a> <a id="plfa_plfa-part2-Substitution-11406" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-11407" href="../Substitution/#plfa_plfa-part2-Substitution-10981" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-11416" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11417" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-11419" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-11421" href="../Substitution/#plfa_plfa-part2-Substitution-11376" class="Bound">L</a><a id="plfa_plfa-part2-Substitution-11422" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11424" href="../Substitution/#plfa_plfa-part2-Substitution-11383" class="Bound">ss</a> <a id="plfa_plfa-part2-Substitution-11427" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Substitution-11431" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-11433" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-11434" href="../Substitution/#plfa_plfa-part2-Substitution-10981" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-11443" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11444" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-11446" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-11448" href="../Substitution/#plfa_plfa-part2-Substitution-11380" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-11449" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11451" href="../Substitution/#plfa_plfa-part2-Substitution-11383" class="Bound">ss</a> <a id="plfa_plfa-part2-Substitution-11454" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Substitution-11458" class="Symbol">)</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-cong-sub-zero"></a><a id="plfa_plfa-part2-Substitution-11473" href="../Substitution/#plfa_plfa-part2-Substitution-11473" class="Function">cong-sub-zero</a> <a id="plfa_plfa-part2-Substitution-11487" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-11489" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-11491" href="../Substitution/#plfa_plfa-part2-Substitution-11491" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-11492" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11494" href="../Substitution/#plfa_plfa-part2-Substitution-11494" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-11496" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-11498" href="../Untyped/#plfa_plfa-part2-Untyped-2490" class="Datatype">Type</a><a id="plfa_plfa-part2-Substitution-11502" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11504" href="../Substitution/#plfa_plfa-part2-Substitution-11504" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-11506" href="../Substitution/#plfa_plfa-part2-Substitution-11506" class="Bound">M′</a> <a id="plfa_plfa-part2-Substitution-11509" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-11511" href="../Substitution/#plfa_plfa-part2-Substitution-11491" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-11513" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-11515" href="../Substitution/#plfa_plfa-part2-Substitution-11494" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-11516" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-11520" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11522" href="../Substitution/#plfa_plfa-part2-Substitution-11504" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-11524" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-11526" href="../Substitution/#plfa_plfa-part2-Substitution-11506" class="Bound">M′</a>
    <a id="plfa_plfa-part2-Substitution-11533" class="Comment">-----------------------------------------</a>
  <a id="plfa_plfa-part2-Substitution-11577" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11579" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-11581" href="../Substitution/#plfa_plfa-part2-Substitution-11581" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11582" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11584" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11586" href="../Untyped/#plfa_plfa-part2-Untyped-7207" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Substitution-11597" href="../Substitution/#plfa_plfa-part2-Substitution-11504" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-11599" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-11601" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-11602" href="../Untyped/#plfa_plfa-part2-Untyped-7207" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Substitution-11613" href="../Substitution/#plfa_plfa-part2-Substitution-11506" class="Bound">M′</a><a id="plfa_plfa-part2-Substitution-11615" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-11617" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11618" href="../Substitution/#plfa_plfa-part2-Substitution-11581" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11619" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-11621" href="../Substitution/#plfa_plfa-part2-Substitution-11473" class="Function">cong-sub-zero</a> <a id="plfa_plfa-part2-Substitution-11635" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11636" href="../Substitution/#plfa_plfa-part2-Substitution-11636" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-11637" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11639" href="../Substitution/#plfa_plfa-part2-Substitution-11639" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-11640" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11642" href="../Substitution/#plfa_plfa-part2-Substitution-11642" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-11643" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11645" href="../Substitution/#plfa_plfa-part2-Substitution-11645" class="Bound">M′</a><a id="plfa_plfa-part2-Substitution-11647" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11649" href="../Substitution/#plfa_plfa-part2-Substitution-11649" class="Bound">mm&#39;</a> <a id="plfa_plfa-part2-Substitution-11653" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11654" href="../Substitution/#plfa_plfa-part2-Substitution-11654" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11655" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11657" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-11662" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-11677" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-11679" href="../Substitution/#plfa_plfa-part2-Substitution-11679" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-11681" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11683" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-11688" class="Symbol">(λ</a> <a id="plfa_plfa-part2-Substitution-11691" href="../Substitution/#plfa_plfa-part2-Substitution-11691" class="Bound">z</a> <a id="plfa_plfa-part2-Substitution-11693" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11695" href="../Untyped/#plfa_plfa-part2-Untyped-7207" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Substitution-11706" href="../Substitution/#plfa_plfa-part2-Substitution-11691" class="Bound">z</a> <a id="plfa_plfa-part2-Substitution-11708" href="../Substitution/#plfa_plfa-part2-Substitution-11679" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-11709" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-11711" href="../Substitution/#plfa_plfa-part2-Substitution-11649" class="Bound">mm&#39;</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-cong-cons"></a><a id="plfa_plfa-part2-Substitution-11728" href="../Substitution/#plfa_plfa-part2-Substitution-11728" class="Function">cong-cons</a> <a id="plfa_plfa-part2-Substitution-11738" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-11740" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-11742" href="../Substitution/#plfa_plfa-part2-Substitution-11742" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-11744" href="../Substitution/#plfa_plfa-part2-Substitution-11744" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-11745" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11747" href="../Substitution/#plfa_plfa-part2-Substitution-11747" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11748" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11750" href="../Substitution/#plfa_plfa-part2-Substitution-11750" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-11752" href="../Substitution/#plfa_plfa-part2-Substitution-11752" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-11754" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-11756" href="../Substitution/#plfa_plfa-part2-Substitution-11744" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-11758" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-11760" href="../Substitution/#plfa_plfa-part2-Substitution-11747" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11761" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11763" href="../Substitution/#plfa_plfa-part2-Substitution-11763" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-11765" href="../Substitution/#plfa_plfa-part2-Substitution-11765" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-11767" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-11769" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-11775" href="../Substitution/#plfa_plfa-part2-Substitution-11742" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-11777" href="../Substitution/#plfa_plfa-part2-Substitution-11744" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-11778" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-11782" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11784" href="../Substitution/#plfa_plfa-part2-Substitution-11750" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-11786" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-11788" href="../Substitution/#plfa_plfa-part2-Substitution-11752" class="Bound">N</a>  <a id="plfa_plfa-part2-Substitution-11791" class="Symbol">→</a>  <a id="plfa_plfa-part2-Substitution-11794" class="Symbol">(∀{</a><a id="plfa_plfa-part2-Substitution-11797" href="../Substitution/#plfa_plfa-part2-Substitution-11797" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11798" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11800" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11802" href="../Substitution/#plfa_plfa-part2-Substitution-11763" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-11804" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11805" href="../Substitution/#plfa_plfa-part2-Substitution-11797" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11806" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11808" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-11810" href="../Substitution/#plfa_plfa-part2-Substitution-11765" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-11812" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11813" href="../Substitution/#plfa_plfa-part2-Substitution-11797" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11814" class="Symbol">})</a>
    <a id="plfa_plfa-part2-Substitution-11821" class="Comment">--------------------------------</a>
  <a id="plfa_plfa-part2-Substitution-11856" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11858" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-11860" href="../Substitution/#plfa_plfa-part2-Substitution-11860" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11861" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11863" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11865" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-11866" href="../Substitution/#plfa_plfa-part2-Substitution-11750" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-11868" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-11870" href="../Substitution/#plfa_plfa-part2-Substitution-11763" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-11871" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-11873" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11874" href="../Substitution/#plfa_plfa-part2-Substitution-11860" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11875" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11877" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-11879" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-11880" href="../Substitution/#plfa_plfa-part2-Substitution-11752" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-11882" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-11884" href="../Substitution/#plfa_plfa-part2-Substitution-11765" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-11885" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-11887" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11888" href="../Substitution/#plfa_plfa-part2-Substitution-11860" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11889" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-11891" href="../Substitution/#plfa_plfa-part2-Substitution-11728" class="Function">cong-cons</a><a id="plfa_plfa-part2-Substitution-11900" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11901" href="../Substitution/#plfa_plfa-part2-Substitution-11901" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-11902" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11904" href="../Substitution/#plfa_plfa-part2-Substitution-11904" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-11905" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11907" href="../Substitution/#plfa_plfa-part2-Substitution-11907" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11908" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11910" href="../Substitution/#plfa_plfa-part2-Substitution-11910" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-11911" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11913" href="../Substitution/#plfa_plfa-part2-Substitution-11913" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-11914" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11916" href="../Substitution/#plfa_plfa-part2-Substitution-11916" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-11917" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11919" href="../Substitution/#plfa_plfa-part2-Substitution-11919" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-11920" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11922" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-11927" href="../Substitution/#plfa_plfa-part2-Substitution-11927" class="Bound">st</a> <a id="plfa_plfa-part2-Substitution-11930" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11931" href="../Substitution/#plfa_plfa-part2-Substitution-11931" class="Bound">A′</a><a id="plfa_plfa-part2-Substitution-11933" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11935" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-11937" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-11952" href="../Substitution/#plfa_plfa-part2-Substitution-11968" class="Function">lemma</a>
  <a id="plfa_plfa-part2-Substitution-11960" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-11968" href="../Substitution/#plfa_plfa-part2-Substitution-11968" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-11974" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-11976" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-11977" href="../Substitution/#plfa_plfa-part2-Substitution-11977" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-11979" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-11981" href="../Substitution/#plfa_plfa-part2-Substitution-11901" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-11983" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-11985" href="../Substitution/#plfa_plfa-part2-Substitution-11907" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-11987" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-11989" href="../Substitution/#plfa_plfa-part2-Substitution-11931" class="Bound">A′</a><a id="plfa_plfa-part2-Substitution-11991" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-11993" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11995" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-11996" href="../Substitution/#plfa_plfa-part2-Substitution-11910" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-11998" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-12000" href="../Substitution/#plfa_plfa-part2-Substitution-11916" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-12001" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12003" href="../Substitution/#plfa_plfa-part2-Substitution-11977" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-12005" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-12007" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12008" href="../Substitution/#plfa_plfa-part2-Substitution-11910" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-12010" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-12012" href="../Substitution/#plfa_plfa-part2-Substitution-11919" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-12013" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12015" href="../Substitution/#plfa_plfa-part2-Substitution-11977" class="Bound">x</a>
  <a id="plfa_plfa-part2-Substitution-12019" href="../Substitution/#plfa_plfa-part2-Substitution-11968" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-12025" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-Substitution-12027" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-12029" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="plfa_plfa-part2-Substitution-12036" href="../Substitution/#plfa_plfa-part2-Substitution-11968" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-12042" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12043" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-12045" href="../Substitution/#plfa_plfa-part2-Substitution-12045" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-12046" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12048" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-12050" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1470" class="Function">cong-app</a> <a id="plfa_plfa-part2-Substitution-12059" href="../Substitution/#plfa_plfa-part2-Substitution-11927" class="Bound">st</a> <a id="plfa_plfa-part2-Substitution-12062" href="../Substitution/#plfa_plfa-part2-Substitution-12045" class="Bound">x</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-cong-seq"></a><a id="plfa_plfa-part2-Substitution-12077" href="../Substitution/#plfa_plfa-part2-Substitution-12077" class="Function">cong-seq</a> <a id="plfa_plfa-part2-Substitution-12086" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-12088" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-12090" href="../Substitution/#plfa_plfa-part2-Substitution-12090" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-12092" href="../Substitution/#plfa_plfa-part2-Substitution-12092" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-12094" href="../Substitution/#plfa_plfa-part2-Substitution-12094" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-12095" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-12097" href="../Substitution/#plfa_plfa-part2-Substitution-12097" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-12099" href="../Substitution/#plfa_plfa-part2-Substitution-12099" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-12102" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-12104" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-12110" href="../Substitution/#plfa_plfa-part2-Substitution-12090" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-12112" href="../Substitution/#plfa_plfa-part2-Substitution-12092" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-12113" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-12115" href="../Substitution/#plfa_plfa-part2-Substitution-12115" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-12117" href="../Substitution/#plfa_plfa-part2-Substitution-12117" class="Bound">τ′</a> <a id="plfa_plfa-part2-Substitution-12120" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-12122" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-12128" href="../Substitution/#plfa_plfa-part2-Substitution-12092" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-12130" href="../Substitution/#plfa_plfa-part2-Substitution-12094" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-12131" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-12135" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-12137" class="Symbol">(∀{</a><a id="plfa_plfa-part2-Substitution-12140" href="../Substitution/#plfa_plfa-part2-Substitution-12140" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-12141" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-12143" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-12145" href="../Substitution/#plfa_plfa-part2-Substitution-12097" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-12147" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-12148" href="../Substitution/#plfa_plfa-part2-Substitution-12140" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-12149" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-12151" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-12153" href="../Substitution/#plfa_plfa-part2-Substitution-12099" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-12156" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-12157" href="../Substitution/#plfa_plfa-part2-Substitution-12140" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-12158" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-12161" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-12163" class="Symbol">(∀{</a><a id="plfa_plfa-part2-Substitution-12166" href="../Substitution/#plfa_plfa-part2-Substitution-12166" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-12167" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-12169" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-12171" href="../Substitution/#plfa_plfa-part2-Substitution-12115" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-12173" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-12174" href="../Substitution/#plfa_plfa-part2-Substitution-12166" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-12175" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-12177" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-12179" href="../Substitution/#plfa_plfa-part2-Substitution-12117" class="Bound">τ′</a> <a id="plfa_plfa-part2-Substitution-12182" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-12183" href="../Substitution/#plfa_plfa-part2-Substitution-12166" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-12184" class="Symbol">})</a>
  <a id="plfa_plfa-part2-Substitution-12189" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-12191" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-12193" href="../Substitution/#plfa_plfa-part2-Substitution-12193" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-12194" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-12196" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-12198" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12199" href="../Substitution/#plfa_plfa-part2-Substitution-12097" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-12201" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-12203" href="../Substitution/#plfa_plfa-part2-Substitution-12115" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-12204" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12206" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-12207" href="../Substitution/#plfa_plfa-part2-Substitution-12193" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-12208" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-12210" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-12212" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12213" href="../Substitution/#plfa_plfa-part2-Substitution-12099" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-12216" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-12218" href="../Substitution/#plfa_plfa-part2-Substitution-12117" class="Bound">τ′</a><a id="plfa_plfa-part2-Substitution-12220" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12222" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-12223" href="../Substitution/#plfa_plfa-part2-Substitution-12193" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-12224" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-12226" href="../Substitution/#plfa_plfa-part2-Substitution-12077" class="Function">cong-seq</a> <a id="plfa_plfa-part2-Substitution-12235" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-12236" href="../Substitution/#plfa_plfa-part2-Substitution-12236" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-12237" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-12239" href="../Substitution/#plfa_plfa-part2-Substitution-12239" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-12240" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-12242" href="../Substitution/#plfa_plfa-part2-Substitution-12242" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-12243" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-12245" href="../Substitution/#plfa_plfa-part2-Substitution-12245" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-12246" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-12248" href="../Substitution/#plfa_plfa-part2-Substitution-12248" class="Bound">σ′</a><a id="plfa_plfa-part2-Substitution-12250" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-12252" href="../Substitution/#plfa_plfa-part2-Substitution-12252" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-12253" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-12255" href="../Substitution/#plfa_plfa-part2-Substitution-12255" class="Bound">τ′</a><a id="plfa_plfa-part2-Substitution-12257" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-12259" href="../Substitution/#plfa_plfa-part2-Substitution-12259" class="Bound">ss&#39;</a> <a id="plfa_plfa-part2-Substitution-12263" href="../Substitution/#plfa_plfa-part2-Substitution-12263" class="Bound">tt&#39;</a> <a id="plfa_plfa-part2-Substitution-12267" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-12268" href="../Substitution/#plfa_plfa-part2-Substitution-12268" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-12269" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-12271" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-12273" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-12288" href="../Substitution/#plfa_plfa-part2-Substitution-12304" class="Function">lemma</a>
  <a id="plfa_plfa-part2-Substitution-12296" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-12304" href="../Substitution/#plfa_plfa-part2-Substitution-12304" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-12310" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-12312" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12313" href="../Substitution/#plfa_plfa-part2-Substitution-12313" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-12315" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-12317" href="../Substitution/#plfa_plfa-part2-Substitution-12236" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-12319" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-12321" href="../Substitution/#plfa_plfa-part2-Substitution-12268" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-12322" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12324" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-12326" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12327" href="../Substitution/#plfa_plfa-part2-Substitution-12245" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-12329" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-12331" href="../Substitution/#plfa_plfa-part2-Substitution-12252" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-12332" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12334" href="../Substitution/#plfa_plfa-part2-Substitution-12313" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-12336" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-12338" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12339" href="../Substitution/#plfa_plfa-part2-Substitution-12248" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-12342" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-12344" href="../Substitution/#plfa_plfa-part2-Substitution-12255" class="Bound">τ′</a><a id="plfa_plfa-part2-Substitution-12346" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12348" href="../Substitution/#plfa_plfa-part2-Substitution-12313" class="Bound">x</a>
  <a id="plfa_plfa-part2-Substitution-12352" href="../Substitution/#plfa_plfa-part2-Substitution-12304" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-12358" href="../Substitution/#plfa_plfa-part2-Substitution-12358" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-12360" class="Symbol">=</a>
     <a id="plfa_plfa-part2-Substitution-12367" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
       <a id="plfa_plfa-part2-Substitution-12380" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12381" href="../Substitution/#plfa_plfa-part2-Substitution-12245" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-12383" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-12385" href="../Substitution/#plfa_plfa-part2-Substitution-12252" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-12386" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12388" href="../Substitution/#plfa_plfa-part2-Substitution-12358" class="Bound">x</a>
     <a id="plfa_plfa-part2-Substitution-12395" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
       <a id="plfa_plfa-part2-Substitution-12406" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-12412" href="../Substitution/#plfa_plfa-part2-Substitution-12252" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-12414" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12415" href="../Substitution/#plfa_plfa-part2-Substitution-12245" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-12417" href="../Substitution/#plfa_plfa-part2-Substitution-12358" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-12418" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-12425" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-12428" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-12433" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12434" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-12440" href="../Substitution/#plfa_plfa-part2-Substitution-12252" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-12441" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12443" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12444" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1470" class="Function">cong-app</a> <a id="plfa_plfa-part2-Substitution-12453" href="../Substitution/#plfa_plfa-part2-Substitution-12259" class="Bound">ss&#39;</a> <a id="plfa_plfa-part2-Substitution-12457" href="../Substitution/#plfa_plfa-part2-Substitution-12358" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-12458" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12460" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-12469" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-12475" href="../Substitution/#plfa_plfa-part2-Substitution-12252" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-12477" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12478" href="../Substitution/#plfa_plfa-part2-Substitution-12248" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-12481" href="../Substitution/#plfa_plfa-part2-Substitution-12358" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-12482" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-12489" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-12492" href="../Substitution/#plfa_plfa-part2-Substitution-10981" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-12500" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-12501" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-12503" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-12505" href="../Substitution/#plfa_plfa-part2-Substitution-12248" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-12508" href="../Substitution/#plfa_plfa-part2-Substitution-12358" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-12509" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-12511" href="../Substitution/#plfa_plfa-part2-Substitution-12263" class="Bound">tt&#39;</a> <a id="plfa_plfa-part2-Substitution-12515" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-12520" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-12529" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-12535" href="../Substitution/#plfa_plfa-part2-Substitution-12255" class="Bound">τ′</a> <a id="plfa_plfa-part2-Substitution-12538" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12539" href="../Substitution/#plfa_plfa-part2-Substitution-12248" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-12542" href="../Substitution/#plfa_plfa-part2-Substitution-12358" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-12543" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-12550" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
       <a id="plfa_plfa-part2-Substitution-12561" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12562" href="../Substitution/#plfa_plfa-part2-Substitution-12248" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-12565" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-12567" href="../Substitution/#plfa_plfa-part2-Substitution-12255" class="Bound">τ′</a><a id="plfa_plfa-part2-Substitution-12569" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12571" href="../Substitution/#plfa_plfa-part2-Substitution-12358" class="Bound">x</a>
     <a id="plfa_plfa-part2-Substitution-12578" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
</pre><h2 id="relating-rename-exts-ext-and-subst-zero-to-the-σ-algebra">Relating <code>rename</code>, <code>exts</code>, <code>ext</code>, and <code>subst-zero</code> to the σ algebra</h2><p>In this section we establish equations that relate <code>subst</code> and its helper functions (<code>rename</code>, <code>exts</code>, <code>ext</code>, and <code>subst-zero</code>) to terms in the σ algebra.</p><p>The first equation we prove is</p><pre><code>rename ρ M ≡ ⟪ ren ρ ⟫ M              (rename-subst-ren)</code></pre><p>Because <code>subst</code> uses the <code>exts</code> function, we need the following lemma which says that <code>exts</code> and <code>ext</code> do the same thing except that <code>ext</code> works on renamings and <code>exts</code> works on substitutions.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-ren-ext"></a><a id="plfa_plfa-part2-Substitution-13110" href="../Substitution/#plfa_plfa-part2-Substitution-13110" class="Function">ren-ext</a> <a id="plfa_plfa-part2-Substitution-13118" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-13120" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-13122" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13123" href="../Substitution/#plfa_plfa-part2-Substitution-13123" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-13125" href="../Substitution/#plfa_plfa-part2-Substitution-13125" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-13126" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-13128" href="../Substitution/#plfa_plfa-part2-Substitution-13128" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-13130" href="../Substitution/#plfa_plfa-part2-Substitution-13130" class="Bound">C</a> <a id="plfa_plfa-part2-Substitution-13132" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-13134" href="../Untyped/#plfa_plfa-part2-Untyped-2490" class="Datatype">Type</a><a id="plfa_plfa-part2-Substitution-13138" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-13140" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13141" href="../Substitution/#plfa_plfa-part2-Substitution-13141" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-13143" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-13145" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-13152" href="../Substitution/#plfa_plfa-part2-Substitution-13123" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-13154" href="../Substitution/#plfa_plfa-part2-Substitution-13125" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-13155" class="Symbol">}</a>
        <a id="plfa_plfa-part2-Substitution-13165" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-13167" href="../Substitution/#plfa_plfa-part2-Substitution-6492" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-13171" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13172" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-13176" href="../Substitution/#plfa_plfa-part2-Substitution-13141" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-13178" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13179" class="Argument">B</a> <a id="plfa_plfa-part2-Substitution-13181" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13183" href="../Substitution/#plfa_plfa-part2-Substitution-13128" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-13184" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-13187" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-13189" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-13194" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13195" href="../Substitution/#plfa_plfa-part2-Substitution-6492" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-13199" href="../Substitution/#plfa_plfa-part2-Substitution-13141" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-13200" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-13202" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13203" href="../Substitution/#plfa_plfa-part2-Substitution-13130" class="Bound">C</a><a id="plfa_plfa-part2-Substitution-13204" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-13206" href="../Substitution/#plfa_plfa-part2-Substitution-13110" class="Function">ren-ext</a> <a id="plfa_plfa-part2-Substitution-13214" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13215" href="../Substitution/#plfa_plfa-part2-Substitution-13215" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-13216" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-13218" href="../Substitution/#plfa_plfa-part2-Substitution-13218" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-13219" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-13221" href="../Substitution/#plfa_plfa-part2-Substitution-13221" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-13222" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-13224" href="../Substitution/#plfa_plfa-part2-Substitution-13224" class="Bound">C</a><a id="plfa_plfa-part2-Substitution-13225" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-13227" href="../Substitution/#plfa_plfa-part2-Substitution-13227" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-13228" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-13230" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13232" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-13247" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-13249" href="../Substitution/#plfa_plfa-part2-Substitution-13249" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-13251" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-13253" href="../Substitution/#plfa_plfa-part2-Substitution-13277" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-13259" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13260" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-13262" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13264" href="../Substitution/#plfa_plfa-part2-Substitution-13249" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-13265" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-13269" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-13277" href="../Substitution/#plfa_plfa-part2-Substitution-13277" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-13283" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-13285" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-13287" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13288" href="../Substitution/#plfa_plfa-part2-Substitution-13288" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-13290" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-13292" href="../Substitution/#plfa_plfa-part2-Substitution-13215" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-13294" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-13296" href="../Substitution/#plfa_plfa-part2-Substitution-13221" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-13298" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-13300" href="../Substitution/#plfa_plfa-part2-Substitution-13224" class="Bound">C</a><a id="plfa_plfa-part2-Substitution-13301" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-13303" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-13305" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13306" href="../Substitution/#plfa_plfa-part2-Substitution-6492" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-13310" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13311" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-13315" href="../Substitution/#plfa_plfa-part2-Substitution-13227" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-13316" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-13319" href="../Substitution/#plfa_plfa-part2-Substitution-13288" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-13321" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-13323" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-13328" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13329" href="../Substitution/#plfa_plfa-part2-Substitution-6492" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-13333" href="../Substitution/#plfa_plfa-part2-Substitution-13227" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-13334" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-13336" href="../Substitution/#plfa_plfa-part2-Substitution-13288" class="Bound">x</a>
  <a id="plfa_plfa-part2-Substitution-13340" href="../Substitution/#plfa_plfa-part2-Substitution-13277" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-13346" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13347" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-13349" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13351" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-13352" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-13354" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13356" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="plfa_plfa-part2-Substitution-13363" href="../Substitution/#plfa_plfa-part2-Substitution-13277" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-13369" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13370" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-13372" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13374" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-13376" href="../Substitution/#plfa_plfa-part2-Substitution-13376" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-13377" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-13379" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13381" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><p>With this lemma in hand, the proof is a straightforward induction on the term <code>M</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-rename-subst-ren"></a><a id="plfa_plfa-part2-Substitution-13483" href="../Substitution/#plfa_plfa-part2-Substitution-13483" class="Function">rename-subst-ren</a> <a id="plfa_plfa-part2-Substitution-13500" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-13502" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-13504" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13505" href="../Substitution/#plfa_plfa-part2-Substitution-13505" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-13507" href="../Substitution/#plfa_plfa-part2-Substitution-13507" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-13508" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-13510" href="../Substitution/#plfa_plfa-part2-Substitution-13510" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-13511" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-13513" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13514" href="../Substitution/#plfa_plfa-part2-Substitution-13514" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-13516" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-13518" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-13525" href="../Substitution/#plfa_plfa-part2-Substitution-13505" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-13527" href="../Substitution/#plfa_plfa-part2-Substitution-13507" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-13528" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-13530" href="../Substitution/#plfa_plfa-part2-Substitution-13530" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-13532" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-13534" href="../Substitution/#plfa_plfa-part2-Substitution-13505" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-13536" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-13538" href="../Substitution/#plfa_plfa-part2-Substitution-13510" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-13539" class="Symbol">}</a>
                 <a id="plfa_plfa-part2-Substitution-13558" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-13560" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-13567" href="../Substitution/#plfa_plfa-part2-Substitution-13514" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-13569" href="../Substitution/#plfa_plfa-part2-Substitution-13530" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-13571" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-13573" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-13575" href="../Substitution/#plfa_plfa-part2-Substitution-6492" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-13579" href="../Substitution/#plfa_plfa-part2-Substitution-13514" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-13581" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-13583" href="../Substitution/#plfa_plfa-part2-Substitution-13530" class="Bound">M</a>
<a id="plfa_plfa-part2-Substitution-13585" href="../Substitution/#plfa_plfa-part2-Substitution-13483" class="Function">rename-subst-ren</a> <a id="plfa_plfa-part2-Substitution-13602" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13603" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-13605" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13607" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-13609" href="../Substitution/#plfa_plfa-part2-Substitution-13609" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-13610" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-13612" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13614" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part2-Substitution-13619" href="../Substitution/#plfa_plfa-part2-Substitution-13483" class="Function">rename-subst-ren</a> <a id="plfa_plfa-part2-Substitution-13636" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13637" class="Argument">ρ</a> <a id="plfa_plfa-part2-Substitution-13639" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13641" href="../Substitution/#plfa_plfa-part2-Substitution-13641" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-13642" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-13644" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-13646" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13648" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-13650" href="../Substitution/#plfa_plfa-part2-Substitution-13650" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-13651" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-13653" class="Symbol">=</a>
  <a id="plfa_plfa-part2-Substitution-13657" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
      <a id="plfa_plfa-part2-Substitution-13669" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-13676" href="../Substitution/#plfa_plfa-part2-Substitution-13641" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-13678" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13679" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-13681" href="../Substitution/#plfa_plfa-part2-Substitution-13650" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-13682" class="Symbol">)</a>
    <a id="plfa_plfa-part2-Substitution-13688" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
      <a id="plfa_plfa-part2-Substitution-13698" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-13700" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-13707" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13708" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-13712" href="../Substitution/#plfa_plfa-part2-Substitution-13641" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-13713" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-13715" href="../Substitution/#plfa_plfa-part2-Substitution-13650" class="Bound">N</a>
    <a id="plfa_plfa-part2-Substitution-13721" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-13724" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-13729" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ_</a> <a id="plfa_plfa-part2-Substitution-13732" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13733" href="../Substitution/#plfa_plfa-part2-Substitution-13483" class="Function">rename-subst-ren</a> <a id="plfa_plfa-part2-Substitution-13750" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13751" class="Argument">ρ</a> <a id="plfa_plfa-part2-Substitution-13753" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13755" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-13759" href="../Substitution/#plfa_plfa-part2-Substitution-13641" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-13760" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-13762" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-13764" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13766" href="../Substitution/#plfa_plfa-part2-Substitution-13650" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-13767" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-13770" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
      <a id="plfa_plfa-part2-Substitution-13778" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-13780" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-13782" href="../Substitution/#plfa_plfa-part2-Substitution-6492" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-13786" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13787" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-13791" href="../Substitution/#plfa_plfa-part2-Substitution-13641" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-13792" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-13794" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-13796" href="../Substitution/#plfa_plfa-part2-Substitution-13650" class="Bound">N</a>
    <a id="plfa_plfa-part2-Substitution-13802" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-13805" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-13810" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ_</a> <a id="plfa_plfa-part2-Substitution-13813" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13814" href="../Substitution/#plfa_plfa-part2-Substitution-10981" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-13823" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13824" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-13826" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13828" href="../Substitution/#plfa_plfa-part2-Substitution-13650" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-13829" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-13831" href="../Substitution/#plfa_plfa-part2-Substitution-13110" class="Function">ren-ext</a> <a id="plfa_plfa-part2-Substitution-13839" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Substitution-13843" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-13845" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
      <a id="plfa_plfa-part2-Substitution-13853" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-13855" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-13857" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-13862" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13863" href="../Substitution/#plfa_plfa-part2-Substitution-6492" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-13867" href="../Substitution/#plfa_plfa-part2-Substitution-13641" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-13868" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-13870" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a>  <a id="plfa_plfa-part2-Substitution-13873" href="../Substitution/#plfa_plfa-part2-Substitution-13650" class="Bound">N</a>
    <a id="plfa_plfa-part2-Substitution-13879" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
      <a id="plfa_plfa-part2-Substitution-13889" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-13891" href="../Substitution/#plfa_plfa-part2-Substitution-6492" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-13895" href="../Substitution/#plfa_plfa-part2-Substitution-13641" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-13897" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-13899" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13900" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-13902" href="../Substitution/#plfa_plfa-part2-Substitution-13650" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-13903" class="Symbol">)</a>
  <a id="plfa_plfa-part2-Substitution-13907" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
<a id="plfa_plfa-part2-Substitution-13909" href="../Substitution/#plfa_plfa-part2-Substitution-13483" class="Function">rename-subst-ren</a> <a id="plfa_plfa-part2-Substitution-13926" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13927" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-13929" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13931" href="../Substitution/#plfa_plfa-part2-Substitution-13931" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-13933" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Substitution-13935" href="../Substitution/#plfa_plfa-part2-Substitution-13935" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-13936" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-13938" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13940" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1376" class="Function">cong₂</a> <a id="plfa_plfa-part2-Substitution-13946" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">_·_</a> <a id="plfa_plfa-part2-Substitution-13950" href="../Substitution/#plfa_plfa-part2-Substitution-13483" class="Function">rename-subst-ren</a> <a id="plfa_plfa-part2-Substitution-13967" href="../Substitution/#plfa_plfa-part2-Substitution-13483" class="Function">rename-subst-ren</a>
</pre><p>The substitution <code>ren S_</code> is equivalent to <code>↑</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-ren-shift"></a><a id="plfa_plfa-part2-Substitution-14046" href="../Substitution/#plfa_plfa-part2-Substitution-14046" class="Function">ren-shift</a> <a id="plfa_plfa-part2-Substitution-14056" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-14058" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-14060" href="../Substitution/#plfa_plfa-part2-Substitution-14060" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-14061" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-14063" href="../Substitution/#plfa_plfa-part2-Substitution-14063" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-14064" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-14066" href="../Substitution/#plfa_plfa-part2-Substitution-14066" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-14067" class="Symbol">}</a>
          <a id="plfa_plfa-part2-Substitution-14079" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-14081" href="../Substitution/#plfa_plfa-part2-Substitution-6492" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-14085" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Substitution-14088" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-14090" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a> <a id="plfa_plfa-part2-Substitution-14092" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14093" class="Argument">A</a> <a id="plfa_plfa-part2-Substitution-14095" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14097" href="../Substitution/#plfa_plfa-part2-Substitution-14066" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-14098" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14100" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14101" href="../Substitution/#plfa_plfa-part2-Substitution-14063" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-14102" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-14104" href="../Substitution/#plfa_plfa-part2-Substitution-14046" class="Function">ren-shift</a> <a id="plfa_plfa-part2-Substitution-14114" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14115" href="../Substitution/#plfa_plfa-part2-Substitution-14115" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-14116" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-14118" href="../Substitution/#plfa_plfa-part2-Substitution-14118" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-14119" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-14121" href="../Substitution/#plfa_plfa-part2-Substitution-14121" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-14122" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14124" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14126" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-14141" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-14143" href="../Substitution/#plfa_plfa-part2-Substitution-14143" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-14145" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-14147" href="../Substitution/#plfa_plfa-part2-Substitution-14171" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-14153" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14154" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-14156" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14158" href="../Substitution/#plfa_plfa-part2-Substitution-14143" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-14159" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-14163" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-14171" href="../Substitution/#plfa_plfa-part2-Substitution-14171" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-14177" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-14179" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-14181" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14182" href="../Substitution/#plfa_plfa-part2-Substitution-14182" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-14184" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-14186" href="../Substitution/#plfa_plfa-part2-Substitution-14115" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-14188" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-14190" href="../Substitution/#plfa_plfa-part2-Substitution-14118" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-14191" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14193" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-14195" href="../Substitution/#plfa_plfa-part2-Substitution-6492" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-14199" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-14200" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part2-Substitution-14202" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14203" class="Argument">B</a> <a id="plfa_plfa-part2-Substitution-14205" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14207" href="../Substitution/#plfa_plfa-part2-Substitution-14121" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-14208" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-14211" href="../Substitution/#plfa_plfa-part2-Substitution-14182" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-14213" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-14215" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a> <a id="plfa_plfa-part2-Substitution-14217" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14218" class="Argument">A</a> <a id="plfa_plfa-part2-Substitution-14220" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14222" href="../Substitution/#plfa_plfa-part2-Substitution-14121" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-14223" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14225" href="../Substitution/#plfa_plfa-part2-Substitution-14182" class="Bound">x</a>
  <a id="plfa_plfa-part2-Substitution-14229" href="../Substitution/#plfa_plfa-part2-Substitution-14171" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-14235" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14236" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-14238" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14240" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-14241" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14243" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14245" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="plfa_plfa-part2-Substitution-14252" href="../Substitution/#plfa_plfa-part2-Substitution-14171" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-14258" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14259" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-14261" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14263" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-14265" href="../Substitution/#plfa_plfa-part2-Substitution-14265" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-14266" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14268" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14270" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><p>The substitution <code>rename S_ M</code> is equivalent to shifting: <code>⟪ ↑ ⟫ M</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-rename-shift"></a><a id="plfa_plfa-part2-Substitution-14358" href="../Substitution/#plfa_plfa-part2-Substitution-14358" class="Function">rename-shift</a> <a id="plfa_plfa-part2-Substitution-14371" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-14373" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-14375" href="../Substitution/#plfa_plfa-part2-Substitution-14375" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-14376" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14378" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14379" href="../Substitution/#plfa_plfa-part2-Substitution-14379" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-14380" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14382" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14383" href="../Substitution/#plfa_plfa-part2-Substitution-14383" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-14384" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14386" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14387" href="../Substitution/#plfa_plfa-part2-Substitution-14387" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-14389" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-14391" href="../Substitution/#plfa_plfa-part2-Substitution-14375" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-14393" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-14395" href="../Substitution/#plfa_plfa-part2-Substitution-14379" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-14396" class="Symbol">}</a>
             <a id="plfa_plfa-part2-Substitution-14411" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-14413" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-14420" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-14421" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part2-Substitution-14423" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14424" class="Argument">B</a> <a id="plfa_plfa-part2-Substitution-14426" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14428" href="../Substitution/#plfa_plfa-part2-Substitution-14383" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-14429" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-14432" href="../Substitution/#plfa_plfa-part2-Substitution-14387" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-14434" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-14436" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-14438" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a> <a id="plfa_plfa-part2-Substitution-14440" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-14442" href="../Substitution/#plfa_plfa-part2-Substitution-14387" class="Bound">M</a>
<a id="plfa_plfa-part2-Substitution-14444" href="../Substitution/#plfa_plfa-part2-Substitution-14358" class="Function">rename-shift</a><a id="plfa_plfa-part2-Substitution-14456" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14457" href="../Substitution/#plfa_plfa-part2-Substitution-14457" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-14458" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-14460" href="../Substitution/#plfa_plfa-part2-Substitution-14460" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-14461" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-14463" href="../Substitution/#plfa_plfa-part2-Substitution-14463" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-14464" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-14466" href="../Substitution/#plfa_plfa-part2-Substitution-14466" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-14467" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14469" class="Symbol">=</a>
  <a id="plfa_plfa-part2-Substitution-14473" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
    <a id="plfa_plfa-part2-Substitution-14483" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-14490" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Substitution-14493" href="../Substitution/#plfa_plfa-part2-Substitution-14466" class="Bound">M</a>
  <a id="plfa_plfa-part2-Substitution-14497" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-14500" href="../Substitution/#plfa_plfa-part2-Substitution-13483" class="Function">rename-subst-ren</a> <a id="plfa_plfa-part2-Substitution-14517" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
    <a id="plfa_plfa-part2-Substitution-14523" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-14525" href="../Substitution/#plfa_plfa-part2-Substitution-6492" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-14529" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Substitution-14532" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-14534" href="../Substitution/#plfa_plfa-part2-Substitution-14466" class="Bound">M</a>
  <a id="plfa_plfa-part2-Substitution-14538" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-14541" href="../Substitution/#plfa_plfa-part2-Substitution-10981" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-14549" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14550" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-14552" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14554" href="../Substitution/#plfa_plfa-part2-Substitution-14466" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-14555" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14557" href="../Substitution/#plfa_plfa-part2-Substitution-14046" class="Function">ren-shift</a> <a id="plfa_plfa-part2-Substitution-14567" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-14572" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
    <a id="plfa_plfa-part2-Substitution-14578" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-14580" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a> <a id="plfa_plfa-part2-Substitution-14582" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-14584" href="../Substitution/#plfa_plfa-part2-Substitution-14466" class="Bound">M</a>
  <a id="plfa_plfa-part2-Substitution-14588" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
</pre><p>Next we prove the equation <code>exts-cons-shift</code>, which states that <code>exts</code> is equivalent to cons’ing Z onto the sequence formed by applying <code>σ</code> and then shifting. The proof is by case analysis on the variable <code>x</code>, using <code>rename-subst-ren</code> for when <code>x = S y</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-exts-cons-shift"></a><a id="plfa_plfa-part2-Substitution-14859" href="../Substitution/#plfa_plfa-part2-Substitution-14859" class="Function">exts-cons-shift</a> <a id="plfa_plfa-part2-Substitution-14875" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-14877" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-14879" href="../Substitution/#plfa_plfa-part2-Substitution-14879" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-14881" href="../Substitution/#plfa_plfa-part2-Substitution-14881" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-14882" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14884" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14885" href="../Substitution/#plfa_plfa-part2-Substitution-14885" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-14887" href="../Substitution/#plfa_plfa-part2-Substitution-14887" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-14888" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14890" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14891" href="../Substitution/#plfa_plfa-part2-Substitution-14891" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-14893" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-14895" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-14901" href="../Substitution/#plfa_plfa-part2-Substitution-14879" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-14903" href="../Substitution/#plfa_plfa-part2-Substitution-14881" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-14904" class="Symbol">}</a>
                <a id="plfa_plfa-part2-Substitution-14922" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-14924" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-14929" href="../Substitution/#plfa_plfa-part2-Substitution-14891" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-14931" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14932" href="../Substitution/#plfa_plfa-part2-Substitution-14885" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-14933" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14935" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14936" href="../Substitution/#plfa_plfa-part2-Substitution-14887" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-14937" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14939" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-14941" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-14942" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-14944" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-Substitution-14946" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-14948" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-14949" href="../Substitution/#plfa_plfa-part2-Substitution-14891" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-14951" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-14953" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-14954" class="Symbol">))</a>
<a id="plfa_plfa-part2-Substitution-14957" href="../Substitution/#plfa_plfa-part2-Substitution-14859" class="Function">exts-cons-shift</a> <a id="plfa_plfa-part2-Substitution-14973" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14975" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-14990" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-14992" href="../Substitution/#plfa_plfa-part2-Substitution-14992" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-14994" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-14996" href="../Substitution/#plfa_plfa-part2-Substitution-15019" class="Function">lemma</a><a id="plfa_plfa-part2-Substitution-15001" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15002" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-15004" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15006" href="../Substitution/#plfa_plfa-part2-Substitution-14992" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-15007" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-15011" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-15019" href="../Substitution/#plfa_plfa-part2-Substitution-15019" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-15025" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15027" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-15029" href="../Substitution/#plfa_plfa-part2-Substitution-15029" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-15031" href="../Substitution/#plfa_plfa-part2-Substitution-15031" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-15032" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-15034" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15035" href="../Substitution/#plfa_plfa-part2-Substitution-15035" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-15037" href="../Substitution/#plfa_plfa-part2-Substitution-15037" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-15038" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-15040" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15041" href="../Substitution/#plfa_plfa-part2-Substitution-15041" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-15043" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15045" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-15051" href="../Substitution/#plfa_plfa-part2-Substitution-15029" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-15053" href="../Substitution/#plfa_plfa-part2-Substitution-15031" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-15054" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-15056" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15057" href="../Substitution/#plfa_plfa-part2-Substitution-15057" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-15059" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15061" href="../Substitution/#plfa_plfa-part2-Substitution-15029" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-15063" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-15065" href="../Substitution/#plfa_plfa-part2-Substitution-15037" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-15067" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-15069" href="../Substitution/#plfa_plfa-part2-Substitution-15035" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-15070" class="Symbol">}</a>
                  <a id="plfa_plfa-part2-Substitution-15090" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-15092" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-15097" href="../Substitution/#plfa_plfa-part2-Substitution-15041" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-15099" href="../Substitution/#plfa_plfa-part2-Substitution-15057" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-15101" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-15103" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-15104" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-15106" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-Substitution-15108" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-15110" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-15111" href="../Substitution/#plfa_plfa-part2-Substitution-15041" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-15113" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-15115" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-15116" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-15119" href="../Substitution/#plfa_plfa-part2-Substitution-15057" class="Bound">x</a>
  <a id="plfa_plfa-part2-Substitution-15123" href="../Substitution/#plfa_plfa-part2-Substitution-15019" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-15129" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15130" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-15132" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15134" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-15135" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-15137" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15139" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="plfa_plfa-part2-Substitution-15146" href="../Substitution/#plfa_plfa-part2-Substitution-15019" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-15152" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15153" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-15155" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15157" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-15159" href="../Substitution/#plfa_plfa-part2-Substitution-15159" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-15160" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-15162" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15164" href="../Substitution/#plfa_plfa-part2-Substitution-13483" class="Function">rename-subst-ren</a>
</pre><p>As a corollary, we have a similar correspondence for <code>ren (ext ρ)</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-ext-cons-Z-shift"></a><a id="plfa_plfa-part2-Substitution-15263" href="../Substitution/#plfa_plfa-part2-Substitution-15263" class="Function">ext-cons-Z-shift</a> <a id="plfa_plfa-part2-Substitution-15280" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15282" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-15284" href="../Substitution/#plfa_plfa-part2-Substitution-15284" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-15286" href="../Substitution/#plfa_plfa-part2-Substitution-15286" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-15287" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-15289" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15290" href="../Substitution/#plfa_plfa-part2-Substitution-15290" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-15292" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15294" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-15301" href="../Substitution/#plfa_plfa-part2-Substitution-15284" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-15303" href="../Substitution/#plfa_plfa-part2-Substitution-15286" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-15304" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-15306" href="../Substitution/#plfa_plfa-part2-Substitution-15306" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-15307" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-15309" href="../Substitution/#plfa_plfa-part2-Substitution-15309" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-15310" class="Symbol">}</a>
                 <a id="plfa_plfa-part2-Substitution-15329" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-15331" href="../Substitution/#plfa_plfa-part2-Substitution-6492" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-15335" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-15336" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-15340" href="../Substitution/#plfa_plfa-part2-Substitution-15290" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-15342" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15343" class="Argument">B</a> <a id="plfa_plfa-part2-Substitution-15345" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15347" href="../Substitution/#plfa_plfa-part2-Substitution-15309" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-15348" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-15351" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-15353" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-15354" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-15356" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-Substitution-15358" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-15360" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-15361" href="../Substitution/#plfa_plfa-part2-Substitution-6492" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-15365" href="../Substitution/#plfa_plfa-part2-Substitution-15290" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-15367" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-15369" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-15370" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-15373" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15374" href="../Substitution/#plfa_plfa-part2-Substitution-15306" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-15375" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-15377" href="../Substitution/#plfa_plfa-part2-Substitution-15263" class="Function">ext-cons-Z-shift</a> <a id="plfa_plfa-part2-Substitution-15394" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15395" href="../Substitution/#plfa_plfa-part2-Substitution-15395" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-15396" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-15398" href="../Substitution/#plfa_plfa-part2-Substitution-15398" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-15399" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-15401" href="../Substitution/#plfa_plfa-part2-Substitution-15401" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-15402" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-15404" href="../Substitution/#plfa_plfa-part2-Substitution-15404" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-15405" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-15407" href="../Substitution/#plfa_plfa-part2-Substitution-15407" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-15408" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-15410" class="Symbol">=</a>
  <a id="plfa_plfa-part2-Substitution-15414" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
    <a id="plfa_plfa-part2-Substitution-15424" href="../Substitution/#plfa_plfa-part2-Substitution-6492" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-15428" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-15429" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-15433" href="../Substitution/#plfa_plfa-part2-Substitution-15401" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-15434" class="Symbol">)</a>
  <a id="plfa_plfa-part2-Substitution-15438" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-15441" href="../Substitution/#plfa_plfa-part2-Substitution-13110" class="Function">ren-ext</a> <a id="plfa_plfa-part2-Substitution-15449" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
    <a id="plfa_plfa-part2-Substitution-15455" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-15460" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-15461" href="../Substitution/#plfa_plfa-part2-Substitution-6492" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-15465" href="../Substitution/#plfa_plfa-part2-Substitution-15401" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-15466" class="Symbol">)</a>
  <a id="plfa_plfa-part2-Substitution-15470" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-15473" href="../Substitution/#plfa_plfa-part2-Substitution-14859" class="Function">exts-cons-shift</a><a id="plfa_plfa-part2-Substitution-15488" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15489" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-15491" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15493" href="../Substitution/#plfa_plfa-part2-Substitution-6492" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-15497" href="../Substitution/#plfa_plfa-part2-Substitution-15401" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-15498" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-15500" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
   <a id="plfa_plfa-part2-Substitution-15505" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-15507" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-15509" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-15510" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-15512" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-15514" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-15515" href="../Substitution/#plfa_plfa-part2-Substitution-6492" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-15519" href="../Substitution/#plfa_plfa-part2-Substitution-15401" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-15521" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-15523" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-15524" class="Symbol">))</a>
  <a id="plfa_plfa-part2-Substitution-15529" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
</pre><p>Finally, the <code>subst-zero M</code> substitution is equivalent to cons’ing <code>M</code> onto the identity substitution.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-subst-Z-cons-ids"></a><a id="plfa_plfa-part2-Substitution-15648" href="../Substitution/#plfa_plfa-part2-Substitution-15648" class="Function">subst-Z-cons-ids</a> <a id="plfa_plfa-part2-Substitution-15665" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15667" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-15669" href="../Substitution/#plfa_plfa-part2-Substitution-15669" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-15670" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-15672" href="../Substitution/#plfa_plfa-part2-Substitution-15672" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-15674" href="../Substitution/#plfa_plfa-part2-Substitution-15674" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-15676" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15678" href="../Untyped/#plfa_plfa-part2-Untyped-2490" class="Datatype">Type</a><a id="plfa_plfa-part2-Substitution-15682" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-15684" href="../Substitution/#plfa_plfa-part2-Substitution-15684" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-15686" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15688" href="../Substitution/#plfa_plfa-part2-Substitution-15669" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-15690" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-15692" href="../Substitution/#plfa_plfa-part2-Substitution-15674" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-15693" class="Symbol">}</a>
                 <a id="plfa_plfa-part2-Substitution-15712" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-15714" href="../Untyped/#plfa_plfa-part2-Untyped-7207" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Substitution-15725" href="../Substitution/#plfa_plfa-part2-Substitution-15684" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-15727" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-15729" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-15730" href="../Substitution/#plfa_plfa-part2-Substitution-15684" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-15732" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-15734" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-15737" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-15739" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15740" href="../Substitution/#plfa_plfa-part2-Substitution-15672" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-15741" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-15743" href="../Substitution/#plfa_plfa-part2-Substitution-15648" class="Function">subst-Z-cons-ids</a> <a id="plfa_plfa-part2-Substitution-15760" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15762" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-15777" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-15779" href="../Substitution/#plfa_plfa-part2-Substitution-15779" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-15781" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-15783" href="../Substitution/#plfa_plfa-part2-Substitution-15807" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-15789" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15790" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-15792" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15794" href="../Substitution/#plfa_plfa-part2-Substitution-15779" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-15795" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-15799" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-15807" href="../Substitution/#plfa_plfa-part2-Substitution-15807" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-15813" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15815" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-15817" href="../Substitution/#plfa_plfa-part2-Substitution-15817" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-15818" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-15820" href="../Substitution/#plfa_plfa-part2-Substitution-15820" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-15822" href="../Substitution/#plfa_plfa-part2-Substitution-15822" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-15824" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15826" href="../Untyped/#plfa_plfa-part2-Untyped-2490" class="Datatype">Type</a><a id="plfa_plfa-part2-Substitution-15830" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-15832" href="../Substitution/#plfa_plfa-part2-Substitution-15832" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-15834" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15836" href="../Substitution/#plfa_plfa-part2-Substitution-15817" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-15838" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-15840" href="../Substitution/#plfa_plfa-part2-Substitution-15822" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-15841" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-15843" href="../Substitution/#plfa_plfa-part2-Substitution-15843" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-15845" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15847" href="../Substitution/#plfa_plfa-part2-Substitution-15817" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-15849" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-15851" href="../Substitution/#plfa_plfa-part2-Substitution-15822" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-15853" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-15855" href="../Substitution/#plfa_plfa-part2-Substitution-15820" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-15856" class="Symbol">}</a>
                      <a id="plfa_plfa-part2-Substitution-15880" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-15882" href="../Untyped/#plfa_plfa-part2-Untyped-7207" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Substitution-15893" href="../Substitution/#plfa_plfa-part2-Substitution-15832" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-15895" href="../Substitution/#plfa_plfa-part2-Substitution-15843" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-15897" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-15899" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-15900" href="../Substitution/#plfa_plfa-part2-Substitution-15832" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-15902" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-15904" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-15907" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-15909" href="../Substitution/#plfa_plfa-part2-Substitution-15843" class="Bound">x</a>
  <a id="plfa_plfa-part2-Substitution-15913" href="../Substitution/#plfa_plfa-part2-Substitution-15807" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-15919" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15920" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-15922" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15924" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-15925" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-15927" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15929" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="plfa_plfa-part2-Substitution-15936" href="../Substitution/#plfa_plfa-part2-Substitution-15807" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-15942" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15943" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-15945" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15947" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-15949" href="../Substitution/#plfa_plfa-part2-Substitution-15949" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-15950" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-15952" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15954" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><h2 id="proofs-of-sub-abs-sub-id-and-rename-id">Proofs of sub-abs, sub-id, and rename-id</h2><p>The equation <code>sub-abs</code> follows immediately from the equation <code>exts-cons-shift</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-sub-abs"></a><a id="plfa_plfa-part2-Substitution-16099" href="../Substitution/#plfa_plfa-part2-Substitution-16099" class="Function">sub-abs</a> <a id="plfa_plfa-part2-Substitution-16107" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-16109" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-16111" href="../Substitution/#plfa_plfa-part2-Substitution-16111" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-16113" href="../Substitution/#plfa_plfa-part2-Substitution-16113" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-16114" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-16116" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-16117" href="../Substitution/#plfa_plfa-part2-Substitution-16117" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-16119" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-16121" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-16127" href="../Substitution/#plfa_plfa-part2-Substitution-16111" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-16129" href="../Substitution/#plfa_plfa-part2-Substitution-16113" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-16130" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-16132" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-16133" href="../Substitution/#plfa_plfa-part2-Substitution-16133" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-16135" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-16137" href="../Substitution/#plfa_plfa-part2-Substitution-16111" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-16139" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-16141" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-Substitution-16143" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-16145" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-16146" class="Symbol">}</a>
        <a id="plfa_plfa-part2-Substitution-16156" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-16158" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-16160" href="../Substitution/#plfa_plfa-part2-Substitution-16117" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-16162" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-16164" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-16165" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-16167" href="../Substitution/#plfa_plfa-part2-Substitution-16133" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-16168" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-16170" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-16172" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-16174" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-16176" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-16177" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-16179" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-16180" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-16182" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-16184" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-16185" href="../Substitution/#plfa_plfa-part2-Substitution-16117" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-16187" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-16189" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-16190" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-16192" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-16194" href="../Substitution/#plfa_plfa-part2-Substitution-16133" class="Bound">N</a>
<a id="plfa_plfa-part2-Substitution-16196" href="../Substitution/#plfa_plfa-part2-Substitution-16099" class="Function">sub-abs</a> <a id="plfa_plfa-part2-Substitution-16204" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-16205" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-16207" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-16209" href="../Substitution/#plfa_plfa-part2-Substitution-16209" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-16210" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-16212" class="Argument">N</a> <a id="plfa_plfa-part2-Substitution-16214" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-16216" href="../Substitution/#plfa_plfa-part2-Substitution-16216" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-16217" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-16219" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-16224" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
     <a id="plfa_plfa-part2-Substitution-16235" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-16237" href="../Substitution/#plfa_plfa-part2-Substitution-16209" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-16239" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-16241" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-16242" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-16244" href="../Substitution/#plfa_plfa-part2-Substitution-16216" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-16245" class="Symbol">)</a>
   <a id="plfa_plfa-part2-Substitution-16250" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
     <a id="plfa_plfa-part2-Substitution-16259" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-16261" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-16263" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-16268" href="../Substitution/#plfa_plfa-part2-Substitution-16209" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-16270" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-16272" href="../Substitution/#plfa_plfa-part2-Substitution-16216" class="Bound">N</a>
   <a id="plfa_plfa-part2-Substitution-16277" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-16280" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-16285" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ_</a> <a id="plfa_plfa-part2-Substitution-16288" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-16289" href="../Substitution/#plfa_plfa-part2-Substitution-10981" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-16297" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-16298" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-16300" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-16302" href="../Substitution/#plfa_plfa-part2-Substitution-16216" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-16303" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-16305" href="../Substitution/#plfa_plfa-part2-Substitution-14859" class="Function">exts-cons-shift</a> <a id="plfa_plfa-part2-Substitution-16321" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Substitution-16325" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-16327" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
     <a id="plfa_plfa-part2-Substitution-16334" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-16336" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-16338" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-16339" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-16341" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-16342" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-16344" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-16346" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-16347" href="../Substitution/#plfa_plfa-part2-Substitution-16209" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-16349" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-16351" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-16352" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-16354" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-16356" href="../Substitution/#plfa_plfa-part2-Substitution-16216" class="Bound">N</a>
   <a id="plfa_plfa-part2-Substitution-16361" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
</pre><p>The proof of <code>sub-id</code> requires the following lemma which says that extending the identity substitution produces the identity substitution.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-exts-ids"></a><a id="plfa_plfa-part2-Substitution-16516" href="../Substitution/#plfa_plfa-part2-Substitution-16516" class="Function">exts-ids</a> <a id="plfa_plfa-part2-Substitution-16525" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-16527" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-16529" href="../Substitution/#plfa_plfa-part2-Substitution-16529" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-16530" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-16532" href="../Substitution/#plfa_plfa-part2-Substitution-16532" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-16534" href="../Substitution/#plfa_plfa-part2-Substitution-16534" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-16535" class="Symbol">}</a>
         <a id="plfa_plfa-part2-Substitution-16546" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-16548" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-16553" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-16557" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-16559" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-16563" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-16564" href="../Substitution/#plfa_plfa-part2-Substitution-16529" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-16566" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-16568" href="../Substitution/#plfa_plfa-part2-Substitution-16534" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-16569" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-16571" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-16572" href="../Substitution/#plfa_plfa-part2-Substitution-16532" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-16573" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-16575" href="../Substitution/#plfa_plfa-part2-Substitution-16516" class="Function">exts-ids</a> <a id="plfa_plfa-part2-Substitution-16584" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-16585" href="../Substitution/#plfa_plfa-part2-Substitution-16585" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-16586" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-16588" href="../Substitution/#plfa_plfa-part2-Substitution-16588" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-16589" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-16591" href="../Substitution/#plfa_plfa-part2-Substitution-16591" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-16592" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-16594" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-16596" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-16611" href="../Substitution/#plfa_plfa-part2-Substitution-16625" class="Function">lemma</a>
  <a id="plfa_plfa-part2-Substitution-16619" class="Keyword">where</a> <a id="plfa_plfa-part2-Substitution-16625" href="../Substitution/#plfa_plfa-part2-Substitution-16625" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-16631" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-16633" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-16634" href="../Substitution/#plfa_plfa-part2-Substitution-16634" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-16636" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-16638" href="../Substitution/#plfa_plfa-part2-Substitution-16585" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-16640" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-16642" href="../Substitution/#plfa_plfa-part2-Substitution-16591" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-16644" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-16646" href="../Substitution/#plfa_plfa-part2-Substitution-16588" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-16647" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-16649" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-16651" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-16656" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-16660" href="../Substitution/#plfa_plfa-part2-Substitution-16634" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-16662" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-16664" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-16668" href="../Substitution/#plfa_plfa-part2-Substitution-16634" class="Bound">x</a>
        <a id="plfa_plfa-part2-Substitution-16678" href="../Substitution/#plfa_plfa-part2-Substitution-16625" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-16684" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-Substitution-16686" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-16688" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
        <a id="plfa_plfa-part2-Substitution-16701" href="../Substitution/#plfa_plfa-part2-Substitution-16625" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-16707" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-16708" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-16710" href="../Substitution/#plfa_plfa-part2-Substitution-16710" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-16711" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-16713" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-16715" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><p>The proof of <code>⟪ ids ⟫ M ≡ M</code> now follows easily by induction on <code>M</code>, using <code>exts-ids</code> in the case for <code>M ≡ ƛ N</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-sub-id"></a><a id="plfa_plfa-part2-Substitution-16847" href="../Substitution/#plfa_plfa-part2-Substitution-16847" class="Function">sub-id</a> <a id="plfa_plfa-part2-Substitution-16854" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-16856" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-16858" href="../Substitution/#plfa_plfa-part2-Substitution-16858" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-16859" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-16861" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-16862" href="../Substitution/#plfa_plfa-part2-Substitution-16862" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-16863" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-16865" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-16866" href="../Substitution/#plfa_plfa-part2-Substitution-16866" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-16868" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-16870" href="../Substitution/#plfa_plfa-part2-Substitution-16858" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-16872" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-16874" href="../Substitution/#plfa_plfa-part2-Substitution-16862" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-16875" class="Symbol">}</a>
         <a id="plfa_plfa-part2-Substitution-16886" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-16888" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-16890" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-16894" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-16896" href="../Substitution/#plfa_plfa-part2-Substitution-16866" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-16898" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-16900" href="../Substitution/#plfa_plfa-part2-Substitution-16866" class="Bound">M</a>
<a id="plfa_plfa-part2-Substitution-16902" href="../Substitution/#plfa_plfa-part2-Substitution-16847" class="Function">sub-id</a> <a id="plfa_plfa-part2-Substitution-16909" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-16910" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-16912" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-16914" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-16916" href="../Substitution/#plfa_plfa-part2-Substitution-16916" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-16917" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-16919" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-16921" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part2-Substitution-16926" href="../Substitution/#plfa_plfa-part2-Substitution-16847" class="Function">sub-id</a> <a id="plfa_plfa-part2-Substitution-16933" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-16934" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-16936" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-16938" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-16940" href="../Substitution/#plfa_plfa-part2-Substitution-16940" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-16941" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-16943" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-16948" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
     <a id="plfa_plfa-part2-Substitution-16959" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-16961" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-16965" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-16967" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-16968" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-16970" href="../Substitution/#plfa_plfa-part2-Substitution-16940" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-16971" class="Symbol">)</a>
   <a id="plfa_plfa-part2-Substitution-16976" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
     <a id="plfa_plfa-part2-Substitution-16985" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-16987" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-16989" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-16994" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-16998" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-17000" href="../Substitution/#plfa_plfa-part2-Substitution-16940" class="Bound">N</a>
   <a id="plfa_plfa-part2-Substitution-17005" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-17008" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-17013" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ_</a> <a id="plfa_plfa-part2-Substitution-17016" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-17017" href="../Substitution/#plfa_plfa-part2-Substitution-10981" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-17025" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17026" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-17028" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-17030" href="../Substitution/#plfa_plfa-part2-Substitution-16940" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-17031" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-17033" href="../Substitution/#plfa_plfa-part2-Substitution-16516" class="Function">exts-ids</a> <a id="plfa_plfa-part2-Substitution-17042" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Substitution-17046" class="Symbol">)</a>  <a id="plfa_plfa-part2-Substitution-17049" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
     <a id="plfa_plfa-part2-Substitution-17056" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-17058" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-17060" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-17064" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-17066" href="../Substitution/#plfa_plfa-part2-Substitution-16940" class="Bound">N</a>
   <a id="plfa_plfa-part2-Substitution-17071" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-17074" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-17079" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ_</a> <a id="plfa_plfa-part2-Substitution-17082" href="../Substitution/#plfa_plfa-part2-Substitution-16847" class="Function">sub-id</a> <a id="plfa_plfa-part2-Substitution-17089" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
     <a id="plfa_plfa-part2-Substitution-17096" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-17098" href="../Substitution/#plfa_plfa-part2-Substitution-16940" class="Bound">N</a>
   <a id="plfa_plfa-part2-Substitution-17103" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
<a id="plfa_plfa-part2-Substitution-17105" href="../Substitution/#plfa_plfa-part2-Substitution-16847" class="Function">sub-id</a> <a id="plfa_plfa-part2-Substitution-17112" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17113" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-17115" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-17117" href="../Substitution/#plfa_plfa-part2-Substitution-17117" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-17119" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Substitution-17121" href="../Substitution/#plfa_plfa-part2-Substitution-17121" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-17122" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-17124" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-17126" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1376" class="Function">cong₂</a> <a id="plfa_plfa-part2-Substitution-17132" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">_·_</a> <a id="plfa_plfa-part2-Substitution-17136" href="../Substitution/#plfa_plfa-part2-Substitution-16847" class="Function">sub-id</a> <a id="plfa_plfa-part2-Substitution-17143" href="../Substitution/#plfa_plfa-part2-Substitution-16847" class="Function">sub-id</a>
</pre><p>The <code>rename-id</code> equation is a corollary is <code>sub-id</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-rename-id"></a><a id="plfa_plfa-part2-Substitution-17217" href="../Substitution/#plfa_plfa-part2-Substitution-17217" class="Function">rename-id</a> <a id="plfa_plfa-part2-Substitution-17227" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-17229" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-17231" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17232" href="../Substitution/#plfa_plfa-part2-Substitution-17232" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-17233" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-17235" href="../Substitution/#plfa_plfa-part2-Substitution-17235" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-17236" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-17238" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17239" href="../Substitution/#plfa_plfa-part2-Substitution-17239" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-17241" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-17243" href="../Substitution/#plfa_plfa-part2-Substitution-17232" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-17245" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-17247" href="../Substitution/#plfa_plfa-part2-Substitution-17235" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-17248" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-17252" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-17254" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-17261" class="Symbol">(λ</a> <a id="plfa_plfa-part2-Substitution-17264" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17265" href="../Substitution/#plfa_plfa-part2-Substitution-17265" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-17266" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-17268" href="../Substitution/#plfa_plfa-part2-Substitution-17268" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-17270" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-17272" href="../Substitution/#plfa_plfa-part2-Substitution-17268" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-17273" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-17275" href="../Substitution/#plfa_plfa-part2-Substitution-17239" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-17277" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-17279" href="../Substitution/#plfa_plfa-part2-Substitution-17239" class="Bound">M</a>
<a id="plfa_plfa-part2-Substitution-17281" href="../Substitution/#plfa_plfa-part2-Substitution-17217" class="Function">rename-id</a> <a id="plfa_plfa-part2-Substitution-17291" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17292" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-17294" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-17296" href="../Substitution/#plfa_plfa-part2-Substitution-17296" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-17297" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-17299" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-17304" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
     <a id="plfa_plfa-part2-Substitution-17315" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-17322" class="Symbol">(λ</a> <a id="plfa_plfa-part2-Substitution-17325" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17326" href="../Substitution/#plfa_plfa-part2-Substitution-17326" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-17327" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-17329" href="../Substitution/#plfa_plfa-part2-Substitution-17329" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-17331" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-17333" href="../Substitution/#plfa_plfa-part2-Substitution-17329" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-17334" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-17336" href="../Substitution/#plfa_plfa-part2-Substitution-17296" class="Bound">M</a>
   <a id="plfa_plfa-part2-Substitution-17341" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-17344" href="../Substitution/#plfa_plfa-part2-Substitution-13483" class="Function">rename-subst-ren</a>  <a id="plfa_plfa-part2-Substitution-17362" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
     <a id="plfa_plfa-part2-Substitution-17369" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-17371" href="../Substitution/#plfa_plfa-part2-Substitution-6492" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-17375" class="Symbol">(λ</a> <a id="plfa_plfa-part2-Substitution-17378" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17379" href="../Substitution/#plfa_plfa-part2-Substitution-17379" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-17380" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-17382" href="../Substitution/#plfa_plfa-part2-Substitution-17382" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-17384" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-17386" href="../Substitution/#plfa_plfa-part2-Substitution-17382" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-17387" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-17389" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-17391" href="../Substitution/#plfa_plfa-part2-Substitution-17296" class="Bound">M</a>
   <a id="plfa_plfa-part2-Substitution-17396" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
     <a id="plfa_plfa-part2-Substitution-17405" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-17407" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-17411" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-17413" href="../Substitution/#plfa_plfa-part2-Substitution-17296" class="Bound">M</a>
   <a id="plfa_plfa-part2-Substitution-17418" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-17421" href="../Substitution/#plfa_plfa-part2-Substitution-16847" class="Function">sub-id</a>  <a id="plfa_plfa-part2-Substitution-17429" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
     <a id="plfa_plfa-part2-Substitution-17436" href="../Substitution/#plfa_plfa-part2-Substitution-17296" class="Bound">M</a>
   <a id="plfa_plfa-part2-Substitution-17441" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
</pre><h2 id="proof-of-sub-idr">Proof of sub-idR</h2><p>The proof of <code>sub-idR</code> follows directly from <code>sub-id</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-sub-idR"></a><a id="plfa_plfa-part2-Substitution-17533" href="../Substitution/#plfa_plfa-part2-Substitution-17533" class="Function">sub-idR</a> <a id="plfa_plfa-part2-Substitution-17541" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-17543" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-17545" href="../Substitution/#plfa_plfa-part2-Substitution-17545" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-17547" href="../Substitution/#plfa_plfa-part2-Substitution-17547" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-17548" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-17550" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17551" href="../Substitution/#plfa_plfa-part2-Substitution-17551" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-17553" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-17555" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-17561" href="../Substitution/#plfa_plfa-part2-Substitution-17545" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-17563" href="../Substitution/#plfa_plfa-part2-Substitution-17547" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-17564" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-17566" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17567" href="../Substitution/#plfa_plfa-part2-Substitution-17567" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-17568" class="Symbol">}</a>
       <a id="plfa_plfa-part2-Substitution-17577" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-17579" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-17580" href="../Substitution/#plfa_plfa-part2-Substitution-17551" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-17582" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-17584" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-17587" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-17589" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-17591" href="../Substitution/#plfa_plfa-part2-Substitution-17551" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-17593" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17594" href="../Substitution/#plfa_plfa-part2-Substitution-17567" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-17595" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-17597" href="../Substitution/#plfa_plfa-part2-Substitution-17533" class="Function">sub-idR</a> <a id="plfa_plfa-part2-Substitution-17605" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17606" href="../Substitution/#plfa_plfa-part2-Substitution-17606" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-17607" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-17609" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-17611" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-17613" href="../Substitution/#plfa_plfa-part2-Substitution-17613" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-17614" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-17616" href="../Substitution/#plfa_plfa-part2-Substitution-17616" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-17617" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-17619" class="Symbol">=</a>
          <a id="plfa_plfa-part2-Substitution-17631" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
            <a id="plfa_plfa-part2-Substitution-17649" href="../Substitution/#plfa_plfa-part2-Substitution-17613" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-17651" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-17653" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a>
          <a id="plfa_plfa-part2-Substitution-17667" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
            <a id="plfa_plfa-part2-Substitution-17683" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-17685" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-17689" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-17691" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-17693" href="../Substitution/#plfa_plfa-part2-Substitution-17613" class="Bound">σ</a>
          <a id="plfa_plfa-part2-Substitution-17705" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-17708" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-17723" class="Symbol">(λ</a> <a id="plfa_plfa-part2-Substitution-17726" href="../Substitution/#plfa_plfa-part2-Substitution-17726" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-17728" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-17730" href="../Substitution/#plfa_plfa-part2-Substitution-16847" class="Function">sub-id</a><a id="plfa_plfa-part2-Substitution-17736" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-17738" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
            <a id="plfa_plfa-part2-Substitution-17752" href="../Substitution/#plfa_plfa-part2-Substitution-17613" class="Bound">σ</a>
          <a id="plfa_plfa-part2-Substitution-17764" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
</pre><h2 id="proof-of-sub-sub">Proof of sub-sub</h2><p>The <code>sub-sub</code> equation states that sequenced substitutions <code>σ ⨟ τ</code> are equivalent to first applying <code>σ</code> then applying <code>τ</code>.</p><pre><code>⟪ τ ⟫ ⟪ σ ⟫ M  ≡ ⟪ σ ⨟ τ ⟫ M</code></pre><p>The proof requires several lemmas. First, we need to prove the specialization for renaming.</p><pre><code>rename ρ (rename ρ′ M) ≡ rename (ρ ∘ ρ′) M</code></pre><p>This in turn requires the following lemma about <code>ext</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-compose-ext"></a><a id="plfa_plfa-part2-Substitution-18156" href="../Substitution/#plfa_plfa-part2-Substitution-18156" class="Function">compose-ext</a> <a id="plfa_plfa-part2-Substitution-18168" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18170" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-18172" href="../Substitution/#plfa_plfa-part2-Substitution-18172" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-18174" href="../Substitution/#plfa_plfa-part2-Substitution-18174" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-18176" href="../Substitution/#plfa_plfa-part2-Substitution-18176" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-18177" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18179" href="../Substitution/#plfa_plfa-part2-Substitution-18179" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-18181" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18183" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-18190" href="../Substitution/#plfa_plfa-part2-Substitution-18174" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-18192" href="../Substitution/#plfa_plfa-part2-Substitution-18176" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-18193" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-18195" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18196" href="../Substitution/#plfa_plfa-part2-Substitution-18196" class="Bound">ρ′</a> <a id="plfa_plfa-part2-Substitution-18199" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18201" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-18208" href="../Substitution/#plfa_plfa-part2-Substitution-18172" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-18210" href="../Substitution/#plfa_plfa-part2-Substitution-18174" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-18211" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-18213" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18214" href="../Substitution/#plfa_plfa-part2-Substitution-18214" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-18216" href="../Substitution/#plfa_plfa-part2-Substitution-18216" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-18217" class="Symbol">}</a>
            <a id="plfa_plfa-part2-Substitution-18231" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-18233" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-18235" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-18239" href="../Substitution/#plfa_plfa-part2-Substitution-18179" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-18240" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-18242" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-18244" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-18245" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-18249" href="../Substitution/#plfa_plfa-part2-Substitution-18196" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-18251" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-18254" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-18256" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-18260" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-18261" href="../Substitution/#plfa_plfa-part2-Substitution-18179" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-18263" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-18265" href="../Substitution/#plfa_plfa-part2-Substitution-18196" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-18267" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-18269" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18270" href="../Substitution/#plfa_plfa-part2-Substitution-18216" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-18271" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-18273" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18274" href="../Substitution/#plfa_plfa-part2-Substitution-18214" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-18275" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-18277" href="../Substitution/#plfa_plfa-part2-Substitution-18156" class="Function">compose-ext</a> <a id="plfa_plfa-part2-Substitution-18289" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-18291" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-18306" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-18308" href="../Substitution/#plfa_plfa-part2-Substitution-18308" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-18310" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-18312" href="../Substitution/#plfa_plfa-part2-Substitution-18336" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-18318" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18319" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-18321" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-18323" href="../Substitution/#plfa_plfa-part2-Substitution-18308" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-18324" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-18328" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-18336" href="../Substitution/#plfa_plfa-part2-Substitution-18336" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-18342" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18344" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-18346" href="../Substitution/#plfa_plfa-part2-Substitution-18346" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-18348" href="../Substitution/#plfa_plfa-part2-Substitution-18348" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-18350" href="../Substitution/#plfa_plfa-part2-Substitution-18350" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-18351" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18353" href="../Substitution/#plfa_plfa-part2-Substitution-18353" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-18355" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18357" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-18364" href="../Substitution/#plfa_plfa-part2-Substitution-18348" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-18366" href="../Substitution/#plfa_plfa-part2-Substitution-18350" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-18367" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-18369" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18370" href="../Substitution/#plfa_plfa-part2-Substitution-18370" class="Bound">ρ′</a> <a id="plfa_plfa-part2-Substitution-18373" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18375" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-18382" href="../Substitution/#plfa_plfa-part2-Substitution-18346" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-18384" href="../Substitution/#plfa_plfa-part2-Substitution-18348" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-18385" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-18387" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18388" href="../Substitution/#plfa_plfa-part2-Substitution-18388" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-18390" href="../Substitution/#plfa_plfa-part2-Substitution-18390" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-18391" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-18393" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18394" href="../Substitution/#plfa_plfa-part2-Substitution-18394" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-18396" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18398" href="../Substitution/#plfa_plfa-part2-Substitution-18346" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-18400" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-18402" href="../Substitution/#plfa_plfa-part2-Substitution-18390" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-18404" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-18406" href="../Substitution/#plfa_plfa-part2-Substitution-18388" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-18407" class="Symbol">}</a>
              <a id="plfa_plfa-part2-Substitution-18423" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-18425" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-18427" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-18431" href="../Substitution/#plfa_plfa-part2-Substitution-18353" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-18432" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-18434" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-18436" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-18437" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-18441" href="../Substitution/#plfa_plfa-part2-Substitution-18370" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-18443" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-18446" href="../Substitution/#plfa_plfa-part2-Substitution-18394" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-18448" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-18450" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-18454" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-18455" href="../Substitution/#plfa_plfa-part2-Substitution-18353" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-18457" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-18459" href="../Substitution/#plfa_plfa-part2-Substitution-18370" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-18461" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-18463" href="../Substitution/#plfa_plfa-part2-Substitution-18394" class="Bound">x</a>
  <a id="plfa_plfa-part2-Substitution-18467" href="../Substitution/#plfa_plfa-part2-Substitution-18336" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-18473" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18474" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-18476" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-18478" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-18479" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-18481" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-18483" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="plfa_plfa-part2-Substitution-18490" href="../Substitution/#plfa_plfa-part2-Substitution-18336" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-18496" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18497" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-18499" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-18501" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-18503" href="../Substitution/#plfa_plfa-part2-Substitution-18503" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-18504" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-18506" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-18508" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><p>To prove that composing renamings is equivalent to applying one after the other using <code>rename</code>, we proceed by induction on the term <code>M</code>, using the <code>compose-ext</code> lemma in the case for <code>M ≡ ƛ N</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-compose-rename"></a><a id="plfa_plfa-part2-Substitution-18721" href="../Substitution/#plfa_plfa-part2-Substitution-18721" class="Function">compose-rename</a> <a id="plfa_plfa-part2-Substitution-18736" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18738" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-18740" href="../Substitution/#plfa_plfa-part2-Substitution-18740" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-18742" href="../Substitution/#plfa_plfa-part2-Substitution-18742" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-18744" href="../Substitution/#plfa_plfa-part2-Substitution-18744" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-18745" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18747" href="../Substitution/#plfa_plfa-part2-Substitution-18747" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-18748" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18750" href="../Substitution/#plfa_plfa-part2-Substitution-18750" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-18752" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18754" href="../Substitution/#plfa_plfa-part2-Substitution-18740" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-18756" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-18758" href="../Substitution/#plfa_plfa-part2-Substitution-18747" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-18759" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18761" href="../Substitution/#plfa_plfa-part2-Substitution-18761" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-18763" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18765" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-18772" href="../Substitution/#plfa_plfa-part2-Substitution-18742" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-18774" href="../Substitution/#plfa_plfa-part2-Substitution-18744" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-18775" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18777" href="../Substitution/#plfa_plfa-part2-Substitution-18777" class="Bound">ρ′</a> <a id="plfa_plfa-part2-Substitution-18780" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18782" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-18789" href="../Substitution/#plfa_plfa-part2-Substitution-18740" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-18791" href="../Substitution/#plfa_plfa-part2-Substitution-18742" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-18792" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-18796" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-18798" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-18805" href="../Substitution/#plfa_plfa-part2-Substitution-18761" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-18807" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-18808" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-18815" href="../Substitution/#plfa_plfa-part2-Substitution-18777" class="Bound">ρ′</a> <a id="plfa_plfa-part2-Substitution-18818" href="../Substitution/#plfa_plfa-part2-Substitution-18750" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-18819" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-18821" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-18823" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-18830" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-18831" href="../Substitution/#plfa_plfa-part2-Substitution-18761" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-18833" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-18835" href="../Substitution/#plfa_plfa-part2-Substitution-18777" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-18837" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-18839" href="../Substitution/#plfa_plfa-part2-Substitution-18750" class="Bound">M</a>
<a id="plfa_plfa-part2-Substitution-18841" href="../Substitution/#plfa_plfa-part2-Substitution-18721" class="Function">compose-rename</a> <a id="plfa_plfa-part2-Substitution-18856" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18857" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-18859" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-18861" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-18863" href="../Substitution/#plfa_plfa-part2-Substitution-18863" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-18864" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-18866" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-18868" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part2-Substitution-18873" href="../Substitution/#plfa_plfa-part2-Substitution-18721" class="Function">compose-rename</a> <a id="plfa_plfa-part2-Substitution-18888" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18889" href="../Substitution/#plfa_plfa-part2-Substitution-18889" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-18890" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18892" href="../Substitution/#plfa_plfa-part2-Substitution-18892" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-18893" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18895" href="../Substitution/#plfa_plfa-part2-Substitution-18895" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-18896" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18898" href="../Substitution/#plfa_plfa-part2-Substitution-18898" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-18899" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18901" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-18903" href="../Substitution/#plfa_plfa-part2-Substitution-18903" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-18904" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18906" href="../Substitution/#plfa_plfa-part2-Substitution-18906" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-18907" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18909" href="../Substitution/#plfa_plfa-part2-Substitution-18909" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-18911" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-18913" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-18915" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-18920" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ_</a> <a id="plfa_plfa-part2-Substitution-18923" href="../Substitution/#plfa_plfa-part2-Substitution-18935" class="Function">G</a>
  <a id="plfa_plfa-part2-Substitution-18927" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-18935" href="../Substitution/#plfa_plfa-part2-Substitution-18935" class="Function">G</a> <a id="plfa_plfa-part2-Substitution-18937" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18939" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-18946" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-18947" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-18951" href="../Substitution/#plfa_plfa-part2-Substitution-18906" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-18952" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-18954" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-18955" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-18962" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-18963" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-18967" href="../Substitution/#plfa_plfa-part2-Substitution-18909" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-18969" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-18971" href="../Substitution/#plfa_plfa-part2-Substitution-18903" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-18972" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-18974" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-18976" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-18983" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-18984" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-18988" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-18989" href="../Substitution/#plfa_plfa-part2-Substitution-18906" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-18991" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-18993" href="../Substitution/#plfa_plfa-part2-Substitution-18909" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-18995" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-18998" href="../Substitution/#plfa_plfa-part2-Substitution-18903" class="Bound">N</a>
  <a id="plfa_plfa-part2-Substitution-19002" href="../Substitution/#plfa_plfa-part2-Substitution-18935" class="Function">G</a> <a id="plfa_plfa-part2-Substitution-19004" class="Symbol">=</a>
      <a id="plfa_plfa-part2-Substitution-19012" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
        <a id="plfa_plfa-part2-Substitution-19026" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-19033" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19034" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-19038" href="../Substitution/#plfa_plfa-part2-Substitution-18906" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-19039" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-19041" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19042" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-19049" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19050" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-19054" href="../Substitution/#plfa_plfa-part2-Substitution-18909" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-19056" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-19058" href="../Substitution/#plfa_plfa-part2-Substitution-18903" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-19059" class="Symbol">)</a>
      <a id="plfa_plfa-part2-Substitution-19067" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-19070" href="../Substitution/#plfa_plfa-part2-Substitution-18721" class="Function">compose-rename</a><a id="plfa_plfa-part2-Substitution-19084" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-19085" class="Argument">ρ</a> <a id="plfa_plfa-part2-Substitution-19087" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-19089" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-19093" href="../Substitution/#plfa_plfa-part2-Substitution-18906" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-19094" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19096" class="Argument">ρ′</a> <a id="plfa_plfa-part2-Substitution-19099" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-19101" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-19105" href="../Substitution/#plfa_plfa-part2-Substitution-18909" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-19107" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-19109" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
        <a id="plfa_plfa-part2-Substitution-19119" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-19126" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-19128" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-19132" href="../Substitution/#plfa_plfa-part2-Substitution-18906" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-19133" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-19135" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-19137" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19138" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-19142" href="../Substitution/#plfa_plfa-part2-Substitution-18909" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-19144" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-19147" href="../Substitution/#plfa_plfa-part2-Substitution-18903" class="Bound">N</a>
      <a id="plfa_plfa-part2-Substitution-19155" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-19158" href="../Substitution/#plfa_plfa-part2-Substitution-10221" class="Function">cong-rename</a> <a id="plfa_plfa-part2-Substitution-19170" href="../Substitution/#plfa_plfa-part2-Substitution-18156" class="Function">compose-ext</a> <a id="plfa_plfa-part2-Substitution-19182" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
        <a id="plfa_plfa-part2-Substitution-19192" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-19199" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19200" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-19204" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19205" href="../Substitution/#plfa_plfa-part2-Substitution-18906" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-19207" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-19209" href="../Substitution/#plfa_plfa-part2-Substitution-18909" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-19211" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-19214" href="../Substitution/#plfa_plfa-part2-Substitution-18903" class="Bound">N</a>
      <a id="plfa_plfa-part2-Substitution-19222" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
<a id="plfa_plfa-part2-Substitution-19224" href="../Substitution/#plfa_plfa-part2-Substitution-18721" class="Function">compose-rename</a> <a id="plfa_plfa-part2-Substitution-19239" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-19240" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-19242" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-19244" href="../Substitution/#plfa_plfa-part2-Substitution-19244" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-19246" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Substitution-19248" href="../Substitution/#plfa_plfa-part2-Substitution-19248" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-19249" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-19251" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-19253" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1376" class="Function">cong₂</a> <a id="plfa_plfa-part2-Substitution-19259" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">_·_</a> <a id="plfa_plfa-part2-Substitution-19263" href="../Substitution/#plfa_plfa-part2-Substitution-18721" class="Function">compose-rename</a> <a id="plfa_plfa-part2-Substitution-19278" href="../Substitution/#plfa_plfa-part2-Substitution-18721" class="Function">compose-rename</a>
</pre><p>The next lemma states that if a renaming and substitution commute on variables, then they also commute on terms. We explain the proof in detail below.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-commute-subst-rename"></a><a id="plfa_plfa-part2-Substitution-19458" href="../Substitution/#plfa_plfa-part2-Substitution-19458" class="Function">commute-subst-rename</a> <a id="plfa_plfa-part2-Substitution-19479" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-19481" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-19483" href="../Substitution/#plfa_plfa-part2-Substitution-19483" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-19485" href="../Substitution/#plfa_plfa-part2-Substitution-19485" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-19486" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19488" href="../Substitution/#plfa_plfa-part2-Substitution-19488" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-19490" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-19492" href="../Substitution/#plfa_plfa-part2-Substitution-19483" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-19494" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-19496" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-19497" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19499" href="../Substitution/#plfa_plfa-part2-Substitution-19499" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-19501" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-19503" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-19509" href="../Substitution/#plfa_plfa-part2-Substitution-19483" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-19511" href="../Substitution/#plfa_plfa-part2-Substitution-19485" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-19512" class="Symbol">}</a>
                        <a id="plfa_plfa-part2-Substitution-19538" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-19539" href="../Substitution/#plfa_plfa-part2-Substitution-19539" class="Bound">ρ₁</a> <a id="plfa_plfa-part2-Substitution-19542" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-19544" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-19551" href="../Substitution/#plfa_plfa-part2-Substitution-19483" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-19553" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19554" href="../Substitution/#plfa_plfa-part2-Substitution-19483" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-19556" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-19558" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-19559" class="Symbol">)}{</a><a id="plfa_plfa-part2-Substitution-19562" href="../Substitution/#plfa_plfa-part2-Substitution-19562" class="Bound">ρ₂</a> <a id="plfa_plfa-part2-Substitution-19565" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-19567" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-19574" href="../Substitution/#plfa_plfa-part2-Substitution-19485" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-19576" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19577" href="../Substitution/#plfa_plfa-part2-Substitution-19485" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-19579" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-19581" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-19582" class="Symbol">)}</a>
                     <a id="plfa_plfa-part2-Substitution-19606" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-19608" class="Symbol">(∀{</a><a id="plfa_plfa-part2-Substitution-19611" href="../Substitution/#plfa_plfa-part2-Substitution-19611" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-19613" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-19615" href="../Substitution/#plfa_plfa-part2-Substitution-19483" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-19617" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-19619" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-19620" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-19622" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-19624" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-19629" href="../Substitution/#plfa_plfa-part2-Substitution-19499" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-19631" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19632" href="../Substitution/#plfa_plfa-part2-Substitution-19539" class="Bound">ρ₁</a> <a id="plfa_plfa-part2-Substitution-19635" href="../Substitution/#plfa_plfa-part2-Substitution-19611" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-19636" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-19638" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-19640" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-19647" href="../Substitution/#plfa_plfa-part2-Substitution-19562" class="Bound">ρ₂</a> <a id="plfa_plfa-part2-Substitution-19650" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19651" href="../Substitution/#plfa_plfa-part2-Substitution-19499" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-19653" href="../Substitution/#plfa_plfa-part2-Substitution-19611" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-19654" class="Symbol">))</a>
                     <a id="plfa_plfa-part2-Substitution-19678" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-19680" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-19686" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19687" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-19692" href="../Substitution/#plfa_plfa-part2-Substitution-19499" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-19693" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-19695" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19696" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-19703" href="../Substitution/#plfa_plfa-part2-Substitution-19539" class="Bound">ρ₁</a> <a id="plfa_plfa-part2-Substitution-19706" href="../Substitution/#plfa_plfa-part2-Substitution-19488" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-19707" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-19709" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-19711" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-19718" href="../Substitution/#plfa_plfa-part2-Substitution-19562" class="Bound">ρ₂</a> <a id="plfa_plfa-part2-Substitution-19721" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19722" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-19728" href="../Substitution/#plfa_plfa-part2-Substitution-19499" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-19730" href="../Substitution/#plfa_plfa-part2-Substitution-19488" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-19731" class="Symbol">)</a>
<a id="plfa_plfa-part2-Substitution-19733" href="../Substitution/#plfa_plfa-part2-Substitution-19458" class="Function">commute-subst-rename</a> <a id="plfa_plfa-part2-Substitution-19754" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-19755" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-19757" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-19759" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-19761" href="../Substitution/#plfa_plfa-part2-Substitution-19761" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-19762" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-19764" href="../Substitution/#plfa_plfa-part2-Substitution-19764" class="Bound">H</a> <a id="plfa_plfa-part2-Substitution-19766" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-19768" href="../Substitution/#plfa_plfa-part2-Substitution-19764" class="Bound">H</a>
<a id="plfa_plfa-part2-Substitution-19770" href="../Substitution/#plfa_plfa-part2-Substitution-19458" class="Function">commute-subst-rename</a> <a id="plfa_plfa-part2-Substitution-19791" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-19792" href="../Substitution/#plfa_plfa-part2-Substitution-19792" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-19793" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19795" href="../Substitution/#plfa_plfa-part2-Substitution-19795" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-19796" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19798" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-19800" href="../Substitution/#plfa_plfa-part2-Substitution-19800" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-19801" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19803" href="../Substitution/#plfa_plfa-part2-Substitution-19803" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-19804" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19806" href="../Substitution/#plfa_plfa-part2-Substitution-19806" class="Bound">ρ₁</a><a id="plfa_plfa-part2-Substitution-19808" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19810" href="../Substitution/#plfa_plfa-part2-Substitution-19810" class="Bound">ρ₂</a><a id="plfa_plfa-part2-Substitution-19812" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-19814" href="../Substitution/#plfa_plfa-part2-Substitution-19814" class="Bound">H</a> <a id="plfa_plfa-part2-Substitution-19816" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-19821" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-19826" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ_</a> <a id="plfa_plfa-part2-Substitution-19829" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19830" href="../Substitution/#plfa_plfa-part2-Substitution-19458" class="Function">commute-subst-rename</a><a id="plfa_plfa-part2-Substitution-19850" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-19851" href="../Substitution/#plfa_plfa-part2-Substitution-19792" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-19853" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-19855" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-19856" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19858" href="../Substitution/#plfa_plfa-part2-Substitution-19795" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-19860" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-19862" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-19863" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19865" href="../Substitution/#plfa_plfa-part2-Substitution-19800" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-19866" class="Symbol">}</a>
               <a id="plfa_plfa-part2-Substitution-19883" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-19884" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-19889" href="../Substitution/#plfa_plfa-part2-Substitution-19803" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-19890" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19892" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-19896" href="../Substitution/#plfa_plfa-part2-Substitution-19806" class="Bound">ρ₁</a><a id="plfa_plfa-part2-Substitution-19898" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19900" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-19904" href="../Substitution/#plfa_plfa-part2-Substitution-19810" class="Bound">ρ₂</a><a id="plfa_plfa-part2-Substitution-19906" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-19908" class="Symbol">(λ</a> <a id="plfa_plfa-part2-Substitution-19911" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-19912" href="../Substitution/#plfa_plfa-part2-Substitution-19912" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-19913" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-19915" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-19917" href="../Substitution/#plfa_plfa-part2-Substitution-19938" class="Function">H′</a> <a id="plfa_plfa-part2-Substitution-19920" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-19921" href="../Substitution/#plfa_plfa-part2-Substitution-19912" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-19922" class="Symbol">}))</a>
   <a id="plfa_plfa-part2-Substitution-19929" class="Keyword">where</a>
   <a id="plfa_plfa-part2-Substitution-19938" href="../Substitution/#plfa_plfa-part2-Substitution-19938" class="Function">H′</a> <a id="plfa_plfa-part2-Substitution-19941" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-19943" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-19944" href="../Substitution/#plfa_plfa-part2-Substitution-19944" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-19946" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-19948" href="../Substitution/#plfa_plfa-part2-Substitution-19792" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-19950" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-19952" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-Substitution-19954" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-19956" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-19957" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-19959" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-19961" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-19966" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19967" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-19972" href="../Substitution/#plfa_plfa-part2-Substitution-19803" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-19973" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-19975" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19976" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-19980" href="../Substitution/#plfa_plfa-part2-Substitution-19806" class="Bound">ρ₁</a> <a id="plfa_plfa-part2-Substitution-19983" href="../Substitution/#plfa_plfa-part2-Substitution-19944" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-19984" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-19986" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-19988" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-19995" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19996" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-20000" href="../Substitution/#plfa_plfa-part2-Substitution-19810" class="Bound">ρ₂</a><a id="plfa_plfa-part2-Substitution-20002" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-20004" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20005" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-20010" href="../Substitution/#plfa_plfa-part2-Substitution-19803" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-20012" href="../Substitution/#plfa_plfa-part2-Substitution-19944" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-20013" class="Symbol">)</a>
   <a id="plfa_plfa-part2-Substitution-20018" href="../Substitution/#plfa_plfa-part2-Substitution-19938" class="Function">H′</a> <a id="plfa_plfa-part2-Substitution-20021" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-20022" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-20023" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-20025" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-20027" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
   <a id="plfa_plfa-part2-Substitution-20035" href="../Substitution/#plfa_plfa-part2-Substitution-19938" class="Function">H′</a> <a id="plfa_plfa-part2-Substitution-20038" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-20039" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-20041" href="../Substitution/#plfa_plfa-part2-Substitution-20041" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-20042" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-20044" class="Symbol">=</a>
     <a id="plfa_plfa-part2-Substitution-20051" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
       <a id="plfa_plfa-part2-Substitution-20064" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-20069" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20070" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-20075" href="../Substitution/#plfa_plfa-part2-Substitution-19803" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-20076" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-20078" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20079" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-20083" href="../Substitution/#plfa_plfa-part2-Substitution-19806" class="Bound">ρ₁</a> <a id="plfa_plfa-part2-Substitution-20086" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20087" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-20089" href="../Substitution/#plfa_plfa-part2-Substitution-20041" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-20090" class="Symbol">))</a>
     <a id="plfa_plfa-part2-Substitution-20098" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
       <a id="plfa_plfa-part2-Substitution-20109" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-20116" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Substitution-20119" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20120" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-20125" href="../Substitution/#plfa_plfa-part2-Substitution-19803" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-20127" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20128" href="../Substitution/#plfa_plfa-part2-Substitution-19806" class="Bound">ρ₁</a> <a id="plfa_plfa-part2-Substitution-20131" href="../Substitution/#plfa_plfa-part2-Substitution-20041" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-20132" class="Symbol">))</a>
     <a id="plfa_plfa-part2-Substitution-20140" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-20143" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-20148" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20149" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-20156" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part2-Substitution-20158" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-20160" href="../Substitution/#plfa_plfa-part2-Substitution-19814" class="Bound">H</a> <a id="plfa_plfa-part2-Substitution-20162" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-20171" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-20178" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Substitution-20181" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20182" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-20189" href="../Substitution/#plfa_plfa-part2-Substitution-19810" class="Bound">ρ₂</a> <a id="plfa_plfa-part2-Substitution-20192" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20193" href="../Substitution/#plfa_plfa-part2-Substitution-19803" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-20195" href="../Substitution/#plfa_plfa-part2-Substitution-20041" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-20196" class="Symbol">))</a>
     <a id="plfa_plfa-part2-Substitution-20204" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-20207" href="../Substitution/#plfa_plfa-part2-Substitution-18721" class="Function">compose-rename</a> <a id="plfa_plfa-part2-Substitution-20222" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-20231" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-20238" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20239" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Substitution-20242" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-20244" href="../Substitution/#plfa_plfa-part2-Substitution-19810" class="Bound">ρ₂</a><a id="plfa_plfa-part2-Substitution-20246" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-20248" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20249" href="../Substitution/#plfa_plfa-part2-Substitution-19803" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-20251" href="../Substitution/#plfa_plfa-part2-Substitution-20041" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-20252" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-20259" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
       <a id="plfa_plfa-part2-Substitution-20270" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-20277" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-20279" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-20283" href="../Substitution/#plfa_plfa-part2-Substitution-19810" class="Bound">ρ₂</a><a id="plfa_plfa-part2-Substitution-20285" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-20287" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-20289" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part2-Substitution-20291" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-20293" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20294" href="../Substitution/#plfa_plfa-part2-Substitution-19803" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-20296" href="../Substitution/#plfa_plfa-part2-Substitution-20041" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-20297" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-20304" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-20307" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1693" class="Function">sym</a> <a id="plfa_plfa-part2-Substitution-20311" href="../Substitution/#plfa_plfa-part2-Substitution-18721" class="Function">compose-rename</a> <a id="plfa_plfa-part2-Substitution-20326" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-20335" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-20342" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20343" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-20347" href="../Substitution/#plfa_plfa-part2-Substitution-19810" class="Bound">ρ₂</a><a id="plfa_plfa-part2-Substitution-20349" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-20351" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20352" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-20359" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Substitution-20362" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20363" href="../Substitution/#plfa_plfa-part2-Substitution-19803" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-20365" href="../Substitution/#plfa_plfa-part2-Substitution-20041" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-20366" class="Symbol">))</a>
     <a id="plfa_plfa-part2-Substitution-20374" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
       <a id="plfa_plfa-part2-Substitution-20385" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-20392" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20393" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-20397" href="../Substitution/#plfa_plfa-part2-Substitution-19810" class="Bound">ρ₂</a><a id="plfa_plfa-part2-Substitution-20399" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-20401" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20402" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-20407" href="../Substitution/#plfa_plfa-part2-Substitution-19803" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-20409" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20410" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-20412" href="../Substitution/#plfa_plfa-part2-Substitution-20041" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-20413" class="Symbol">))</a>
     <a id="plfa_plfa-part2-Substitution-20421" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
<a id="plfa_plfa-part2-Substitution-20423" href="../Substitution/#plfa_plfa-part2-Substitution-19458" class="Function">commute-subst-rename</a> <a id="plfa_plfa-part2-Substitution-20444" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-20445" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-20447" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-20449" href="../Substitution/#plfa_plfa-part2-Substitution-20449" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-20451" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Substitution-20453" href="../Substitution/#plfa_plfa-part2-Substitution-20453" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-20454" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-20456" href="../Substitution/#plfa_plfa-part2-Substitution-20456" class="Bound">H</a> <a id="plfa_plfa-part2-Substitution-20458" class="Symbol">=</a>
  <a id="plfa_plfa-part2-Substitution-20462" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1376" class="Function">cong₂</a> <a id="plfa_plfa-part2-Substitution-20468" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">_·_</a> <a id="plfa_plfa-part2-Substitution-20472" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20473" href="../Substitution/#plfa_plfa-part2-Substitution-19458" class="Function">commute-subst-rename</a><a id="plfa_plfa-part2-Substitution-20493" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-20494" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-20496" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-20498" href="../Substitution/#plfa_plfa-part2-Substitution-20449" class="Bound">L</a><a id="plfa_plfa-part2-Substitution-20499" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-20501" href="../Substitution/#plfa_plfa-part2-Substitution-20456" class="Bound">H</a><a id="plfa_plfa-part2-Substitution-20502" class="Symbol">)</a>
            <a id="plfa_plfa-part2-Substitution-20516" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20517" href="../Substitution/#plfa_plfa-part2-Substitution-19458" class="Function">commute-subst-rename</a><a id="plfa_plfa-part2-Substitution-20537" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-20538" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-20540" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-20542" href="../Substitution/#plfa_plfa-part2-Substitution-20453" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-20543" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-20545" href="../Substitution/#plfa_plfa-part2-Substitution-20456" class="Bound">H</a><a id="plfa_plfa-part2-Substitution-20546" class="Symbol">)</a>
</pre><p>The proof is by induction on the term <code>M</code>.</p><ul><li><p>If <code>M</code> is a variable, then we use the premise to conclude.</p></li><li><p>If <code>M ≡ ƛ N</code>, we conclude using the induction hypothesis for <code>N</code>. However, to use the induction hypothesis, we must show that</p><pre><code>  exts (exts σ) (ext ρ₁ x) ≡ rename (ext ρ₂) (exts σ x)</code></pre><p>We prove this equation by cases on x.</p><ul><li><p>If <code>x = Z</code>, the two sides are equal by definition.</p></li><li><p>If <code>x = S y</code>, we obtain the goal by the following equational reasoning.</p><pre><code>  exts (exts σ) (ext ρ₁ (S y))
≡ rename S_ (exts σ (ρ₁ y))
≡ rename S_ (rename ρ₂ (σ y))        (by the premise)
≡ rename (S_ ∘ ρ₂) (σ y)             (by compose-rename)
≡ rename ((ext ρ₂) ∘ S_) (σ y)
≡ rename (ext ρ₂) (rename S_ (σ y))  (by compose-rename)
≡ rename (ext ρ₂) (exts σ (S y))</code></pre></li></ul></li><li><p>If <code>M</code> is an application, we obtain the goal using the induction hypothesis for each subterm.</p></li></ul><p>The last lemma needed to prove <code>sub-sub</code> states that the <code>exts</code> function distributes with sequencing. It is a corollary of <code>commute-subst-rename</code> as described below. (It would have been nicer to prove this directly by equational reasoning in the σ algebra, but that would require the <code>sub-assoc</code> equation, whose proof depends on <code>sub-sub</code>, which in turn depends on this lemma.)</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-exts-seq"></a><a id="plfa_plfa-part2-Substitution-21883" href="../Substitution/#plfa_plfa-part2-Substitution-21883" class="Function">exts-seq</a> <a id="plfa_plfa-part2-Substitution-21892" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-21894" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-21896" href="../Substitution/#plfa_plfa-part2-Substitution-21896" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-21898" href="../Substitution/#plfa_plfa-part2-Substitution-21898" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-21900" href="../Substitution/#plfa_plfa-part2-Substitution-21900" class="Bound">Δ′</a><a id="plfa_plfa-part2-Substitution-21902" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-21904" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-21905" href="../Substitution/#plfa_plfa-part2-Substitution-21905" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-21908" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-21910" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-21916" href="../Substitution/#plfa_plfa-part2-Substitution-21896" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-21918" href="../Substitution/#plfa_plfa-part2-Substitution-21898" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-21919" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-21921" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-21922" href="../Substitution/#plfa_plfa-part2-Substitution-21922" class="Bound">σ₂</a> <a id="plfa_plfa-part2-Substitution-21925" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-21927" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-21933" href="../Substitution/#plfa_plfa-part2-Substitution-21898" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-21935" href="../Substitution/#plfa_plfa-part2-Substitution-21900" class="Bound">Δ′</a><a id="plfa_plfa-part2-Substitution-21937" class="Symbol">}</a>
         <a id="plfa_plfa-part2-Substitution-21948" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-21950" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-21952" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-21953" href="../Substitution/#plfa_plfa-part2-Substitution-21953" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-21954" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-21956" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-21958" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-21959" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-21964" href="../Substitution/#plfa_plfa-part2-Substitution-21905" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-21967" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-21969" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-21974" href="../Substitution/#plfa_plfa-part2-Substitution-21922" class="Bound">σ₂</a><a id="plfa_plfa-part2-Substitution-21976" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-21978" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-21979" href="../Substitution/#plfa_plfa-part2-Substitution-21953" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-21980" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-21982" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-21984" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-21989" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-21990" href="../Substitution/#plfa_plfa-part2-Substitution-21905" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-21993" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-21995" href="../Substitution/#plfa_plfa-part2-Substitution-21922" class="Bound">σ₂</a><a id="plfa_plfa-part2-Substitution-21997" class="Symbol">)</a>
<a id="plfa_plfa-part2-Substitution-21999" href="../Substitution/#plfa_plfa-part2-Substitution-21883" class="Function">exts-seq</a> <a id="plfa_plfa-part2-Substitution-22008" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22010" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-22025" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-22027" href="../Substitution/#plfa_plfa-part2-Substitution-22027" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-22029" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-22031" href="../Substitution/#plfa_plfa-part2-Substitution-22055" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-22037" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-22038" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-22040" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22042" href="../Substitution/#plfa_plfa-part2-Substitution-22027" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-22043" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-22047" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-22055" href="../Substitution/#plfa_plfa-part2-Substitution-22055" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-22061" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-22063" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-22065" href="../Substitution/#plfa_plfa-part2-Substitution-22065" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-22067" href="../Substitution/#plfa_plfa-part2-Substitution-22067" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-22069" href="../Substitution/#plfa_plfa-part2-Substitution-22069" class="Bound">Δ′</a><a id="plfa_plfa-part2-Substitution-22071" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22073" href="../Substitution/#plfa_plfa-part2-Substitution-22073" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-22074" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22076" href="../Substitution/#plfa_plfa-part2-Substitution-22076" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-22078" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-22080" href="../Substitution/#plfa_plfa-part2-Substitution-22065" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-22082" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-22084" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-Substitution-22086" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-22088" href="../Substitution/#plfa_plfa-part2-Substitution-22073" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-22089" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-22091" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-22092" href="../Substitution/#plfa_plfa-part2-Substitution-22092" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-22095" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-22097" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-22103" href="../Substitution/#plfa_plfa-part2-Substitution-22065" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-22105" href="../Substitution/#plfa_plfa-part2-Substitution-22067" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-22106" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22108" href="../Substitution/#plfa_plfa-part2-Substitution-22108" class="Bound">σ₂</a> <a id="plfa_plfa-part2-Substitution-22111" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-22113" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-22119" href="../Substitution/#plfa_plfa-part2-Substitution-22067" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-22121" href="../Substitution/#plfa_plfa-part2-Substitution-22069" class="Bound">Δ′</a><a id="plfa_plfa-part2-Substitution-22123" class="Symbol">}</a>
     <a id="plfa_plfa-part2-Substitution-22130" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-22132" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-22133" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-22138" href="../Substitution/#plfa_plfa-part2-Substitution-22092" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-22141" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-22143" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-22148" href="../Substitution/#plfa_plfa-part2-Substitution-22108" class="Bound">σ₂</a><a id="plfa_plfa-part2-Substitution-22150" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-22152" href="../Substitution/#plfa_plfa-part2-Substitution-22076" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-22154" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-22156" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-22161" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-22162" href="../Substitution/#plfa_plfa-part2-Substitution-22092" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-22165" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-22167" href="../Substitution/#plfa_plfa-part2-Substitution-22108" class="Bound">σ₂</a><a id="plfa_plfa-part2-Substitution-22169" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-22171" href="../Substitution/#plfa_plfa-part2-Substitution-22076" class="Bound">x</a>
  <a id="plfa_plfa-part2-Substitution-22175" href="../Substitution/#plfa_plfa-part2-Substitution-22055" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-22181" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-22182" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-22184" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22186" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-22187" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-22189" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22191" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="plfa_plfa-part2-Substitution-22198" href="../Substitution/#plfa_plfa-part2-Substitution-22055" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-22204" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-22205" class="Argument">A</a> <a id="plfa_plfa-part2-Substitution-22207" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22209" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-22210" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22212" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-22214" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22216" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-22218" href="../Substitution/#plfa_plfa-part2-Substitution-22218" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-22219" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22221" href="../Substitution/#plfa_plfa-part2-Substitution-22221" class="Bound">σ₁</a><a id="plfa_plfa-part2-Substitution-22223" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22225" href="../Substitution/#plfa_plfa-part2-Substitution-22225" class="Bound">σ₂</a><a id="plfa_plfa-part2-Substitution-22227" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-22229" class="Symbol">=</a>
     <a id="plfa_plfa-part2-Substitution-22236" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
       <a id="plfa_plfa-part2-Substitution-22249" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-22250" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-22255" href="../Substitution/#plfa_plfa-part2-Substitution-22221" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-22258" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-22260" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-22265" href="../Substitution/#plfa_plfa-part2-Substitution-22225" class="Bound">σ₂</a><a id="plfa_plfa-part2-Substitution-22267" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-22269" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-22270" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-22272" href="../Substitution/#plfa_plfa-part2-Substitution-22218" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-22273" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-22280" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
       <a id="plfa_plfa-part2-Substitution-22291" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-22293" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-22298" href="../Substitution/#plfa_plfa-part2-Substitution-22225" class="Bound">σ₂</a> <a id="plfa_plfa-part2-Substitution-22301" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-22303" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-22304" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-22311" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Substitution-22314" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-22315" href="../Substitution/#plfa_plfa-part2-Substitution-22221" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-22318" href="../Substitution/#plfa_plfa-part2-Substitution-22218" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-22319" class="Symbol">))</a>
     <a id="plfa_plfa-part2-Substitution-22327" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-22330" href="../Substitution/#plfa_plfa-part2-Substitution-19458" class="Function">commute-subst-rename</a><a id="plfa_plfa-part2-Substitution-22350" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-22351" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-22353" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22355" href="../Substitution/#plfa_plfa-part2-Substitution-22221" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-22358" href="../Substitution/#plfa_plfa-part2-Substitution-22218" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-22359" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22361" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-22363" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22365" href="../Substitution/#plfa_plfa-part2-Substitution-22225" class="Bound">σ₂</a><a id="plfa_plfa-part2-Substitution-22367" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22369" class="Argument">ρ₁</a> <a id="plfa_plfa-part2-Substitution-22372" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22374" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part2-Substitution-22376" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22378" class="Argument">ρ₂</a> <a id="plfa_plfa-part2-Substitution-22381" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22383" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part2-Substitution-22385" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-22387" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-22392" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-22401" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-22408" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Substitution-22411" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-22412" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-22414" href="../Substitution/#plfa_plfa-part2-Substitution-22225" class="Bound">σ₂</a> <a id="plfa_plfa-part2-Substitution-22417" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-22419" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-22420" href="../Substitution/#plfa_plfa-part2-Substitution-22221" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-22423" href="../Substitution/#plfa_plfa-part2-Substitution-22218" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-22424" class="Symbol">))</a>
     <a id="plfa_plfa-part2-Substitution-22432" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
       <a id="plfa_plfa-part2-Substitution-22443" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-22450" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Substitution-22453" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-22455" href="../Substitution/#plfa_plfa-part2-Substitution-22221" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-22458" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-22460" href="../Substitution/#plfa_plfa-part2-Substitution-22225" class="Bound">σ₂</a><a id="plfa_plfa-part2-Substitution-22462" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-22464" href="../Substitution/#plfa_plfa-part2-Substitution-22218" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-22465" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-22472" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
</pre><p>The proof proceed by cases on <code>x</code>.</p><ul><li><p>If <code>x = Z</code>, the two sides are equal by the definition of <code>exts</code> and sequencing.</p></li><li><p>If <code>x = S x</code>, we unfold the first use of <code>exts</code> and sequencing, then apply the lemma <code>commute-subst-rename</code>. We conclude by the definition of sequencing.</p></li></ul><p>Now we come to the proof of <code>sub-sub</code>, which we explain below.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-sub-sub"></a><a id="plfa_plfa-part2-Substitution-22834" href="../Substitution/#plfa_plfa-part2-Substitution-22834" class="Function">sub-sub</a> <a id="plfa_plfa-part2-Substitution-22842" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-22844" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-22846" href="../Substitution/#plfa_plfa-part2-Substitution-22846" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-22848" href="../Substitution/#plfa_plfa-part2-Substitution-22848" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-22850" href="../Substitution/#plfa_plfa-part2-Substitution-22850" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-22851" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22853" href="../Substitution/#plfa_plfa-part2-Substitution-22853" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-22854" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22856" href="../Substitution/#plfa_plfa-part2-Substitution-22856" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-22858" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-22860" href="../Substitution/#plfa_plfa-part2-Substitution-22846" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-22862" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-22864" href="../Substitution/#plfa_plfa-part2-Substitution-22853" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-22865" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-22867" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-22868" href="../Substitution/#plfa_plfa-part2-Substitution-22868" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-22871" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-22873" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-22879" href="../Substitution/#plfa_plfa-part2-Substitution-22846" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-22881" href="../Substitution/#plfa_plfa-part2-Substitution-22848" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-22882" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22884" href="../Substitution/#plfa_plfa-part2-Substitution-22884" class="Bound">σ₂</a> <a id="plfa_plfa-part2-Substitution-22887" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-22889" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-22895" href="../Substitution/#plfa_plfa-part2-Substitution-22848" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-22897" href="../Substitution/#plfa_plfa-part2-Substitution-22850" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-22898" class="Symbol">}</a>
            <a id="plfa_plfa-part2-Substitution-22912" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-22914" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-22916" href="../Substitution/#plfa_plfa-part2-Substitution-22884" class="Bound">σ₂</a> <a id="plfa_plfa-part2-Substitution-22919" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-22921" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-22922" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-22924" href="../Substitution/#plfa_plfa-part2-Substitution-22868" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-22927" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-22929" href="../Substitution/#plfa_plfa-part2-Substitution-22856" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-22930" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-22932" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-22934" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-22936" href="../Substitution/#plfa_plfa-part2-Substitution-22868" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-22939" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-22941" href="../Substitution/#plfa_plfa-part2-Substitution-22884" class="Bound">σ₂</a> <a id="plfa_plfa-part2-Substitution-22944" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-22946" href="../Substitution/#plfa_plfa-part2-Substitution-22856" class="Bound">M</a>
<a id="plfa_plfa-part2-Substitution-22948" href="../Substitution/#plfa_plfa-part2-Substitution-22834" class="Function">sub-sub</a> <a id="plfa_plfa-part2-Substitution-22956" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-22957" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-22959" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22961" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-22963" href="../Substitution/#plfa_plfa-part2-Substitution-22963" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-22964" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-22966" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22968" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part2-Substitution-22973" href="../Substitution/#plfa_plfa-part2-Substitution-22834" class="Function">sub-sub</a> <a id="plfa_plfa-part2-Substitution-22981" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-22982" href="../Substitution/#plfa_plfa-part2-Substitution-22982" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-22983" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22985" href="../Substitution/#plfa_plfa-part2-Substitution-22985" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-22986" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22988" href="../Substitution/#plfa_plfa-part2-Substitution-22988" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-22989" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22991" href="../Substitution/#plfa_plfa-part2-Substitution-22991" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-22992" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22994" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-22996" href="../Substitution/#plfa_plfa-part2-Substitution-22996" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-22997" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22999" href="../Substitution/#plfa_plfa-part2-Substitution-22999" class="Bound">σ₁</a><a id="plfa_plfa-part2-Substitution-23001" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-23003" href="../Substitution/#plfa_plfa-part2-Substitution-23003" class="Bound">σ₂</a><a id="plfa_plfa-part2-Substitution-23005" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-23007" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-23012" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
     <a id="plfa_plfa-part2-Substitution-23023" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-23025" href="../Substitution/#plfa_plfa-part2-Substitution-23003" class="Bound">σ₂</a> <a id="plfa_plfa-part2-Substitution-23028" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-23030" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-23031" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-23033" href="../Substitution/#plfa_plfa-part2-Substitution-22999" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-23036" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-23038" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-23039" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-23041" href="../Substitution/#plfa_plfa-part2-Substitution-22996" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-23042" class="Symbol">))</a>
   <a id="plfa_plfa-part2-Substitution-23048" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
     <a id="plfa_plfa-part2-Substitution-23057" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-23059" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-23061" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-23066" href="../Substitution/#plfa_plfa-part2-Substitution-23003" class="Bound">σ₂</a> <a id="plfa_plfa-part2-Substitution-23069" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-23071" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-23072" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-23074" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-23079" href="../Substitution/#plfa_plfa-part2-Substitution-22999" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-23082" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-23084" href="../Substitution/#plfa_plfa-part2-Substitution-22996" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-23085" class="Symbol">)</a>
   <a id="plfa_plfa-part2-Substitution-23090" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-23093" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-23098" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ_</a> <a id="plfa_plfa-part2-Substitution-23101" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-23102" href="../Substitution/#plfa_plfa-part2-Substitution-22834" class="Function">sub-sub</a><a id="plfa_plfa-part2-Substitution-23109" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-23110" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-23112" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-23114" href="../Substitution/#plfa_plfa-part2-Substitution-22996" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-23115" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-23117" class="Argument">σ₁</a> <a id="plfa_plfa-part2-Substitution-23120" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-23122" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-23127" href="../Substitution/#plfa_plfa-part2-Substitution-22999" class="Bound">σ₁</a><a id="plfa_plfa-part2-Substitution-23129" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-23131" class="Argument">σ₂</a> <a id="plfa_plfa-part2-Substitution-23134" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-23136" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-23141" href="../Substitution/#plfa_plfa-part2-Substitution-23003" class="Bound">σ₂</a><a id="plfa_plfa-part2-Substitution-23143" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-23146" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
     <a id="plfa_plfa-part2-Substitution-23153" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-23155" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-23157" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-23162" href="../Substitution/#plfa_plfa-part2-Substitution-22999" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-23165" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-23167" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-23172" href="../Substitution/#plfa_plfa-part2-Substitution-23003" class="Bound">σ₂</a> <a id="plfa_plfa-part2-Substitution-23175" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-23177" href="../Substitution/#plfa_plfa-part2-Substitution-22996" class="Bound">N</a>
   <a id="plfa_plfa-part2-Substitution-23182" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-23185" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-23190" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ_</a> <a id="plfa_plfa-part2-Substitution-23193" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-23194" href="../Substitution/#plfa_plfa-part2-Substitution-10981" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-23202" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-23203" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-23205" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-23207" href="../Substitution/#plfa_plfa-part2-Substitution-22996" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-23208" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-23210" class="Symbol">(λ</a> <a id="plfa_plfa-part2-Substitution-23213" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-23214" href="../Substitution/#plfa_plfa-part2-Substitution-23214" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-23215" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-23217" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-23219" href="../Substitution/#plfa_plfa-part2-Substitution-21883" class="Function">exts-seq</a><a id="plfa_plfa-part2-Substitution-23227" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-23229" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Substitution-23233" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-23235" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
     <a id="plfa_plfa-part2-Substitution-23242" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-23244" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-23246" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-23251" class="Symbol">(</a> <a id="plfa_plfa-part2-Substitution-23253" href="../Substitution/#plfa_plfa-part2-Substitution-22999" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-23256" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-23258" href="../Substitution/#plfa_plfa-part2-Substitution-23003" class="Bound">σ₂</a><a id="plfa_plfa-part2-Substitution-23260" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-23262" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-23264" href="../Substitution/#plfa_plfa-part2-Substitution-22996" class="Bound">N</a>
   <a id="plfa_plfa-part2-Substitution-23269" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
<a id="plfa_plfa-part2-Substitution-23271" href="../Substitution/#plfa_plfa-part2-Substitution-22834" class="Function">sub-sub</a> <a id="plfa_plfa-part2-Substitution-23279" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-23280" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-23282" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-23284" href="../Substitution/#plfa_plfa-part2-Substitution-23284" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-23286" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Substitution-23288" href="../Substitution/#plfa_plfa-part2-Substitution-23288" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-23289" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-23291" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-23293" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1376" class="Function">cong₂</a> <a id="plfa_plfa-part2-Substitution-23299" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">_·_</a> <a id="plfa_plfa-part2-Substitution-23303" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-23304" href="../Substitution/#plfa_plfa-part2-Substitution-22834" class="Function">sub-sub</a><a id="plfa_plfa-part2-Substitution-23311" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-23312" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-23314" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-23316" href="../Substitution/#plfa_plfa-part2-Substitution-23284" class="Bound">L</a><a id="plfa_plfa-part2-Substitution-23317" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-23320" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-23321" href="../Substitution/#plfa_plfa-part2-Substitution-22834" class="Function">sub-sub</a><a id="plfa_plfa-part2-Substitution-23328" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-23329" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-23331" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-23333" href="../Substitution/#plfa_plfa-part2-Substitution-23288" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-23334" class="Symbol">})</a>
</pre><p>We proceed by induction on the term <code>M</code>.</p><ul><li><p>If <code>M = x</code>, then both sides are equal to <code>σ₂ (σ₁ x)</code>.</p></li><li><p>If <code>M = ƛ N</code>, we first use the induction hypothesis to show that</p><pre><code>  ƛ ⟪ exts σ₂ ⟫ (⟪ exts σ₁ ⟫ N) ≡ ƛ ⟪ exts σ₁ ⨟ exts σ₂ ⟫ N</code></pre><p>and then use the lemma <code>exts-seq</code> to show</p><pre><code>  ƛ ⟪ exts σ₁ ⨟ exts σ₂ ⟫ N ≡ ƛ ⟪ exts ( σ₁ ⨟ σ₂) ⟫ N</code></pre></li><li><p>If <code>M</code> is an application, we use the induction hypothesis for both subterms.</p></li></ul><p>The following corollary of <code>sub-sub</code> specializes the first substitution to a renaming.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-rename-subst"></a><a id="plfa_plfa-part2-Substitution-23861" href="../Substitution/#plfa_plfa-part2-Substitution-23861" class="Function">rename-subst</a> <a id="plfa_plfa-part2-Substitution-23874" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-23876" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-23878" href="../Substitution/#plfa_plfa-part2-Substitution-23878" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-23880" href="../Substitution/#plfa_plfa-part2-Substitution-23880" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-23882" href="../Substitution/#plfa_plfa-part2-Substitution-23882" class="Bound">Δ′</a><a id="plfa_plfa-part2-Substitution-23884" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-23886" href="../Substitution/#plfa_plfa-part2-Substitution-23886" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-23888" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-23890" href="../Substitution/#plfa_plfa-part2-Substitution-23878" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-23892" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-23894" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-23895" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-23897" href="../Substitution/#plfa_plfa-part2-Substitution-23897" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-23899" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-23901" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-23908" href="../Substitution/#plfa_plfa-part2-Substitution-23878" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-23910" href="../Substitution/#plfa_plfa-part2-Substitution-23880" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-23911" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-23913" href="../Substitution/#plfa_plfa-part2-Substitution-23913" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-23915" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-23917" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-23923" href="../Substitution/#plfa_plfa-part2-Substitution-23880" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-23925" href="../Substitution/#plfa_plfa-part2-Substitution-23882" class="Bound">Δ′</a><a id="plfa_plfa-part2-Substitution-23927" class="Symbol">}</a>
             <a id="plfa_plfa-part2-Substitution-23942" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-23944" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-23946" href="../Substitution/#plfa_plfa-part2-Substitution-23913" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-23948" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-23950" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-23951" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-23958" href="../Substitution/#plfa_plfa-part2-Substitution-23897" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-23960" href="../Substitution/#plfa_plfa-part2-Substitution-23886" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-23961" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-23963" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-23965" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-23967" href="../Substitution/#plfa_plfa-part2-Substitution-23913" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-23969" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-23971" href="../Substitution/#plfa_plfa-part2-Substitution-23897" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-23973" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-23975" href="../Substitution/#plfa_plfa-part2-Substitution-23886" class="Bound">M</a>
<a id="plfa_plfa-part2-Substitution-23977" href="../Substitution/#plfa_plfa-part2-Substitution-23861" class="Function">rename-subst</a> <a id="plfa_plfa-part2-Substitution-23990" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-23991" href="../Substitution/#plfa_plfa-part2-Substitution-23991" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-23992" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-23994" href="../Substitution/#plfa_plfa-part2-Substitution-23994" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-23995" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-23997" href="../Substitution/#plfa_plfa-part2-Substitution-23997" class="Bound">Δ′</a><a id="plfa_plfa-part2-Substitution-23999" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-24001" href="../Substitution/#plfa_plfa-part2-Substitution-24001" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-24002" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-24004" href="../Substitution/#plfa_plfa-part2-Substitution-24004" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-24005" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-24007" href="../Substitution/#plfa_plfa-part2-Substitution-24007" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-24008" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-24010" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-24015" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
     <a id="plfa_plfa-part2-Substitution-24026" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-24028" href="../Substitution/#plfa_plfa-part2-Substitution-24007" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24030" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-24032" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-24033" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-24040" href="../Substitution/#plfa_plfa-part2-Substitution-24004" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-24042" href="../Substitution/#plfa_plfa-part2-Substitution-24001" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-24043" class="Symbol">)</a>
   <a id="plfa_plfa-part2-Substitution-24048" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-24051" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-24056" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-24058" href="../Substitution/#plfa_plfa-part2-Substitution-24007" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24060" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-24062" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-24063" href="../Substitution/#plfa_plfa-part2-Substitution-13483" class="Function">rename-subst-ren</a><a id="plfa_plfa-part2-Substitution-24079" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-24080" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-24082" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-24084" href="../Substitution/#plfa_plfa-part2-Substitution-24001" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-24085" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-24088" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
     <a id="plfa_plfa-part2-Substitution-24095" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-24097" href="../Substitution/#plfa_plfa-part2-Substitution-24007" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24099" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-24101" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-24102" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-24104" href="../Substitution/#plfa_plfa-part2-Substitution-6492" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-24108" href="../Substitution/#plfa_plfa-part2-Substitution-24004" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-24110" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-24112" href="../Substitution/#plfa_plfa-part2-Substitution-24001" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-24113" class="Symbol">)</a>
   <a id="plfa_plfa-part2-Substitution-24118" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-24121" href="../Substitution/#plfa_plfa-part2-Substitution-22834" class="Function">sub-sub</a><a id="plfa_plfa-part2-Substitution-24128" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-24129" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-24131" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-24133" href="../Substitution/#plfa_plfa-part2-Substitution-24001" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-24134" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-24136" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
     <a id="plfa_plfa-part2-Substitution-24143" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-24145" href="../Substitution/#plfa_plfa-part2-Substitution-6492" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-24149" href="../Substitution/#plfa_plfa-part2-Substitution-24004" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-24151" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24153" href="../Substitution/#plfa_plfa-part2-Substitution-24007" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24155" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-24157" href="../Substitution/#plfa_plfa-part2-Substitution-24001" class="Bound">M</a>
   <a id="plfa_plfa-part2-Substitution-24162" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
     <a id="plfa_plfa-part2-Substitution-24171" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-24173" href="../Substitution/#plfa_plfa-part2-Substitution-24007" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24175" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-24177" href="../Substitution/#plfa_plfa-part2-Substitution-24004" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-24179" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-24181" href="../Substitution/#plfa_plfa-part2-Substitution-24001" class="Bound">M</a>
   <a id="plfa_plfa-part2-Substitution-24186" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
</pre><h2 id="proof-of-sub-assoc">Proof of sub-assoc</h2><p>The proof of <code>sub-assoc</code> follows directly from <code>sub-sub</code> and the definition of sequencing.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-sub-assoc"></a><a id="plfa_plfa-part2-Substitution-24317" href="../Substitution/#plfa_plfa-part2-Substitution-24317" class="Function">sub-assoc</a> <a id="plfa_plfa-part2-Substitution-24327" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-24329" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-24331" href="../Substitution/#plfa_plfa-part2-Substitution-24331" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-24333" href="../Substitution/#plfa_plfa-part2-Substitution-24333" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-24335" href="../Substitution/#plfa_plfa-part2-Substitution-24335" class="Bound">Σ</a> <a id="plfa_plfa-part2-Substitution-24337" href="../Substitution/#plfa_plfa-part2-Substitution-24337" class="Bound">Ψ</a> <a id="plfa_plfa-part2-Substitution-24339" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-24341" href="../Untyped/#plfa_plfa-part2-Untyped-2782" class="Datatype">Context</a><a id="plfa_plfa-part2-Substitution-24348" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-24350" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-24351" href="../Substitution/#plfa_plfa-part2-Substitution-24351" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24353" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-24355" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-24361" href="../Substitution/#plfa_plfa-part2-Substitution-24331" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-24363" href="../Substitution/#plfa_plfa-part2-Substitution-24333" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-24364" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-24366" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-24367" href="../Substitution/#plfa_plfa-part2-Substitution-24367" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-24369" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-24371" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-24377" href="../Substitution/#plfa_plfa-part2-Substitution-24333" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-24379" href="../Substitution/#plfa_plfa-part2-Substitution-24335" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-24380" class="Symbol">}</a>
             <a id="plfa_plfa-part2-Substitution-24395" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-24396" href="../Substitution/#plfa_plfa-part2-Substitution-24396" class="Bound">θ</a> <a id="plfa_plfa-part2-Substitution-24398" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-24400" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-24406" href="../Substitution/#plfa_plfa-part2-Substitution-24335" class="Bound">Σ</a> <a id="plfa_plfa-part2-Substitution-24408" href="../Substitution/#plfa_plfa-part2-Substitution-24337" class="Bound">Ψ</a><a id="plfa_plfa-part2-Substitution-24409" class="Symbol">}</a>
          <a id="plfa_plfa-part2-Substitution-24421" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-24423" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-24425" href="../Substitution/#plfa_plfa-part2-Substitution-24425" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-24426" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-24428" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-24430" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-24431" href="../Substitution/#plfa_plfa-part2-Substitution-24351" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24433" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24435" href="../Substitution/#plfa_plfa-part2-Substitution-24367" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-24436" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-24438" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24440" href="../Substitution/#plfa_plfa-part2-Substitution-24396" class="Bound">θ</a> <a id="plfa_plfa-part2-Substitution-24442" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-24444" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-24445" href="../Substitution/#plfa_plfa-part2-Substitution-24351" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24447" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24449" href="../Substitution/#plfa_plfa-part2-Substitution-24367" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-24451" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24453" href="../Substitution/#plfa_plfa-part2-Substitution-24396" class="Bound">θ</a><a id="plfa_plfa-part2-Substitution-24454" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-24456" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-24457" href="../Substitution/#plfa_plfa-part2-Substitution-24425" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-24458" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-24460" href="../Substitution/#plfa_plfa-part2-Substitution-24317" class="Function">sub-assoc</a> <a id="plfa_plfa-part2-Substitution-24470" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-24471" href="../Substitution/#plfa_plfa-part2-Substitution-24471" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-24472" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-24474" href="../Substitution/#plfa_plfa-part2-Substitution-24474" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-24475" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-24477" href="../Substitution/#plfa_plfa-part2-Substitution-24477" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-24478" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-24480" href="../Substitution/#plfa_plfa-part2-Substitution-24480" class="Bound">Ψ</a><a id="plfa_plfa-part2-Substitution-24481" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-24483" href="../Substitution/#plfa_plfa-part2-Substitution-24483" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-24484" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-24486" href="../Substitution/#plfa_plfa-part2-Substitution-24486" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-24487" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-24489" href="../Substitution/#plfa_plfa-part2-Substitution-24489" class="Bound">θ</a><a id="plfa_plfa-part2-Substitution-24490" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-24492" href="../Substitution/#plfa_plfa-part2-Substitution-24492" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-24493" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-24495" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-24497" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-24512" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-24514" href="../Substitution/#plfa_plfa-part2-Substitution-24514" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-24516" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-24518" href="../Substitution/#plfa_plfa-part2-Substitution-24541" class="Function">lemma</a><a id="plfa_plfa-part2-Substitution-24523" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-24524" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-24526" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-24528" href="../Substitution/#plfa_plfa-part2-Substitution-24514" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-24529" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-24533" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-24541" href="../Substitution/#plfa_plfa-part2-Substitution-24541" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-24547" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-24549" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-24551" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-24552" href="../Substitution/#plfa_plfa-part2-Substitution-24552" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-24554" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-24556" href="../Substitution/#plfa_plfa-part2-Substitution-24471" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-24558" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-24560" href="../Substitution/#plfa_plfa-part2-Substitution-24492" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-24561" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-24563" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-24565" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-24567" href="../Substitution/#plfa_plfa-part2-Substitution-24483" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24569" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24571" href="../Substitution/#plfa_plfa-part2-Substitution-24486" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-24572" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-24574" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24576" href="../Substitution/#plfa_plfa-part2-Substitution-24489" class="Bound">θ</a><a id="plfa_plfa-part2-Substitution-24577" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-24579" href="../Substitution/#plfa_plfa-part2-Substitution-24552" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-24581" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-24583" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-24584" href="../Substitution/#plfa_plfa-part2-Substitution-24483" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24586" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24588" href="../Substitution/#plfa_plfa-part2-Substitution-24486" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-24590" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24592" href="../Substitution/#plfa_plfa-part2-Substitution-24489" class="Bound">θ</a><a id="plfa_plfa-part2-Substitution-24593" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-24595" href="../Substitution/#plfa_plfa-part2-Substitution-24552" class="Bound">x</a>
  <a id="plfa_plfa-part2-Substitution-24599" href="../Substitution/#plfa_plfa-part2-Substitution-24541" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-24605" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-24606" href="../Substitution/#plfa_plfa-part2-Substitution-24606" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-24607" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-24609" class="Symbol">=</a>
      <a id="plfa_plfa-part2-Substitution-24617" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
        <a id="plfa_plfa-part2-Substitution-24631" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-24633" href="../Substitution/#plfa_plfa-part2-Substitution-24483" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24635" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24637" href="../Substitution/#plfa_plfa-part2-Substitution-24486" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-24638" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-24640" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24642" href="../Substitution/#plfa_plfa-part2-Substitution-24489" class="Bound">θ</a><a id="plfa_plfa-part2-Substitution-24643" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-24645" href="../Substitution/#plfa_plfa-part2-Substitution-24606" class="Bound">x</a>
      <a id="plfa_plfa-part2-Substitution-24653" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
        <a id="plfa_plfa-part2-Substitution-24665" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-24667" href="../Substitution/#plfa_plfa-part2-Substitution-24489" class="Bound">θ</a> <a id="plfa_plfa-part2-Substitution-24669" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-24671" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-24672" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-24674" href="../Substitution/#plfa_plfa-part2-Substitution-24486" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-24676" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-24678" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-24679" href="../Substitution/#plfa_plfa-part2-Substitution-24483" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24681" href="../Substitution/#plfa_plfa-part2-Substitution-24606" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-24682" class="Symbol">))</a>
      <a id="plfa_plfa-part2-Substitution-24691" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-24694" href="../Substitution/#plfa_plfa-part2-Substitution-22834" class="Function">sub-sub</a><a id="plfa_plfa-part2-Substitution-24701" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-24702" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-24704" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-24706" href="../Substitution/#plfa_plfa-part2-Substitution-24483" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24708" href="../Substitution/#plfa_plfa-part2-Substitution-24606" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-24709" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-24711" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
        <a id="plfa_plfa-part2-Substitution-24721" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-24723" href="../Substitution/#plfa_plfa-part2-Substitution-24486" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-24725" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24727" href="../Substitution/#plfa_plfa-part2-Substitution-24489" class="Bound">θ</a> <a id="plfa_plfa-part2-Substitution-24729" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-24731" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-24732" href="../Substitution/#plfa_plfa-part2-Substitution-24483" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24734" href="../Substitution/#plfa_plfa-part2-Substitution-24606" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-24735" class="Symbol">)</a>
      <a id="plfa_plfa-part2-Substitution-24743" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
        <a id="plfa_plfa-part2-Substitution-24755" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-24756" href="../Substitution/#plfa_plfa-part2-Substitution-24483" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24758" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24760" href="../Substitution/#plfa_plfa-part2-Substitution-24486" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-24762" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24764" href="../Substitution/#plfa_plfa-part2-Substitution-24489" class="Bound">θ</a><a id="plfa_plfa-part2-Substitution-24765" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-24767" href="../Substitution/#plfa_plfa-part2-Substitution-24606" class="Bound">x</a>
      <a id="plfa_plfa-part2-Substitution-24775" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
</pre><h2 id="proof-of-subst-zero-exts-cons">Proof of subst-zero-exts-cons</h2><p>The last equation we needed to prove <code>subst-zero-exts-cons</code> was <code>sub-assoc</code>, so we can now go ahead with its proof. We simply apply the equations for <code>exts</code> and <code>subst-zero</code> and then apply the σ algebra equation to arrive at the normal form <code>M • σ</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-subst-zero-exts-cons"></a><a id="plfa_plfa-part2-Substitution-25076" href="../Substitution/#plfa_plfa-part2-Substitution-25076" class="Function">subst-zero-exts-cons</a> <a id="plfa_plfa-part2-Substitution-25097" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-25099" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-25101" href="../Substitution/#plfa_plfa-part2-Substitution-25101" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-25103" href="../Substitution/#plfa_plfa-part2-Substitution-25103" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-25104" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-25106" href="../Substitution/#plfa_plfa-part2-Substitution-25106" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-25108" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-25110" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-25116" href="../Substitution/#plfa_plfa-part2-Substitution-25101" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-25118" href="../Substitution/#plfa_plfa-part2-Substitution-25103" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-25119" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-25121" href="../Substitution/#plfa_plfa-part2-Substitution-25121" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-25122" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-25124" href="../Substitution/#plfa_plfa-part2-Substitution-25124" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25126" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-25128" href="../Substitution/#plfa_plfa-part2-Substitution-25103" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-25130" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-25132" href="../Substitution/#plfa_plfa-part2-Substitution-25121" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-25133" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-25135" href="../Substitution/#plfa_plfa-part2-Substitution-25135" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-25136" class="Symbol">}</a>
                     <a id="plfa_plfa-part2-Substitution-25159" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-25161" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-25166" href="../Substitution/#plfa_plfa-part2-Substitution-25106" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-25168" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-25170" href="../Untyped/#plfa_plfa-part2-Untyped-7207" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Substitution-25181" href="../Substitution/#plfa_plfa-part2-Substitution-25124" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25183" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-25185" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25186" href="../Substitution/#plfa_plfa-part2-Substitution-25124" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25188" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25190" href="../Substitution/#plfa_plfa-part2-Substitution-25106" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-25191" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-25193" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-25194" href="../Substitution/#plfa_plfa-part2-Substitution-25135" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-25195" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-25197" href="../Substitution/#plfa_plfa-part2-Substitution-25076" class="Function">subst-zero-exts-cons</a> <a id="plfa_plfa-part2-Substitution-25218" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-25219" href="../Substitution/#plfa_plfa-part2-Substitution-25219" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-25220" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-25222" href="../Substitution/#plfa_plfa-part2-Substitution-25222" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-25223" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-25225" href="../Substitution/#plfa_plfa-part2-Substitution-25225" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-25226" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-25228" href="../Substitution/#plfa_plfa-part2-Substitution-25228" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-25229" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-25231" href="../Substitution/#plfa_plfa-part2-Substitution-25231" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-25232" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-25234" href="../Substitution/#plfa_plfa-part2-Substitution-25234" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-25235" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-25237" class="Symbol">=</a>
    <a id="plfa_plfa-part2-Substitution-25243" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
      <a id="plfa_plfa-part2-Substitution-25255" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-25260" href="../Substitution/#plfa_plfa-part2-Substitution-25225" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-25262" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-25264" href="../Untyped/#plfa_plfa-part2-Untyped-7207" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Substitution-25275" href="../Substitution/#plfa_plfa-part2-Substitution-25231" class="Bound">M</a>
    <a id="plfa_plfa-part2-Substitution-25281" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-25284" href="../Substitution/#plfa_plfa-part2-Substitution-12077" class="Function">cong-seq</a> <a id="plfa_plfa-part2-Substitution-25293" href="../Substitution/#plfa_plfa-part2-Substitution-14859" class="Function">exts-cons-shift</a> <a id="plfa_plfa-part2-Substitution-25309" href="../Substitution/#plfa_plfa-part2-Substitution-15648" class="Function">subst-Z-cons-ids</a> <a id="plfa_plfa-part2-Substitution-25326" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
      <a id="plfa_plfa-part2-Substitution-25334" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25335" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-25337" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-Substitution-25339" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25341" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25342" href="../Substitution/#plfa_plfa-part2-Substitution-25225" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-25344" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-25346" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-25347" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-25350" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-25352" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25353" href="../Substitution/#plfa_plfa-part2-Substitution-25231" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25355" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25357" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-25360" class="Symbol">)</a>
    <a id="plfa_plfa-part2-Substitution-25366" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-25369" href="../Substitution/#plfa_plfa-part2-Substitution-9092" class="Function">sub-dist</a> <a id="plfa_plfa-part2-Substitution-25378" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
      <a id="plfa_plfa-part2-Substitution-25386" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25387" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-25389" href="../Substitution/#plfa_plfa-part2-Substitution-25231" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25391" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25393" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-25397" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-25399" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25400" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-25402" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-25403" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-25406" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25408" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-25410" href="../Substitution/#plfa_plfa-part2-Substitution-25225" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-25412" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-25414" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-25415" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-25417" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-25419" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25420" href="../Substitution/#plfa_plfa-part2-Substitution-25231" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25422" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25424" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-25427" class="Symbol">))</a>
    <a id="plfa_plfa-part2-Substitution-25434" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-25437" href="../Substitution/#plfa_plfa-part2-Substitution-11728" class="Function">cong-cons</a> <a id="plfa_plfa-part2-Substitution-25447" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25448" href="../Substitution/#plfa_plfa-part2-Substitution-8257" class="Function">sub-head</a><a id="plfa_plfa-part2-Substitution-25456" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-25457" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-25459" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-25461" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-25464" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-25467" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-25472" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
      <a id="plfa_plfa-part2-Substitution-25480" href="../Substitution/#plfa_plfa-part2-Substitution-25231" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25482" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25484" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-25486" href="../Substitution/#plfa_plfa-part2-Substitution-25225" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-25488" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-25490" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-25491" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-25493" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-25495" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25496" href="../Substitution/#plfa_plfa-part2-Substitution-25231" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25498" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25500" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-25503" class="Symbol">))</a>
    <a id="plfa_plfa-part2-Substitution-25510" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-25513" href="../Substitution/#plfa_plfa-part2-Substitution-11728" class="Function">cong-cons</a> <a id="plfa_plfa-part2-Substitution-25523" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-25528" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25529" href="../Substitution/#plfa_plfa-part2-Substitution-24317" class="Function">sub-assoc</a><a id="plfa_plfa-part2-Substitution-25538" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-25539" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-25541" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-25543" href="../Substitution/#plfa_plfa-part2-Substitution-25225" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-25544" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-25547" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
      <a id="plfa_plfa-part2-Substitution-25555" href="../Substitution/#plfa_plfa-part2-Substitution-25231" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25557" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25559" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25560" href="../Substitution/#plfa_plfa-part2-Substitution-25225" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-25562" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-25564" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25565" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a> <a id="plfa_plfa-part2-Substitution-25567" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-25569" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25570" href="../Substitution/#plfa_plfa-part2-Substitution-25231" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25572" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25574" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-25577" class="Symbol">)))</a>
    <a id="plfa_plfa-part2-Substitution-25585" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-25588" href="../Substitution/#plfa_plfa-part2-Substitution-11728" class="Function">cong-cons</a> <a id="plfa_plfa-part2-Substitution-25598" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-25603" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25604" href="../Substitution/#plfa_plfa-part2-Substitution-12077" class="Function">cong-seq</a><a id="plfa_plfa-part2-Substitution-25612" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-25613" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-25615" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-25617" href="../Substitution/#plfa_plfa-part2-Substitution-25225" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-25618" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-25620" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-25625" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25626" href="../Substitution/#plfa_plfa-part2-Substitution-8367" class="Function">sub-tail</a><a id="plfa_plfa-part2-Substitution-25634" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-25635" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-25637" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-25639" href="../Substitution/#plfa_plfa-part2-Substitution-25231" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-25640" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-25642" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-25644" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-25646" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-25649" class="Symbol">}))</a> <a id="plfa_plfa-part2-Substitution-25653" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
      <a id="plfa_plfa-part2-Substitution-25661" href="../Substitution/#plfa_plfa-part2-Substitution-25231" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25663" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25665" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25666" href="../Substitution/#plfa_plfa-part2-Substitution-25225" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-25668" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-25670" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-25673" class="Symbol">)</a>
    <a id="plfa_plfa-part2-Substitution-25679" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-25682" href="../Substitution/#plfa_plfa-part2-Substitution-11728" class="Function">cong-cons</a> <a id="plfa_plfa-part2-Substitution-25692" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-25697" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25698" href="../Substitution/#plfa_plfa-part2-Substitution-17533" class="Function">sub-idR</a><a id="plfa_plfa-part2-Substitution-25705" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-25706" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-25708" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-25710" href="../Substitution/#plfa_plfa-part2-Substitution-25225" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-25711" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-25714" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
      <a id="plfa_plfa-part2-Substitution-25722" href="../Substitution/#plfa_plfa-part2-Substitution-25231" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25724" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25726" href="../Substitution/#plfa_plfa-part2-Substitution-25225" class="Bound">σ</a>
    <a id="plfa_plfa-part2-Substitution-25732" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
</pre><h2 id="proof-of-the-substitution-lemma">Proof of the substitution lemma</h2><p>We first prove the generalized form of the substitution lemma, showing that a substitution <code>σ</code> commutes with the substitution of <code>M</code> into <code>N</code>.</p><pre><code>⟪ exts σ ⟫ N [ ⟪ σ ⟫ M ] ≡ ⟪ σ ⟫ (N [ M ])</code></pre><p>This proof is where the σ algebra pays off. The proof is by direct equational reasoning. Starting with the left-hand side, we apply σ algebra equations, oriented left-to-right, until we arrive at the normal form</p><pre><code>⟪ ⟪ σ ⟫ M • σ ⟫ N</code></pre><p>We then do the same with the right-hand side, arriving at the same normal form.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-subst-commute"></a><a id="plfa_plfa-part2-Substitution-26294" href="../Substitution/#plfa_plfa-part2-Substitution-26294" class="Function">subst-commute</a> <a id="plfa_plfa-part2-Substitution-26308" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-26310" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-26312" href="../Substitution/#plfa_plfa-part2-Substitution-26312" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-26314" href="../Substitution/#plfa_plfa-part2-Substitution-26314" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-26315" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-26317" href="../Substitution/#plfa_plfa-part2-Substitution-26317" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-26319" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-26321" href="../Substitution/#plfa_plfa-part2-Substitution-26312" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-26323" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-26325" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-Substitution-26327" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-26329" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-26330" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-26332" href="../Substitution/#plfa_plfa-part2-Substitution-26332" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-26334" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-26336" href="../Substitution/#plfa_plfa-part2-Substitution-26312" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-26338" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-26340" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-26341" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-26343" href="../Substitution/#plfa_plfa-part2-Substitution-26343" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26345" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-26347" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-26353" href="../Substitution/#plfa_plfa-part2-Substitution-26312" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-26355" href="../Substitution/#plfa_plfa-part2-Substitution-26314" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-26357" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Substitution-26363" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-26365" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26367" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-26372" href="../Substitution/#plfa_plfa-part2-Substitution-26343" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26374" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26376" href="../Substitution/#plfa_plfa-part2-Substitution-26317" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-26378" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-26380" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26382" href="../Substitution/#plfa_plfa-part2-Substitution-26343" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26384" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26386" href="../Substitution/#plfa_plfa-part2-Substitution-26332" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-26388" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a> <a id="plfa_plfa-part2-Substitution-26390" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-26392" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26394" href="../Substitution/#plfa_plfa-part2-Substitution-26343" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26396" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26398" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26399" href="../Substitution/#plfa_plfa-part2-Substitution-26317" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-26401" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-26403" href="../Substitution/#plfa_plfa-part2-Substitution-26332" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-26405" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a><a id="plfa_plfa-part2-Substitution-26406" class="Symbol">)</a>
<a id="plfa_plfa-part2-Substitution-26408" href="../Substitution/#plfa_plfa-part2-Substitution-26294" class="Function">subst-commute</a> <a id="plfa_plfa-part2-Substitution-26422" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-26423" href="../Substitution/#plfa_plfa-part2-Substitution-26423" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-26424" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-26426" href="../Substitution/#plfa_plfa-part2-Substitution-26426" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-26427" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-26429" href="../Substitution/#plfa_plfa-part2-Substitution-26429" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-26430" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-26432" href="../Substitution/#plfa_plfa-part2-Substitution-26432" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-26433" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-26435" href="../Substitution/#plfa_plfa-part2-Substitution-26435" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-26436" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-26438" class="Symbol">=</a>
     <a id="plfa_plfa-part2-Substitution-26445" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
       <a id="plfa_plfa-part2-Substitution-26458" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26460" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-26465" href="../Substitution/#plfa_plfa-part2-Substitution-26435" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26467" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26469" href="../Substitution/#plfa_plfa-part2-Substitution-26429" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-26471" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-26473" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26475" href="../Substitution/#plfa_plfa-part2-Substitution-26435" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26477" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26479" href="../Substitution/#plfa_plfa-part2-Substitution-26432" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-26481" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a>
     <a id="plfa_plfa-part2-Substitution-26488" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
       <a id="plfa_plfa-part2-Substitution-26499" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26501" href="../Untyped/#plfa_plfa-part2-Untyped-7207" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Substitution-26512" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26513" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26515" href="../Substitution/#plfa_plfa-part2-Substitution-26435" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26517" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26519" href="../Substitution/#plfa_plfa-part2-Substitution-26432" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-26520" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-26522" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26524" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26525" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26527" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-26532" href="../Substitution/#plfa_plfa-part2-Substitution-26435" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26534" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26536" href="../Substitution/#plfa_plfa-part2-Substitution-26429" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-26537" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-26544" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-26547" href="../Substitution/#plfa_plfa-part2-Substitution-10981" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-26556" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-26557" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-26559" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-26561" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26563" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-26568" href="../Substitution/#plfa_plfa-part2-Substitution-26435" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26570" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26572" href="../Substitution/#plfa_plfa-part2-Substitution-26429" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-26573" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-26575" href="../Substitution/#plfa_plfa-part2-Substitution-15648" class="Function">subst-Z-cons-ids</a> <a id="plfa_plfa-part2-Substitution-26592" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-26597" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-26606" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26608" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26610" href="../Substitution/#plfa_plfa-part2-Substitution-26435" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26612" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26614" href="../Substitution/#plfa_plfa-part2-Substitution-26432" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-26616" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-26618" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-26622" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26624" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26625" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26627" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-26632" href="../Substitution/#plfa_plfa-part2-Substitution-26435" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26634" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26636" href="../Substitution/#plfa_plfa-part2-Substitution-26429" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-26637" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-26644" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-26647" href="../Substitution/#plfa_plfa-part2-Substitution-22834" class="Function">sub-sub</a> <a id="plfa_plfa-part2-Substitution-26655" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-26656" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-26658" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-26660" href="../Substitution/#plfa_plfa-part2-Substitution-26429" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-26661" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-26663" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-26672" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26674" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26675" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-26680" href="../Substitution/#plfa_plfa-part2-Substitution-26435" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-26681" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-26683" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-26685" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-26687" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26689" href="../Substitution/#plfa_plfa-part2-Substitution-26435" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26691" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26693" href="../Substitution/#plfa_plfa-part2-Substitution-26432" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-26694" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-26696" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-26698" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-26701" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-26703" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26705" href="../Substitution/#plfa_plfa-part2-Substitution-26429" class="Bound">N</a>
     <a id="plfa_plfa-part2-Substitution-26712" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-26715" href="../Substitution/#plfa_plfa-part2-Substitution-10981" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-26724" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-26725" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-26727" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-26729" href="../Substitution/#plfa_plfa-part2-Substitution-26429" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-26730" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-26732" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26733" href="../Substitution/#plfa_plfa-part2-Substitution-12077" class="Function">cong-seq</a> <a id="plfa_plfa-part2-Substitution-26742" href="../Substitution/#plfa_plfa-part2-Substitution-14859" class="Function">exts-cons-shift</a> <a id="plfa_plfa-part2-Substitution-26758" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Substitution-26762" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-26764" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-26769" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-26778" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26780" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26781" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-26783" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-Substitution-26785" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-26787" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26788" href="../Substitution/#plfa_plfa-part2-Substitution-26435" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26790" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-26792" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-26793" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-26796" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-26798" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26799" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26801" href="../Substitution/#plfa_plfa-part2-Substitution-26435" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26803" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26805" href="../Substitution/#plfa_plfa-part2-Substitution-26432" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-26807" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-26809" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-26812" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-26814" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26816" href="../Substitution/#plfa_plfa-part2-Substitution-26429" class="Bound">N</a>
     <a id="plfa_plfa-part2-Substitution-26823" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-26826" href="../Substitution/#plfa_plfa-part2-Substitution-10981" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-26835" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-26836" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-26838" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-26840" href="../Substitution/#plfa_plfa-part2-Substitution-26429" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-26841" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-26843" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26844" href="../Substitution/#plfa_plfa-part2-Substitution-9092" class="Function">sub-dist</a> <a id="plfa_plfa-part2-Substitution-26853" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-26854" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-26856" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-26858" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-26860" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-26861" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-26864" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-26869" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-26878" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26880" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26882" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26884" href="../Substitution/#plfa_plfa-part2-Substitution-26435" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26886" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26888" href="../Substitution/#plfa_plfa-part2-Substitution-26432" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-26890" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-26892" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-26896" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26898" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26899" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-26901" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-26902" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-26904" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-26906" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-26908" href="../Substitution/#plfa_plfa-part2-Substitution-26435" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26910" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-26912" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-26913" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-26915" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-26917" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26918" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26920" href="../Substitution/#plfa_plfa-part2-Substitution-26435" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26922" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26924" href="../Substitution/#plfa_plfa-part2-Substitution-26432" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-26926" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-26928" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-26931" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-26934" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26936" href="../Substitution/#plfa_plfa-part2-Substitution-26429" class="Bound">N</a>
     <a id="plfa_plfa-part2-Substitution-26943" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
       <a id="plfa_plfa-part2-Substitution-26954" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26956" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26958" href="../Substitution/#plfa_plfa-part2-Substitution-26435" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26960" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26962" href="../Substitution/#plfa_plfa-part2-Substitution-26432" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-26964" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-26966" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-26968" href="../Substitution/#plfa_plfa-part2-Substitution-26435" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26970" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-26972" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-26973" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-26975" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-26977" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26978" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26980" href="../Substitution/#plfa_plfa-part2-Substitution-26435" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26982" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26984" href="../Substitution/#plfa_plfa-part2-Substitution-26432" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-26986" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-26988" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-26991" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-26994" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26996" href="../Substitution/#plfa_plfa-part2-Substitution-26429" class="Bound">N</a>
     <a id="plfa_plfa-part2-Substitution-27003" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-27006" href="../Substitution/#plfa_plfa-part2-Substitution-10981" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-27014" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-27015" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-27017" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-27019" href="../Substitution/#plfa_plfa-part2-Substitution-26429" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-27020" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-27022" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27023" href="../Substitution/#plfa_plfa-part2-Substitution-11728" class="Function">cong-cons</a> <a id="plfa_plfa-part2-Substitution-27033" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-27038" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27039" href="../Substitution/#plfa_plfa-part2-Substitution-24317" class="Function">sub-assoc</a><a id="plfa_plfa-part2-Substitution-27048" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-27049" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-27051" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-27053" href="../Substitution/#plfa_plfa-part2-Substitution-26435" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-27054" class="Symbol">}))</a> <a id="plfa_plfa-part2-Substitution-27058" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-27063" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-27072" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27074" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27076" href="../Substitution/#plfa_plfa-part2-Substitution-26435" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27078" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27080" href="../Substitution/#plfa_plfa-part2-Substitution-26432" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-27082" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-27084" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27085" href="../Substitution/#plfa_plfa-part2-Substitution-26435" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27087" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-27089" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a> <a id="plfa_plfa-part2-Substitution-27091" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-27093" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27095" href="../Substitution/#plfa_plfa-part2-Substitution-26435" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27097" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27099" href="../Substitution/#plfa_plfa-part2-Substitution-26432" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-27101" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-27103" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-27106" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-27108" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27110" href="../Substitution/#plfa_plfa-part2-Substitution-26429" class="Bound">N</a>
     <a id="plfa_plfa-part2-Substitution-27117" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-27120" href="../Substitution/#plfa_plfa-part2-Substitution-10981" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-27128" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-27129" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-27131" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-27133" href="../Substitution/#plfa_plfa-part2-Substitution-26429" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-27134" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-27136" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-27141" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-27146" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-27155" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27157" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27159" href="../Substitution/#plfa_plfa-part2-Substitution-26435" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27161" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27163" href="../Substitution/#plfa_plfa-part2-Substitution-26432" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-27165" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-27167" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27168" href="../Substitution/#plfa_plfa-part2-Substitution-26435" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27170" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-27172" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-27175" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-27177" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27179" href="../Substitution/#plfa_plfa-part2-Substitution-26429" class="Bound">N</a>
     <a id="plfa_plfa-part2-Substitution-27186" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-27189" href="../Substitution/#plfa_plfa-part2-Substitution-10981" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-27197" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-27198" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-27200" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-27202" href="../Substitution/#plfa_plfa-part2-Substitution-26429" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-27203" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-27205" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27206" href="../Substitution/#plfa_plfa-part2-Substitution-11728" class="Function">cong-cons</a> <a id="plfa_plfa-part2-Substitution-27216" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-27221" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27222" href="../Substitution/#plfa_plfa-part2-Substitution-17533" class="Function">sub-idR</a><a id="plfa_plfa-part2-Substitution-27229" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-27230" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-27232" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-27234" href="../Substitution/#plfa_plfa-part2-Substitution-26435" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-27235" class="Symbol">}))</a> <a id="plfa_plfa-part2-Substitution-27239" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-27244" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-27253" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27255" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27257" href="../Substitution/#plfa_plfa-part2-Substitution-26435" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27259" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27261" href="../Substitution/#plfa_plfa-part2-Substitution-26432" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-27263" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-27265" href="../Substitution/#plfa_plfa-part2-Substitution-26435" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27267" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27269" href="../Substitution/#plfa_plfa-part2-Substitution-26429" class="Bound">N</a>
     <a id="plfa_plfa-part2-Substitution-27276" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-27279" href="../Substitution/#plfa_plfa-part2-Substitution-10981" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-27287" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-27288" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-27290" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-27292" href="../Substitution/#plfa_plfa-part2-Substitution-26429" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-27293" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-27295" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27296" href="../Substitution/#plfa_plfa-part2-Substitution-11728" class="Function">cong-cons</a> <a id="plfa_plfa-part2-Substitution-27306" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-27311" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27312" href="../Substitution/#plfa_plfa-part2-Substitution-8981" class="Function">sub-idL</a><a id="plfa_plfa-part2-Substitution-27319" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-27320" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-27322" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-27324" href="../Substitution/#plfa_plfa-part2-Substitution-26435" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-27325" class="Symbol">}))</a> <a id="plfa_plfa-part2-Substitution-27329" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-27334" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-27343" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27345" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27347" href="../Substitution/#plfa_plfa-part2-Substitution-26435" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27349" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27351" href="../Substitution/#plfa_plfa-part2-Substitution-26432" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-27353" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-27355" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27356" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-27360" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-27362" href="../Substitution/#plfa_plfa-part2-Substitution-26435" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-27363" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-27365" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27367" href="../Substitution/#plfa_plfa-part2-Substitution-26429" class="Bound">N</a>
     <a id="plfa_plfa-part2-Substitution-27374" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-27377" href="../Substitution/#plfa_plfa-part2-Substitution-10981" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-27385" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-27386" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-27388" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-27390" href="../Substitution/#plfa_plfa-part2-Substitution-26429" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-27391" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-27393" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27394" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1693" class="Function">sym</a> <a id="plfa_plfa-part2-Substitution-27398" href="../Substitution/#plfa_plfa-part2-Substitution-9092" class="Function">sub-dist</a><a id="plfa_plfa-part2-Substitution-27406" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-27408" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-27413" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-27422" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27424" href="../Substitution/#plfa_plfa-part2-Substitution-26432" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-27426" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-27428" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-27432" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-27434" href="../Substitution/#plfa_plfa-part2-Substitution-26435" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27436" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27438" href="../Substitution/#plfa_plfa-part2-Substitution-26429" class="Bound">N</a>
     <a id="plfa_plfa-part2-Substitution-27445" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-27448" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1693" class="Function">sym</a> <a id="plfa_plfa-part2-Substitution-27452" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27453" href="../Substitution/#plfa_plfa-part2-Substitution-22834" class="Function">sub-sub</a><a id="plfa_plfa-part2-Substitution-27460" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-27461" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-27463" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-27465" href="../Substitution/#plfa_plfa-part2-Substitution-26429" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-27466" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-27469" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-27478" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27480" href="../Substitution/#plfa_plfa-part2-Substitution-26435" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27482" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27484" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27485" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27487" href="../Substitution/#plfa_plfa-part2-Substitution-26432" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-27489" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-27491" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-27495" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27497" href="../Substitution/#plfa_plfa-part2-Substitution-26429" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-27498" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-27505" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-27508" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-27513" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27515" href="../Substitution/#plfa_plfa-part2-Substitution-26435" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27517" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27519" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27520" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1693" class="Function">sym</a> <a id="plfa_plfa-part2-Substitution-27524" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27525" href="../Substitution/#plfa_plfa-part2-Substitution-10981" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-27533" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-27534" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-27536" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-27538" href="../Substitution/#plfa_plfa-part2-Substitution-26429" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-27539" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-27541" href="../Substitution/#plfa_plfa-part2-Substitution-15648" class="Function">subst-Z-cons-ids</a> <a id="plfa_plfa-part2-Substitution-27558" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Substitution-27562" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-27565" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-27574" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27576" href="../Substitution/#plfa_plfa-part2-Substitution-26435" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27578" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27580" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27581" href="../Substitution/#plfa_plfa-part2-Substitution-26429" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-27583" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-27585" href="../Substitution/#plfa_plfa-part2-Substitution-26432" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-27587" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a><a id="plfa_plfa-part2-Substitution-27588" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-27595" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
</pre><p>A corollary of <code>subst-commute</code> is that <code>rename</code> also commutes with substitution. In the proof below, we first exchange <code>rename ρ</code> for the substitution <code>⟪ ren ρ ⟫</code>, and apply <code>subst-commute</code>, and then convert back to <code>rename ρ</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-rename-subst-commute"></a><a id="plfa_plfa-part2-Substitution-27839" href="../Substitution/#plfa_plfa-part2-Substitution-27839" class="Function">rename-subst-commute</a> <a id="plfa_plfa-part2-Substitution-27860" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-27862" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-27864" href="../Substitution/#plfa_plfa-part2-Substitution-27864" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-27866" href="../Substitution/#plfa_plfa-part2-Substitution-27866" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-27867" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-27869" href="../Substitution/#plfa_plfa-part2-Substitution-27869" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-27871" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-27873" href="../Substitution/#plfa_plfa-part2-Substitution-27864" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-27875" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-27877" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-Substitution-27879" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-27881" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-27882" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-27884" href="../Substitution/#plfa_plfa-part2-Substitution-27884" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-27886" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-27888" href="../Substitution/#plfa_plfa-part2-Substitution-27864" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-27890" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-27892" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-27893" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-27895" href="../Substitution/#plfa_plfa-part2-Substitution-27895" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-27897" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-27899" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-27906" href="../Substitution/#plfa_plfa-part2-Substitution-27864" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-27908" href="../Substitution/#plfa_plfa-part2-Substitution-27866" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-27910" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Substitution-27916" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-27918" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27919" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-27926" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27927" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-27931" href="../Substitution/#plfa_plfa-part2-Substitution-27895" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-27932" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-27934" href="../Substitution/#plfa_plfa-part2-Substitution-27869" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-27935" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-27937" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-27939" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-27946" href="../Substitution/#plfa_plfa-part2-Substitution-27895" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-27948" href="../Substitution/#plfa_plfa-part2-Substitution-27884" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-27950" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a> <a id="plfa_plfa-part2-Substitution-27952" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-27954" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-27961" href="../Substitution/#plfa_plfa-part2-Substitution-27895" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-27963" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27964" href="../Substitution/#plfa_plfa-part2-Substitution-27869" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-27966" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-27968" href="../Substitution/#plfa_plfa-part2-Substitution-27884" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-27970" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a><a id="plfa_plfa-part2-Substitution-27971" class="Symbol">)</a>
<a id="plfa_plfa-part2-Substitution-27973" href="../Substitution/#plfa_plfa-part2-Substitution-27839" class="Function">rename-subst-commute</a> <a id="plfa_plfa-part2-Substitution-27994" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-27995" href="../Substitution/#plfa_plfa-part2-Substitution-27995" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-27996" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-27998" href="../Substitution/#plfa_plfa-part2-Substitution-27998" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-27999" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-28001" href="../Substitution/#plfa_plfa-part2-Substitution-28001" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-28002" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-28004" href="../Substitution/#plfa_plfa-part2-Substitution-28004" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-28005" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-28007" href="../Substitution/#plfa_plfa-part2-Substitution-28007" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-28008" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-28010" class="Symbol">=</a>
     <a id="plfa_plfa-part2-Substitution-28017" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
       <a id="plfa_plfa-part2-Substitution-28030" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28031" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-28038" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28039" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-28043" href="../Substitution/#plfa_plfa-part2-Substitution-28007" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-28044" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28046" href="../Substitution/#plfa_plfa-part2-Substitution-28001" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-28047" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28049" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-28051" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-28058" href="../Substitution/#plfa_plfa-part2-Substitution-28007" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-28060" href="../Substitution/#plfa_plfa-part2-Substitution-28004" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-28062" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a>
     <a id="plfa_plfa-part2-Substitution-28069" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-28072" href="../Substitution/#plfa_plfa-part2-Substitution-10981" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-28081" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28082" href="../Substitution/#plfa_plfa-part2-Substitution-11473" class="Function">cong-sub-zero</a> <a id="plfa_plfa-part2-Substitution-28096" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28097" href="../Substitution/#plfa_plfa-part2-Substitution-13483" class="Function">rename-subst-ren</a><a id="plfa_plfa-part2-Substitution-28113" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28114" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-28116" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-28118" href="../Substitution/#plfa_plfa-part2-Substitution-28004" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-28119" class="Symbol">}))</a>
                 <a id="plfa_plfa-part2-Substitution-28140" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28141" href="../Substitution/#plfa_plfa-part2-Substitution-13483" class="Function">rename-subst-ren</a><a id="plfa_plfa-part2-Substitution-28157" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28158" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-28160" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-28162" href="../Substitution/#plfa_plfa-part2-Substitution-28001" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-28163" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-28166" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-28175" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28176" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-28178" href="../Substitution/#plfa_plfa-part2-Substitution-6492" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-28182" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28183" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-28187" href="../Substitution/#plfa_plfa-part2-Substitution-28007" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-28188" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28190" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-28192" href="../Substitution/#plfa_plfa-part2-Substitution-28001" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-28193" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28195" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-28197" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-28199" href="../Substitution/#plfa_plfa-part2-Substitution-6492" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-28203" href="../Substitution/#plfa_plfa-part2-Substitution-28007" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-28205" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-28207" href="../Substitution/#plfa_plfa-part2-Substitution-28004" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-28209" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a>
     <a id="plfa_plfa-part2-Substitution-28216" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-28219" href="../Substitution/#plfa_plfa-part2-Substitution-10981" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-28228" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-28233" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28234" href="../Substitution/#plfa_plfa-part2-Substitution-10981" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-28242" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28243" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-28245" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-28247" href="../Substitution/#plfa_plfa-part2-Substitution-28001" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-28248" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-28250" href="../Substitution/#plfa_plfa-part2-Substitution-13110" class="Function">ren-ext</a> <a id="plfa_plfa-part2-Substitution-28258" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Substitution-28262" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28264" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-28273" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28274" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-28276" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-28281" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28282" href="../Substitution/#plfa_plfa-part2-Substitution-6492" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-28286" href="../Substitution/#plfa_plfa-part2-Substitution-28007" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-28287" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28289" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-28291" href="../Substitution/#plfa_plfa-part2-Substitution-28001" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-28292" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28294" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-28296" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-28298" href="../Substitution/#plfa_plfa-part2-Substitution-6492" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-28302" href="../Substitution/#plfa_plfa-part2-Substitution-28007" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-28304" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-28306" href="../Substitution/#plfa_plfa-part2-Substitution-28004" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-28308" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a>
     <a id="plfa_plfa-part2-Substitution-28315" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-28318" href="../Substitution/#plfa_plfa-part2-Substitution-26294" class="Function">subst-commute</a><a id="plfa_plfa-part2-Substitution-28331" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28332" class="Argument">N</a> <a id="plfa_plfa-part2-Substitution-28334" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-28336" href="../Substitution/#plfa_plfa-part2-Substitution-28001" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-28337" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-28339" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-28348" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-28354" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28355" href="../Substitution/#plfa_plfa-part2-Substitution-6492" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-28359" href="../Substitution/#plfa_plfa-part2-Substitution-28007" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-28360" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28362" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28363" href="../Substitution/#plfa_plfa-part2-Substitution-28001" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-28365" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-28367" href="../Substitution/#plfa_plfa-part2-Substitution-28004" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-28369" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a><a id="plfa_plfa-part2-Substitution-28370" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-28377" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-28380" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1693" class="Function">sym</a> <a id="plfa_plfa-part2-Substitution-28384" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28385" href="../Substitution/#plfa_plfa-part2-Substitution-13483" class="Function">rename-subst-ren</a><a id="plfa_plfa-part2-Substitution-28401" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28403" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-28412" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-28419" href="../Substitution/#plfa_plfa-part2-Substitution-28007" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-28421" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28422" href="../Substitution/#plfa_plfa-part2-Substitution-28001" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-28424" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-28426" href="../Substitution/#plfa_plfa-part2-Substitution-28004" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-28428" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a><a id="plfa_plfa-part2-Substitution-28429" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-28436" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
</pre><p>To present the substitution lemma, we introduce the following notation for substituting a term <code>M</code> for index 1 within term <code>N</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-_〔_〕"></a><a id="plfa_plfa-part2-Substitution-28580" href="../Substitution/#plfa_plfa-part2-Substitution-28580" class="Function Operator">_〔_〕</a> <a id="plfa_plfa-part2-Substitution-28585" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-28587" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-28589" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28590" href="../Substitution/#plfa_plfa-part2-Substitution-28590" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-28592" href="../Substitution/#plfa_plfa-part2-Substitution-28592" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-28594" href="../Substitution/#plfa_plfa-part2-Substitution-28594" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-28596" href="../Substitution/#plfa_plfa-part2-Substitution-28596" class="Bound">C</a><a id="plfa_plfa-part2-Substitution-28597" class="Symbol">}</a>
        <a id="plfa_plfa-part2-Substitution-28607" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-28609" href="../Substitution/#plfa_plfa-part2-Substitution-28590" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-28611" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-28613" href="../Substitution/#plfa_plfa-part2-Substitution-28594" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-28615" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-28617" href="../Substitution/#plfa_plfa-part2-Substitution-28596" class="Bound">C</a> <a id="plfa_plfa-part2-Substitution-28619" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-28621" href="../Substitution/#plfa_plfa-part2-Substitution-28592" class="Bound">A</a>
        <a id="plfa_plfa-part2-Substitution-28631" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-28633" href="../Substitution/#plfa_plfa-part2-Substitution-28590" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-28635" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-28637" href="../Substitution/#plfa_plfa-part2-Substitution-28594" class="Bound">B</a>
          <a id="plfa_plfa-part2-Substitution-28649" class="Comment">---------</a>
        <a id="plfa_plfa-part2-Substitution-28667" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-28669" href="../Substitution/#plfa_plfa-part2-Substitution-28590" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-28671" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-28673" href="../Substitution/#plfa_plfa-part2-Substitution-28596" class="Bound">C</a> <a id="plfa_plfa-part2-Substitution-28675" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-28677" href="../Substitution/#plfa_plfa-part2-Substitution-28592" class="Bound">A</a>
<a id="plfa_plfa-part2-Substitution-28679" href="../Substitution/#plfa_plfa-part2-Substitution-28580" class="Function Operator">_〔_〕</a> <a id="plfa_plfa-part2-Substitution-28684" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28685" href="../Substitution/#plfa_plfa-part2-Substitution-28685" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-28686" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-28688" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28689" href="../Substitution/#plfa_plfa-part2-Substitution-28689" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-28690" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-28692" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28693" href="../Substitution/#plfa_plfa-part2-Substitution-28693" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-28694" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-28696" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28697" href="../Substitution/#plfa_plfa-part2-Substitution-28697" class="Bound">C</a><a id="plfa_plfa-part2-Substitution-28698" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-28700" href="../Substitution/#plfa_plfa-part2-Substitution-28700" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-28702" href="../Substitution/#plfa_plfa-part2-Substitution-28702" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-28704" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-28709" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-28715" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28716" href="../Substitution/#plfa_plfa-part2-Substitution-28685" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-28718" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-28720" href="../Substitution/#plfa_plfa-part2-Substitution-28693" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-28722" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-28724" href="../Substitution/#plfa_plfa-part2-Substitution-28697" class="Bound">C</a><a id="plfa_plfa-part2-Substitution-28725" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-28727" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28728" href="../Substitution/#plfa_plfa-part2-Substitution-28685" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-28730" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-28732" href="../Substitution/#plfa_plfa-part2-Substitution-28697" class="Bound">C</a><a id="plfa_plfa-part2-Substitution-28733" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-28735" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28736" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-28741" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28742" href="../Untyped/#plfa_plfa-part2-Untyped-7207" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Substitution-28753" href="../Substitution/#plfa_plfa-part2-Substitution-28702" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-28754" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-28757" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28758" href="../Substitution/#plfa_plfa-part2-Substitution-28689" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-28759" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-28761" href="../Substitution/#plfa_plfa-part2-Substitution-28700" class="Bound">N</a>
</pre><p>The substitution lemma is stated as follows and proved as a corollary of the <code>subst-commute</code> lemma.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-substitution"></a><a id="plfa_plfa-part2-Substitution-28877" href="../Substitution/#plfa_plfa-part2-Substitution-28877" class="Function">substitution</a> <a id="plfa_plfa-part2-Substitution-28890" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-28892" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-28894" href="../Substitution/#plfa_plfa-part2-Substitution-28894" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-28895" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-28897" href="../Substitution/#plfa_plfa-part2-Substitution-28897" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-28899" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-28901" href="../Substitution/#plfa_plfa-part2-Substitution-28894" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-28903" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-28905" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-Substitution-28907" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-28909" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-Substitution-28911" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-28913" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-28914" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-28916" href="../Substitution/#plfa_plfa-part2-Substitution-28916" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-28918" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-28920" href="../Substitution/#plfa_plfa-part2-Substitution-28894" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-28922" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-28924" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-Substitution-28926" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-28928" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-28929" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-28931" href="../Substitution/#plfa_plfa-part2-Substitution-28931" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-28933" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-28935" href="../Substitution/#plfa_plfa-part2-Substitution-28894" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-28937" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-28939" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-28940" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Substitution-28946" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-28948" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28949" href="../Substitution/#plfa_plfa-part2-Substitution-28897" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-28951" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-28953" href="../Substitution/#plfa_plfa-part2-Substitution-28916" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-28955" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a><a id="plfa_plfa-part2-Substitution-28956" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28958" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-28960" href="../Substitution/#plfa_plfa-part2-Substitution-28931" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-28962" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a> <a id="plfa_plfa-part2-Substitution-28964" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-28966" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28967" href="../Substitution/#plfa_plfa-part2-Substitution-28897" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-28969" href="../Substitution/#plfa_plfa-part2-Substitution-28580" class="Function Operator">〔</a> <a id="plfa_plfa-part2-Substitution-28971" href="../Substitution/#plfa_plfa-part2-Substitution-28931" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-28973" href="../Substitution/#plfa_plfa-part2-Substitution-28580" class="Function Operator">〕</a><a id="plfa_plfa-part2-Substitution-28974" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28976" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-28978" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28979" href="../Substitution/#plfa_plfa-part2-Substitution-28916" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-28981" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-28983" href="../Substitution/#plfa_plfa-part2-Substitution-28931" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-28985" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a><a id="plfa_plfa-part2-Substitution-28986" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28988" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a>
<a id="plfa_plfa-part2-Substitution-28990" href="../Substitution/#plfa_plfa-part2-Substitution-28877" class="Function">substitution</a><a id="plfa_plfa-part2-Substitution-29002" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-29003" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-29005" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-29007" href="../Substitution/#plfa_plfa-part2-Substitution-29007" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-29008" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-29010" class="Argument">N</a> <a id="plfa_plfa-part2-Substitution-29012" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-29014" href="../Substitution/#plfa_plfa-part2-Substitution-29014" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-29015" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-29017" class="Argument">L</a> <a id="plfa_plfa-part2-Substitution-29019" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-29021" href="../Substitution/#plfa_plfa-part2-Substitution-29021" class="Bound">L</a><a id="plfa_plfa-part2-Substitution-29022" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-29024" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-29029" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1693" class="Function">sym</a> <a id="plfa_plfa-part2-Substitution-29033" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-29034" href="../Substitution/#plfa_plfa-part2-Substitution-26294" class="Function">subst-commute</a><a id="plfa_plfa-part2-Substitution-29047" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-29048" class="Argument">N</a> <a id="plfa_plfa-part2-Substitution-29050" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-29052" href="../Substitution/#plfa_plfa-part2-Substitution-29007" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-29053" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-29055" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-29057" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-29059" href="../Substitution/#plfa_plfa-part2-Substitution-29014" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-29060" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-29062" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-29064" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-29066" href="../Untyped/#plfa_plfa-part2-Untyped-7207" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Substitution-29077" href="../Substitution/#plfa_plfa-part2-Substitution-29021" class="Bound">L</a><a id="plfa_plfa-part2-Substitution-29078" class="Symbol">})</a>
</pre><h2 id="notes">Notes</h2><p>Most of the properties and proofs in this file are based on the paper <em>Autosubst: Reasoning with de Bruijn Terms and Parallel Substitution</em> by Schafer, Tebbi, and Smolka (ITP 2015). That paper, in turn, is based on the paper of Abadi, Cardelli, Curien, and Levy (1991) that defines the σ algebra.</p><h2 id="unicode">Unicode</h2><p>This chapter uses the following unicode:</p><pre><code>⟪  U+27EA  MATHEMATICAL LEFT DOUBLE ANGLE BRACKET (\&lt;&lt;)
⟫  U+27EA  MATHEMATICAL RIGHT DOUBLE ANGLE BRACKET (\&gt;&gt;)
↑  U+2191  UPWARDS ARROW (\u)
•  U+2022  BULLET (\bub)
⨟  U+2A1F  Z NOTATION SCHEMA COMPOSITION (C-x 8 RET Z NOTATION SCHEMA COMPOSITION)
〔  U+3014  LEFT TORTOISE SHELL BRACKET (\( option 9 on page 2)
〕  U+3015  RIGHT TORTOISE SHELL BRACKET (\) option 9 on page 2)</code></pre></div><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../ContextualEquivalence/">Prev</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/part2/Substitution.lagda.md">Source</a></li><li class="separator">•</li><li><a class="pagelink" href="../Acknowledgements/">Next</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card" aria-label="Site"><data class="u-url" href="../"></data><div class="wrapper"><h2 class="footer-heading">Programming Language Foundations in Agda</h2><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk"><i class="far fa-envelope"></i>  wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><i class="fab fa-github"></i>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works"><i class="far fa-envelope"></i>  me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><i class="fab fa-github"></i>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><i class="fab fa-twitter"></i>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu"><i class="far fa-envelope"></i>  jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><i class="fab fa-github"></i>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><i class="fab fa-twitter"></i>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></div></footer></body></html>