<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../assets/css/light.css" integrity="sha512-J8Ko83OT11zQ2/+vowqJ0Ovx2JEWUBNPTbNptixluYAHAO009R7GVxRQNKA+Wq4skbsdZr1AEOjF2AeQmKt3/A==" title="Light" id="stylesheet-light"><link rel="stylesheet" href="../assets/css/dark.css" integrity="sha512-kK/Wf2991I8CFsf5/Qu/2GIm2Enzw8H70RQ/yHNIb6iGTPF/SKE0B+kxTG2HjcFOgcjfKxZ9Jr4bvSfuKraNWw==" title="Dark" id="stylesheet-dark" disabled><title>Programming Language Foundations in Agda – Substitution</title><script src="../assets/js/anchor.js" integrity="sha512-Y5IMGqYQp36NYYdEL6gXISLsHNpx0LxW0NS0twvYBvXI8GH5PZa1g5gm1B5lxg6tlFyUAiOOfgKL/NIn0dtY4w==" id="script-anchor"></script><script src="../assets/js/darkmode.js" integrity="sha512-iUX9HnSphH4WbMv88MYJEFtLfkCtTHrvWyFwjigSm5GkwHv1L31GP5grIGDo7kI2jftuYVvt4xu4qeCn2fKbww==" id="script-darkmode"></script><script src="../assets/js/main.js" integrity="sha512-X7aZg6IUKq1TvTVjSureaMGKZ/ylbAD7kxiU2w42IUgh4lUTWoOsoIWzNvrqkwBJdQ1y2GsS67gtsv39Uuq6ew==" id="script-main"></script></head><body><header class="site-header" aria-label="Site"><div class="wrapper"><a class="site-title" href="../">Programming Language Foundations in Agda</a><nav class="site-nav" aria-label="Site"><input type="checkbox" id="nav-trigger" class="nav-trigger"><label for="nav-trigger"><span class="menu-icon"><svg class="svg-icon grey" viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span></label><div class="trigger"><a class="page-link" href="../">The Book</a> <a class="page-link" href="../Announcements/">Announcements</a> <a class="page-link" href="../GettingStarted/">Getting Started</a> <a class="page-link" href="../Citing/">Citing</a> <a class="page-link" href="https://agda-zh.github.io/PLFA-zh/">中文</a> <a class="page-link" onclick="window.darkmode.toggle()"><i id="darkmode-trigger" class="fas fa-moon"></i> </a><a class="page-link" href="../plfa.epub"><i class="fa fa-book"></i></a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../ContextualEquivalence/">Prev</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/part2/Substitution.lagda.md">Source</a></li><li class="separator">•</li><li><a class="pagelink" href="../Acknowledgements/">Next</a></li><li class="separator">•</li></ul></nav><header class="post-header" aria-label="Chapter"><h1 class="post-title">Substitution: Substitution in the untyped lambda calculus</h1></header><div class="post-content"><pre class="Agda"><a id="plfa_plfa-part2-Substitution-118" class="Keyword">module</a> <a id="plfa_plfa-part2-Substitution-125" href="../Substitution/#" class="Module">plfa.part2.Substitution</a> <a id="plfa_plfa-part2-Substitution-149" class="Keyword">where</a>
</pre><h2 id="introduction">Introduction</h2><p>The primary purpose of this chapter is to prove that substitution commutes with itself. Barendregt (1984) refers to this as the substitution lemma:</p><pre><code>M [x:=N] [y:=L] = M [y:=L] [x:= N[y:=L] ]</code></pre><p>In our setting, with de Bruijn indices for variables, the statement of the lemma becomes:</p><pre><code>M [ N ] [ L ] ≡  M〔 L 〕[ N [ L ] ]                     (substitution)</code></pre><p>where the notation <code>M 〔 L 〕</code> is for substituting L for index 1 inside M. In addition, because we define substitution in terms of parallel substitution, we have the following generalization, replacing the substitution of L with an arbitrary parallel substitution σ.</p><pre><code>subst σ (M [ N ]) ≡ (subst (exts σ) M) [ subst σ N ]    (subst-commute)</code></pre><p>The special case for renamings is also useful.</p><pre><code>rename ρ (M [ N ]) ≡ (rename (ext ρ) M) [ rename ρ N ]
                                                 (rename-subst-commute)</code></pre><p>The secondary purpose of this chapter is to define the σ algebra of parallel substitution due to Abadi, Cardelli, Curien, and Levy (1991). The equations of this algebra not only help us prove the substitution lemma, but they are generally useful. Furthermore, when the equations are applied from left to right, they form a rewrite system that <em>decides</em> whether any two substitutions are equal.</p><h2 id="imports">Imports</h2><pre class="Agda"><a id="plfa_plfa-part2-Substitution-1482" class="Keyword">import</a> <a id="plfa_plfa-part2-Substitution-1489" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="plfa_plfa-part2-Substitution-1527" class="Symbol">as</a> <a id="plfa_plfa-part2-Substitution-1530" class="Module">Eq</a>
<a id="plfa_plfa-part2-Substitution-1533" class="Keyword">open</a> <a id="plfa_plfa-part2-Substitution-1538" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.html" class="Module">Eq</a> <a id="plfa_plfa-part2-Substitution-1541" class="Keyword">using</a> <a id="plfa_plfa-part2-Substitution-1547" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-1548" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">_≡_</a><a id="plfa_plfa-part2-Substitution-1551" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1553" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Substitution-1557" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1559" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1693" class="Function">sym</a><a id="plfa_plfa-part2-Substitution-1562" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1564" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a><a id="plfa_plfa-part2-Substitution-1568" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1570" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1376" class="Function">cong₂</a><a id="plfa_plfa-part2-Substitution-1575" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1577" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1470" class="Function">cong-app</a><a id="plfa_plfa-part2-Substitution-1585" class="Symbol">)</a>
<a id="plfa_plfa-part2-Substitution-1587" class="Keyword">open</a> <a id="plfa_plfa-part2-Substitution-1592" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2717" class="Module">Eq.≡-Reasoning</a> <a id="plfa_plfa-part2-Substitution-1607" class="Keyword">using</a> <a id="plfa_plfa-part2-Substitution-1613" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-1614" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin_</a><a id="plfa_plfa-part2-Substitution-1620" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1622" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">_≡⟨⟩_</a><a id="plfa_plfa-part2-Substitution-1627" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1629" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">step-≡</a><a id="plfa_plfa-part2-Substitution-1635" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1637" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">_∎</a><a id="plfa_plfa-part2-Substitution-1639" class="Symbol">)</a>
<a id="plfa_plfa-part2-Substitution-1641" class="Keyword">open</a> <a id="plfa_plfa-part2-Substitution-1646" class="Keyword">import</a> <a id="plfa_plfa-part2-Substitution-1653" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.html" class="Module">Function</a> <a id="plfa_plfa-part2-Substitution-1662" class="Keyword">using</a> <a id="plfa_plfa-part2-Substitution-1668" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-1669" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">_∘_</a><a id="plfa_plfa-part2-Substitution-1672" class="Symbol">)</a>
<a id="plfa_plfa-part2-Substitution-1674" class="Keyword">open</a> <a id="plfa_plfa-part2-Substitution-1679" class="Keyword">import</a> <a id="plfa_plfa-part2-Substitution-1686" href="../Untyped/#" class="Module">plfa.part2.Untyped</a>
     <a id="plfa_plfa-part2-Substitution-1710" class="Keyword">using</a> <a id="plfa_plfa-part2-Substitution-1716" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-1717" href="../Untyped/#plfa_plfa-part2-Untyped-2490" class="Datatype">Type</a><a id="plfa_plfa-part2-Substitution-1721" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1723" href="../Untyped/#plfa_plfa-part2-Untyped-2782" class="Datatype">Context</a><a id="plfa_plfa-part2-Substitution-1730" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1732" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">_⊢_</a><a id="plfa_plfa-part2-Substitution-1735" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1737" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-1738" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1740" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">_∋_</a><a id="plfa_plfa-part2-Substitution-1743" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1745" href="../Untyped/#plfa_plfa-part2-Untyped-2804" class="InductiveConstructor">∅</a><a id="plfa_plfa-part2-Substitution-1746" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1748" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">_,_</a><a id="plfa_plfa-part2-Substitution-1751" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1753" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-1754" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1756" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part2-Substitution-1758" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1760" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`_</a><a id="plfa_plfa-part2-Substitution-1762" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1764" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ_</a><a id="plfa_plfa-part2-Substitution-1766" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1768" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">_·_</a><a id="plfa_plfa-part2-Substitution-1771" class="Symbol">;</a>
            <a id="plfa_plfa-part2-Substitution-1785" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a><a id="plfa_plfa-part2-Substitution-1791" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1793" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a><a id="plfa_plfa-part2-Substitution-1798" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1800" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a><a id="plfa_plfa-part2-Substitution-1803" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1805" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a><a id="plfa_plfa-part2-Substitution-1809" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1811" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">_[_]</a><a id="plfa_plfa-part2-Substitution-1815" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1817" href="../Untyped/#plfa_plfa-part2-Untyped-7207" class="Function">subst-zero</a><a id="plfa_plfa-part2-Substitution-1827" class="Symbol">)</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-1842" class="Keyword">postulate</a>
  <a id="plfa_plfa-part2-Substitution-extensionality"></a><a id="plfa_plfa-part2-Substitution-1854" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-1869" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-1871" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-1873" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-1874" href="../Substitution/#plfa_plfa-part2-Substitution-1874" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-1876" href="../Substitution/#plfa_plfa-part2-Substitution-1876" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-1878" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-1880" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a><a id="plfa_plfa-part2-Substitution-1883" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-1885" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-1886" href="../Substitution/#plfa_plfa-part2-Substitution-1886" class="Bound">f</a> <a id="plfa_plfa-part2-Substitution-1888" href="../Substitution/#plfa_plfa-part2-Substitution-1888" class="Bound">g</a> <a id="plfa_plfa-part2-Substitution-1890" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-1892" href="../Substitution/#plfa_plfa-part2-Substitution-1874" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-1894" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-1896" href="../Substitution/#plfa_plfa-part2-Substitution-1876" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-1897" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Substitution-1903" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-1905" class="Symbol">(∀</a> <a id="plfa_plfa-part2-Substitution-1908" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-1909" href="../Substitution/#plfa_plfa-part2-Substitution-1909" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-1911" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-1913" href="../Substitution/#plfa_plfa-part2-Substitution-1874" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-1914" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-1916" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-1918" href="../Substitution/#plfa_plfa-part2-Substitution-1886" class="Bound">f</a> <a id="plfa_plfa-part2-Substitution-1920" href="../Substitution/#plfa_plfa-part2-Substitution-1909" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-1922" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-1924" href="../Substitution/#plfa_plfa-part2-Substitution-1888" class="Bound">g</a> <a id="plfa_plfa-part2-Substitution-1926" href="../Substitution/#plfa_plfa-part2-Substitution-1909" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-1927" class="Symbol">)</a>
      <a id="plfa_plfa-part2-Substitution-1935" class="Comment">-----------------------</a>
    <a id="plfa_plfa-part2-Substitution-1963" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-1965" href="../Substitution/#plfa_plfa-part2-Substitution-1886" class="Bound">f</a> <a id="plfa_plfa-part2-Substitution-1967" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-1969" href="../Substitution/#plfa_plfa-part2-Substitution-1888" class="Bound">g</a>
</pre><h2 id="notation">Notation</h2><p>We introduce the following shorthand for the type of a <em>renaming</em> from variables in context <code>Γ</code> to variables in context <code>Δ</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-Rename"></a><a id="plfa_plfa-part2-Substitution-2123" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-2130" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-2132" href="../Untyped/#plfa_plfa-part2-Untyped-2782" class="Datatype">Context</a> <a id="plfa_plfa-part2-Substitution-2140" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2142" href="../Untyped/#plfa_plfa-part2-Untyped-2782" class="Datatype">Context</a> <a id="plfa_plfa-part2-Substitution-2150" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2152" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a>
<a id="plfa_plfa-part2-Substitution-2156" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-2163" href="../Substitution/#plfa_plfa-part2-Substitution-2163" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-2165" href="../Substitution/#plfa_plfa-part2-Substitution-2165" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-2167" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-2169" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-2171" href="../Substitution/#plfa_plfa-part2-Substitution-2171" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-2172" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-2174" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2176" href="../Substitution/#plfa_plfa-part2-Substitution-2163" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-2178" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-2180" href="../Substitution/#plfa_plfa-part2-Substitution-2171" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-2182" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2184" href="../Substitution/#plfa_plfa-part2-Substitution-2165" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-2186" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-2188" href="../Substitution/#plfa_plfa-part2-Substitution-2171" class="Bound">A</a>
</pre><p>Similarly, we introduce the following shorthand for the type of a <em>substitution</em> from variables in context <code>Γ</code> to terms in context <code>Δ</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-Subst"></a><a id="plfa_plfa-part2-Substitution-2340" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-2346" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-2348" href="../Untyped/#plfa_plfa-part2-Untyped-2782" class="Datatype">Context</a> <a id="plfa_plfa-part2-Substitution-2356" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2358" href="../Untyped/#plfa_plfa-part2-Untyped-2782" class="Datatype">Context</a> <a id="plfa_plfa-part2-Substitution-2366" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2368" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Primitive.html#320" class="Primitive">Set</a>
<a id="plfa_plfa-part2-Substitution-2372" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-2378" href="../Substitution/#plfa_plfa-part2-Substitution-2378" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-2380" href="../Substitution/#plfa_plfa-part2-Substitution-2380" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-2382" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-2384" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-2386" href="../Substitution/#plfa_plfa-part2-Substitution-2386" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-2387" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-2389" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2391" href="../Substitution/#plfa_plfa-part2-Substitution-2378" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-2393" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-2395" href="../Substitution/#plfa_plfa-part2-Substitution-2386" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-2397" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2399" href="../Substitution/#plfa_plfa-part2-Substitution-2380" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-2401" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-2403" href="../Substitution/#plfa_plfa-part2-Substitution-2386" class="Bound">A</a>
</pre><p>We use the following more succinct notation for the <code>subst</code> function.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-⟪_⟫"></a><a id="plfa_plfa-part2-Substitution-2489" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪_⟫</a> <a id="plfa_plfa-part2-Substitution-2493" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-2495" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-2497" href="../Substitution/#plfa_plfa-part2-Substitution-2497" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-2499" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-2501" href="../Substitution/#plfa_plfa-part2-Substitution-2501" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-2502" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-2504" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2506" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-2512" href="../Substitution/#plfa_plfa-part2-Substitution-2497" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-2514" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-2516" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2518" href="../Substitution/#plfa_plfa-part2-Substitution-2497" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-2520" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-2522" href="../Substitution/#plfa_plfa-part2-Substitution-2501" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-2524" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2526" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-2528" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-2530" href="../Substitution/#plfa_plfa-part2-Substitution-2501" class="Bound">A</a>
<a id="plfa_plfa-part2-Substitution-2532" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-2534" href="../Substitution/#plfa_plfa-part2-Substitution-2534" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-2536" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-2538" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-2540" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-2542" href="../Substitution/#plfa_plfa-part2-Substitution-2542" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-2544" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2546" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-2552" href="../Substitution/#plfa_plfa-part2-Substitution-2534" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-2554" href="../Substitution/#plfa_plfa-part2-Substitution-2542" class="Bound">M</a>
</pre><h2 id="the-σ-algebra-of-substitution">The σ algebra of substitution</h2><p>A substitution maps de Bruijn indices (natural numbers) to terms, so we can view a substitution simply as a sequence of terms, or more precisely, as an infinite sequence of terms. The σ algebra consists of four operations for building such sequences: identity <code>ids</code>, shift <code>↑</code>, cons <code>M • σ</code>, and sequencing <code>σ ⨟ τ</code>. The sequence <code>0, 1, 2, ...</code> is constructed by the identity substitution.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-ids"></a><a id="plfa_plfa-part2-Substitution-2995" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-2999" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-3001" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-3003" href="../Substitution/#plfa_plfa-part2-Substitution-3003" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-3004" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-3006" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-3008" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-3014" href="../Substitution/#plfa_plfa-part2-Substitution-3003" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-3016" href="../Substitution/#plfa_plfa-part2-Substitution-3003" class="Bound">Γ</a>
<a id="plfa_plfa-part2-Substitution-3018" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-3022" href="../Substitution/#plfa_plfa-part2-Substitution-3022" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-3024" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-3026" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-3028" href="../Substitution/#plfa_plfa-part2-Substitution-3022" class="Bound">x</a>
</pre><p>The shift operation <code>↑</code> constructs the sequence</p><pre><code>1, 2, 3, ...</code></pre><p>and is defined as follows.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-↑"></a><a id="plfa_plfa-part2-Substitution-3138" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a> <a id="plfa_plfa-part2-Substitution-3140" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-3142" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-3144" href="../Substitution/#plfa_plfa-part2-Substitution-3144" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-3146" href="../Substitution/#plfa_plfa-part2-Substitution-3146" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-3147" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-3149" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-3151" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-3157" href="../Substitution/#plfa_plfa-part2-Substitution-3144" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-3159" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-3160" href="../Substitution/#plfa_plfa-part2-Substitution-3144" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-3162" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-3164" href="../Substitution/#plfa_plfa-part2-Substitution-3146" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-3165" class="Symbol">)</a>
<a id="plfa_plfa-part2-Substitution-3167" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a> <a id="plfa_plfa-part2-Substitution-3169" href="../Substitution/#plfa_plfa-part2-Substitution-3169" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-3171" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-3173" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-3175" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-3176" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-3178" href="../Substitution/#plfa_plfa-part2-Substitution-3169" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-3179" class="Symbol">)</a>
</pre><p>Given a term <code>M</code> and substitution <code>σ</code>, the operation <code>M • σ</code> constructs the sequence</p><pre><code>M , σ 0, σ 1, σ 2, ...</code></pre><p>This operation is analogous to the <code>cons</code> operation of Lisp.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-3370" class="Keyword">infixr</a> <a id="plfa_plfa-part2-Substitution-3377" class="Number">6</a> <a id="plfa_plfa-part2-Substitution-3379" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">_•_</a>

<a id="plfa_plfa-part2-Substitution-_•_"></a><a id="plfa_plfa-part2-Substitution-3384" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">_•_</a> <a id="plfa_plfa-part2-Substitution-3388" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-3390" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-3392" href="../Substitution/#plfa_plfa-part2-Substitution-3392" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-3394" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-3396" href="../Substitution/#plfa_plfa-part2-Substitution-3396" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-3397" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-3399" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-3401" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-3402" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-3404" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-3406" href="../Substitution/#plfa_plfa-part2-Substitution-3396" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-3407" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-3409" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-3411" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-3417" href="../Substitution/#plfa_plfa-part2-Substitution-3392" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-3419" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-3421" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-3423" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-3429" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-3430" href="../Substitution/#plfa_plfa-part2-Substitution-3392" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-3432" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-3434" href="../Substitution/#plfa_plfa-part2-Substitution-3396" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-3435" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-3437" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Bound">Δ</a>
<a id="plfa_plfa-part2-Substitution-3439" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-3440" href="../Substitution/#plfa_plfa-part2-Substitution-3440" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-3442" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-3444" href="../Substitution/#plfa_plfa-part2-Substitution-3444" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-3445" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-3447" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-Substitution-3449" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-3451" href="../Substitution/#plfa_plfa-part2-Substitution-3440" class="Bound">M</a>
<a id="plfa_plfa-part2-Substitution-3453" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-3454" href="../Substitution/#plfa_plfa-part2-Substitution-3454" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-3456" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-3458" href="../Substitution/#plfa_plfa-part2-Substitution-3458" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-3459" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-3461" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-3462" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-3464" href="../Substitution/#plfa_plfa-part2-Substitution-3464" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-3465" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-3467" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-3469" href="../Substitution/#plfa_plfa-part2-Substitution-3458" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-3471" href="../Substitution/#plfa_plfa-part2-Substitution-3464" class="Bound">x</a>
</pre><p>Given two substitutions <code>σ</code> and <code>τ</code>, the sequencing operation <code>σ ⨟ τ</code> composes the two substitutions by first applying <code>σ</code> and then applying <code>τ</code>. So it produces the sequence</p><pre><code>⟪τ⟫(σ 0), ⟪τ⟫(σ 1), ⟪τ⟫(σ 2), ...</code></pre><p>Here is the definition.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-3725" class="Keyword">infixr</a> <a id="plfa_plfa-part2-Substitution-3732" class="Number">5</a> <a id="plfa_plfa-part2-Substitution-3734" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">_⨟_</a>

<a id="plfa_plfa-part2-Substitution-_⨟_"></a><a id="plfa_plfa-part2-Substitution-3739" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">_⨟_</a> <a id="plfa_plfa-part2-Substitution-3743" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-3745" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-3747" href="../Substitution/#plfa_plfa-part2-Substitution-3747" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-3749" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-3751" href="../Substitution/#plfa_plfa-part2-Substitution-3751" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-3752" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-3754" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-3756" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-3762" href="../Substitution/#plfa_plfa-part2-Substitution-3747" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-3764" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-3766" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-3768" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-3774" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-3776" href="../Substitution/#plfa_plfa-part2-Substitution-3751" class="Bound">Σ</a> <a id="plfa_plfa-part2-Substitution-3778" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-3780" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-3786" href="../Substitution/#plfa_plfa-part2-Substitution-3747" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-3788" href="../Substitution/#plfa_plfa-part2-Substitution-3751" class="Bound">Σ</a>
<a id="plfa_plfa-part2-Substitution-3790" href="../Substitution/#plfa_plfa-part2-Substitution-3790" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-3792" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-3794" href="../Substitution/#plfa_plfa-part2-Substitution-3794" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-3796" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-3798" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-3800" href="../Substitution/#plfa_plfa-part2-Substitution-3794" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-3802" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-3804" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-3806" href="../Substitution/#plfa_plfa-part2-Substitution-3790" class="Bound">σ</a>
</pre><p>For the sequencing operation, Abadi et al. use the notation of function composition, writing <code>σ ∘ τ</code>, but still with <code>σ</code> applied before <code>τ</code>, which is the opposite of standard mathematical practice. We instead write <code>σ ⨟ τ</code>, because semicolon is the standard notation for forward function composition.</p><h2 id="the-σ-algebra-equations">The σ algebra equations</h2><p>The σ algebra includes the following equations.</p><pre><code>(sub-head)  ⟪ M • σ ⟫ (` Z) ≡ M
(sub-tail)  ↑ ⨟ (M • σ)    ≡ σ
(sub-η)     (⟪ σ ⟫ (` Z)) • (↑ ⨟ σ) ≡ σ
(Z-shift)   (` Z) • ↑      ≡ ids

(sub-id)    ⟪ ids ⟫ M      ≡ M
(sub-app)   ⟪ σ ⟫ (L · M)  ≡ (⟪ σ ⟫ L) · (⟪ σ ⟫ M)
(sub-abs)   ⟪ σ ⟫ (ƛ N)    ≡ ƛ ⟪ σ ⟫ N
(sub-sub)   ⟪ τ ⟫ ⟪ σ ⟫ M  ≡ ⟪ σ ⨟ τ ⟫ M

(sub-idL)   ids ⨟ σ        ≡ σ
(sub-idR)   σ ⨟ ids        ≡ σ
(sub-assoc) (σ ⨟ τ) ⨟ θ    ≡ σ ⨟ (τ ⨟ θ)
(sub-dist)  (M • σ) ⨟ τ    ≡ (⟪ τ ⟫ M) • (σ ⨟ τ)</code></pre><p>The first group of equations describe how the <code>•</code> operator acts like cons. The equation <code>sub-head</code> says that the variable zero <code>Z</code> returns the head of the sequence (it acts like the <code>car</code> of Lisp). Similarly, <code>sub-tail</code> says that sequencing with shift <code>↑</code> returns the tail of the sequence (it acts like <code>cdr</code> of Lisp). The <code>sub-η</code> equation is the η-expansion rule for sequences, saying that taking the head and tail of a sequence, and then cons’ing them together yields the original sequence. The <code>Z-shift</code> equation says that cons’ing zero onto the shifted sequence produces the identity sequence.</p><p>The next four equations involve applying substitutions to terms. The equation <code>sub-id</code> says that the identity substitution returns the term unchanged. The equations <code>sub-app</code> and <code>sub-abs</code> says that substitution is a congruence for the lambda calculus. The <code>sub-sub</code> equation says that the sequence operator <code>⨟</code> behaves as intended.</p><p>The last four equations concern the sequencing of substitutions. The first two equations, <code>sub-idL</code> and <code>sub-idR</code>, say that <code>ids</code> is the left and right unit of the sequencing operator. The <code>sub-assoc</code> equation says that sequencing is associative. Finally, <code>sub-dist</code> says that post-sequencing distributes through cons.</p><h2 id="relating-the-σ-algebra-and-substitution-functions">Relating the σ algebra and substitution functions</h2><p>The definitions of substitution <code>N [ M ]</code> and parallel substitution <code>subst σ N</code> depend on several auxiliary functions: <code>rename</code>, <code>exts</code>, <code>ext</code>, and <code>subst-zero</code>. We shall relate those functions to terms in the σ algebra.</p><p>To begin with, renaming can be expressed in terms of substitution. We have</p><pre><code>rename ρ M ≡ ⟪ ren ρ ⟫ M               (rename-subst-ren)</code></pre><p>where <code>ren</code> turns a renaming <code>ρ</code> into a substitution by post-composing <code>ρ</code> with the identity substitution.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-ren"></a><a id="plfa_plfa-part2-Substitution-6481" href="../Substitution/#plfa_plfa-part2-Substitution-6481" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-6485" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-6487" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-6489" href="../Substitution/#plfa_plfa-part2-Substitution-6489" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-6491" href="../Substitution/#plfa_plfa-part2-Substitution-6491" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-6492" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-6494" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-6496" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-6503" href="../Substitution/#plfa_plfa-part2-Substitution-6489" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-6505" href="../Substitution/#plfa_plfa-part2-Substitution-6491" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-6507" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-6509" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-6515" href="../Substitution/#plfa_plfa-part2-Substitution-6489" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-6517" href="../Substitution/#plfa_plfa-part2-Substitution-6491" class="Bound">Δ</a>
<a id="plfa_plfa-part2-Substitution-6519" href="../Substitution/#plfa_plfa-part2-Substitution-6481" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-6523" href="../Substitution/#plfa_plfa-part2-Substitution-6523" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-6525" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-6527" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-6531" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-6533" href="../Substitution/#plfa_plfa-part2-Substitution-6523" class="Bound">ρ</a>
</pre><p>When the renaming is the increment function, then it is equivalent to shift.</p><pre><code>ren S_ ≡ ↑                             (ren-shift)

rename S_ M ≡ ⟪ ↑ ⟫ M                  (rename-shift)</code></pre><p>Renaming with the identity renaming leaves the term unchanged.</p><pre><code>rename (λ {A} x → x) M ≡ M             (rename-id)</code></pre><p>Next we relate the <code>exts</code> function to the σ algebra. Recall that the <code>exts</code> function extends a substitution as follows:</p><pre><code>exts σ = ` Z, rename S_ (σ 0), rename S_ (σ 1), rename S_ (σ 2), ...</code></pre><p>So <code>exts</code> is equivalent to cons’ing Z onto the sequence formed by applying <code>σ</code> and then shifting.</p><pre><code>exts σ ≡ ` Z • (σ ⨟ ↑)                (exts-cons-shift)</code></pre><p>The <code>ext</code> function does the same job as <code>exts</code> but for renamings instead of substitutions. So composing <code>ext</code> with <code>ren</code> is the same as composing <code>ren</code> with <code>exts</code>.</p><pre><code>ren (ext ρ) ≡ exts (ren ρ)            (ren-ext)</code></pre><p>Thus, we can recast the <code>exts-cons-shift</code> equation in terms of renamings.</p><pre><code>ren (ext ρ) ≡ ` Z • (ren ρ ⨟ ↑)       (ext-cons-Z-shift)</code></pre><p>It is also useful to specialize the <code>sub-sub</code> equation of the σ algebra to the situation where the first substitution is a renaming.</p><pre><code>⟪ σ ⟫ (rename ρ M) ≡ ⟪ σ ∘ ρ ⟫ M       (rename-subst)</code></pre><p>The <code>subst-zero M</code> substitution is equivalent to cons’ing <code>M</code> onto the identity substitution.</p><pre><code>subst-zero M ≡ M • ids                (subst-Z-cons-ids)</code></pre><p>Finally, sequencing <code>exts σ</code> with <code>subst-zero M</code> is equivalent to cons’ing <code>M</code> onto <code>σ</code>.</p><pre><code>exts σ ⨟ subst-zero M ≡ (M • σ)       (subst-zero-exts-cons)</code></pre><h2 id="proofs-of-sub-head-sub-tail-sub-η-z-shift-sub-idl-sub-dist-and-sub-app">Proofs of sub-head, sub-tail, sub-η, Z-shift, sub-idL, sub-dist, and sub-app</h2><p>We start with the proofs that are immediate from the definitions of the operators.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-sub-head"></a><a id="plfa_plfa-part2-Substitution-8246" href="../Substitution/#plfa_plfa-part2-Substitution-8246" class="Function">sub-head</a> <a id="plfa_plfa-part2-Substitution-8255" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8257" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-8259" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8260" href="../Substitution/#plfa_plfa-part2-Substitution-8260" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-8262" href="../Substitution/#plfa_plfa-part2-Substitution-8262" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-8263" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8265" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8266" href="../Substitution/#plfa_plfa-part2-Substitution-8266" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-8267" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8269" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8270" href="../Substitution/#plfa_plfa-part2-Substitution-8270" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-8272" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8274" href="../Substitution/#plfa_plfa-part2-Substitution-8262" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-8276" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-8278" href="../Substitution/#plfa_plfa-part2-Substitution-8266" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-8279" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-8281" href="../Substitution/#plfa_plfa-part2-Substitution-8281" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-8283" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8285" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-8291" href="../Substitution/#plfa_plfa-part2-Substitution-8260" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-8293" href="../Substitution/#plfa_plfa-part2-Substitution-8262" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-8294" class="Symbol">}</a>
         <a id="plfa_plfa-part2-Substitution-8305" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-8307" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-8309" href="../Substitution/#plfa_plfa-part2-Substitution-8270" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-8311" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-8313" href="../Substitution/#plfa_plfa-part2-Substitution-8281" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-8315" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-8317" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-8318" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-8320" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-8321" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-8323" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-8325" href="../Substitution/#plfa_plfa-part2-Substitution-8270" class="Bound">M</a>
<a id="plfa_plfa-part2-Substitution-8327" href="../Substitution/#plfa_plfa-part2-Substitution-8246" class="Function">sub-head</a> <a id="plfa_plfa-part2-Substitution-8336" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8338" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-sub-tail"></a><a id="plfa_plfa-part2-Substitution-8356" href="../Substitution/#plfa_plfa-part2-Substitution-8356" class="Function">sub-tail</a> <a id="plfa_plfa-part2-Substitution-8365" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8367" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-8369" href="../Substitution/#plfa_plfa-part2-Substitution-8369" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-8371" href="../Substitution/#plfa_plfa-part2-Substitution-8371" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-8372" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8374" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8375" href="../Substitution/#plfa_plfa-part2-Substitution-8375" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-8377" href="../Substitution/#plfa_plfa-part2-Substitution-8377" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-8378" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8380" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8381" href="../Substitution/#plfa_plfa-part2-Substitution-8381" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-8383" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8385" href="../Substitution/#plfa_plfa-part2-Substitution-8371" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-8387" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-8389" href="../Substitution/#plfa_plfa-part2-Substitution-8375" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-8390" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8392" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8393" href="../Substitution/#plfa_plfa-part2-Substitution-8393" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-8395" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8397" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-8403" href="../Substitution/#plfa_plfa-part2-Substitution-8369" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-8405" href="../Substitution/#plfa_plfa-part2-Substitution-8371" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-8406" class="Symbol">}</a>
         <a id="plfa_plfa-part2-Substitution-8417" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-8419" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-8420" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a> <a id="plfa_plfa-part2-Substitution-8422" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-8424" href="../Substitution/#plfa_plfa-part2-Substitution-8381" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-8426" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-8428" href="../Substitution/#plfa_plfa-part2-Substitution-8393" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-8429" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-8431" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8432" class="Argument">A</a> <a id="plfa_plfa-part2-Substitution-8434" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8436" href="../Substitution/#plfa_plfa-part2-Substitution-8377" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-8437" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8439" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-8441" href="../Substitution/#plfa_plfa-part2-Substitution-8393" class="Bound">σ</a>
<a id="plfa_plfa-part2-Substitution-8443" href="../Substitution/#plfa_plfa-part2-Substitution-8356" class="Function">sub-tail</a> <a id="plfa_plfa-part2-Substitution-8452" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8454" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-8469" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-8471" href="../Substitution/#plfa_plfa-part2-Substitution-8471" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-8473" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-8475" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-sub-η"></a><a id="plfa_plfa-part2-Substitution-8493" href="../Substitution/#plfa_plfa-part2-Substitution-8493" class="Function">sub-η</a> <a id="plfa_plfa-part2-Substitution-8499" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8501" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-8503" href="../Substitution/#plfa_plfa-part2-Substitution-8503" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-8505" href="../Substitution/#plfa_plfa-part2-Substitution-8505" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-8506" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8508" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8509" href="../Substitution/#plfa_plfa-part2-Substitution-8509" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-8511" href="../Substitution/#plfa_plfa-part2-Substitution-8511" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-8512" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8514" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8515" href="../Substitution/#plfa_plfa-part2-Substitution-8515" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-8517" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8519" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-8525" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-8526" href="../Substitution/#plfa_plfa-part2-Substitution-8503" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-8528" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-8530" href="../Substitution/#plfa_plfa-part2-Substitution-8509" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-8531" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-8533" href="../Substitution/#plfa_plfa-part2-Substitution-8505" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-8534" class="Symbol">}</a>
      <a id="plfa_plfa-part2-Substitution-8542" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-8544" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-8545" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-8547" href="../Substitution/#plfa_plfa-part2-Substitution-8515" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-8549" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-8551" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-8552" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-8554" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-8555" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-8557" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-8559" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-8560" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a> <a id="plfa_plfa-part2-Substitution-8562" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-8564" href="../Substitution/#plfa_plfa-part2-Substitution-8515" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-8565" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-8568" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8569" class="Argument">A</a> <a id="plfa_plfa-part2-Substitution-8571" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8573" href="../Substitution/#plfa_plfa-part2-Substitution-8511" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-8574" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8576" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-8578" href="../Substitution/#plfa_plfa-part2-Substitution-8515" class="Bound">σ</a>
<a id="plfa_plfa-part2-Substitution-8580" href="../Substitution/#plfa_plfa-part2-Substitution-8493" class="Function">sub-η</a> <a id="plfa_plfa-part2-Substitution-8586" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8587" href="../Substitution/#plfa_plfa-part2-Substitution-8587" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-8588" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-8590" href="../Substitution/#plfa_plfa-part2-Substitution-8590" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-8591" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-8593" href="../Substitution/#plfa_plfa-part2-Substitution-8593" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-8594" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-8596" href="../Substitution/#plfa_plfa-part2-Substitution-8596" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-8597" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-8599" href="../Substitution/#plfa_plfa-part2-Substitution-8599" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-8600" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8602" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8604" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-8619" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-8621" href="../Substitution/#plfa_plfa-part2-Substitution-8621" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-8623" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-8625" href="../Substitution/#plfa_plfa-part2-Substitution-8643" class="Function">lemma</a>
   <a id="plfa_plfa-part2-Substitution-8634" class="Keyword">where</a>
   <a id="plfa_plfa-part2-Substitution-8643" href="../Substitution/#plfa_plfa-part2-Substitution-8643" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-8649" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8651" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-8653" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8654" href="../Substitution/#plfa_plfa-part2-Substitution-8654" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-8655" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8657" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-8659" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-8661" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-8663" href="../Substitution/#plfa_plfa-part2-Substitution-8599" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-8665" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-8667" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-8668" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-8670" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-8671" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-8674" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-8676" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-8677" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a> <a id="plfa_plfa-part2-Substitution-8679" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-8681" href="../Substitution/#plfa_plfa-part2-Substitution-8599" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-8682" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-8685" href="../Substitution/#plfa_plfa-part2-Substitution-8654" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-8687" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-8689" href="../Substitution/#plfa_plfa-part2-Substitution-8599" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-8691" href="../Substitution/#plfa_plfa-part2-Substitution-8654" class="Bound">x</a>
   <a id="plfa_plfa-part2-Substitution-8696" href="../Substitution/#plfa_plfa-part2-Substitution-8643" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-8702" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8703" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-8705" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8707" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-8708" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8710" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8712" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
   <a id="plfa_plfa-part2-Substitution-8720" href="../Substitution/#plfa_plfa-part2-Substitution-8643" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-8726" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8727" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-8729" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8731" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-8733" href="../Substitution/#plfa_plfa-part2-Substitution-8733" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-8734" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8736" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8738" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-Z-shift"></a><a id="plfa_plfa-part2-Substitution-8756" href="../Substitution/#plfa_plfa-part2-Substitution-8756" class="Function">Z-shift</a> <a id="plfa_plfa-part2-Substitution-8764" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8766" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-8768" href="../Substitution/#plfa_plfa-part2-Substitution-8768" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-8769" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-8771" href="../Substitution/#plfa_plfa-part2-Substitution-8771" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-8773" href="../Substitution/#plfa_plfa-part2-Substitution-8773" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-8774" class="Symbol">}</a>
        <a id="plfa_plfa-part2-Substitution-8784" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-8786" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-8788" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-8790" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-8791" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-8793" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-8795" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-8796" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-8798" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-8800" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-8804" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8805" href="../Substitution/#plfa_plfa-part2-Substitution-8768" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-8807" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-8809" href="../Substitution/#plfa_plfa-part2-Substitution-8771" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-8810" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8812" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8813" href="../Substitution/#plfa_plfa-part2-Substitution-8773" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-8814" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-8816" href="../Substitution/#plfa_plfa-part2-Substitution-8756" class="Function">Z-shift</a> <a id="plfa_plfa-part2-Substitution-8824" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8825" href="../Substitution/#plfa_plfa-part2-Substitution-8825" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-8826" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-8828" href="../Substitution/#plfa_plfa-part2-Substitution-8828" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-8829" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-8831" href="../Substitution/#plfa_plfa-part2-Substitution-8831" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-8832" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8834" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8836" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-8851" href="../Substitution/#plfa_plfa-part2-Substitution-8869" class="Function">lemma</a>
   <a id="plfa_plfa-part2-Substitution-8860" class="Keyword">where</a>
   <a id="plfa_plfa-part2-Substitution-8869" href="../Substitution/#plfa_plfa-part2-Substitution-8869" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-8875" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8877" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-8878" href="../Substitution/#plfa_plfa-part2-Substitution-8878" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-8880" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8882" href="../Substitution/#plfa_plfa-part2-Substitution-8825" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-8884" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-8886" href="../Substitution/#plfa_plfa-part2-Substitution-8828" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-8888" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-8890" href="../Substitution/#plfa_plfa-part2-Substitution-8831" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-8891" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-8893" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-8895" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-8897" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-8899" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-8900" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-8902" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-8904" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-8905" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-8907" href="../Substitution/#plfa_plfa-part2-Substitution-8878" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-8909" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-8911" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-8915" href="../Substitution/#plfa_plfa-part2-Substitution-8878" class="Bound">x</a>
   <a id="plfa_plfa-part2-Substitution-8920" href="../Substitution/#plfa_plfa-part2-Substitution-8869" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-8926" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-Substitution-8928" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8930" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
   <a id="plfa_plfa-part2-Substitution-8938" href="../Substitution/#plfa_plfa-part2-Substitution-8869" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-8944" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-8945" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-8947" href="../Substitution/#plfa_plfa-part2-Substitution-8947" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-8948" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-8950" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8952" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-sub-idL"></a><a id="plfa_plfa-part2-Substitution-8970" href="../Substitution/#plfa_plfa-part2-Substitution-8970" class="Function">sub-idL</a> <a id="plfa_plfa-part2-Substitution-8978" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8980" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-8982" href="../Substitution/#plfa_plfa-part2-Substitution-8982" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-8984" href="../Substitution/#plfa_plfa-part2-Substitution-8984" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-8985" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8987" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8988" href="../Substitution/#plfa_plfa-part2-Substitution-8988" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-8990" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8992" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-8998" href="../Substitution/#plfa_plfa-part2-Substitution-8982" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-9000" href="../Substitution/#plfa_plfa-part2-Substitution-8984" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-9001" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9003" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9004" href="../Substitution/#plfa_plfa-part2-Substitution-9004" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-9005" class="Symbol">}</a>
       <a id="plfa_plfa-part2-Substitution-9014" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-9016" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-9020" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-9022" href="../Substitution/#plfa_plfa-part2-Substitution-8988" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-9024" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-9026" href="../Substitution/#plfa_plfa-part2-Substitution-8988" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-9028" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9029" href="../Substitution/#plfa_plfa-part2-Substitution-9004" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-9030" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-9032" href="../Substitution/#plfa_plfa-part2-Substitution-8970" class="Function">sub-idL</a> <a id="plfa_plfa-part2-Substitution-9040" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-9042" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-9057" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-9059" href="../Substitution/#plfa_plfa-part2-Substitution-9059" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-9061" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-9063" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-sub-dist"></a><a id="plfa_plfa-part2-Substitution-9081" href="../Substitution/#plfa_plfa-part2-Substitution-9081" class="Function">sub-dist</a> <a id="plfa_plfa-part2-Substitution-9090" class="Symbol">:</a>  <a id="plfa_plfa-part2-Substitution-9093" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-9095" href="../Substitution/#plfa_plfa-part2-Substitution-9095" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-9097" href="../Substitution/#plfa_plfa-part2-Substitution-9097" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-9099" href="../Substitution/#plfa_plfa-part2-Substitution-9099" class="Bound">Σ</a> <a id="plfa_plfa-part2-Substitution-9101" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9103" href="../Untyped/#plfa_plfa-part2-Untyped-2782" class="Datatype">Context</a><a id="plfa_plfa-part2-Substitution-9110" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9112" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9113" href="../Substitution/#plfa_plfa-part2-Substitution-9113" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-9115" href="../Substitution/#plfa_plfa-part2-Substitution-9115" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-9116" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9118" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9119" href="../Substitution/#plfa_plfa-part2-Substitution-9119" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-9121" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9123" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-9129" href="../Substitution/#plfa_plfa-part2-Substitution-9095" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-9131" href="../Substitution/#plfa_plfa-part2-Substitution-9097" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-9132" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9134" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9135" href="../Substitution/#plfa_plfa-part2-Substitution-9135" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-9137" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9139" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-9145" href="../Substitution/#plfa_plfa-part2-Substitution-9097" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-9147" href="../Substitution/#plfa_plfa-part2-Substitution-9099" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-9148" class="Symbol">}</a>
              <a id="plfa_plfa-part2-Substitution-9164" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9165" href="../Substitution/#plfa_plfa-part2-Substitution-9165" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-9167" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9169" href="../Substitution/#plfa_plfa-part2-Substitution-9097" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-9171" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-9173" href="../Substitution/#plfa_plfa-part2-Substitution-9113" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-9174" class="Symbol">}</a>
         <a id="plfa_plfa-part2-Substitution-9185" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-9187" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-9189" href="../Substitution/#plfa_plfa-part2-Substitution-9165" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-9191" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-9193" href="../Substitution/#plfa_plfa-part2-Substitution-9119" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-9194" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-9196" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-9198" href="../Substitution/#plfa_plfa-part2-Substitution-9135" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-9199" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-9201" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-9203" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-9205" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-9211" href="../Substitution/#plfa_plfa-part2-Substitution-9135" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-9213" href="../Substitution/#plfa_plfa-part2-Substitution-9165" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-9214" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-9216" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-9218" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-9219" href="../Substitution/#plfa_plfa-part2-Substitution-9119" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-9221" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-9223" href="../Substitution/#plfa_plfa-part2-Substitution-9135" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-9224" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-9227" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9228" href="../Substitution/#plfa_plfa-part2-Substitution-9115" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-9229" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-9231" href="../Substitution/#plfa_plfa-part2-Substitution-9081" class="Function">sub-dist</a> <a id="plfa_plfa-part2-Substitution-9240" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9241" href="../Substitution/#plfa_plfa-part2-Substitution-9241" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-9242" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-9244" href="../Substitution/#plfa_plfa-part2-Substitution-9244" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-9245" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-9247" href="../Substitution/#plfa_plfa-part2-Substitution-9247" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-9248" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-9250" href="../Substitution/#plfa_plfa-part2-Substitution-9250" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-9251" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-9253" href="../Substitution/#plfa_plfa-part2-Substitution-9253" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-9254" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-9256" href="../Substitution/#plfa_plfa-part2-Substitution-9256" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-9257" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-9259" href="../Substitution/#plfa_plfa-part2-Substitution-9259" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-9260" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-9262" href="../Substitution/#plfa_plfa-part2-Substitution-9262" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-9263" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9265" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-9267" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-9282" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-9284" href="../Substitution/#plfa_plfa-part2-Substitution-9284" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-9286" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-9288" href="../Substitution/#plfa_plfa-part2-Substitution-9312" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-9294" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9295" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-9297" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-9299" href="../Substitution/#plfa_plfa-part2-Substitution-9284" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-9300" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-9304" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-9312" href="../Substitution/#plfa_plfa-part2-Substitution-9312" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-9318" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9320" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-9322" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9323" href="../Substitution/#plfa_plfa-part2-Substitution-9323" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-9325" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9327" href="../Substitution/#plfa_plfa-part2-Substitution-9241" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-9329" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-9331" href="../Substitution/#plfa_plfa-part2-Substitution-9250" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-9333" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-9335" href="../Substitution/#plfa_plfa-part2-Substitution-9253" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-9336" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9338" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-9340" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-9342" href="../Substitution/#plfa_plfa-part2-Substitution-9262" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-9344" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-9346" href="../Substitution/#plfa_plfa-part2-Substitution-9256" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-9347" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-9349" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-9351" href="../Substitution/#plfa_plfa-part2-Substitution-9259" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-9352" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-9354" href="../Substitution/#plfa_plfa-part2-Substitution-9323" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-9356" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-9358" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-9360" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-9366" href="../Substitution/#plfa_plfa-part2-Substitution-9259" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-9368" href="../Substitution/#plfa_plfa-part2-Substitution-9262" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-9369" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-9371" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-9373" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-9374" href="../Substitution/#plfa_plfa-part2-Substitution-9256" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-9376" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-9378" href="../Substitution/#plfa_plfa-part2-Substitution-9259" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-9379" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-9382" href="../Substitution/#plfa_plfa-part2-Substitution-9323" class="Bound">x</a>
  <a id="plfa_plfa-part2-Substitution-9386" href="../Substitution/#plfa_plfa-part2-Substitution-9312" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-9392" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9393" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-9395" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-9397" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-9398" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9400" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-9402" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="plfa_plfa-part2-Substitution-9409" href="../Substitution/#plfa_plfa-part2-Substitution-9312" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-9415" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9416" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-9418" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-9420" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-9422" href="../Substitution/#plfa_plfa-part2-Substitution-9422" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-9423" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9425" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-9427" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-sub-app"></a><a id="plfa_plfa-part2-Substitution-9445" href="../Substitution/#plfa_plfa-part2-Substitution-9445" class="Function">sub-app</a> <a id="plfa_plfa-part2-Substitution-9453" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9455" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-9457" href="../Substitution/#plfa_plfa-part2-Substitution-9457" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-9459" href="../Substitution/#plfa_plfa-part2-Substitution-9459" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-9460" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9462" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9463" href="../Substitution/#plfa_plfa-part2-Substitution-9463" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-9465" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9467" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-9473" href="../Substitution/#plfa_plfa-part2-Substitution-9457" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-9475" href="../Substitution/#plfa_plfa-part2-Substitution-9459" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-9476" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9478" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9479" href="../Substitution/#plfa_plfa-part2-Substitution-9479" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-9481" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9483" href="../Substitution/#plfa_plfa-part2-Substitution-9457" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-9485" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-9487" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-9488" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-9490" href="../Substitution/#plfa_plfa-part2-Substitution-9490" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-9492" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9494" href="../Substitution/#plfa_plfa-part2-Substitution-9457" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-9496" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-9498" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-9499" class="Symbol">}</a>
        <a id="plfa_plfa-part2-Substitution-9509" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-9511" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-9513" href="../Substitution/#plfa_plfa-part2-Substitution-9463" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-9515" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-9517" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-9518" href="../Substitution/#plfa_plfa-part2-Substitution-9479" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-9520" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Substitution-9522" href="../Substitution/#plfa_plfa-part2-Substitution-9490" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-9523" class="Symbol">)</a>  <a id="plfa_plfa-part2-Substitution-9526" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-9528" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-9529" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-9531" href="../Substitution/#plfa_plfa-part2-Substitution-9463" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-9533" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-9535" href="../Substitution/#plfa_plfa-part2-Substitution-9479" class="Bound">L</a><a id="plfa_plfa-part2-Substitution-9536" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-9538" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Substitution-9540" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-9541" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-9543" href="../Substitution/#plfa_plfa-part2-Substitution-9463" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-9545" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-9547" href="../Substitution/#plfa_plfa-part2-Substitution-9490" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-9548" class="Symbol">)</a>
<a id="plfa_plfa-part2-Substitution-9550" href="../Substitution/#plfa_plfa-part2-Substitution-9445" class="Function">sub-app</a> <a id="plfa_plfa-part2-Substitution-9558" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-9560" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><h2 id="interlude-congruences">Interlude: congruences</h2><p>In this section we establish congruence rules for the σ algebra operators <code>•</code> and <code>⨟</code> and for <code>subst</code> and its helper functions <code>ext</code>, <code>rename</code>, <code>exts</code>, and <code>subst-zero</code>. These congruence rules help with the equational reasoning in the later sections of this chapter.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-cong-ext"></a><a id="plfa_plfa-part2-Substitution-9874" href="../Substitution/#plfa_plfa-part2-Substitution-9874" class="Function">cong-ext</a> <a id="plfa_plfa-part2-Substitution-9883" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9885" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-9887" href="../Substitution/#plfa_plfa-part2-Substitution-9887" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-9889" href="../Substitution/#plfa_plfa-part2-Substitution-9889" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-9890" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-9892" href="../Substitution/#plfa_plfa-part2-Substitution-9892" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-9894" href="../Substitution/#plfa_plfa-part2-Substitution-9894" class="Bound">ρ′</a> <a id="plfa_plfa-part2-Substitution-9897" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9899" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-9906" href="../Substitution/#plfa_plfa-part2-Substitution-9887" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-9908" href="../Substitution/#plfa_plfa-part2-Substitution-9889" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-9909" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-9911" href="../Substitution/#plfa_plfa-part2-Substitution-9911" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-9912" class="Symbol">}</a>
   <a id="plfa_plfa-part2-Substitution-9917" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-9919" class="Symbol">(∀{</a><a id="plfa_plfa-part2-Substitution-9922" href="../Substitution/#plfa_plfa-part2-Substitution-9922" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-9923" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9925" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-9927" href="../Substitution/#plfa_plfa-part2-Substitution-9892" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-9929" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-9931" href="../Substitution/#plfa_plfa-part2-Substitution-9894" class="Bound">ρ′</a> <a id="plfa_plfa-part2-Substitution-9934" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9935" href="../Substitution/#plfa_plfa-part2-Substitution-9922" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-9936" class="Symbol">})</a>
     <a id="plfa_plfa-part2-Substitution-9944" class="Comment">---------------------------------</a>
   <a id="plfa_plfa-part2-Substitution-9981" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-9983" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-9985" href="../Substitution/#plfa_plfa-part2-Substitution-9985" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-9986" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9988" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-9990" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-9994" href="../Substitution/#plfa_plfa-part2-Substitution-9892" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-9996" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9997" class="Argument">B</a> <a id="plfa_plfa-part2-Substitution-9999" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10001" href="../Substitution/#plfa_plfa-part2-Substitution-9911" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-10002" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10004" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-10006" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-10010" href="../Substitution/#plfa_plfa-part2-Substitution-9894" class="Bound">ρ′</a> <a id="plfa_plfa-part2-Substitution-10013" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10014" href="../Substitution/#plfa_plfa-part2-Substitution-9985" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-10015" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-10017" href="../Substitution/#plfa_plfa-part2-Substitution-9874" class="Function">cong-ext</a><a id="plfa_plfa-part2-Substitution-10025" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10026" href="../Substitution/#plfa_plfa-part2-Substitution-10026" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-10027" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10029" href="../Substitution/#plfa_plfa-part2-Substitution-10029" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-10030" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10032" href="../Substitution/#plfa_plfa-part2-Substitution-10032" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-10033" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10035" href="../Substitution/#plfa_plfa-part2-Substitution-10035" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-10037" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10039" href="../Substitution/#plfa_plfa-part2-Substitution-10039" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-10040" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10042" href="../Substitution/#plfa_plfa-part2-Substitution-10042" class="Bound">rr</a> <a id="plfa_plfa-part2-Substitution-10045" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10046" href="../Substitution/#plfa_plfa-part2-Substitution-10046" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-10047" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10049" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10051" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-10066" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-10068" href="../Substitution/#plfa_plfa-part2-Substitution-10068" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-10070" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10072" href="../Substitution/#plfa_plfa-part2-Substitution-10092" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-10078" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10079" href="../Substitution/#plfa_plfa-part2-Substitution-10068" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-10080" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-10084" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-10092" href="../Substitution/#plfa_plfa-part2-Substitution-10092" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-10098" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-10100" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-10102" href="../Substitution/#plfa_plfa-part2-Substitution-10102" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-10104" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-10106" href="../Substitution/#plfa_plfa-part2-Substitution-10026" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-10108" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-10110" href="../Substitution/#plfa_plfa-part2-Substitution-10039" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-10112" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-10114" href="../Substitution/#plfa_plfa-part2-Substitution-10046" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-10115" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10117" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10119" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-10123" href="../Substitution/#plfa_plfa-part2-Substitution-10032" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-10125" href="../Substitution/#plfa_plfa-part2-Substitution-10102" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-10127" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-10129" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-10133" href="../Substitution/#plfa_plfa-part2-Substitution-10035" class="Bound">ρ′</a> <a id="plfa_plfa-part2-Substitution-10136" href="../Substitution/#plfa_plfa-part2-Substitution-10102" class="Bound">x</a>
  <a id="plfa_plfa-part2-Substitution-10140" href="../Substitution/#plfa_plfa-part2-Substitution-10092" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-10146" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10147" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-10148" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10150" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10152" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="plfa_plfa-part2-Substitution-10159" href="../Substitution/#plfa_plfa-part2-Substitution-10092" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-10165" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10166" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-10168" href="../Substitution/#plfa_plfa-part2-Substitution-10168" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-10169" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10171" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10173" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-10178" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Substitution-10181" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-10182" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1470" class="Function">cong-app</a> <a id="plfa_plfa-part2-Substitution-10191" href="../Substitution/#plfa_plfa-part2-Substitution-10042" class="Bound">rr</a> <a id="plfa_plfa-part2-Substitution-10194" href="../Substitution/#plfa_plfa-part2-Substitution-10168" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-10195" class="Symbol">)</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-cong-rename"></a><a id="plfa_plfa-part2-Substitution-10210" href="../Substitution/#plfa_plfa-part2-Substitution-10210" class="Function">cong-rename</a> <a id="plfa_plfa-part2-Substitution-10222" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-10224" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-10226" href="../Substitution/#plfa_plfa-part2-Substitution-10226" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-10228" href="../Substitution/#plfa_plfa-part2-Substitution-10228" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-10229" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10231" href="../Substitution/#plfa_plfa-part2-Substitution-10231" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-10233" href="../Substitution/#plfa_plfa-part2-Substitution-10233" class="Bound">ρ′</a> <a id="plfa_plfa-part2-Substitution-10236" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-10238" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-10245" href="../Substitution/#plfa_plfa-part2-Substitution-10226" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-10247" href="../Substitution/#plfa_plfa-part2-Substitution-10228" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-10248" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10250" href="../Substitution/#plfa_plfa-part2-Substitution-10250" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-10251" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10253" href="../Substitution/#plfa_plfa-part2-Substitution-10253" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-10255" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-10257" href="../Substitution/#plfa_plfa-part2-Substitution-10226" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-10259" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-10261" href="../Substitution/#plfa_plfa-part2-Substitution-10250" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-10262" class="Symbol">}</a>
        <a id="plfa_plfa-part2-Substitution-10272" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10274" class="Symbol">(∀{</a><a id="plfa_plfa-part2-Substitution-10277" href="../Substitution/#plfa_plfa-part2-Substitution-10277" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-10278" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10280" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10282" href="../Substitution/#plfa_plfa-part2-Substitution-10231" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-10284" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-10286" href="../Substitution/#plfa_plfa-part2-Substitution-10233" class="Bound">ρ′</a> <a id="plfa_plfa-part2-Substitution-10289" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10290" href="../Substitution/#plfa_plfa-part2-Substitution-10277" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-10291" class="Symbol">})</a>
          <a id="plfa_plfa-part2-Substitution-10304" class="Comment">------------------------</a>
        <a id="plfa_plfa-part2-Substitution-10337" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10339" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-10346" href="../Substitution/#plfa_plfa-part2-Substitution-10231" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-10348" href="../Substitution/#plfa_plfa-part2-Substitution-10253" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-10350" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-10352" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-10359" href="../Substitution/#plfa_plfa-part2-Substitution-10233" class="Bound">ρ′</a> <a id="plfa_plfa-part2-Substitution-10362" href="../Substitution/#plfa_plfa-part2-Substitution-10253" class="Bound">M</a>
<a id="plfa_plfa-part2-Substitution-10364" href="../Substitution/#plfa_plfa-part2-Substitution-10210" class="Function">cong-rename</a> <a id="plfa_plfa-part2-Substitution-10376" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10377" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-10379" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10381" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-10383" href="../Substitution/#plfa_plfa-part2-Substitution-10383" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-10384" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10386" href="../Substitution/#plfa_plfa-part2-Substitution-10386" class="Bound">rr</a> <a id="plfa_plfa-part2-Substitution-10389" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10391" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-10396" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`_</a> <a id="plfa_plfa-part2-Substitution-10399" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-10400" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1470" class="Function">cong-app</a> <a id="plfa_plfa-part2-Substitution-10409" href="../Substitution/#plfa_plfa-part2-Substitution-10386" class="Bound">rr</a> <a id="plfa_plfa-part2-Substitution-10412" href="../Substitution/#plfa_plfa-part2-Substitution-10383" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-10413" class="Symbol">)</a>
<a id="plfa_plfa-part2-Substitution-10415" href="../Substitution/#plfa_plfa-part2-Substitution-10210" class="Function">cong-rename</a> <a id="plfa_plfa-part2-Substitution-10427" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10428" class="Argument">ρ</a> <a id="plfa_plfa-part2-Substitution-10430" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10432" href="../Substitution/#plfa_plfa-part2-Substitution-10432" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-10433" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10435" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10436" class="Argument">ρ′</a> <a id="plfa_plfa-part2-Substitution-10439" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10441" href="../Substitution/#plfa_plfa-part2-Substitution-10441" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-10443" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10445" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10446" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-10448" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10450" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-10452" href="../Substitution/#plfa_plfa-part2-Substitution-10452" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-10453" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10455" href="../Substitution/#plfa_plfa-part2-Substitution-10455" class="Bound">rr</a> <a id="plfa_plfa-part2-Substitution-10458" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-10463" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-10468" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ_</a> <a id="plfa_plfa-part2-Substitution-10471" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-10472" href="../Substitution/#plfa_plfa-part2-Substitution-10210" class="Function">cong-rename</a> <a id="plfa_plfa-part2-Substitution-10484" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10485" class="Argument">ρ</a> <a id="plfa_plfa-part2-Substitution-10487" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10489" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-10493" href="../Substitution/#plfa_plfa-part2-Substitution-10432" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-10494" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10496" class="Argument">ρ′</a> <a id="plfa_plfa-part2-Substitution-10499" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10501" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-10505" href="../Substitution/#plfa_plfa-part2-Substitution-10441" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-10507" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10509" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-10511" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10513" href="../Substitution/#plfa_plfa-part2-Substitution-10452" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-10514" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10516" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-10517" href="../Substitution/#plfa_plfa-part2-Substitution-9874" class="Function">cong-ext</a> <a id="plfa_plfa-part2-Substitution-10526" href="../Substitution/#plfa_plfa-part2-Substitution-10455" class="Bound">rr</a><a id="plfa_plfa-part2-Substitution-10528" class="Symbol">))</a>
<a id="plfa_plfa-part2-Substitution-10531" href="../Substitution/#plfa_plfa-part2-Substitution-10210" class="Function">cong-rename</a> <a id="plfa_plfa-part2-Substitution-10543" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10544" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-10546" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10548" href="../Substitution/#plfa_plfa-part2-Substitution-10548" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-10550" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Substitution-10552" href="../Substitution/#plfa_plfa-part2-Substitution-10552" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-10553" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10555" href="../Substitution/#plfa_plfa-part2-Substitution-10555" class="Bound">rr</a> <a id="plfa_plfa-part2-Substitution-10558" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-10563" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1376" class="Function">cong₂</a> <a id="plfa_plfa-part2-Substitution-10569" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">_·_</a> <a id="plfa_plfa-part2-Substitution-10573" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-10574" href="../Substitution/#plfa_plfa-part2-Substitution-10210" class="Function">cong-rename</a> <a id="plfa_plfa-part2-Substitution-10586" href="../Substitution/#plfa_plfa-part2-Substitution-10555" class="Bound">rr</a><a id="plfa_plfa-part2-Substitution-10588" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-10590" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-10591" href="../Substitution/#plfa_plfa-part2-Substitution-10210" class="Function">cong-rename</a> <a id="plfa_plfa-part2-Substitution-10603" href="../Substitution/#plfa_plfa-part2-Substitution-10555" class="Bound">rr</a><a id="plfa_plfa-part2-Substitution-10605" class="Symbol">)</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-cong-exts"></a><a id="plfa_plfa-part2-Substitution-10620" href="../Substitution/#plfa_plfa-part2-Substitution-10620" class="Function">cong-exts</a> <a id="plfa_plfa-part2-Substitution-10630" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-10632" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-10634" href="../Substitution/#plfa_plfa-part2-Substitution-10634" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-10636" href="../Substitution/#plfa_plfa-part2-Substitution-10636" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-10637" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10639" href="../Substitution/#plfa_plfa-part2-Substitution-10639" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-10641" href="../Substitution/#plfa_plfa-part2-Substitution-10641" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-10644" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-10646" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-10652" href="../Substitution/#plfa_plfa-part2-Substitution-10634" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-10654" href="../Substitution/#plfa_plfa-part2-Substitution-10636" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-10655" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10657" href="../Substitution/#plfa_plfa-part2-Substitution-10657" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-10658" class="Symbol">}</a>
   <a id="plfa_plfa-part2-Substitution-10663" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10665" class="Symbol">(∀{</a><a id="plfa_plfa-part2-Substitution-10668" href="../Substitution/#plfa_plfa-part2-Substitution-10668" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-10669" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10671" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10673" href="../Substitution/#plfa_plfa-part2-Substitution-10639" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-10675" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-10677" href="../Substitution/#plfa_plfa-part2-Substitution-10641" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-10680" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10681" href="../Substitution/#plfa_plfa-part2-Substitution-10668" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-10682" class="Symbol">})</a>
     <a id="plfa_plfa-part2-Substitution-10690" class="Comment">-----------------------------------</a>
   <a id="plfa_plfa-part2-Substitution-10729" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10731" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-10733" href="../Substitution/#plfa_plfa-part2-Substitution-10733" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-10734" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10736" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10738" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-10743" href="../Substitution/#plfa_plfa-part2-Substitution-10639" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-10745" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10746" class="Argument">B</a> <a id="plfa_plfa-part2-Substitution-10748" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10750" href="../Substitution/#plfa_plfa-part2-Substitution-10657" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-10751" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10753" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-10755" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-10760" href="../Substitution/#plfa_plfa-part2-Substitution-10641" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-10763" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10764" href="../Substitution/#plfa_plfa-part2-Substitution-10733" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-10765" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-10767" href="../Substitution/#plfa_plfa-part2-Substitution-10620" class="Function">cong-exts</a><a id="plfa_plfa-part2-Substitution-10776" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10777" href="../Substitution/#plfa_plfa-part2-Substitution-10777" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-10778" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10780" href="../Substitution/#plfa_plfa-part2-Substitution-10780" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-10781" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10783" href="../Substitution/#plfa_plfa-part2-Substitution-10783" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-10784" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10786" href="../Substitution/#plfa_plfa-part2-Substitution-10786" class="Bound">σ′</a><a id="plfa_plfa-part2-Substitution-10788" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10790" href="../Substitution/#plfa_plfa-part2-Substitution-10790" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-10791" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10793" href="../Substitution/#plfa_plfa-part2-Substitution-10793" class="Bound">ss</a> <a id="plfa_plfa-part2-Substitution-10796" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10797" href="../Substitution/#plfa_plfa-part2-Substitution-10797" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-10798" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10800" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10802" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-10817" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-10819" href="../Substitution/#plfa_plfa-part2-Substitution-10819" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-10821" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10823" href="../Substitution/#plfa_plfa-part2-Substitution-10845" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-10829" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10830" href="../Substitution/#plfa_plfa-part2-Substitution-10819" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-10831" class="Symbol">}</a>
   <a id="plfa_plfa-part2-Substitution-10836" class="Keyword">where</a>
   <a id="plfa_plfa-part2-Substitution-10845" href="../Substitution/#plfa_plfa-part2-Substitution-10845" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-10851" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-10853" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-10855" href="../Substitution/#plfa_plfa-part2-Substitution-10855" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-10856" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10858" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10860" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-10865" href="../Substitution/#plfa_plfa-part2-Substitution-10783" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-10867" href="../Substitution/#plfa_plfa-part2-Substitution-10855" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-10869" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-10871" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-10876" href="../Substitution/#plfa_plfa-part2-Substitution-10786" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-10879" href="../Substitution/#plfa_plfa-part2-Substitution-10855" class="Bound">x</a>
   <a id="plfa_plfa-part2-Substitution-10884" href="../Substitution/#plfa_plfa-part2-Substitution-10845" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-10890" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10891" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-10892" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10894" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10896" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
   <a id="plfa_plfa-part2-Substitution-10904" href="../Substitution/#plfa_plfa-part2-Substitution-10845" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-10910" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10911" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-10913" href="../Substitution/#plfa_plfa-part2-Substitution-10913" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-10914" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10916" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10918" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-10923" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-10924" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-10931" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part2-Substitution-10933" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-10935" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-10936" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1470" class="Function">cong-app</a> <a id="plfa_plfa-part2-Substitution-10945" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-10946" href="../Substitution/#plfa_plfa-part2-Substitution-10793" class="Bound">ss</a> <a id="plfa_plfa-part2-Substitution-10949" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10950" href="../Substitution/#plfa_plfa-part2-Substitution-10797" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-10951" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-10954" href="../Substitution/#plfa_plfa-part2-Substitution-10913" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-10955" class="Symbol">)</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-cong-sub"></a><a id="plfa_plfa-part2-Substitution-10970" href="../Substitution/#plfa_plfa-part2-Substitution-10970" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-10979" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-10981" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-10983" href="../Substitution/#plfa_plfa-part2-Substitution-10983" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-10985" href="../Substitution/#plfa_plfa-part2-Substitution-10985" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-10986" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10988" href="../Substitution/#plfa_plfa-part2-Substitution-10988" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-10990" href="../Substitution/#plfa_plfa-part2-Substitution-10990" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-10993" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-10995" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-11001" href="../Substitution/#plfa_plfa-part2-Substitution-10983" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-11003" href="../Substitution/#plfa_plfa-part2-Substitution-10985" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-11004" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11006" href="../Substitution/#plfa_plfa-part2-Substitution-11006" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11007" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11009" href="../Substitution/#plfa_plfa-part2-Substitution-11009" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-11011" href="../Substitution/#plfa_plfa-part2-Substitution-11011" class="Bound">M′</a> <a id="plfa_plfa-part2-Substitution-11014" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-11016" href="../Substitution/#plfa_plfa-part2-Substitution-10983" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-11018" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-11020" href="../Substitution/#plfa_plfa-part2-Substitution-11006" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11021" class="Symbol">}</a>
            <a id="plfa_plfa-part2-Substitution-11035" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11037" class="Symbol">(∀{</a><a id="plfa_plfa-part2-Substitution-11040" href="../Substitution/#plfa_plfa-part2-Substitution-11040" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11041" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11043" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11045" href="../Substitution/#plfa_plfa-part2-Substitution-10988" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-11047" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-11049" href="../Substitution/#plfa_plfa-part2-Substitution-10990" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-11052" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11053" href="../Substitution/#plfa_plfa-part2-Substitution-11040" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11054" class="Symbol">})</a>  <a id="plfa_plfa-part2-Substitution-11058" class="Symbol">→</a>  <a id="plfa_plfa-part2-Substitution-11061" href="../Substitution/#plfa_plfa-part2-Substitution-11009" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-11063" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-11065" href="../Substitution/#plfa_plfa-part2-Substitution-11011" class="Bound">M′</a>
              <a id="plfa_plfa-part2-Substitution-11082" class="Comment">------------------------------</a>
            <a id="plfa_plfa-part2-Substitution-11125" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11127" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-11133" href="../Substitution/#plfa_plfa-part2-Substitution-10988" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-11135" href="../Substitution/#plfa_plfa-part2-Substitution-11009" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-11137" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-11139" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-11145" href="../Substitution/#plfa_plfa-part2-Substitution-10990" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-11148" href="../Substitution/#plfa_plfa-part2-Substitution-11011" class="Bound">M′</a>
<a id="plfa_plfa-part2-Substitution-11151" href="../Substitution/#plfa_plfa-part2-Substitution-10970" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-11160" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11161" href="../Substitution/#plfa_plfa-part2-Substitution-11161" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-11162" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11164" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11165" href="../Substitution/#plfa_plfa-part2-Substitution-11165" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-11166" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11168" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11169" href="../Substitution/#plfa_plfa-part2-Substitution-11169" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-11170" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11172" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11173" href="../Substitution/#plfa_plfa-part2-Substitution-11173" class="Bound">σ′</a><a id="plfa_plfa-part2-Substitution-11175" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11177" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11178" href="../Substitution/#plfa_plfa-part2-Substitution-11178" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11179" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11181" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11182" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-11184" href="../Substitution/#plfa_plfa-part2-Substitution-11184" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-11185" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11187" href="../Substitution/#plfa_plfa-part2-Substitution-11187" class="Bound">ss</a> <a id="plfa_plfa-part2-Substitution-11190" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-11195" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-11197" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1470" class="Function">cong-app</a> <a id="plfa_plfa-part2-Substitution-11206" href="../Substitution/#plfa_plfa-part2-Substitution-11187" class="Bound">ss</a> <a id="plfa_plfa-part2-Substitution-11209" href="../Substitution/#plfa_plfa-part2-Substitution-11184" class="Bound">x</a>
<a id="plfa_plfa-part2-Substitution-11211" href="../Substitution/#plfa_plfa-part2-Substitution-10970" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-11220" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11221" href="../Substitution/#plfa_plfa-part2-Substitution-11221" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-11222" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11224" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11225" href="../Substitution/#plfa_plfa-part2-Substitution-11225" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-11226" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11228" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11229" href="../Substitution/#plfa_plfa-part2-Substitution-11229" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-11230" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11232" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11233" href="../Substitution/#plfa_plfa-part2-Substitution-11233" class="Bound">σ′</a><a id="plfa_plfa-part2-Substitution-11235" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11237" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11238" href="../Substitution/#plfa_plfa-part2-Substitution-11238" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11239" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11241" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11242" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-11244" href="../Substitution/#plfa_plfa-part2-Substitution-11244" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-11245" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11247" href="../Substitution/#plfa_plfa-part2-Substitution-11247" class="Bound">ss</a> <a id="plfa_plfa-part2-Substitution-11250" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-11255" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-11260" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-11265" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ_</a> <a id="plfa_plfa-part2-Substitution-11268" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-11269" href="../Substitution/#plfa_plfa-part2-Substitution-10970" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-11278" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11279" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-11281" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-11283" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-11288" href="../Substitution/#plfa_plfa-part2-Substitution-11229" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-11289" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11291" class="Argument">σ′</a> <a id="plfa_plfa-part2-Substitution-11294" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-11296" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-11301" href="../Substitution/#plfa_plfa-part2-Substitution-11233" class="Bound">σ′</a><a id="plfa_plfa-part2-Substitution-11303" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11305" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11306" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-11308" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-11310" href="../Substitution/#plfa_plfa-part2-Substitution-11244" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-11311" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11313" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-11314" href="../Substitution/#plfa_plfa-part2-Substitution-10620" class="Function">cong-exts</a> <a id="plfa_plfa-part2-Substitution-11324" href="../Substitution/#plfa_plfa-part2-Substitution-11247" class="Bound">ss</a><a id="plfa_plfa-part2-Substitution-11326" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-11328" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Substitution-11332" class="Symbol">)</a>
<a id="plfa_plfa-part2-Substitution-11334" href="../Substitution/#plfa_plfa-part2-Substitution-10970" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-11343" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11344" href="../Substitution/#plfa_plfa-part2-Substitution-11344" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-11345" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11347" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11348" href="../Substitution/#plfa_plfa-part2-Substitution-11348" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-11349" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11351" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11352" href="../Substitution/#plfa_plfa-part2-Substitution-11352" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-11353" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11355" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11356" href="../Substitution/#plfa_plfa-part2-Substitution-11356" class="Bound">σ′</a><a id="plfa_plfa-part2-Substitution-11358" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11360" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11361" href="../Substitution/#plfa_plfa-part2-Substitution-11361" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11362" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11364" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11365" href="../Substitution/#plfa_plfa-part2-Substitution-11365" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-11367" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Substitution-11369" href="../Substitution/#plfa_plfa-part2-Substitution-11369" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-11370" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11372" href="../Substitution/#plfa_plfa-part2-Substitution-11372" class="Bound">ss</a> <a id="plfa_plfa-part2-Substitution-11375" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-11380" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-11385" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1376" class="Function">cong₂</a> <a id="plfa_plfa-part2-Substitution-11391" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">_·_</a> <a id="plfa_plfa-part2-Substitution-11395" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-11396" href="../Substitution/#plfa_plfa-part2-Substitution-10970" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-11405" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11406" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-11408" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-11410" href="../Substitution/#plfa_plfa-part2-Substitution-11365" class="Bound">L</a><a id="plfa_plfa-part2-Substitution-11411" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11413" href="../Substitution/#plfa_plfa-part2-Substitution-11372" class="Bound">ss</a> <a id="plfa_plfa-part2-Substitution-11416" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Substitution-11420" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-11422" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-11423" href="../Substitution/#plfa_plfa-part2-Substitution-10970" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-11432" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11433" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-11435" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-11437" href="../Substitution/#plfa_plfa-part2-Substitution-11369" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-11438" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11440" href="../Substitution/#plfa_plfa-part2-Substitution-11372" class="Bound">ss</a> <a id="plfa_plfa-part2-Substitution-11443" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Substitution-11447" class="Symbol">)</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-cong-sub-zero"></a><a id="plfa_plfa-part2-Substitution-11462" href="../Substitution/#plfa_plfa-part2-Substitution-11462" class="Function">cong-sub-zero</a> <a id="plfa_plfa-part2-Substitution-11476" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-11478" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-11480" href="../Substitution/#plfa_plfa-part2-Substitution-11480" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-11481" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11483" href="../Substitution/#plfa_plfa-part2-Substitution-11483" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-11485" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-11487" href="../Untyped/#plfa_plfa-part2-Untyped-2490" class="Datatype">Type</a><a id="plfa_plfa-part2-Substitution-11491" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11493" href="../Substitution/#plfa_plfa-part2-Substitution-11493" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-11495" href="../Substitution/#plfa_plfa-part2-Substitution-11495" class="Bound">M′</a> <a id="plfa_plfa-part2-Substitution-11498" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-11500" href="../Substitution/#plfa_plfa-part2-Substitution-11480" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-11502" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-11504" href="../Substitution/#plfa_plfa-part2-Substitution-11483" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-11505" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-11509" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11511" href="../Substitution/#plfa_plfa-part2-Substitution-11493" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-11513" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-11515" href="../Substitution/#plfa_plfa-part2-Substitution-11495" class="Bound">M′</a>
    <a id="plfa_plfa-part2-Substitution-11522" class="Comment">-----------------------------------------</a>
  <a id="plfa_plfa-part2-Substitution-11566" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11568" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-11570" href="../Substitution/#plfa_plfa-part2-Substitution-11570" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11571" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11573" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11575" href="../Untyped/#plfa_plfa-part2-Untyped-7207" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Substitution-11586" href="../Substitution/#plfa_plfa-part2-Substitution-11493" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-11588" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-11590" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-11591" href="../Untyped/#plfa_plfa-part2-Untyped-7207" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Substitution-11602" href="../Substitution/#plfa_plfa-part2-Substitution-11495" class="Bound">M′</a><a id="plfa_plfa-part2-Substitution-11604" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-11606" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11607" href="../Substitution/#plfa_plfa-part2-Substitution-11570" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11608" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-11610" href="../Substitution/#plfa_plfa-part2-Substitution-11462" class="Function">cong-sub-zero</a> <a id="plfa_plfa-part2-Substitution-11624" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11625" href="../Substitution/#plfa_plfa-part2-Substitution-11625" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-11626" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11628" href="../Substitution/#plfa_plfa-part2-Substitution-11628" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-11629" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11631" href="../Substitution/#plfa_plfa-part2-Substitution-11631" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-11632" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11634" href="../Substitution/#plfa_plfa-part2-Substitution-11634" class="Bound">M′</a><a id="plfa_plfa-part2-Substitution-11636" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11638" href="../Substitution/#plfa_plfa-part2-Substitution-11638" class="Bound">mm&#39;</a> <a id="plfa_plfa-part2-Substitution-11642" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11643" href="../Substitution/#plfa_plfa-part2-Substitution-11643" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11644" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11646" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-11651" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-11666" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-11668" href="../Substitution/#plfa_plfa-part2-Substitution-11668" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-11670" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11672" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-11677" class="Symbol">(λ</a> <a id="plfa_plfa-part2-Substitution-11680" href="../Substitution/#plfa_plfa-part2-Substitution-11680" class="Bound">z</a> <a id="plfa_plfa-part2-Substitution-11682" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11684" href="../Untyped/#plfa_plfa-part2-Untyped-7207" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Substitution-11695" href="../Substitution/#plfa_plfa-part2-Substitution-11680" class="Bound">z</a> <a id="plfa_plfa-part2-Substitution-11697" href="../Substitution/#plfa_plfa-part2-Substitution-11668" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-11698" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-11700" href="../Substitution/#plfa_plfa-part2-Substitution-11638" class="Bound">mm&#39;</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-cong-cons"></a><a id="plfa_plfa-part2-Substitution-11717" href="../Substitution/#plfa_plfa-part2-Substitution-11717" class="Function">cong-cons</a> <a id="plfa_plfa-part2-Substitution-11727" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-11729" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-11731" href="../Substitution/#plfa_plfa-part2-Substitution-11731" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-11733" href="../Substitution/#plfa_plfa-part2-Substitution-11733" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-11734" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11736" href="../Substitution/#plfa_plfa-part2-Substitution-11736" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11737" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11739" href="../Substitution/#plfa_plfa-part2-Substitution-11739" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-11741" href="../Substitution/#plfa_plfa-part2-Substitution-11741" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-11743" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-11745" href="../Substitution/#plfa_plfa-part2-Substitution-11733" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-11747" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-11749" href="../Substitution/#plfa_plfa-part2-Substitution-11736" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11750" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11752" href="../Substitution/#plfa_plfa-part2-Substitution-11752" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-11754" href="../Substitution/#plfa_plfa-part2-Substitution-11754" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-11756" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-11758" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-11764" href="../Substitution/#plfa_plfa-part2-Substitution-11731" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-11766" href="../Substitution/#plfa_plfa-part2-Substitution-11733" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-11767" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-11771" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11773" href="../Substitution/#plfa_plfa-part2-Substitution-11739" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-11775" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-11777" href="../Substitution/#plfa_plfa-part2-Substitution-11741" class="Bound">N</a>  <a id="plfa_plfa-part2-Substitution-11780" class="Symbol">→</a>  <a id="plfa_plfa-part2-Substitution-11783" class="Symbol">(∀{</a><a id="plfa_plfa-part2-Substitution-11786" href="../Substitution/#plfa_plfa-part2-Substitution-11786" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11787" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11789" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11791" href="../Substitution/#plfa_plfa-part2-Substitution-11752" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-11793" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11794" href="../Substitution/#plfa_plfa-part2-Substitution-11786" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11795" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11797" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-11799" href="../Substitution/#plfa_plfa-part2-Substitution-11754" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-11801" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11802" href="../Substitution/#plfa_plfa-part2-Substitution-11786" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11803" class="Symbol">})</a>
    <a id="plfa_plfa-part2-Substitution-11810" class="Comment">--------------------------------</a>
  <a id="plfa_plfa-part2-Substitution-11845" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11847" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-11849" href="../Substitution/#plfa_plfa-part2-Substitution-11849" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11850" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11852" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11854" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-11855" href="../Substitution/#plfa_plfa-part2-Substitution-11739" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-11857" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-11859" href="../Substitution/#plfa_plfa-part2-Substitution-11752" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-11860" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-11862" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11863" href="../Substitution/#plfa_plfa-part2-Substitution-11849" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11864" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11866" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-11868" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-11869" href="../Substitution/#plfa_plfa-part2-Substitution-11741" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-11871" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-11873" href="../Substitution/#plfa_plfa-part2-Substitution-11754" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-11874" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-11876" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11877" href="../Substitution/#plfa_plfa-part2-Substitution-11849" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11878" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-11880" href="../Substitution/#plfa_plfa-part2-Substitution-11717" class="Function">cong-cons</a><a id="plfa_plfa-part2-Substitution-11889" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11890" href="../Substitution/#plfa_plfa-part2-Substitution-11890" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-11891" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11893" href="../Substitution/#plfa_plfa-part2-Substitution-11893" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-11894" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11896" href="../Substitution/#plfa_plfa-part2-Substitution-11896" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11897" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11899" href="../Substitution/#plfa_plfa-part2-Substitution-11899" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-11900" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11902" href="../Substitution/#plfa_plfa-part2-Substitution-11902" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-11903" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11905" href="../Substitution/#plfa_plfa-part2-Substitution-11905" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-11906" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11908" href="../Substitution/#plfa_plfa-part2-Substitution-11908" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-11909" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11911" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-11916" href="../Substitution/#plfa_plfa-part2-Substitution-11916" class="Bound">st</a> <a id="plfa_plfa-part2-Substitution-11919" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11920" href="../Substitution/#plfa_plfa-part2-Substitution-11920" class="Bound">A′</a><a id="plfa_plfa-part2-Substitution-11922" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11924" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-11926" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-11941" href="../Substitution/#plfa_plfa-part2-Substitution-11957" class="Function">lemma</a>
  <a id="plfa_plfa-part2-Substitution-11949" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-11957" href="../Substitution/#plfa_plfa-part2-Substitution-11957" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-11963" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-11965" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-11966" href="../Substitution/#plfa_plfa-part2-Substitution-11966" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-11968" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-11970" href="../Substitution/#plfa_plfa-part2-Substitution-11890" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-11972" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-11974" href="../Substitution/#plfa_plfa-part2-Substitution-11896" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-11976" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-11978" href="../Substitution/#plfa_plfa-part2-Substitution-11920" class="Bound">A′</a><a id="plfa_plfa-part2-Substitution-11980" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-11982" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11984" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-11985" href="../Substitution/#plfa_plfa-part2-Substitution-11899" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-11987" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-11989" href="../Substitution/#plfa_plfa-part2-Substitution-11905" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-11990" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-11992" href="../Substitution/#plfa_plfa-part2-Substitution-11966" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-11994" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-11996" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-11997" href="../Substitution/#plfa_plfa-part2-Substitution-11899" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-11999" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-12001" href="../Substitution/#plfa_plfa-part2-Substitution-11908" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-12002" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12004" href="../Substitution/#plfa_plfa-part2-Substitution-11966" class="Bound">x</a>
  <a id="plfa_plfa-part2-Substitution-12008" href="../Substitution/#plfa_plfa-part2-Substitution-11957" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-12014" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-Substitution-12016" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-12018" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="plfa_plfa-part2-Substitution-12025" href="../Substitution/#plfa_plfa-part2-Substitution-11957" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-12031" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12032" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-12034" href="../Substitution/#plfa_plfa-part2-Substitution-12034" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-12035" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12037" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-12039" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1470" class="Function">cong-app</a> <a id="plfa_plfa-part2-Substitution-12048" href="../Substitution/#plfa_plfa-part2-Substitution-11916" class="Bound">st</a> <a id="plfa_plfa-part2-Substitution-12051" href="../Substitution/#plfa_plfa-part2-Substitution-12034" class="Bound">x</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-cong-seq"></a><a id="plfa_plfa-part2-Substitution-12066" href="../Substitution/#plfa_plfa-part2-Substitution-12066" class="Function">cong-seq</a> <a id="plfa_plfa-part2-Substitution-12075" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-12077" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-12079" href="../Substitution/#plfa_plfa-part2-Substitution-12079" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-12081" href="../Substitution/#plfa_plfa-part2-Substitution-12081" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-12083" href="../Substitution/#plfa_plfa-part2-Substitution-12083" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-12084" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-12086" href="../Substitution/#plfa_plfa-part2-Substitution-12086" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-12088" href="../Substitution/#plfa_plfa-part2-Substitution-12088" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-12091" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-12093" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-12099" href="../Substitution/#plfa_plfa-part2-Substitution-12079" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-12101" href="../Substitution/#plfa_plfa-part2-Substitution-12081" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-12102" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-12104" href="../Substitution/#plfa_plfa-part2-Substitution-12104" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-12106" href="../Substitution/#plfa_plfa-part2-Substitution-12106" class="Bound">τ′</a> <a id="plfa_plfa-part2-Substitution-12109" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-12111" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-12117" href="../Substitution/#plfa_plfa-part2-Substitution-12081" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-12119" href="../Substitution/#plfa_plfa-part2-Substitution-12083" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-12120" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-12124" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-12126" class="Symbol">(∀{</a><a id="plfa_plfa-part2-Substitution-12129" href="../Substitution/#plfa_plfa-part2-Substitution-12129" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-12130" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-12132" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-12134" href="../Substitution/#plfa_plfa-part2-Substitution-12086" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-12136" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-12137" href="../Substitution/#plfa_plfa-part2-Substitution-12129" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-12138" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-12140" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-12142" href="../Substitution/#plfa_plfa-part2-Substitution-12088" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-12145" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-12146" href="../Substitution/#plfa_plfa-part2-Substitution-12129" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-12147" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-12150" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-12152" class="Symbol">(∀{</a><a id="plfa_plfa-part2-Substitution-12155" href="../Substitution/#plfa_plfa-part2-Substitution-12155" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-12156" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-12158" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-12160" href="../Substitution/#plfa_plfa-part2-Substitution-12104" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-12162" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-12163" href="../Substitution/#plfa_plfa-part2-Substitution-12155" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-12164" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-12166" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-12168" href="../Substitution/#plfa_plfa-part2-Substitution-12106" class="Bound">τ′</a> <a id="plfa_plfa-part2-Substitution-12171" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-12172" href="../Substitution/#plfa_plfa-part2-Substitution-12155" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-12173" class="Symbol">})</a>
  <a id="plfa_plfa-part2-Substitution-12178" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-12180" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-12182" href="../Substitution/#plfa_plfa-part2-Substitution-12182" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-12183" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-12185" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-12187" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12188" href="../Substitution/#plfa_plfa-part2-Substitution-12086" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-12190" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-12192" href="../Substitution/#plfa_plfa-part2-Substitution-12104" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-12193" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12195" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-12196" href="../Substitution/#plfa_plfa-part2-Substitution-12182" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-12197" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-12199" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-12201" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12202" href="../Substitution/#plfa_plfa-part2-Substitution-12088" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-12205" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-12207" href="../Substitution/#plfa_plfa-part2-Substitution-12106" class="Bound">τ′</a><a id="plfa_plfa-part2-Substitution-12209" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12211" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-12212" href="../Substitution/#plfa_plfa-part2-Substitution-12182" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-12213" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-12215" href="../Substitution/#plfa_plfa-part2-Substitution-12066" class="Function">cong-seq</a> <a id="plfa_plfa-part2-Substitution-12224" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-12225" href="../Substitution/#plfa_plfa-part2-Substitution-12225" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-12226" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-12228" href="../Substitution/#plfa_plfa-part2-Substitution-12228" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-12229" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-12231" href="../Substitution/#plfa_plfa-part2-Substitution-12231" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-12232" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-12234" href="../Substitution/#plfa_plfa-part2-Substitution-12234" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-12235" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-12237" href="../Substitution/#plfa_plfa-part2-Substitution-12237" class="Bound">σ′</a><a id="plfa_plfa-part2-Substitution-12239" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-12241" href="../Substitution/#plfa_plfa-part2-Substitution-12241" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-12242" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-12244" href="../Substitution/#plfa_plfa-part2-Substitution-12244" class="Bound">τ′</a><a id="plfa_plfa-part2-Substitution-12246" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-12248" href="../Substitution/#plfa_plfa-part2-Substitution-12248" class="Bound">ss&#39;</a> <a id="plfa_plfa-part2-Substitution-12252" href="../Substitution/#plfa_plfa-part2-Substitution-12252" class="Bound">tt&#39;</a> <a id="plfa_plfa-part2-Substitution-12256" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-12257" href="../Substitution/#plfa_plfa-part2-Substitution-12257" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-12258" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-12260" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-12262" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-12277" href="../Substitution/#plfa_plfa-part2-Substitution-12293" class="Function">lemma</a>
  <a id="plfa_plfa-part2-Substitution-12285" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-12293" href="../Substitution/#plfa_plfa-part2-Substitution-12293" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-12299" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-12301" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12302" href="../Substitution/#plfa_plfa-part2-Substitution-12302" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-12304" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-12306" href="../Substitution/#plfa_plfa-part2-Substitution-12225" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-12308" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-12310" href="../Substitution/#plfa_plfa-part2-Substitution-12257" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-12311" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12313" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-12315" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12316" href="../Substitution/#plfa_plfa-part2-Substitution-12234" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-12318" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-12320" href="../Substitution/#plfa_plfa-part2-Substitution-12241" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-12321" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12323" href="../Substitution/#plfa_plfa-part2-Substitution-12302" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-12325" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-12327" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12328" href="../Substitution/#plfa_plfa-part2-Substitution-12237" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-12331" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-12333" href="../Substitution/#plfa_plfa-part2-Substitution-12244" class="Bound">τ′</a><a id="plfa_plfa-part2-Substitution-12335" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12337" href="../Substitution/#plfa_plfa-part2-Substitution-12302" class="Bound">x</a>
  <a id="plfa_plfa-part2-Substitution-12341" href="../Substitution/#plfa_plfa-part2-Substitution-12293" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-12347" href="../Substitution/#plfa_plfa-part2-Substitution-12347" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-12349" class="Symbol">=</a>
     <a id="plfa_plfa-part2-Substitution-12356" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
       <a id="plfa_plfa-part2-Substitution-12369" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12370" href="../Substitution/#plfa_plfa-part2-Substitution-12234" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-12372" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-12374" href="../Substitution/#plfa_plfa-part2-Substitution-12241" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-12375" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12377" href="../Substitution/#plfa_plfa-part2-Substitution-12347" class="Bound">x</a>
     <a id="plfa_plfa-part2-Substitution-12384" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
       <a id="plfa_plfa-part2-Substitution-12395" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-12401" href="../Substitution/#plfa_plfa-part2-Substitution-12241" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-12403" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12404" href="../Substitution/#plfa_plfa-part2-Substitution-12234" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-12406" href="../Substitution/#plfa_plfa-part2-Substitution-12347" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-12407" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-12414" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-12417" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-12422" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12423" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-12429" href="../Substitution/#plfa_plfa-part2-Substitution-12241" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-12430" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12432" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12433" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1470" class="Function">cong-app</a> <a id="plfa_plfa-part2-Substitution-12442" href="../Substitution/#plfa_plfa-part2-Substitution-12248" class="Bound">ss&#39;</a> <a id="plfa_plfa-part2-Substitution-12446" href="../Substitution/#plfa_plfa-part2-Substitution-12347" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-12447" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12449" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-12458" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-12464" href="../Substitution/#plfa_plfa-part2-Substitution-12241" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-12466" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12467" href="../Substitution/#plfa_plfa-part2-Substitution-12237" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-12470" href="../Substitution/#plfa_plfa-part2-Substitution-12347" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-12471" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-12478" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-12481" href="../Substitution/#plfa_plfa-part2-Substitution-10970" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-12489" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-12490" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-12492" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-12494" href="../Substitution/#plfa_plfa-part2-Substitution-12237" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-12497" href="../Substitution/#plfa_plfa-part2-Substitution-12347" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-12498" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-12500" href="../Substitution/#plfa_plfa-part2-Substitution-12252" class="Bound">tt&#39;</a> <a id="plfa_plfa-part2-Substitution-12504" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-12509" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-12518" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-12524" href="../Substitution/#plfa_plfa-part2-Substitution-12244" class="Bound">τ′</a> <a id="plfa_plfa-part2-Substitution-12527" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12528" href="../Substitution/#plfa_plfa-part2-Substitution-12237" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-12531" href="../Substitution/#plfa_plfa-part2-Substitution-12347" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-12532" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-12539" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
       <a id="plfa_plfa-part2-Substitution-12550" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12551" href="../Substitution/#plfa_plfa-part2-Substitution-12237" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-12554" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-12556" href="../Substitution/#plfa_plfa-part2-Substitution-12244" class="Bound">τ′</a><a id="plfa_plfa-part2-Substitution-12558" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12560" href="../Substitution/#plfa_plfa-part2-Substitution-12347" class="Bound">x</a>
     <a id="plfa_plfa-part2-Substitution-12567" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
</pre><h2 id="relating-rename-exts-ext-and-subst-zero-to-the-σ-algebra">Relating <code>rename</code>, <code>exts</code>, <code>ext</code>, and <code>subst-zero</code> to the σ algebra</h2><p>In this section we establish equations that relate <code>subst</code> and its helper functions (<code>rename</code>, <code>exts</code>, <code>ext</code>, and <code>subst-zero</code>) to terms in the σ algebra.</p><p>The first equation we prove is</p><pre><code>rename ρ M ≡ ⟪ ren ρ ⟫ M              (rename-subst-ren)</code></pre><p>Because <code>subst</code> uses the <code>exts</code> function, we need the following lemma which says that <code>exts</code> and <code>ext</code> do the same thing except that <code>ext</code> works on renamings and <code>exts</code> works on substitutions.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-ren-ext"></a><a id="plfa_plfa-part2-Substitution-13099" href="../Substitution/#plfa_plfa-part2-Substitution-13099" class="Function">ren-ext</a> <a id="plfa_plfa-part2-Substitution-13107" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-13109" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-13111" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13112" href="../Substitution/#plfa_plfa-part2-Substitution-13112" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-13114" href="../Substitution/#plfa_plfa-part2-Substitution-13114" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-13115" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-13117" href="../Substitution/#plfa_plfa-part2-Substitution-13117" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-13119" href="../Substitution/#plfa_plfa-part2-Substitution-13119" class="Bound">C</a> <a id="plfa_plfa-part2-Substitution-13121" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-13123" href="../Untyped/#plfa_plfa-part2-Untyped-2490" class="Datatype">Type</a><a id="plfa_plfa-part2-Substitution-13127" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-13129" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13130" href="../Substitution/#plfa_plfa-part2-Substitution-13130" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-13132" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-13134" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-13141" href="../Substitution/#plfa_plfa-part2-Substitution-13112" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-13143" href="../Substitution/#plfa_plfa-part2-Substitution-13114" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-13144" class="Symbol">}</a>
        <a id="plfa_plfa-part2-Substitution-13154" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-13156" href="../Substitution/#plfa_plfa-part2-Substitution-6481" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-13160" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13161" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-13165" href="../Substitution/#plfa_plfa-part2-Substitution-13130" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-13167" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13168" class="Argument">B</a> <a id="plfa_plfa-part2-Substitution-13170" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13172" href="../Substitution/#plfa_plfa-part2-Substitution-13117" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-13173" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-13176" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-13178" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-13183" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13184" href="../Substitution/#plfa_plfa-part2-Substitution-6481" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-13188" href="../Substitution/#plfa_plfa-part2-Substitution-13130" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-13189" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-13191" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13192" href="../Substitution/#plfa_plfa-part2-Substitution-13119" class="Bound">C</a><a id="plfa_plfa-part2-Substitution-13193" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-13195" href="../Substitution/#plfa_plfa-part2-Substitution-13099" class="Function">ren-ext</a> <a id="plfa_plfa-part2-Substitution-13203" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13204" href="../Substitution/#plfa_plfa-part2-Substitution-13204" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-13205" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-13207" href="../Substitution/#plfa_plfa-part2-Substitution-13207" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-13208" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-13210" href="../Substitution/#plfa_plfa-part2-Substitution-13210" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-13211" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-13213" href="../Substitution/#plfa_plfa-part2-Substitution-13213" class="Bound">C</a><a id="plfa_plfa-part2-Substitution-13214" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-13216" href="../Substitution/#plfa_plfa-part2-Substitution-13216" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-13217" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-13219" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13221" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-13236" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-13238" href="../Substitution/#plfa_plfa-part2-Substitution-13238" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-13240" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-13242" href="../Substitution/#plfa_plfa-part2-Substitution-13266" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-13248" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13249" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-13251" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13253" href="../Substitution/#plfa_plfa-part2-Substitution-13238" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-13254" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-13258" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-13266" href="../Substitution/#plfa_plfa-part2-Substitution-13266" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-13272" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-13274" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-13276" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13277" href="../Substitution/#plfa_plfa-part2-Substitution-13277" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-13279" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-13281" href="../Substitution/#plfa_plfa-part2-Substitution-13204" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-13283" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-13285" href="../Substitution/#plfa_plfa-part2-Substitution-13210" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-13287" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-13289" href="../Substitution/#plfa_plfa-part2-Substitution-13213" class="Bound">C</a><a id="plfa_plfa-part2-Substitution-13290" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-13292" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-13294" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13295" href="../Substitution/#plfa_plfa-part2-Substitution-6481" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-13299" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13300" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-13304" href="../Substitution/#plfa_plfa-part2-Substitution-13216" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-13305" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-13308" href="../Substitution/#plfa_plfa-part2-Substitution-13277" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-13310" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-13312" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-13317" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13318" href="../Substitution/#plfa_plfa-part2-Substitution-6481" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-13322" href="../Substitution/#plfa_plfa-part2-Substitution-13216" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-13323" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-13325" href="../Substitution/#plfa_plfa-part2-Substitution-13277" class="Bound">x</a>
  <a id="plfa_plfa-part2-Substitution-13329" href="../Substitution/#plfa_plfa-part2-Substitution-13266" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-13335" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13336" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-13338" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13340" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-13341" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-13343" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13345" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="plfa_plfa-part2-Substitution-13352" href="../Substitution/#plfa_plfa-part2-Substitution-13266" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-13358" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13359" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-13361" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13363" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-13365" href="../Substitution/#plfa_plfa-part2-Substitution-13365" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-13366" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-13368" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13370" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><p>With this lemma in hand, the proof is a straightforward induction on the term <code>M</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-rename-subst-ren"></a><a id="plfa_plfa-part2-Substitution-13472" href="../Substitution/#plfa_plfa-part2-Substitution-13472" class="Function">rename-subst-ren</a> <a id="plfa_plfa-part2-Substitution-13489" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-13491" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-13493" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13494" href="../Substitution/#plfa_plfa-part2-Substitution-13494" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-13496" href="../Substitution/#plfa_plfa-part2-Substitution-13496" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-13497" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-13499" href="../Substitution/#plfa_plfa-part2-Substitution-13499" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-13500" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-13502" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13503" href="../Substitution/#plfa_plfa-part2-Substitution-13503" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-13505" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-13507" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-13514" href="../Substitution/#plfa_plfa-part2-Substitution-13494" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-13516" href="../Substitution/#plfa_plfa-part2-Substitution-13496" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-13517" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-13519" href="../Substitution/#plfa_plfa-part2-Substitution-13519" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-13521" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-13523" href="../Substitution/#plfa_plfa-part2-Substitution-13494" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-13525" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-13527" href="../Substitution/#plfa_plfa-part2-Substitution-13499" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-13528" class="Symbol">}</a>
                 <a id="plfa_plfa-part2-Substitution-13547" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-13549" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-13556" href="../Substitution/#plfa_plfa-part2-Substitution-13503" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-13558" href="../Substitution/#plfa_plfa-part2-Substitution-13519" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-13560" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-13562" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-13564" href="../Substitution/#plfa_plfa-part2-Substitution-6481" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-13568" href="../Substitution/#plfa_plfa-part2-Substitution-13503" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-13570" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-13572" href="../Substitution/#plfa_plfa-part2-Substitution-13519" class="Bound">M</a>
<a id="plfa_plfa-part2-Substitution-13574" href="../Substitution/#plfa_plfa-part2-Substitution-13472" class="Function">rename-subst-ren</a> <a id="plfa_plfa-part2-Substitution-13591" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13592" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-13594" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13596" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-13598" href="../Substitution/#plfa_plfa-part2-Substitution-13598" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-13599" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-13601" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13603" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part2-Substitution-13608" href="../Substitution/#plfa_plfa-part2-Substitution-13472" class="Function">rename-subst-ren</a> <a id="plfa_plfa-part2-Substitution-13625" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13626" class="Argument">ρ</a> <a id="plfa_plfa-part2-Substitution-13628" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13630" href="../Substitution/#plfa_plfa-part2-Substitution-13630" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-13631" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-13633" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-13635" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13637" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-13639" href="../Substitution/#plfa_plfa-part2-Substitution-13639" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-13640" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-13642" class="Symbol">=</a>
  <a id="plfa_plfa-part2-Substitution-13646" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
      <a id="plfa_plfa-part2-Substitution-13658" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-13665" href="../Substitution/#plfa_plfa-part2-Substitution-13630" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-13667" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13668" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-13670" href="../Substitution/#plfa_plfa-part2-Substitution-13639" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-13671" class="Symbol">)</a>
    <a id="plfa_plfa-part2-Substitution-13677" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
      <a id="plfa_plfa-part2-Substitution-13687" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-13689" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-13696" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13697" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-13701" href="../Substitution/#plfa_plfa-part2-Substitution-13630" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-13702" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-13704" href="../Substitution/#plfa_plfa-part2-Substitution-13639" class="Bound">N</a>
    <a id="plfa_plfa-part2-Substitution-13710" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-13713" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-13718" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ_</a> <a id="plfa_plfa-part2-Substitution-13721" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13722" href="../Substitution/#plfa_plfa-part2-Substitution-13472" class="Function">rename-subst-ren</a> <a id="plfa_plfa-part2-Substitution-13739" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13740" class="Argument">ρ</a> <a id="plfa_plfa-part2-Substitution-13742" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13744" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-13748" href="../Substitution/#plfa_plfa-part2-Substitution-13630" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-13749" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-13751" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-13753" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13755" href="../Substitution/#plfa_plfa-part2-Substitution-13639" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-13756" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-13759" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
      <a id="plfa_plfa-part2-Substitution-13767" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-13769" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-13771" href="../Substitution/#plfa_plfa-part2-Substitution-6481" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-13775" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13776" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-13780" href="../Substitution/#plfa_plfa-part2-Substitution-13630" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-13781" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-13783" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-13785" href="../Substitution/#plfa_plfa-part2-Substitution-13639" class="Bound">N</a>
    <a id="plfa_plfa-part2-Substitution-13791" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-13794" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-13799" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ_</a> <a id="plfa_plfa-part2-Substitution-13802" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13803" href="../Substitution/#plfa_plfa-part2-Substitution-10970" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-13812" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13813" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-13815" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13817" href="../Substitution/#plfa_plfa-part2-Substitution-13639" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-13818" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-13820" href="../Substitution/#plfa_plfa-part2-Substitution-13099" class="Function">ren-ext</a> <a id="plfa_plfa-part2-Substitution-13828" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Substitution-13832" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-13834" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
      <a id="plfa_plfa-part2-Substitution-13842" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-13844" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-13846" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-13851" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13852" href="../Substitution/#plfa_plfa-part2-Substitution-6481" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-13856" href="../Substitution/#plfa_plfa-part2-Substitution-13630" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-13857" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-13859" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a>  <a id="plfa_plfa-part2-Substitution-13862" href="../Substitution/#plfa_plfa-part2-Substitution-13639" class="Bound">N</a>
    <a id="plfa_plfa-part2-Substitution-13868" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
      <a id="plfa_plfa-part2-Substitution-13878" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-13880" href="../Substitution/#plfa_plfa-part2-Substitution-6481" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-13884" href="../Substitution/#plfa_plfa-part2-Substitution-13630" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-13886" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-13888" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13889" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-13891" href="../Substitution/#plfa_plfa-part2-Substitution-13639" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-13892" class="Symbol">)</a>
  <a id="plfa_plfa-part2-Substitution-13896" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
<a id="plfa_plfa-part2-Substitution-13898" href="../Substitution/#plfa_plfa-part2-Substitution-13472" class="Function">rename-subst-ren</a> <a id="plfa_plfa-part2-Substitution-13915" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13916" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-13918" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13920" href="../Substitution/#plfa_plfa-part2-Substitution-13920" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-13922" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Substitution-13924" href="../Substitution/#plfa_plfa-part2-Substitution-13924" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-13925" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-13927" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13929" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1376" class="Function">cong₂</a> <a id="plfa_plfa-part2-Substitution-13935" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">_·_</a> <a id="plfa_plfa-part2-Substitution-13939" href="../Substitution/#plfa_plfa-part2-Substitution-13472" class="Function">rename-subst-ren</a> <a id="plfa_plfa-part2-Substitution-13956" href="../Substitution/#plfa_plfa-part2-Substitution-13472" class="Function">rename-subst-ren</a>
</pre><p>The substitution <code>ren S_</code> is equivalent to <code>↑</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-ren-shift"></a><a id="plfa_plfa-part2-Substitution-14035" href="../Substitution/#plfa_plfa-part2-Substitution-14035" class="Function">ren-shift</a> <a id="plfa_plfa-part2-Substitution-14045" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-14047" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-14049" href="../Substitution/#plfa_plfa-part2-Substitution-14049" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-14050" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-14052" href="../Substitution/#plfa_plfa-part2-Substitution-14052" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-14053" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-14055" href="../Substitution/#plfa_plfa-part2-Substitution-14055" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-14056" class="Symbol">}</a>
          <a id="plfa_plfa-part2-Substitution-14068" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-14070" href="../Substitution/#plfa_plfa-part2-Substitution-6481" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-14074" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Substitution-14077" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-14079" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a> <a id="plfa_plfa-part2-Substitution-14081" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14082" class="Argument">A</a> <a id="plfa_plfa-part2-Substitution-14084" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14086" href="../Substitution/#plfa_plfa-part2-Substitution-14055" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-14087" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14089" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14090" href="../Substitution/#plfa_plfa-part2-Substitution-14052" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-14091" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-14093" href="../Substitution/#plfa_plfa-part2-Substitution-14035" class="Function">ren-shift</a> <a id="plfa_plfa-part2-Substitution-14103" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14104" href="../Substitution/#plfa_plfa-part2-Substitution-14104" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-14105" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-14107" href="../Substitution/#plfa_plfa-part2-Substitution-14107" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-14108" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-14110" href="../Substitution/#plfa_plfa-part2-Substitution-14110" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-14111" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14113" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14115" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-14130" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-14132" href="../Substitution/#plfa_plfa-part2-Substitution-14132" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-14134" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-14136" href="../Substitution/#plfa_plfa-part2-Substitution-14160" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-14142" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14143" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-14145" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14147" href="../Substitution/#plfa_plfa-part2-Substitution-14132" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-14148" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-14152" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-14160" href="../Substitution/#plfa_plfa-part2-Substitution-14160" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-14166" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-14168" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-14170" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14171" href="../Substitution/#plfa_plfa-part2-Substitution-14171" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-14173" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-14175" href="../Substitution/#plfa_plfa-part2-Substitution-14104" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-14177" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-14179" href="../Substitution/#plfa_plfa-part2-Substitution-14107" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-14180" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14182" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-14184" href="../Substitution/#plfa_plfa-part2-Substitution-6481" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-14188" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-14189" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part2-Substitution-14191" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14192" class="Argument">B</a> <a id="plfa_plfa-part2-Substitution-14194" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14196" href="../Substitution/#plfa_plfa-part2-Substitution-14110" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-14197" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-14200" href="../Substitution/#plfa_plfa-part2-Substitution-14171" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-14202" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-14204" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a> <a id="plfa_plfa-part2-Substitution-14206" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14207" class="Argument">A</a> <a id="plfa_plfa-part2-Substitution-14209" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14211" href="../Substitution/#plfa_plfa-part2-Substitution-14110" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-14212" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14214" href="../Substitution/#plfa_plfa-part2-Substitution-14171" class="Bound">x</a>
  <a id="plfa_plfa-part2-Substitution-14218" href="../Substitution/#plfa_plfa-part2-Substitution-14160" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-14224" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14225" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-14227" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14229" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-14230" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14232" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14234" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="plfa_plfa-part2-Substitution-14241" href="../Substitution/#plfa_plfa-part2-Substitution-14160" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-14247" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14248" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-14250" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14252" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-14254" href="../Substitution/#plfa_plfa-part2-Substitution-14254" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-14255" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14257" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14259" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><p>The substitution <code>rename S_ M</code> is equivalent to shifting: <code>⟪ ↑ ⟫ M</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-rename-shift"></a><a id="plfa_plfa-part2-Substitution-14347" href="../Substitution/#plfa_plfa-part2-Substitution-14347" class="Function">rename-shift</a> <a id="plfa_plfa-part2-Substitution-14360" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-14362" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-14364" href="../Substitution/#plfa_plfa-part2-Substitution-14364" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-14365" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14367" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14368" href="../Substitution/#plfa_plfa-part2-Substitution-14368" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-14369" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14371" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14372" href="../Substitution/#plfa_plfa-part2-Substitution-14372" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-14373" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14375" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14376" href="../Substitution/#plfa_plfa-part2-Substitution-14376" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-14378" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-14380" href="../Substitution/#plfa_plfa-part2-Substitution-14364" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-14382" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-14384" href="../Substitution/#plfa_plfa-part2-Substitution-14368" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-14385" class="Symbol">}</a>
             <a id="plfa_plfa-part2-Substitution-14400" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-14402" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-14409" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-14410" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part2-Substitution-14412" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14413" class="Argument">B</a> <a id="plfa_plfa-part2-Substitution-14415" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14417" href="../Substitution/#plfa_plfa-part2-Substitution-14372" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-14418" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-14421" href="../Substitution/#plfa_plfa-part2-Substitution-14376" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-14423" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-14425" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-14427" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a> <a id="plfa_plfa-part2-Substitution-14429" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-14431" href="../Substitution/#plfa_plfa-part2-Substitution-14376" class="Bound">M</a>
<a id="plfa_plfa-part2-Substitution-14433" href="../Substitution/#plfa_plfa-part2-Substitution-14347" class="Function">rename-shift</a><a id="plfa_plfa-part2-Substitution-14445" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14446" href="../Substitution/#plfa_plfa-part2-Substitution-14446" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-14447" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-14449" href="../Substitution/#plfa_plfa-part2-Substitution-14449" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-14450" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-14452" href="../Substitution/#plfa_plfa-part2-Substitution-14452" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-14453" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-14455" href="../Substitution/#plfa_plfa-part2-Substitution-14455" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-14456" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14458" class="Symbol">=</a>
  <a id="plfa_plfa-part2-Substitution-14462" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
    <a id="plfa_plfa-part2-Substitution-14472" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-14479" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Substitution-14482" href="../Substitution/#plfa_plfa-part2-Substitution-14455" class="Bound">M</a>
  <a id="plfa_plfa-part2-Substitution-14486" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-14489" href="../Substitution/#plfa_plfa-part2-Substitution-13472" class="Function">rename-subst-ren</a> <a id="plfa_plfa-part2-Substitution-14506" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
    <a id="plfa_plfa-part2-Substitution-14512" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-14514" href="../Substitution/#plfa_plfa-part2-Substitution-6481" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-14518" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Substitution-14521" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-14523" href="../Substitution/#plfa_plfa-part2-Substitution-14455" class="Bound">M</a>
  <a id="plfa_plfa-part2-Substitution-14527" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-14530" href="../Substitution/#plfa_plfa-part2-Substitution-10970" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-14538" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14539" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-14541" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14543" href="../Substitution/#plfa_plfa-part2-Substitution-14455" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-14544" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14546" href="../Substitution/#plfa_plfa-part2-Substitution-14035" class="Function">ren-shift</a> <a id="plfa_plfa-part2-Substitution-14556" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-14561" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
    <a id="plfa_plfa-part2-Substitution-14567" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-14569" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a> <a id="plfa_plfa-part2-Substitution-14571" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-14573" href="../Substitution/#plfa_plfa-part2-Substitution-14455" class="Bound">M</a>
  <a id="plfa_plfa-part2-Substitution-14577" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
</pre><p>Next we prove the equation <code>exts-cons-shift</code>, which states that <code>exts</code> is equivalent to cons’ing Z onto the sequence formed by applying <code>σ</code> and then shifting. The proof is by case analysis on the variable <code>x</code>, using <code>rename-subst-ren</code> for when <code>x = S y</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-exts-cons-shift"></a><a id="plfa_plfa-part2-Substitution-14848" href="../Substitution/#plfa_plfa-part2-Substitution-14848" class="Function">exts-cons-shift</a> <a id="plfa_plfa-part2-Substitution-14864" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-14866" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-14868" href="../Substitution/#plfa_plfa-part2-Substitution-14868" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-14870" href="../Substitution/#plfa_plfa-part2-Substitution-14870" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-14871" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14873" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14874" href="../Substitution/#plfa_plfa-part2-Substitution-14874" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-14876" href="../Substitution/#plfa_plfa-part2-Substitution-14876" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-14877" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14879" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14880" href="../Substitution/#plfa_plfa-part2-Substitution-14880" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-14882" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-14884" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-14890" href="../Substitution/#plfa_plfa-part2-Substitution-14868" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-14892" href="../Substitution/#plfa_plfa-part2-Substitution-14870" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-14893" class="Symbol">}</a>
                <a id="plfa_plfa-part2-Substitution-14911" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-14913" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-14918" href="../Substitution/#plfa_plfa-part2-Substitution-14880" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-14920" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14921" href="../Substitution/#plfa_plfa-part2-Substitution-14874" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-14922" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14924" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14925" href="../Substitution/#plfa_plfa-part2-Substitution-14876" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-14926" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14928" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-14930" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-14931" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-14933" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-Substitution-14935" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-14937" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-14938" href="../Substitution/#plfa_plfa-part2-Substitution-14880" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-14940" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-14942" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-14943" class="Symbol">))</a>
<a id="plfa_plfa-part2-Substitution-14946" href="../Substitution/#plfa_plfa-part2-Substitution-14848" class="Function">exts-cons-shift</a> <a id="plfa_plfa-part2-Substitution-14962" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14964" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-14979" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-14981" href="../Substitution/#plfa_plfa-part2-Substitution-14981" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-14983" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-14985" href="../Substitution/#plfa_plfa-part2-Substitution-15008" class="Function">lemma</a><a id="plfa_plfa-part2-Substitution-14990" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14991" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-14993" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14995" href="../Substitution/#plfa_plfa-part2-Substitution-14981" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-14996" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-15000" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-15008" href="../Substitution/#plfa_plfa-part2-Substitution-15008" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-15014" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15016" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-15018" href="../Substitution/#plfa_plfa-part2-Substitution-15018" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-15020" href="../Substitution/#plfa_plfa-part2-Substitution-15020" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-15021" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-15023" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15024" href="../Substitution/#plfa_plfa-part2-Substitution-15024" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-15026" href="../Substitution/#plfa_plfa-part2-Substitution-15026" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-15027" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-15029" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15030" href="../Substitution/#plfa_plfa-part2-Substitution-15030" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-15032" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15034" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-15040" href="../Substitution/#plfa_plfa-part2-Substitution-15018" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-15042" href="../Substitution/#plfa_plfa-part2-Substitution-15020" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-15043" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-15045" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15046" href="../Substitution/#plfa_plfa-part2-Substitution-15046" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-15048" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15050" href="../Substitution/#plfa_plfa-part2-Substitution-15018" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-15052" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-15054" href="../Substitution/#plfa_plfa-part2-Substitution-15026" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-15056" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-15058" href="../Substitution/#plfa_plfa-part2-Substitution-15024" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-15059" class="Symbol">}</a>
                  <a id="plfa_plfa-part2-Substitution-15079" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-15081" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-15086" href="../Substitution/#plfa_plfa-part2-Substitution-15030" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-15088" href="../Substitution/#plfa_plfa-part2-Substitution-15046" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-15090" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-15092" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-15093" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-15095" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-Substitution-15097" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-15099" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-15100" href="../Substitution/#plfa_plfa-part2-Substitution-15030" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-15102" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-15104" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-15105" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-15108" href="../Substitution/#plfa_plfa-part2-Substitution-15046" class="Bound">x</a>
  <a id="plfa_plfa-part2-Substitution-15112" href="../Substitution/#plfa_plfa-part2-Substitution-15008" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-15118" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15119" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-15121" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15123" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-15124" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-15126" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15128" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="plfa_plfa-part2-Substitution-15135" href="../Substitution/#plfa_plfa-part2-Substitution-15008" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-15141" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15142" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-15144" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15146" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-15148" href="../Substitution/#plfa_plfa-part2-Substitution-15148" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-15149" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-15151" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15153" href="../Substitution/#plfa_plfa-part2-Substitution-13472" class="Function">rename-subst-ren</a>
</pre><p>As a corollary, we have a similar correspondence for <code>ren (ext ρ)</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-ext-cons-Z-shift"></a><a id="plfa_plfa-part2-Substitution-15252" href="../Substitution/#plfa_plfa-part2-Substitution-15252" class="Function">ext-cons-Z-shift</a> <a id="plfa_plfa-part2-Substitution-15269" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15271" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-15273" href="../Substitution/#plfa_plfa-part2-Substitution-15273" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-15275" href="../Substitution/#plfa_plfa-part2-Substitution-15275" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-15276" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-15278" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15279" href="../Substitution/#plfa_plfa-part2-Substitution-15279" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-15281" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15283" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-15290" href="../Substitution/#plfa_plfa-part2-Substitution-15273" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-15292" href="../Substitution/#plfa_plfa-part2-Substitution-15275" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-15293" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-15295" href="../Substitution/#plfa_plfa-part2-Substitution-15295" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-15296" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-15298" href="../Substitution/#plfa_plfa-part2-Substitution-15298" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-15299" class="Symbol">}</a>
                 <a id="plfa_plfa-part2-Substitution-15318" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-15320" href="../Substitution/#plfa_plfa-part2-Substitution-6481" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-15324" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-15325" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-15329" href="../Substitution/#plfa_plfa-part2-Substitution-15279" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-15331" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15332" class="Argument">B</a> <a id="plfa_plfa-part2-Substitution-15334" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15336" href="../Substitution/#plfa_plfa-part2-Substitution-15298" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-15337" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-15340" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-15342" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-15343" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-15345" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-Substitution-15347" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-15349" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-15350" href="../Substitution/#plfa_plfa-part2-Substitution-6481" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-15354" href="../Substitution/#plfa_plfa-part2-Substitution-15279" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-15356" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-15358" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-15359" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-15362" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15363" href="../Substitution/#plfa_plfa-part2-Substitution-15295" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-15364" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-15366" href="../Substitution/#plfa_plfa-part2-Substitution-15252" class="Function">ext-cons-Z-shift</a> <a id="plfa_plfa-part2-Substitution-15383" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15384" href="../Substitution/#plfa_plfa-part2-Substitution-15384" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-15385" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-15387" href="../Substitution/#plfa_plfa-part2-Substitution-15387" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-15388" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-15390" href="../Substitution/#plfa_plfa-part2-Substitution-15390" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-15391" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-15393" href="../Substitution/#plfa_plfa-part2-Substitution-15393" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-15394" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-15396" href="../Substitution/#plfa_plfa-part2-Substitution-15396" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-15397" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-15399" class="Symbol">=</a>
  <a id="plfa_plfa-part2-Substitution-15403" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
    <a id="plfa_plfa-part2-Substitution-15413" href="../Substitution/#plfa_plfa-part2-Substitution-6481" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-15417" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-15418" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-15422" href="../Substitution/#plfa_plfa-part2-Substitution-15390" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-15423" class="Symbol">)</a>
  <a id="plfa_plfa-part2-Substitution-15427" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-15430" href="../Substitution/#plfa_plfa-part2-Substitution-13099" class="Function">ren-ext</a> <a id="plfa_plfa-part2-Substitution-15438" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
    <a id="plfa_plfa-part2-Substitution-15444" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-15449" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-15450" href="../Substitution/#plfa_plfa-part2-Substitution-6481" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-15454" href="../Substitution/#plfa_plfa-part2-Substitution-15390" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-15455" class="Symbol">)</a>
  <a id="plfa_plfa-part2-Substitution-15459" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-15462" href="../Substitution/#plfa_plfa-part2-Substitution-14848" class="Function">exts-cons-shift</a><a id="plfa_plfa-part2-Substitution-15477" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15478" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-15480" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15482" href="../Substitution/#plfa_plfa-part2-Substitution-6481" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-15486" href="../Substitution/#plfa_plfa-part2-Substitution-15390" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-15487" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-15489" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
   <a id="plfa_plfa-part2-Substitution-15494" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-15496" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-15498" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-15499" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-15501" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-15503" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-15504" href="../Substitution/#plfa_plfa-part2-Substitution-6481" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-15508" href="../Substitution/#plfa_plfa-part2-Substitution-15390" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-15510" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-15512" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-15513" class="Symbol">))</a>
  <a id="plfa_plfa-part2-Substitution-15518" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
</pre><p>Finally, the <code>subst-zero M</code> substitution is equivalent to cons’ing <code>M</code> onto the identity substitution.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-subst-Z-cons-ids"></a><a id="plfa_plfa-part2-Substitution-15637" href="../Substitution/#plfa_plfa-part2-Substitution-15637" class="Function">subst-Z-cons-ids</a> <a id="plfa_plfa-part2-Substitution-15654" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15656" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-15658" href="../Substitution/#plfa_plfa-part2-Substitution-15658" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-15659" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-15661" href="../Substitution/#plfa_plfa-part2-Substitution-15661" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-15663" href="../Substitution/#plfa_plfa-part2-Substitution-15663" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-15665" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15667" href="../Untyped/#plfa_plfa-part2-Untyped-2490" class="Datatype">Type</a><a id="plfa_plfa-part2-Substitution-15671" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-15673" href="../Substitution/#plfa_plfa-part2-Substitution-15673" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-15675" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15677" href="../Substitution/#plfa_plfa-part2-Substitution-15658" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-15679" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-15681" href="../Substitution/#plfa_plfa-part2-Substitution-15663" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-15682" class="Symbol">}</a>
                 <a id="plfa_plfa-part2-Substitution-15701" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-15703" href="../Untyped/#plfa_plfa-part2-Untyped-7207" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Substitution-15714" href="../Substitution/#plfa_plfa-part2-Substitution-15673" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-15716" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-15718" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-15719" href="../Substitution/#plfa_plfa-part2-Substitution-15673" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-15721" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-15723" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-15726" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-15728" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15729" href="../Substitution/#plfa_plfa-part2-Substitution-15661" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-15730" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-15732" href="../Substitution/#plfa_plfa-part2-Substitution-15637" class="Function">subst-Z-cons-ids</a> <a id="plfa_plfa-part2-Substitution-15749" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15751" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-15766" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-15768" href="../Substitution/#plfa_plfa-part2-Substitution-15768" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-15770" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-15772" href="../Substitution/#plfa_plfa-part2-Substitution-15796" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-15778" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15779" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-15781" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15783" href="../Substitution/#plfa_plfa-part2-Substitution-15768" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-15784" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-15788" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-15796" href="../Substitution/#plfa_plfa-part2-Substitution-15796" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-15802" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15804" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-15806" href="../Substitution/#plfa_plfa-part2-Substitution-15806" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-15807" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-15809" href="../Substitution/#plfa_plfa-part2-Substitution-15809" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-15811" href="../Substitution/#plfa_plfa-part2-Substitution-15811" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-15813" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15815" href="../Untyped/#plfa_plfa-part2-Untyped-2490" class="Datatype">Type</a><a id="plfa_plfa-part2-Substitution-15819" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-15821" href="../Substitution/#plfa_plfa-part2-Substitution-15821" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-15823" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15825" href="../Substitution/#plfa_plfa-part2-Substitution-15806" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-15827" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-15829" href="../Substitution/#plfa_plfa-part2-Substitution-15811" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-15830" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-15832" href="../Substitution/#plfa_plfa-part2-Substitution-15832" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-15834" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15836" href="../Substitution/#plfa_plfa-part2-Substitution-15806" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-15838" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-15840" href="../Substitution/#plfa_plfa-part2-Substitution-15811" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-15842" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-15844" href="../Substitution/#plfa_plfa-part2-Substitution-15809" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-15845" class="Symbol">}</a>
                      <a id="plfa_plfa-part2-Substitution-15869" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-15871" href="../Untyped/#plfa_plfa-part2-Untyped-7207" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Substitution-15882" href="../Substitution/#plfa_plfa-part2-Substitution-15821" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-15884" href="../Substitution/#plfa_plfa-part2-Substitution-15832" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-15886" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-15888" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-15889" href="../Substitution/#plfa_plfa-part2-Substitution-15821" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-15891" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-15893" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-15896" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-15898" href="../Substitution/#plfa_plfa-part2-Substitution-15832" class="Bound">x</a>
  <a id="plfa_plfa-part2-Substitution-15902" href="../Substitution/#plfa_plfa-part2-Substitution-15796" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-15908" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15909" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-15911" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15913" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-15914" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-15916" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15918" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="plfa_plfa-part2-Substitution-15925" href="../Substitution/#plfa_plfa-part2-Substitution-15796" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-15931" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15932" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-15934" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15936" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-15938" href="../Substitution/#plfa_plfa-part2-Substitution-15938" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-15939" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-15941" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15943" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><h2 id="proofs-of-sub-abs-sub-id-and-rename-id">Proofs of sub-abs, sub-id, and rename-id</h2><p>The equation <code>sub-abs</code> follows immediately from the equation <code>exts-cons-shift</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-sub-abs"></a><a id="plfa_plfa-part2-Substitution-16088" href="../Substitution/#plfa_plfa-part2-Substitution-16088" class="Function">sub-abs</a> <a id="plfa_plfa-part2-Substitution-16096" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-16098" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-16100" href="../Substitution/#plfa_plfa-part2-Substitution-16100" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-16102" href="../Substitution/#plfa_plfa-part2-Substitution-16102" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-16103" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-16105" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-16106" href="../Substitution/#plfa_plfa-part2-Substitution-16106" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-16108" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-16110" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-16116" href="../Substitution/#plfa_plfa-part2-Substitution-16100" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-16118" href="../Substitution/#plfa_plfa-part2-Substitution-16102" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-16119" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-16121" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-16122" href="../Substitution/#plfa_plfa-part2-Substitution-16122" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-16124" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-16126" href="../Substitution/#plfa_plfa-part2-Substitution-16100" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-16128" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-16130" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-Substitution-16132" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-16134" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-16135" class="Symbol">}</a>
        <a id="plfa_plfa-part2-Substitution-16145" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-16147" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-16149" href="../Substitution/#plfa_plfa-part2-Substitution-16106" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-16151" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-16153" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-16154" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-16156" href="../Substitution/#plfa_plfa-part2-Substitution-16122" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-16157" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-16159" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-16161" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-16163" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-16165" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-16166" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-16168" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-16169" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-16171" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-16173" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-16174" href="../Substitution/#plfa_plfa-part2-Substitution-16106" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-16176" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-16178" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-16179" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-16181" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-16183" href="../Substitution/#plfa_plfa-part2-Substitution-16122" class="Bound">N</a>
<a id="plfa_plfa-part2-Substitution-16185" href="../Substitution/#plfa_plfa-part2-Substitution-16088" class="Function">sub-abs</a> <a id="plfa_plfa-part2-Substitution-16193" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-16194" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-16196" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-16198" href="../Substitution/#plfa_plfa-part2-Substitution-16198" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-16199" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-16201" class="Argument">N</a> <a id="plfa_plfa-part2-Substitution-16203" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-16205" href="../Substitution/#plfa_plfa-part2-Substitution-16205" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-16206" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-16208" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-16213" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
     <a id="plfa_plfa-part2-Substitution-16224" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-16226" href="../Substitution/#plfa_plfa-part2-Substitution-16198" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-16228" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-16230" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-16231" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-16233" href="../Substitution/#plfa_plfa-part2-Substitution-16205" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-16234" class="Symbol">)</a>
   <a id="plfa_plfa-part2-Substitution-16239" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
     <a id="plfa_plfa-part2-Substitution-16248" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-16250" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-16252" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-16257" href="../Substitution/#plfa_plfa-part2-Substitution-16198" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-16259" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-16261" href="../Substitution/#plfa_plfa-part2-Substitution-16205" class="Bound">N</a>
   <a id="plfa_plfa-part2-Substitution-16266" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-16269" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-16274" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ_</a> <a id="plfa_plfa-part2-Substitution-16277" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-16278" href="../Substitution/#plfa_plfa-part2-Substitution-10970" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-16286" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-16287" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-16289" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-16291" href="../Substitution/#plfa_plfa-part2-Substitution-16205" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-16292" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-16294" href="../Substitution/#plfa_plfa-part2-Substitution-14848" class="Function">exts-cons-shift</a> <a id="plfa_plfa-part2-Substitution-16310" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Substitution-16314" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-16316" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
     <a id="plfa_plfa-part2-Substitution-16323" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-16325" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-16327" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-16328" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-16330" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-16331" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-16333" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-16335" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-16336" href="../Substitution/#plfa_plfa-part2-Substitution-16198" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-16338" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-16340" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-16341" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-16343" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-16345" href="../Substitution/#plfa_plfa-part2-Substitution-16205" class="Bound">N</a>
   <a id="plfa_plfa-part2-Substitution-16350" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
</pre><p>The proof of <code>sub-id</code> requires the following lemma which says that extending the identity substitution produces the identity substitution.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-exts-ids"></a><a id="plfa_plfa-part2-Substitution-16505" href="../Substitution/#plfa_plfa-part2-Substitution-16505" class="Function">exts-ids</a> <a id="plfa_plfa-part2-Substitution-16514" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-16516" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-16518" href="../Substitution/#plfa_plfa-part2-Substitution-16518" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-16519" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-16521" href="../Substitution/#plfa_plfa-part2-Substitution-16521" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-16523" href="../Substitution/#plfa_plfa-part2-Substitution-16523" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-16524" class="Symbol">}</a>
         <a id="plfa_plfa-part2-Substitution-16535" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-16537" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-16542" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-16546" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-16548" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-16552" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-16553" href="../Substitution/#plfa_plfa-part2-Substitution-16518" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-16555" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-16557" href="../Substitution/#plfa_plfa-part2-Substitution-16523" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-16558" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-16560" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-16561" href="../Substitution/#plfa_plfa-part2-Substitution-16521" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-16562" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-16564" href="../Substitution/#plfa_plfa-part2-Substitution-16505" class="Function">exts-ids</a> <a id="plfa_plfa-part2-Substitution-16573" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-16574" href="../Substitution/#plfa_plfa-part2-Substitution-16574" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-16575" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-16577" href="../Substitution/#plfa_plfa-part2-Substitution-16577" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-16578" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-16580" href="../Substitution/#plfa_plfa-part2-Substitution-16580" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-16581" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-16583" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-16585" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-16600" href="../Substitution/#plfa_plfa-part2-Substitution-16614" class="Function">lemma</a>
  <a id="plfa_plfa-part2-Substitution-16608" class="Keyword">where</a> <a id="plfa_plfa-part2-Substitution-16614" href="../Substitution/#plfa_plfa-part2-Substitution-16614" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-16620" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-16622" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-16623" href="../Substitution/#plfa_plfa-part2-Substitution-16623" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-16625" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-16627" href="../Substitution/#plfa_plfa-part2-Substitution-16574" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-16629" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-16631" href="../Substitution/#plfa_plfa-part2-Substitution-16580" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-16633" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-16635" href="../Substitution/#plfa_plfa-part2-Substitution-16577" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-16636" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-16638" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-16640" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-16645" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-16649" href="../Substitution/#plfa_plfa-part2-Substitution-16623" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-16651" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-16653" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-16657" href="../Substitution/#plfa_plfa-part2-Substitution-16623" class="Bound">x</a>
        <a id="plfa_plfa-part2-Substitution-16667" href="../Substitution/#plfa_plfa-part2-Substitution-16614" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-16673" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-Substitution-16675" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-16677" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
        <a id="plfa_plfa-part2-Substitution-16690" href="../Substitution/#plfa_plfa-part2-Substitution-16614" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-16696" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-16697" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-16699" href="../Substitution/#plfa_plfa-part2-Substitution-16699" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-16700" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-16702" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-16704" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><p>The proof of <code>⟪ ids ⟫ M ≡ M</code> now follows easily by induction on <code>M</code>, using <code>exts-ids</code> in the case for <code>M ≡ ƛ N</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-sub-id"></a><a id="plfa_plfa-part2-Substitution-16836" href="../Substitution/#plfa_plfa-part2-Substitution-16836" class="Function">sub-id</a> <a id="plfa_plfa-part2-Substitution-16843" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-16845" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-16847" href="../Substitution/#plfa_plfa-part2-Substitution-16847" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-16848" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-16850" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-16851" href="../Substitution/#plfa_plfa-part2-Substitution-16851" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-16852" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-16854" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-16855" href="../Substitution/#plfa_plfa-part2-Substitution-16855" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-16857" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-16859" href="../Substitution/#plfa_plfa-part2-Substitution-16847" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-16861" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-16863" href="../Substitution/#plfa_plfa-part2-Substitution-16851" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-16864" class="Symbol">}</a>
         <a id="plfa_plfa-part2-Substitution-16875" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-16877" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-16879" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-16883" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-16885" href="../Substitution/#plfa_plfa-part2-Substitution-16855" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-16887" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-16889" href="../Substitution/#plfa_plfa-part2-Substitution-16855" class="Bound">M</a>
<a id="plfa_plfa-part2-Substitution-16891" href="../Substitution/#plfa_plfa-part2-Substitution-16836" class="Function">sub-id</a> <a id="plfa_plfa-part2-Substitution-16898" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-16899" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-16901" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-16903" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-16905" href="../Substitution/#plfa_plfa-part2-Substitution-16905" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-16906" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-16908" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-16910" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part2-Substitution-16915" href="../Substitution/#plfa_plfa-part2-Substitution-16836" class="Function">sub-id</a> <a id="plfa_plfa-part2-Substitution-16922" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-16923" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-16925" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-16927" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-16929" href="../Substitution/#plfa_plfa-part2-Substitution-16929" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-16930" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-16932" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-16937" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
     <a id="plfa_plfa-part2-Substitution-16948" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-16950" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-16954" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-16956" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-16957" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-16959" href="../Substitution/#plfa_plfa-part2-Substitution-16929" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-16960" class="Symbol">)</a>
   <a id="plfa_plfa-part2-Substitution-16965" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
     <a id="plfa_plfa-part2-Substitution-16974" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-16976" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-16978" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-16983" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-16987" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-16989" href="../Substitution/#plfa_plfa-part2-Substitution-16929" class="Bound">N</a>
   <a id="plfa_plfa-part2-Substitution-16994" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-16997" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-17002" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ_</a> <a id="plfa_plfa-part2-Substitution-17005" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-17006" href="../Substitution/#plfa_plfa-part2-Substitution-10970" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-17014" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17015" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-17017" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-17019" href="../Substitution/#plfa_plfa-part2-Substitution-16929" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-17020" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-17022" href="../Substitution/#plfa_plfa-part2-Substitution-16505" class="Function">exts-ids</a> <a id="plfa_plfa-part2-Substitution-17031" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Substitution-17035" class="Symbol">)</a>  <a id="plfa_plfa-part2-Substitution-17038" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
     <a id="plfa_plfa-part2-Substitution-17045" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-17047" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-17049" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-17053" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-17055" href="../Substitution/#plfa_plfa-part2-Substitution-16929" class="Bound">N</a>
   <a id="plfa_plfa-part2-Substitution-17060" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-17063" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-17068" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ_</a> <a id="plfa_plfa-part2-Substitution-17071" href="../Substitution/#plfa_plfa-part2-Substitution-16836" class="Function">sub-id</a> <a id="plfa_plfa-part2-Substitution-17078" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
     <a id="plfa_plfa-part2-Substitution-17085" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-17087" href="../Substitution/#plfa_plfa-part2-Substitution-16929" class="Bound">N</a>
   <a id="plfa_plfa-part2-Substitution-17092" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
<a id="plfa_plfa-part2-Substitution-17094" href="../Substitution/#plfa_plfa-part2-Substitution-16836" class="Function">sub-id</a> <a id="plfa_plfa-part2-Substitution-17101" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17102" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-17104" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-17106" href="../Substitution/#plfa_plfa-part2-Substitution-17106" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-17108" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Substitution-17110" href="../Substitution/#plfa_plfa-part2-Substitution-17110" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-17111" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-17113" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-17115" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1376" class="Function">cong₂</a> <a id="plfa_plfa-part2-Substitution-17121" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">_·_</a> <a id="plfa_plfa-part2-Substitution-17125" href="../Substitution/#plfa_plfa-part2-Substitution-16836" class="Function">sub-id</a> <a id="plfa_plfa-part2-Substitution-17132" href="../Substitution/#plfa_plfa-part2-Substitution-16836" class="Function">sub-id</a>
</pre><p>The <code>rename-id</code> equation is a corollary is <code>sub-id</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-rename-id"></a><a id="plfa_plfa-part2-Substitution-17206" href="../Substitution/#plfa_plfa-part2-Substitution-17206" class="Function">rename-id</a> <a id="plfa_plfa-part2-Substitution-17216" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-17218" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-17220" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17221" href="../Substitution/#plfa_plfa-part2-Substitution-17221" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-17222" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-17224" href="../Substitution/#plfa_plfa-part2-Substitution-17224" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-17225" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-17227" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17228" href="../Substitution/#plfa_plfa-part2-Substitution-17228" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-17230" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-17232" href="../Substitution/#plfa_plfa-part2-Substitution-17221" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-17234" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-17236" href="../Substitution/#plfa_plfa-part2-Substitution-17224" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-17237" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-17241" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-17243" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-17250" class="Symbol">(λ</a> <a id="plfa_plfa-part2-Substitution-17253" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17254" href="../Substitution/#plfa_plfa-part2-Substitution-17254" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-17255" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-17257" href="../Substitution/#plfa_plfa-part2-Substitution-17257" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-17259" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-17261" href="../Substitution/#plfa_plfa-part2-Substitution-17257" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-17262" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-17264" href="../Substitution/#plfa_plfa-part2-Substitution-17228" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-17266" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-17268" href="../Substitution/#plfa_plfa-part2-Substitution-17228" class="Bound">M</a>
<a id="plfa_plfa-part2-Substitution-17270" href="../Substitution/#plfa_plfa-part2-Substitution-17206" class="Function">rename-id</a> <a id="plfa_plfa-part2-Substitution-17280" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17281" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-17283" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-17285" href="../Substitution/#plfa_plfa-part2-Substitution-17285" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-17286" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-17288" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-17293" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
     <a id="plfa_plfa-part2-Substitution-17304" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-17311" class="Symbol">(λ</a> <a id="plfa_plfa-part2-Substitution-17314" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17315" href="../Substitution/#plfa_plfa-part2-Substitution-17315" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-17316" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-17318" href="../Substitution/#plfa_plfa-part2-Substitution-17318" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-17320" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-17322" href="../Substitution/#plfa_plfa-part2-Substitution-17318" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-17323" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-17325" href="../Substitution/#plfa_plfa-part2-Substitution-17285" class="Bound">M</a>
   <a id="plfa_plfa-part2-Substitution-17330" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-17333" href="../Substitution/#plfa_plfa-part2-Substitution-13472" class="Function">rename-subst-ren</a>  <a id="plfa_plfa-part2-Substitution-17351" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
     <a id="plfa_plfa-part2-Substitution-17358" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-17360" href="../Substitution/#plfa_plfa-part2-Substitution-6481" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-17364" class="Symbol">(λ</a> <a id="plfa_plfa-part2-Substitution-17367" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17368" href="../Substitution/#plfa_plfa-part2-Substitution-17368" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-17369" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-17371" href="../Substitution/#plfa_plfa-part2-Substitution-17371" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-17373" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-17375" href="../Substitution/#plfa_plfa-part2-Substitution-17371" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-17376" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-17378" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-17380" href="../Substitution/#plfa_plfa-part2-Substitution-17285" class="Bound">M</a>
   <a id="plfa_plfa-part2-Substitution-17385" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
     <a id="plfa_plfa-part2-Substitution-17394" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-17396" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-17400" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-17402" href="../Substitution/#plfa_plfa-part2-Substitution-17285" class="Bound">M</a>
   <a id="plfa_plfa-part2-Substitution-17407" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-17410" href="../Substitution/#plfa_plfa-part2-Substitution-16836" class="Function">sub-id</a>  <a id="plfa_plfa-part2-Substitution-17418" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
     <a id="plfa_plfa-part2-Substitution-17425" href="../Substitution/#plfa_plfa-part2-Substitution-17285" class="Bound">M</a>
   <a id="plfa_plfa-part2-Substitution-17430" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
</pre><h2 id="proof-of-sub-idr">Proof of sub-idR</h2><p>The proof of <code>sub-idR</code> follows directly from <code>sub-id</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-sub-idR"></a><a id="plfa_plfa-part2-Substitution-17522" href="../Substitution/#plfa_plfa-part2-Substitution-17522" class="Function">sub-idR</a> <a id="plfa_plfa-part2-Substitution-17530" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-17532" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-17534" href="../Substitution/#plfa_plfa-part2-Substitution-17534" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-17536" href="../Substitution/#plfa_plfa-part2-Substitution-17536" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-17537" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-17539" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17540" href="../Substitution/#plfa_plfa-part2-Substitution-17540" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-17542" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-17544" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-17550" href="../Substitution/#plfa_plfa-part2-Substitution-17534" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-17552" href="../Substitution/#plfa_plfa-part2-Substitution-17536" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-17553" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-17555" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17556" href="../Substitution/#plfa_plfa-part2-Substitution-17556" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-17557" class="Symbol">}</a>
       <a id="plfa_plfa-part2-Substitution-17566" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-17568" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-17569" href="../Substitution/#plfa_plfa-part2-Substitution-17540" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-17571" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-17573" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-17576" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-17578" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-17580" href="../Substitution/#plfa_plfa-part2-Substitution-17540" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-17582" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17583" href="../Substitution/#plfa_plfa-part2-Substitution-17556" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-17584" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-17586" href="../Substitution/#plfa_plfa-part2-Substitution-17522" class="Function">sub-idR</a> <a id="plfa_plfa-part2-Substitution-17594" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17595" href="../Substitution/#plfa_plfa-part2-Substitution-17595" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-17596" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-17598" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-17600" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-17602" href="../Substitution/#plfa_plfa-part2-Substitution-17602" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-17603" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-17605" href="../Substitution/#plfa_plfa-part2-Substitution-17605" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-17606" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-17608" class="Symbol">=</a>
          <a id="plfa_plfa-part2-Substitution-17620" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
            <a id="plfa_plfa-part2-Substitution-17638" href="../Substitution/#plfa_plfa-part2-Substitution-17602" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-17640" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-17642" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a>
          <a id="plfa_plfa-part2-Substitution-17656" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
            <a id="plfa_plfa-part2-Substitution-17672" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-17674" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-17678" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-17680" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-17682" href="../Substitution/#plfa_plfa-part2-Substitution-17602" class="Bound">σ</a>
          <a id="plfa_plfa-part2-Substitution-17694" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-17697" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-17712" class="Symbol">(λ</a> <a id="plfa_plfa-part2-Substitution-17715" href="../Substitution/#plfa_plfa-part2-Substitution-17715" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-17717" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-17719" href="../Substitution/#plfa_plfa-part2-Substitution-16836" class="Function">sub-id</a><a id="plfa_plfa-part2-Substitution-17725" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-17727" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
            <a id="plfa_plfa-part2-Substitution-17741" href="../Substitution/#plfa_plfa-part2-Substitution-17602" class="Bound">σ</a>
          <a id="plfa_plfa-part2-Substitution-17753" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
</pre><h2 id="proof-of-sub-sub">Proof of sub-sub</h2><p>The <code>sub-sub</code> equation states that sequenced substitutions <code>σ ⨟ τ</code> are equivalent to first applying <code>σ</code> then applying <code>τ</code>.</p><pre><code>⟪ τ ⟫ ⟪ σ ⟫ M  ≡ ⟪ σ ⨟ τ ⟫ M</code></pre><p>The proof requires several lemmas. First, we need to prove the specialization for renaming.</p><pre><code>rename ρ (rename ρ′ M) ≡ rename (ρ ∘ ρ′) M</code></pre><p>This in turn requires the following lemma about <code>ext</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-compose-ext"></a><a id="plfa_plfa-part2-Substitution-18145" href="../Substitution/#plfa_plfa-part2-Substitution-18145" class="Function">compose-ext</a> <a id="plfa_plfa-part2-Substitution-18157" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18159" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-18161" href="../Substitution/#plfa_plfa-part2-Substitution-18161" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-18163" href="../Substitution/#plfa_plfa-part2-Substitution-18163" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-18165" href="../Substitution/#plfa_plfa-part2-Substitution-18165" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-18166" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18168" href="../Substitution/#plfa_plfa-part2-Substitution-18168" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-18170" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18172" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-18179" href="../Substitution/#plfa_plfa-part2-Substitution-18163" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-18181" href="../Substitution/#plfa_plfa-part2-Substitution-18165" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-18182" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-18184" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18185" href="../Substitution/#plfa_plfa-part2-Substitution-18185" class="Bound">ρ′</a> <a id="plfa_plfa-part2-Substitution-18188" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18190" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-18197" href="../Substitution/#plfa_plfa-part2-Substitution-18161" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-18199" href="../Substitution/#plfa_plfa-part2-Substitution-18163" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-18200" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-18202" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18203" href="../Substitution/#plfa_plfa-part2-Substitution-18203" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-18205" href="../Substitution/#plfa_plfa-part2-Substitution-18205" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-18206" class="Symbol">}</a>
            <a id="plfa_plfa-part2-Substitution-18220" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-18222" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-18224" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-18228" href="../Substitution/#plfa_plfa-part2-Substitution-18168" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-18229" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-18231" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-18233" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-18234" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-18238" href="../Substitution/#plfa_plfa-part2-Substitution-18185" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-18240" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-18243" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-18245" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-18249" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-18250" href="../Substitution/#plfa_plfa-part2-Substitution-18168" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-18252" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-18254" href="../Substitution/#plfa_plfa-part2-Substitution-18185" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-18256" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-18258" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18259" href="../Substitution/#plfa_plfa-part2-Substitution-18205" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-18260" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-18262" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18263" href="../Substitution/#plfa_plfa-part2-Substitution-18203" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-18264" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-18266" href="../Substitution/#plfa_plfa-part2-Substitution-18145" class="Function">compose-ext</a> <a id="plfa_plfa-part2-Substitution-18278" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-18280" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-18295" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-18297" href="../Substitution/#plfa_plfa-part2-Substitution-18297" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-18299" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-18301" href="../Substitution/#plfa_plfa-part2-Substitution-18325" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-18307" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18308" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-18310" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-18312" href="../Substitution/#plfa_plfa-part2-Substitution-18297" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-18313" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-18317" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-18325" href="../Substitution/#plfa_plfa-part2-Substitution-18325" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-18331" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18333" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-18335" href="../Substitution/#plfa_plfa-part2-Substitution-18335" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-18337" href="../Substitution/#plfa_plfa-part2-Substitution-18337" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-18339" href="../Substitution/#plfa_plfa-part2-Substitution-18339" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-18340" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18342" href="../Substitution/#plfa_plfa-part2-Substitution-18342" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-18344" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18346" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-18353" href="../Substitution/#plfa_plfa-part2-Substitution-18337" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-18355" href="../Substitution/#plfa_plfa-part2-Substitution-18339" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-18356" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-18358" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18359" href="../Substitution/#plfa_plfa-part2-Substitution-18359" class="Bound">ρ′</a> <a id="plfa_plfa-part2-Substitution-18362" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18364" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-18371" href="../Substitution/#plfa_plfa-part2-Substitution-18335" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-18373" href="../Substitution/#plfa_plfa-part2-Substitution-18337" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-18374" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-18376" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18377" href="../Substitution/#plfa_plfa-part2-Substitution-18377" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-18379" href="../Substitution/#plfa_plfa-part2-Substitution-18379" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-18380" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-18382" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18383" href="../Substitution/#plfa_plfa-part2-Substitution-18383" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-18385" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18387" href="../Substitution/#plfa_plfa-part2-Substitution-18335" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-18389" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-18391" href="../Substitution/#plfa_plfa-part2-Substitution-18379" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-18393" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-18395" href="../Substitution/#plfa_plfa-part2-Substitution-18377" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-18396" class="Symbol">}</a>
              <a id="plfa_plfa-part2-Substitution-18412" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-18414" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-18416" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-18420" href="../Substitution/#plfa_plfa-part2-Substitution-18342" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-18421" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-18423" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-18425" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-18426" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-18430" href="../Substitution/#plfa_plfa-part2-Substitution-18359" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-18432" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-18435" href="../Substitution/#plfa_plfa-part2-Substitution-18383" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-18437" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-18439" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-18443" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-18444" href="../Substitution/#plfa_plfa-part2-Substitution-18342" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-18446" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-18448" href="../Substitution/#plfa_plfa-part2-Substitution-18359" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-18450" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-18452" href="../Substitution/#plfa_plfa-part2-Substitution-18383" class="Bound">x</a>
  <a id="plfa_plfa-part2-Substitution-18456" href="../Substitution/#plfa_plfa-part2-Substitution-18325" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-18462" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18463" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-18465" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-18467" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-18468" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-18470" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-18472" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="plfa_plfa-part2-Substitution-18479" href="../Substitution/#plfa_plfa-part2-Substitution-18325" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-18485" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18486" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-18488" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-18490" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-18492" href="../Substitution/#plfa_plfa-part2-Substitution-18492" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-18493" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-18495" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-18497" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre><p>To prove that composing renamings is equivalent to applying one after the other using <code>rename</code>, we proceed by induction on the term <code>M</code>, using the <code>compose-ext</code> lemma in the case for <code>M ≡ ƛ N</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-compose-rename"></a><a id="plfa_plfa-part2-Substitution-18710" href="../Substitution/#plfa_plfa-part2-Substitution-18710" class="Function">compose-rename</a> <a id="plfa_plfa-part2-Substitution-18725" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18727" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-18729" href="../Substitution/#plfa_plfa-part2-Substitution-18729" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-18731" href="../Substitution/#plfa_plfa-part2-Substitution-18731" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-18733" href="../Substitution/#plfa_plfa-part2-Substitution-18733" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-18734" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18736" href="../Substitution/#plfa_plfa-part2-Substitution-18736" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-18737" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18739" href="../Substitution/#plfa_plfa-part2-Substitution-18739" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-18741" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18743" href="../Substitution/#plfa_plfa-part2-Substitution-18729" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-18745" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-18747" href="../Substitution/#plfa_plfa-part2-Substitution-18736" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-18748" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18750" href="../Substitution/#plfa_plfa-part2-Substitution-18750" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-18752" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18754" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-18761" href="../Substitution/#plfa_plfa-part2-Substitution-18731" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-18763" href="../Substitution/#plfa_plfa-part2-Substitution-18733" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-18764" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18766" href="../Substitution/#plfa_plfa-part2-Substitution-18766" class="Bound">ρ′</a> <a id="plfa_plfa-part2-Substitution-18769" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18771" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-18778" href="../Substitution/#plfa_plfa-part2-Substitution-18729" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-18780" href="../Substitution/#plfa_plfa-part2-Substitution-18731" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-18781" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-18785" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-18787" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-18794" href="../Substitution/#plfa_plfa-part2-Substitution-18750" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-18796" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-18797" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-18804" href="../Substitution/#plfa_plfa-part2-Substitution-18766" class="Bound">ρ′</a> <a id="plfa_plfa-part2-Substitution-18807" href="../Substitution/#plfa_plfa-part2-Substitution-18739" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-18808" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-18810" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-18812" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-18819" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-18820" href="../Substitution/#plfa_plfa-part2-Substitution-18750" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-18822" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-18824" href="../Substitution/#plfa_plfa-part2-Substitution-18766" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-18826" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-18828" href="../Substitution/#plfa_plfa-part2-Substitution-18739" class="Bound">M</a>
<a id="plfa_plfa-part2-Substitution-18830" href="../Substitution/#plfa_plfa-part2-Substitution-18710" class="Function">compose-rename</a> <a id="plfa_plfa-part2-Substitution-18845" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18846" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-18848" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-18850" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-18852" href="../Substitution/#plfa_plfa-part2-Substitution-18852" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-18853" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-18855" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-18857" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part2-Substitution-18862" href="../Substitution/#plfa_plfa-part2-Substitution-18710" class="Function">compose-rename</a> <a id="plfa_plfa-part2-Substitution-18877" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18878" href="../Substitution/#plfa_plfa-part2-Substitution-18878" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-18879" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18881" href="../Substitution/#plfa_plfa-part2-Substitution-18881" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-18882" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18884" href="../Substitution/#plfa_plfa-part2-Substitution-18884" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-18885" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18887" href="../Substitution/#plfa_plfa-part2-Substitution-18887" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-18888" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18890" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-18892" href="../Substitution/#plfa_plfa-part2-Substitution-18892" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-18893" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18895" href="../Substitution/#plfa_plfa-part2-Substitution-18895" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-18896" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18898" href="../Substitution/#plfa_plfa-part2-Substitution-18898" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-18900" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-18902" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-18904" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-18909" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ_</a> <a id="plfa_plfa-part2-Substitution-18912" href="../Substitution/#plfa_plfa-part2-Substitution-18924" class="Function">G</a>
  <a id="plfa_plfa-part2-Substitution-18916" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-18924" href="../Substitution/#plfa_plfa-part2-Substitution-18924" class="Function">G</a> <a id="plfa_plfa-part2-Substitution-18926" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18928" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-18935" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-18936" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-18940" href="../Substitution/#plfa_plfa-part2-Substitution-18895" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-18941" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-18943" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-18944" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-18951" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-18952" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-18956" href="../Substitution/#plfa_plfa-part2-Substitution-18898" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-18958" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-18960" href="../Substitution/#plfa_plfa-part2-Substitution-18892" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-18961" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-18963" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-18965" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-18972" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-18973" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-18977" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-18978" href="../Substitution/#plfa_plfa-part2-Substitution-18895" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-18980" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-18982" href="../Substitution/#plfa_plfa-part2-Substitution-18898" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-18984" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-18987" href="../Substitution/#plfa_plfa-part2-Substitution-18892" class="Bound">N</a>
  <a id="plfa_plfa-part2-Substitution-18991" href="../Substitution/#plfa_plfa-part2-Substitution-18924" class="Function">G</a> <a id="plfa_plfa-part2-Substitution-18993" class="Symbol">=</a>
      <a id="plfa_plfa-part2-Substitution-19001" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
        <a id="plfa_plfa-part2-Substitution-19015" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-19022" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19023" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-19027" href="../Substitution/#plfa_plfa-part2-Substitution-18895" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-19028" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-19030" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19031" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-19038" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19039" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-19043" href="../Substitution/#plfa_plfa-part2-Substitution-18898" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-19045" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-19047" href="../Substitution/#plfa_plfa-part2-Substitution-18892" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-19048" class="Symbol">)</a>
      <a id="plfa_plfa-part2-Substitution-19056" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-19059" href="../Substitution/#plfa_plfa-part2-Substitution-18710" class="Function">compose-rename</a><a id="plfa_plfa-part2-Substitution-19073" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-19074" class="Argument">ρ</a> <a id="plfa_plfa-part2-Substitution-19076" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-19078" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-19082" href="../Substitution/#plfa_plfa-part2-Substitution-18895" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-19083" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19085" class="Argument">ρ′</a> <a id="plfa_plfa-part2-Substitution-19088" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-19090" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-19094" href="../Substitution/#plfa_plfa-part2-Substitution-18898" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-19096" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-19098" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
        <a id="plfa_plfa-part2-Substitution-19108" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-19115" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-19117" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-19121" href="../Substitution/#plfa_plfa-part2-Substitution-18895" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-19122" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-19124" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-19126" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19127" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-19131" href="../Substitution/#plfa_plfa-part2-Substitution-18898" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-19133" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-19136" href="../Substitution/#plfa_plfa-part2-Substitution-18892" class="Bound">N</a>
      <a id="plfa_plfa-part2-Substitution-19144" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-19147" href="../Substitution/#plfa_plfa-part2-Substitution-10210" class="Function">cong-rename</a> <a id="plfa_plfa-part2-Substitution-19159" href="../Substitution/#plfa_plfa-part2-Substitution-18145" class="Function">compose-ext</a> <a id="plfa_plfa-part2-Substitution-19171" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
        <a id="plfa_plfa-part2-Substitution-19181" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-19188" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19189" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-19193" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19194" href="../Substitution/#plfa_plfa-part2-Substitution-18895" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-19196" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-19198" href="../Substitution/#plfa_plfa-part2-Substitution-18898" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-19200" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-19203" href="../Substitution/#plfa_plfa-part2-Substitution-18892" class="Bound">N</a>
      <a id="plfa_plfa-part2-Substitution-19211" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
<a id="plfa_plfa-part2-Substitution-19213" href="../Substitution/#plfa_plfa-part2-Substitution-18710" class="Function">compose-rename</a> <a id="plfa_plfa-part2-Substitution-19228" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-19229" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-19231" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-19233" href="../Substitution/#plfa_plfa-part2-Substitution-19233" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-19235" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Substitution-19237" href="../Substitution/#plfa_plfa-part2-Substitution-19237" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-19238" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-19240" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-19242" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1376" class="Function">cong₂</a> <a id="plfa_plfa-part2-Substitution-19248" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">_·_</a> <a id="plfa_plfa-part2-Substitution-19252" href="../Substitution/#plfa_plfa-part2-Substitution-18710" class="Function">compose-rename</a> <a id="plfa_plfa-part2-Substitution-19267" href="../Substitution/#plfa_plfa-part2-Substitution-18710" class="Function">compose-rename</a>
</pre><p>The next lemma states that if a renaming and substitution commute on variables, then they also commute on terms. We explain the proof in detail below.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-commute-subst-rename"></a><a id="plfa_plfa-part2-Substitution-19447" href="../Substitution/#plfa_plfa-part2-Substitution-19447" class="Function">commute-subst-rename</a> <a id="plfa_plfa-part2-Substitution-19468" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-19470" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-19472" href="../Substitution/#plfa_plfa-part2-Substitution-19472" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-19474" href="../Substitution/#plfa_plfa-part2-Substitution-19474" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-19475" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19477" href="../Substitution/#plfa_plfa-part2-Substitution-19477" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-19479" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-19481" href="../Substitution/#plfa_plfa-part2-Substitution-19472" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-19483" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-19485" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-19486" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19488" href="../Substitution/#plfa_plfa-part2-Substitution-19488" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-19490" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-19492" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-19498" href="../Substitution/#plfa_plfa-part2-Substitution-19472" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-19500" href="../Substitution/#plfa_plfa-part2-Substitution-19474" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-19501" class="Symbol">}</a>
                        <a id="plfa_plfa-part2-Substitution-19527" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-19528" href="../Substitution/#plfa_plfa-part2-Substitution-19528" class="Bound">ρ₁</a> <a id="plfa_plfa-part2-Substitution-19531" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-19533" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-19540" href="../Substitution/#plfa_plfa-part2-Substitution-19472" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-19542" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19543" href="../Substitution/#plfa_plfa-part2-Substitution-19472" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-19545" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-19547" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-19548" class="Symbol">)}{</a><a id="plfa_plfa-part2-Substitution-19551" href="../Substitution/#plfa_plfa-part2-Substitution-19551" class="Bound">ρ₂</a> <a id="plfa_plfa-part2-Substitution-19554" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-19556" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-19563" href="../Substitution/#plfa_plfa-part2-Substitution-19474" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-19565" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19566" href="../Substitution/#plfa_plfa-part2-Substitution-19474" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-19568" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-19570" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-19571" class="Symbol">)}</a>
                     <a id="plfa_plfa-part2-Substitution-19595" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-19597" class="Symbol">(∀{</a><a id="plfa_plfa-part2-Substitution-19600" href="../Substitution/#plfa_plfa-part2-Substitution-19600" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-19602" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-19604" href="../Substitution/#plfa_plfa-part2-Substitution-19472" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-19606" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-19608" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-19609" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-19611" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-19613" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-19618" href="../Substitution/#plfa_plfa-part2-Substitution-19488" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-19620" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19621" href="../Substitution/#plfa_plfa-part2-Substitution-19528" class="Bound">ρ₁</a> <a id="plfa_plfa-part2-Substitution-19624" href="../Substitution/#plfa_plfa-part2-Substitution-19600" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-19625" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-19627" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-19629" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-19636" href="../Substitution/#plfa_plfa-part2-Substitution-19551" class="Bound">ρ₂</a> <a id="plfa_plfa-part2-Substitution-19639" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19640" href="../Substitution/#plfa_plfa-part2-Substitution-19488" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-19642" href="../Substitution/#plfa_plfa-part2-Substitution-19600" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-19643" class="Symbol">))</a>
                     <a id="plfa_plfa-part2-Substitution-19667" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-19669" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-19675" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19676" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-19681" href="../Substitution/#plfa_plfa-part2-Substitution-19488" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-19682" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-19684" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19685" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-19692" href="../Substitution/#plfa_plfa-part2-Substitution-19528" class="Bound">ρ₁</a> <a id="plfa_plfa-part2-Substitution-19695" href="../Substitution/#plfa_plfa-part2-Substitution-19477" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-19696" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-19698" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-19700" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-19707" href="../Substitution/#plfa_plfa-part2-Substitution-19551" class="Bound">ρ₂</a> <a id="plfa_plfa-part2-Substitution-19710" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19711" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-19717" href="../Substitution/#plfa_plfa-part2-Substitution-19488" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-19719" href="../Substitution/#plfa_plfa-part2-Substitution-19477" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-19720" class="Symbol">)</a>
<a id="plfa_plfa-part2-Substitution-19722" href="../Substitution/#plfa_plfa-part2-Substitution-19447" class="Function">commute-subst-rename</a> <a id="plfa_plfa-part2-Substitution-19743" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-19744" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-19746" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-19748" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-19750" href="../Substitution/#plfa_plfa-part2-Substitution-19750" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-19751" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-19753" href="../Substitution/#plfa_plfa-part2-Substitution-19753" class="Bound">H</a> <a id="plfa_plfa-part2-Substitution-19755" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-19757" href="../Substitution/#plfa_plfa-part2-Substitution-19753" class="Bound">H</a>
<a id="plfa_plfa-part2-Substitution-19759" href="../Substitution/#plfa_plfa-part2-Substitution-19447" class="Function">commute-subst-rename</a> <a id="plfa_plfa-part2-Substitution-19780" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-19781" href="../Substitution/#plfa_plfa-part2-Substitution-19781" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-19782" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19784" href="../Substitution/#plfa_plfa-part2-Substitution-19784" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-19785" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19787" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-19789" href="../Substitution/#plfa_plfa-part2-Substitution-19789" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-19790" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19792" href="../Substitution/#plfa_plfa-part2-Substitution-19792" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-19793" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19795" href="../Substitution/#plfa_plfa-part2-Substitution-19795" class="Bound">ρ₁</a><a id="plfa_plfa-part2-Substitution-19797" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19799" href="../Substitution/#plfa_plfa-part2-Substitution-19799" class="Bound">ρ₂</a><a id="plfa_plfa-part2-Substitution-19801" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-19803" href="../Substitution/#plfa_plfa-part2-Substitution-19803" class="Bound">H</a> <a id="plfa_plfa-part2-Substitution-19805" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-19810" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-19815" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ_</a> <a id="plfa_plfa-part2-Substitution-19818" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19819" href="../Substitution/#plfa_plfa-part2-Substitution-19447" class="Function">commute-subst-rename</a><a id="plfa_plfa-part2-Substitution-19839" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-19840" href="../Substitution/#plfa_plfa-part2-Substitution-19781" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-19842" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-19844" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-19845" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19847" href="../Substitution/#plfa_plfa-part2-Substitution-19784" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-19849" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-19851" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-19852" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19854" href="../Substitution/#plfa_plfa-part2-Substitution-19789" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-19855" class="Symbol">}</a>
               <a id="plfa_plfa-part2-Substitution-19872" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-19873" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-19878" href="../Substitution/#plfa_plfa-part2-Substitution-19792" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-19879" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19881" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-19885" href="../Substitution/#plfa_plfa-part2-Substitution-19795" class="Bound">ρ₁</a><a id="plfa_plfa-part2-Substitution-19887" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19889" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-19893" href="../Substitution/#plfa_plfa-part2-Substitution-19799" class="Bound">ρ₂</a><a id="plfa_plfa-part2-Substitution-19895" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-19897" class="Symbol">(λ</a> <a id="plfa_plfa-part2-Substitution-19900" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-19901" href="../Substitution/#plfa_plfa-part2-Substitution-19901" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-19902" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-19904" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-19906" href="../Substitution/#plfa_plfa-part2-Substitution-19927" class="Function">H′</a> <a id="plfa_plfa-part2-Substitution-19909" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-19910" href="../Substitution/#plfa_plfa-part2-Substitution-19901" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-19911" class="Symbol">}))</a>
   <a id="plfa_plfa-part2-Substitution-19918" class="Keyword">where</a>
   <a id="plfa_plfa-part2-Substitution-19927" href="../Substitution/#plfa_plfa-part2-Substitution-19927" class="Function">H′</a> <a id="plfa_plfa-part2-Substitution-19930" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-19932" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-19933" href="../Substitution/#plfa_plfa-part2-Substitution-19933" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-19935" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-19937" href="../Substitution/#plfa_plfa-part2-Substitution-19781" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-19939" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-19941" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-Substitution-19943" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-19945" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-19946" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-19948" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-19950" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-19955" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19956" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-19961" href="../Substitution/#plfa_plfa-part2-Substitution-19792" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-19962" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-19964" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19965" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-19969" href="../Substitution/#plfa_plfa-part2-Substitution-19795" class="Bound">ρ₁</a> <a id="plfa_plfa-part2-Substitution-19972" href="../Substitution/#plfa_plfa-part2-Substitution-19933" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-19973" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-19975" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-19977" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-19984" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19985" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-19989" href="../Substitution/#plfa_plfa-part2-Substitution-19799" class="Bound">ρ₂</a><a id="plfa_plfa-part2-Substitution-19991" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-19993" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19994" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-19999" href="../Substitution/#plfa_plfa-part2-Substitution-19792" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-20001" href="../Substitution/#plfa_plfa-part2-Substitution-19933" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-20002" class="Symbol">)</a>
   <a id="plfa_plfa-part2-Substitution-20007" href="../Substitution/#plfa_plfa-part2-Substitution-19927" class="Function">H′</a> <a id="plfa_plfa-part2-Substitution-20010" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-20011" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-20012" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-20014" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-20016" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
   <a id="plfa_plfa-part2-Substitution-20024" href="../Substitution/#plfa_plfa-part2-Substitution-19927" class="Function">H′</a> <a id="plfa_plfa-part2-Substitution-20027" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-20028" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-20030" href="../Substitution/#plfa_plfa-part2-Substitution-20030" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-20031" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-20033" class="Symbol">=</a>
     <a id="plfa_plfa-part2-Substitution-20040" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
       <a id="plfa_plfa-part2-Substitution-20053" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-20058" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20059" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-20064" href="../Substitution/#plfa_plfa-part2-Substitution-19792" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-20065" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-20067" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20068" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-20072" href="../Substitution/#plfa_plfa-part2-Substitution-19795" class="Bound">ρ₁</a> <a id="plfa_plfa-part2-Substitution-20075" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20076" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-20078" href="../Substitution/#plfa_plfa-part2-Substitution-20030" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-20079" class="Symbol">))</a>
     <a id="plfa_plfa-part2-Substitution-20087" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
       <a id="plfa_plfa-part2-Substitution-20098" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-20105" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Substitution-20108" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20109" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-20114" href="../Substitution/#plfa_plfa-part2-Substitution-19792" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-20116" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20117" href="../Substitution/#plfa_plfa-part2-Substitution-19795" class="Bound">ρ₁</a> <a id="plfa_plfa-part2-Substitution-20120" href="../Substitution/#plfa_plfa-part2-Substitution-20030" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-20121" class="Symbol">))</a>
     <a id="plfa_plfa-part2-Substitution-20129" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-20132" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-20137" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20138" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-20145" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part2-Substitution-20147" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-20149" href="../Substitution/#plfa_plfa-part2-Substitution-19803" class="Bound">H</a> <a id="plfa_plfa-part2-Substitution-20151" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-20160" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-20167" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Substitution-20170" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20171" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-20178" href="../Substitution/#plfa_plfa-part2-Substitution-19799" class="Bound">ρ₂</a> <a id="plfa_plfa-part2-Substitution-20181" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20182" href="../Substitution/#plfa_plfa-part2-Substitution-19792" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-20184" href="../Substitution/#plfa_plfa-part2-Substitution-20030" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-20185" class="Symbol">))</a>
     <a id="plfa_plfa-part2-Substitution-20193" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-20196" href="../Substitution/#plfa_plfa-part2-Substitution-18710" class="Function">compose-rename</a> <a id="plfa_plfa-part2-Substitution-20211" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-20220" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-20227" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20228" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Substitution-20231" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-20233" href="../Substitution/#plfa_plfa-part2-Substitution-19799" class="Bound">ρ₂</a><a id="plfa_plfa-part2-Substitution-20235" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-20237" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20238" href="../Substitution/#plfa_plfa-part2-Substitution-19792" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-20240" href="../Substitution/#plfa_plfa-part2-Substitution-20030" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-20241" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-20248" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
       <a id="plfa_plfa-part2-Substitution-20259" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-20266" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-20268" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-20272" href="../Substitution/#plfa_plfa-part2-Substitution-19799" class="Bound">ρ₂</a><a id="plfa_plfa-part2-Substitution-20274" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-20276" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-20278" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part2-Substitution-20280" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-20282" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20283" href="../Substitution/#plfa_plfa-part2-Substitution-19792" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-20285" href="../Substitution/#plfa_plfa-part2-Substitution-20030" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-20286" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-20293" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-20296" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1693" class="Function">sym</a> <a id="plfa_plfa-part2-Substitution-20300" href="../Substitution/#plfa_plfa-part2-Substitution-18710" class="Function">compose-rename</a> <a id="plfa_plfa-part2-Substitution-20315" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-20324" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-20331" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20332" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-20336" href="../Substitution/#plfa_plfa-part2-Substitution-19799" class="Bound">ρ₂</a><a id="plfa_plfa-part2-Substitution-20338" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-20340" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20341" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-20348" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Substitution-20351" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20352" href="../Substitution/#plfa_plfa-part2-Substitution-19792" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-20354" href="../Substitution/#plfa_plfa-part2-Substitution-20030" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-20355" class="Symbol">))</a>
     <a id="plfa_plfa-part2-Substitution-20363" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
       <a id="plfa_plfa-part2-Substitution-20374" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-20381" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20382" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-20386" href="../Substitution/#plfa_plfa-part2-Substitution-19799" class="Bound">ρ₂</a><a id="plfa_plfa-part2-Substitution-20388" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-20390" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20391" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-20396" href="../Substitution/#plfa_plfa-part2-Substitution-19792" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-20398" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20399" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-20401" href="../Substitution/#plfa_plfa-part2-Substitution-20030" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-20402" class="Symbol">))</a>
     <a id="plfa_plfa-part2-Substitution-20410" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
<a id="plfa_plfa-part2-Substitution-20412" href="../Substitution/#plfa_plfa-part2-Substitution-19447" class="Function">commute-subst-rename</a> <a id="plfa_plfa-part2-Substitution-20433" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-20434" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-20436" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-20438" href="../Substitution/#plfa_plfa-part2-Substitution-20438" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-20440" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Substitution-20442" href="../Substitution/#plfa_plfa-part2-Substitution-20442" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-20443" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-20445" href="../Substitution/#plfa_plfa-part2-Substitution-20445" class="Bound">H</a> <a id="plfa_plfa-part2-Substitution-20447" class="Symbol">=</a>
  <a id="plfa_plfa-part2-Substitution-20451" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1376" class="Function">cong₂</a> <a id="plfa_plfa-part2-Substitution-20457" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">_·_</a> <a id="plfa_plfa-part2-Substitution-20461" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20462" href="../Substitution/#plfa_plfa-part2-Substitution-19447" class="Function">commute-subst-rename</a><a id="plfa_plfa-part2-Substitution-20482" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-20483" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-20485" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-20487" href="../Substitution/#plfa_plfa-part2-Substitution-20438" class="Bound">L</a><a id="plfa_plfa-part2-Substitution-20488" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-20490" href="../Substitution/#plfa_plfa-part2-Substitution-20445" class="Bound">H</a><a id="plfa_plfa-part2-Substitution-20491" class="Symbol">)</a>
            <a id="plfa_plfa-part2-Substitution-20505" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20506" href="../Substitution/#plfa_plfa-part2-Substitution-19447" class="Function">commute-subst-rename</a><a id="plfa_plfa-part2-Substitution-20526" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-20527" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-20529" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-20531" href="../Substitution/#plfa_plfa-part2-Substitution-20442" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-20532" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-20534" href="../Substitution/#plfa_plfa-part2-Substitution-20445" class="Bound">H</a><a id="plfa_plfa-part2-Substitution-20535" class="Symbol">)</a>
</pre><p>The proof is by induction on the term <code>M</code>.</p><ul><li><p>If <code>M</code> is a variable, then we use the premise to conclude.</p></li><li><p>If <code>M ≡ ƛ N</code>, we conclude using the induction hypothesis for <code>N</code>. However, to use the induction hypothesis, we must show that</p><pre><code>  exts (exts σ) (ext ρ₁ x) ≡ rename (ext ρ₂) (exts σ x)</code></pre><p>We prove this equation by cases on x.</p><ul><li><p>If <code>x = Z</code>, the two sides are equal by definition.</p></li><li><p>If <code>x = S y</code>, we obtain the goal by the following equational reasoning.</p><pre><code>  exts (exts σ) (ext ρ₁ (S y))
≡ rename S_ (exts σ (ρ₁ y))
≡ rename S_ (rename ρ₂ (σ y))        (by the premise)
≡ rename (S_ ∘ ρ₂) (σ y)             (by compose-rename)
≡ rename ((ext ρ₂) ∘ S_) (σ y)
≡ rename (ext ρ₂) (rename S_ (σ y))  (by compose-rename)
≡ rename (ext ρ₂) (exts σ (S y))</code></pre></li></ul></li><li><p>If <code>M</code> is an application, we obtain the goal using the induction hypothesis for each subterm.</p></li></ul><p>The last lemma needed to prove <code>sub-sub</code> states that the <code>exts</code> function distributes with sequencing. It is a corollary of <code>commute-subst-rename</code> as described below. (It would have been nicer to prove this directly by equational reasoning in the σ algebra, but that would require the <code>sub-assoc</code> equation, whose proof depends on <code>sub-sub</code>, which in turn depends on this lemma.)</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-exts-seq"></a><a id="plfa_plfa-part2-Substitution-21872" href="../Substitution/#plfa_plfa-part2-Substitution-21872" class="Function">exts-seq</a> <a id="plfa_plfa-part2-Substitution-21881" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-21883" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-21885" href="../Substitution/#plfa_plfa-part2-Substitution-21885" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-21887" href="../Substitution/#plfa_plfa-part2-Substitution-21887" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-21889" href="../Substitution/#plfa_plfa-part2-Substitution-21889" class="Bound">Δ′</a><a id="plfa_plfa-part2-Substitution-21891" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-21893" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-21894" href="../Substitution/#plfa_plfa-part2-Substitution-21894" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-21897" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-21899" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-21905" href="../Substitution/#plfa_plfa-part2-Substitution-21885" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-21907" href="../Substitution/#plfa_plfa-part2-Substitution-21887" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-21908" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-21910" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-21911" href="../Substitution/#plfa_plfa-part2-Substitution-21911" class="Bound">σ₂</a> <a id="plfa_plfa-part2-Substitution-21914" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-21916" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-21922" href="../Substitution/#plfa_plfa-part2-Substitution-21887" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-21924" href="../Substitution/#plfa_plfa-part2-Substitution-21889" class="Bound">Δ′</a><a id="plfa_plfa-part2-Substitution-21926" class="Symbol">}</a>
         <a id="plfa_plfa-part2-Substitution-21937" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-21939" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-21941" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-21942" href="../Substitution/#plfa_plfa-part2-Substitution-21942" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-21943" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-21945" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-21947" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-21948" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-21953" href="../Substitution/#plfa_plfa-part2-Substitution-21894" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-21956" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-21958" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-21963" href="../Substitution/#plfa_plfa-part2-Substitution-21911" class="Bound">σ₂</a><a id="plfa_plfa-part2-Substitution-21965" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-21967" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-21968" href="../Substitution/#plfa_plfa-part2-Substitution-21942" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-21969" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-21971" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-21973" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-21978" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-21979" href="../Substitution/#plfa_plfa-part2-Substitution-21894" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-21982" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-21984" href="../Substitution/#plfa_plfa-part2-Substitution-21911" class="Bound">σ₂</a><a id="plfa_plfa-part2-Substitution-21986" class="Symbol">)</a>
<a id="plfa_plfa-part2-Substitution-21988" href="../Substitution/#plfa_plfa-part2-Substitution-21872" class="Function">exts-seq</a> <a id="plfa_plfa-part2-Substitution-21997" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-21999" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-22014" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-22016" href="../Substitution/#plfa_plfa-part2-Substitution-22016" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-22018" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-22020" href="../Substitution/#plfa_plfa-part2-Substitution-22044" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-22026" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-22027" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-22029" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22031" href="../Substitution/#plfa_plfa-part2-Substitution-22016" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-22032" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-22036" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-22044" href="../Substitution/#plfa_plfa-part2-Substitution-22044" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-22050" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-22052" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-22054" href="../Substitution/#plfa_plfa-part2-Substitution-22054" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-22056" href="../Substitution/#plfa_plfa-part2-Substitution-22056" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-22058" href="../Substitution/#plfa_plfa-part2-Substitution-22058" class="Bound">Δ′</a><a id="plfa_plfa-part2-Substitution-22060" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22062" href="../Substitution/#plfa_plfa-part2-Substitution-22062" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-22063" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22065" href="../Substitution/#plfa_plfa-part2-Substitution-22065" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-22067" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-22069" href="../Substitution/#plfa_plfa-part2-Substitution-22054" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-22071" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-22073" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-Substitution-22075" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-22077" href="../Substitution/#plfa_plfa-part2-Substitution-22062" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-22078" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-22080" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-22081" href="../Substitution/#plfa_plfa-part2-Substitution-22081" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-22084" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-22086" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-22092" href="../Substitution/#plfa_plfa-part2-Substitution-22054" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-22094" href="../Substitution/#plfa_plfa-part2-Substitution-22056" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-22095" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22097" href="../Substitution/#plfa_plfa-part2-Substitution-22097" class="Bound">σ₂</a> <a id="plfa_plfa-part2-Substitution-22100" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-22102" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-22108" href="../Substitution/#plfa_plfa-part2-Substitution-22056" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-22110" href="../Substitution/#plfa_plfa-part2-Substitution-22058" class="Bound">Δ′</a><a id="plfa_plfa-part2-Substitution-22112" class="Symbol">}</a>
     <a id="plfa_plfa-part2-Substitution-22119" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-22121" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-22122" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-22127" href="../Substitution/#plfa_plfa-part2-Substitution-22081" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-22130" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-22132" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-22137" href="../Substitution/#plfa_plfa-part2-Substitution-22097" class="Bound">σ₂</a><a id="plfa_plfa-part2-Substitution-22139" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-22141" href="../Substitution/#plfa_plfa-part2-Substitution-22065" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-22143" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-22145" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-22150" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-22151" href="../Substitution/#plfa_plfa-part2-Substitution-22081" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-22154" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-22156" href="../Substitution/#plfa_plfa-part2-Substitution-22097" class="Bound">σ₂</a><a id="plfa_plfa-part2-Substitution-22158" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-22160" href="../Substitution/#plfa_plfa-part2-Substitution-22065" class="Bound">x</a>
  <a id="plfa_plfa-part2-Substitution-22164" href="../Substitution/#plfa_plfa-part2-Substitution-22044" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-22170" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-22171" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-22173" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22175" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-22176" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-22178" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22180" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="plfa_plfa-part2-Substitution-22187" href="../Substitution/#plfa_plfa-part2-Substitution-22044" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-22193" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-22194" class="Argument">A</a> <a id="plfa_plfa-part2-Substitution-22196" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22198" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-22199" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22201" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-22203" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22205" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-22207" href="../Substitution/#plfa_plfa-part2-Substitution-22207" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-22208" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22210" href="../Substitution/#plfa_plfa-part2-Substitution-22210" class="Bound">σ₁</a><a id="plfa_plfa-part2-Substitution-22212" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22214" href="../Substitution/#plfa_plfa-part2-Substitution-22214" class="Bound">σ₂</a><a id="plfa_plfa-part2-Substitution-22216" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-22218" class="Symbol">=</a>
     <a id="plfa_plfa-part2-Substitution-22225" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
       <a id="plfa_plfa-part2-Substitution-22238" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-22239" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-22244" href="../Substitution/#plfa_plfa-part2-Substitution-22210" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-22247" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-22249" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-22254" href="../Substitution/#plfa_plfa-part2-Substitution-22214" class="Bound">σ₂</a><a id="plfa_plfa-part2-Substitution-22256" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-22258" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-22259" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-22261" href="../Substitution/#plfa_plfa-part2-Substitution-22207" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-22262" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-22269" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
       <a id="plfa_plfa-part2-Substitution-22280" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-22282" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-22287" href="../Substitution/#plfa_plfa-part2-Substitution-22214" class="Bound">σ₂</a> <a id="plfa_plfa-part2-Substitution-22290" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-22292" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-22293" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-22300" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Substitution-22303" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-22304" href="../Substitution/#plfa_plfa-part2-Substitution-22210" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-22307" href="../Substitution/#plfa_plfa-part2-Substitution-22207" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-22308" class="Symbol">))</a>
     <a id="plfa_plfa-part2-Substitution-22316" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-22319" href="../Substitution/#plfa_plfa-part2-Substitution-19447" class="Function">commute-subst-rename</a><a id="plfa_plfa-part2-Substitution-22339" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-22340" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-22342" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22344" href="../Substitution/#plfa_plfa-part2-Substitution-22210" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-22347" href="../Substitution/#plfa_plfa-part2-Substitution-22207" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-22348" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22350" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-22352" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22354" href="../Substitution/#plfa_plfa-part2-Substitution-22214" class="Bound">σ₂</a><a id="plfa_plfa-part2-Substitution-22356" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22358" class="Argument">ρ₁</a> <a id="plfa_plfa-part2-Substitution-22361" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22363" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part2-Substitution-22365" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22367" class="Argument">ρ₂</a> <a id="plfa_plfa-part2-Substitution-22370" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22372" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part2-Substitution-22374" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-22376" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-22381" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-22390" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-22397" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Substitution-22400" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-22401" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-22403" href="../Substitution/#plfa_plfa-part2-Substitution-22214" class="Bound">σ₂</a> <a id="plfa_plfa-part2-Substitution-22406" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-22408" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-22409" href="../Substitution/#plfa_plfa-part2-Substitution-22210" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-22412" href="../Substitution/#plfa_plfa-part2-Substitution-22207" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-22413" class="Symbol">))</a>
     <a id="plfa_plfa-part2-Substitution-22421" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
       <a id="plfa_plfa-part2-Substitution-22432" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-22439" href="../Untyped/#plfa_plfa-part2-Untyped-3239" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Substitution-22442" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-22444" href="../Substitution/#plfa_plfa-part2-Substitution-22210" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-22447" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-22449" href="../Substitution/#plfa_plfa-part2-Substitution-22214" class="Bound">σ₂</a><a id="plfa_plfa-part2-Substitution-22451" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-22453" href="../Substitution/#plfa_plfa-part2-Substitution-22207" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-22454" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-22461" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
</pre><p>The proof proceed by cases on <code>x</code>.</p><ul><li><p>If <code>x = Z</code>, the two sides are equal by the definition of <code>exts</code> and sequencing.</p></li><li><p>If <code>x = S x</code>, we unfold the first use of <code>exts</code> and sequencing, then apply the lemma <code>commute-subst-rename</code>. We conclude by the definition of sequencing.</p></li></ul><p>Now we come to the proof of <code>sub-sub</code>, which we explain below.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-sub-sub"></a><a id="plfa_plfa-part2-Substitution-22823" href="../Substitution/#plfa_plfa-part2-Substitution-22823" class="Function">sub-sub</a> <a id="plfa_plfa-part2-Substitution-22831" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-22833" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-22835" href="../Substitution/#plfa_plfa-part2-Substitution-22835" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-22837" href="../Substitution/#plfa_plfa-part2-Substitution-22837" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-22839" href="../Substitution/#plfa_plfa-part2-Substitution-22839" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-22840" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22842" href="../Substitution/#plfa_plfa-part2-Substitution-22842" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-22843" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22845" href="../Substitution/#plfa_plfa-part2-Substitution-22845" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-22847" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-22849" href="../Substitution/#plfa_plfa-part2-Substitution-22835" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-22851" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-22853" href="../Substitution/#plfa_plfa-part2-Substitution-22842" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-22854" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-22856" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-22857" href="../Substitution/#plfa_plfa-part2-Substitution-22857" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-22860" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-22862" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-22868" href="../Substitution/#plfa_plfa-part2-Substitution-22835" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-22870" href="../Substitution/#plfa_plfa-part2-Substitution-22837" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-22871" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22873" href="../Substitution/#plfa_plfa-part2-Substitution-22873" class="Bound">σ₂</a> <a id="plfa_plfa-part2-Substitution-22876" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-22878" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-22884" href="../Substitution/#plfa_plfa-part2-Substitution-22837" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-22886" href="../Substitution/#plfa_plfa-part2-Substitution-22839" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-22887" class="Symbol">}</a>
            <a id="plfa_plfa-part2-Substitution-22901" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-22903" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-22905" href="../Substitution/#plfa_plfa-part2-Substitution-22873" class="Bound">σ₂</a> <a id="plfa_plfa-part2-Substitution-22908" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-22910" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-22911" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-22913" href="../Substitution/#plfa_plfa-part2-Substitution-22857" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-22916" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-22918" href="../Substitution/#plfa_plfa-part2-Substitution-22845" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-22919" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-22921" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-22923" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-22925" href="../Substitution/#plfa_plfa-part2-Substitution-22857" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-22928" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-22930" href="../Substitution/#plfa_plfa-part2-Substitution-22873" class="Bound">σ₂</a> <a id="plfa_plfa-part2-Substitution-22933" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-22935" href="../Substitution/#plfa_plfa-part2-Substitution-22845" class="Bound">M</a>
<a id="plfa_plfa-part2-Substitution-22937" href="../Substitution/#plfa_plfa-part2-Substitution-22823" class="Function">sub-sub</a> <a id="plfa_plfa-part2-Substitution-22945" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-22946" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-22948" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22950" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-22952" href="../Substitution/#plfa_plfa-part2-Substitution-22952" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-22953" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-22955" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22957" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part2-Substitution-22962" href="../Substitution/#plfa_plfa-part2-Substitution-22823" class="Function">sub-sub</a> <a id="plfa_plfa-part2-Substitution-22970" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-22971" href="../Substitution/#plfa_plfa-part2-Substitution-22971" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-22972" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22974" href="../Substitution/#plfa_plfa-part2-Substitution-22974" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-22975" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22977" href="../Substitution/#plfa_plfa-part2-Substitution-22977" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-22978" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22980" href="../Substitution/#plfa_plfa-part2-Substitution-22980" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-22981" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22983" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-22985" href="../Substitution/#plfa_plfa-part2-Substitution-22985" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-22986" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22988" href="../Substitution/#plfa_plfa-part2-Substitution-22988" class="Bound">σ₁</a><a id="plfa_plfa-part2-Substitution-22990" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22992" href="../Substitution/#plfa_plfa-part2-Substitution-22992" class="Bound">σ₂</a><a id="plfa_plfa-part2-Substitution-22994" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-22996" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-23001" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
     <a id="plfa_plfa-part2-Substitution-23012" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-23014" href="../Substitution/#plfa_plfa-part2-Substitution-22992" class="Bound">σ₂</a> <a id="plfa_plfa-part2-Substitution-23017" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-23019" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-23020" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-23022" href="../Substitution/#plfa_plfa-part2-Substitution-22988" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-23025" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-23027" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-23028" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-23030" href="../Substitution/#plfa_plfa-part2-Substitution-22985" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-23031" class="Symbol">))</a>
   <a id="plfa_plfa-part2-Substitution-23037" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
     <a id="plfa_plfa-part2-Substitution-23046" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-23048" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-23050" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-23055" href="../Substitution/#plfa_plfa-part2-Substitution-22992" class="Bound">σ₂</a> <a id="plfa_plfa-part2-Substitution-23058" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-23060" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-23061" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-23063" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-23068" href="../Substitution/#plfa_plfa-part2-Substitution-22988" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-23071" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-23073" href="../Substitution/#plfa_plfa-part2-Substitution-22985" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-23074" class="Symbol">)</a>
   <a id="plfa_plfa-part2-Substitution-23079" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-23082" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-23087" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ_</a> <a id="plfa_plfa-part2-Substitution-23090" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-23091" href="../Substitution/#plfa_plfa-part2-Substitution-22823" class="Function">sub-sub</a><a id="plfa_plfa-part2-Substitution-23098" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-23099" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-23101" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-23103" href="../Substitution/#plfa_plfa-part2-Substitution-22985" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-23104" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-23106" class="Argument">σ₁</a> <a id="plfa_plfa-part2-Substitution-23109" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-23111" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-23116" href="../Substitution/#plfa_plfa-part2-Substitution-22988" class="Bound">σ₁</a><a id="plfa_plfa-part2-Substitution-23118" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-23120" class="Argument">σ₂</a> <a id="plfa_plfa-part2-Substitution-23123" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-23125" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-23130" href="../Substitution/#plfa_plfa-part2-Substitution-22992" class="Bound">σ₂</a><a id="plfa_plfa-part2-Substitution-23132" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-23135" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
     <a id="plfa_plfa-part2-Substitution-23142" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-23144" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-23146" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-23151" href="../Substitution/#plfa_plfa-part2-Substitution-22988" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-23154" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-23156" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-23161" href="../Substitution/#plfa_plfa-part2-Substitution-22992" class="Bound">σ₂</a> <a id="plfa_plfa-part2-Substitution-23164" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-23166" href="../Substitution/#plfa_plfa-part2-Substitution-22985" class="Bound">N</a>
   <a id="plfa_plfa-part2-Substitution-23171" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-23174" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-23179" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ_</a> <a id="plfa_plfa-part2-Substitution-23182" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-23183" href="../Substitution/#plfa_plfa-part2-Substitution-10970" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-23191" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-23192" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-23194" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-23196" href="../Substitution/#plfa_plfa-part2-Substitution-22985" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-23197" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-23199" class="Symbol">(λ</a> <a id="plfa_plfa-part2-Substitution-23202" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-23203" href="../Substitution/#plfa_plfa-part2-Substitution-23203" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-23204" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-23206" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-23208" href="../Substitution/#plfa_plfa-part2-Substitution-21872" class="Function">exts-seq</a><a id="plfa_plfa-part2-Substitution-23216" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-23218" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Substitution-23222" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-23224" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
     <a id="plfa_plfa-part2-Substitution-23231" href="../Untyped/#plfa_plfa-part2-Untyped-4023" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-23233" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-23235" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-23240" class="Symbol">(</a> <a id="plfa_plfa-part2-Substitution-23242" href="../Substitution/#plfa_plfa-part2-Substitution-22988" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-23245" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-23247" href="../Substitution/#plfa_plfa-part2-Substitution-22992" class="Bound">σ₂</a><a id="plfa_plfa-part2-Substitution-23249" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-23251" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-23253" href="../Substitution/#plfa_plfa-part2-Substitution-22985" class="Bound">N</a>
   <a id="plfa_plfa-part2-Substitution-23258" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
<a id="plfa_plfa-part2-Substitution-23260" href="../Substitution/#plfa_plfa-part2-Substitution-22823" class="Function">sub-sub</a> <a id="plfa_plfa-part2-Substitution-23268" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-23269" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-23271" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-23273" href="../Substitution/#plfa_plfa-part2-Substitution-23273" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-23275" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Substitution-23277" href="../Substitution/#plfa_plfa-part2-Substitution-23277" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-23278" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-23280" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-23282" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1376" class="Function">cong₂</a> <a id="plfa_plfa-part2-Substitution-23288" href="../Untyped/#plfa_plfa-part2-Untyped-4083" class="InductiveConstructor Operator">_·_</a> <a id="plfa_plfa-part2-Substitution-23292" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-23293" href="../Substitution/#plfa_plfa-part2-Substitution-22823" class="Function">sub-sub</a><a id="plfa_plfa-part2-Substitution-23300" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-23301" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-23303" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-23305" href="../Substitution/#plfa_plfa-part2-Substitution-23273" class="Bound">L</a><a id="plfa_plfa-part2-Substitution-23306" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-23309" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-23310" href="../Substitution/#plfa_plfa-part2-Substitution-22823" class="Function">sub-sub</a><a id="plfa_plfa-part2-Substitution-23317" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-23318" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-23320" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-23322" href="../Substitution/#plfa_plfa-part2-Substitution-23277" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-23323" class="Symbol">})</a>
</pre><p>We proceed by induction on the term <code>M</code>.</p><ul><li><p>If <code>M = x</code>, then both sides are equal to <code>σ₂ (σ₁ x)</code>.</p></li><li><p>If <code>M = ƛ N</code>, we first use the induction hypothesis to show that</p><pre><code>  ƛ ⟪ exts σ₂ ⟫ (⟪ exts σ₁ ⟫ N) ≡ ƛ ⟪ exts σ₁ ⨟ exts σ₂ ⟫ N</code></pre><p>and then use the lemma <code>exts-seq</code> to show</p><pre><code>  ƛ ⟪ exts σ₁ ⨟ exts σ₂ ⟫ N ≡ ƛ ⟪ exts ( σ₁ ⨟ σ₂) ⟫ N</code></pre></li><li><p>If <code>M</code> is an application, we use the induction hypothesis for both subterms.</p></li></ul><p>The following corollary of <code>sub-sub</code> specializes the first substitution to a renaming.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-rename-subst"></a><a id="plfa_plfa-part2-Substitution-23850" href="../Substitution/#plfa_plfa-part2-Substitution-23850" class="Function">rename-subst</a> <a id="plfa_plfa-part2-Substitution-23863" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-23865" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-23867" href="../Substitution/#plfa_plfa-part2-Substitution-23867" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-23869" href="../Substitution/#plfa_plfa-part2-Substitution-23869" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-23871" href="../Substitution/#plfa_plfa-part2-Substitution-23871" class="Bound">Δ′</a><a id="plfa_plfa-part2-Substitution-23873" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-23875" href="../Substitution/#plfa_plfa-part2-Substitution-23875" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-23877" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-23879" href="../Substitution/#plfa_plfa-part2-Substitution-23867" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-23881" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-23883" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-23884" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-23886" href="../Substitution/#plfa_plfa-part2-Substitution-23886" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-23888" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-23890" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-23897" href="../Substitution/#plfa_plfa-part2-Substitution-23867" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-23899" href="../Substitution/#plfa_plfa-part2-Substitution-23869" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-23900" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-23902" href="../Substitution/#plfa_plfa-part2-Substitution-23902" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-23904" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-23906" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-23912" href="../Substitution/#plfa_plfa-part2-Substitution-23869" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-23914" href="../Substitution/#plfa_plfa-part2-Substitution-23871" class="Bound">Δ′</a><a id="plfa_plfa-part2-Substitution-23916" class="Symbol">}</a>
             <a id="plfa_plfa-part2-Substitution-23931" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-23933" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-23935" href="../Substitution/#plfa_plfa-part2-Substitution-23902" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-23937" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-23939" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-23940" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-23947" href="../Substitution/#plfa_plfa-part2-Substitution-23886" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-23949" href="../Substitution/#plfa_plfa-part2-Substitution-23875" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-23950" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-23952" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-23954" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-23956" href="../Substitution/#plfa_plfa-part2-Substitution-23902" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-23958" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-23960" href="../Substitution/#plfa_plfa-part2-Substitution-23886" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-23962" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-23964" href="../Substitution/#plfa_plfa-part2-Substitution-23875" class="Bound">M</a>
<a id="plfa_plfa-part2-Substitution-23966" href="../Substitution/#plfa_plfa-part2-Substitution-23850" class="Function">rename-subst</a> <a id="plfa_plfa-part2-Substitution-23979" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-23980" href="../Substitution/#plfa_plfa-part2-Substitution-23980" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-23981" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-23983" href="../Substitution/#plfa_plfa-part2-Substitution-23983" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-23984" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-23986" href="../Substitution/#plfa_plfa-part2-Substitution-23986" class="Bound">Δ′</a><a id="plfa_plfa-part2-Substitution-23988" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-23990" href="../Substitution/#plfa_plfa-part2-Substitution-23990" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-23991" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-23993" href="../Substitution/#plfa_plfa-part2-Substitution-23993" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-23994" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-23996" href="../Substitution/#plfa_plfa-part2-Substitution-23996" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-23997" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-23999" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-24004" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
     <a id="plfa_plfa-part2-Substitution-24015" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-24017" href="../Substitution/#plfa_plfa-part2-Substitution-23996" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24019" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-24021" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-24022" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-24029" href="../Substitution/#plfa_plfa-part2-Substitution-23993" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-24031" href="../Substitution/#plfa_plfa-part2-Substitution-23990" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-24032" class="Symbol">)</a>
   <a id="plfa_plfa-part2-Substitution-24037" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-24040" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-24045" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-24047" href="../Substitution/#plfa_plfa-part2-Substitution-23996" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24049" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-24051" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-24052" href="../Substitution/#plfa_plfa-part2-Substitution-13472" class="Function">rename-subst-ren</a><a id="plfa_plfa-part2-Substitution-24068" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-24069" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-24071" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-24073" href="../Substitution/#plfa_plfa-part2-Substitution-23990" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-24074" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-24077" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
     <a id="plfa_plfa-part2-Substitution-24084" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-24086" href="../Substitution/#plfa_plfa-part2-Substitution-23996" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24088" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-24090" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-24091" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-24093" href="../Substitution/#plfa_plfa-part2-Substitution-6481" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-24097" href="../Substitution/#plfa_plfa-part2-Substitution-23993" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-24099" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-24101" href="../Substitution/#plfa_plfa-part2-Substitution-23990" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-24102" class="Symbol">)</a>
   <a id="plfa_plfa-part2-Substitution-24107" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-24110" href="../Substitution/#plfa_plfa-part2-Substitution-22823" class="Function">sub-sub</a><a id="plfa_plfa-part2-Substitution-24117" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-24118" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-24120" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-24122" href="../Substitution/#plfa_plfa-part2-Substitution-23990" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-24123" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-24125" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
     <a id="plfa_plfa-part2-Substitution-24132" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-24134" href="../Substitution/#plfa_plfa-part2-Substitution-6481" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-24138" href="../Substitution/#plfa_plfa-part2-Substitution-23993" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-24140" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24142" href="../Substitution/#plfa_plfa-part2-Substitution-23996" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24144" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-24146" href="../Substitution/#plfa_plfa-part2-Substitution-23990" class="Bound">M</a>
   <a id="plfa_plfa-part2-Substitution-24151" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
     <a id="plfa_plfa-part2-Substitution-24160" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-24162" href="../Substitution/#plfa_plfa-part2-Substitution-23996" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24164" href="https://agda.github.io/agda-stdlib/v1.7.2/Function.Base.html#1040" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-24166" href="../Substitution/#plfa_plfa-part2-Substitution-23993" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-24168" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-24170" href="../Substitution/#plfa_plfa-part2-Substitution-23990" class="Bound">M</a>
   <a id="plfa_plfa-part2-Substitution-24175" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
</pre><h2 id="proof-of-sub-assoc">Proof of sub-assoc</h2><p>The proof of <code>sub-assoc</code> follows directly from <code>sub-sub</code> and the definition of sequencing.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-sub-assoc"></a><a id="plfa_plfa-part2-Substitution-24306" href="../Substitution/#plfa_plfa-part2-Substitution-24306" class="Function">sub-assoc</a> <a id="plfa_plfa-part2-Substitution-24316" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-24318" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-24320" href="../Substitution/#plfa_plfa-part2-Substitution-24320" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-24322" href="../Substitution/#plfa_plfa-part2-Substitution-24322" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-24324" href="../Substitution/#plfa_plfa-part2-Substitution-24324" class="Bound">Σ</a> <a id="plfa_plfa-part2-Substitution-24326" href="../Substitution/#plfa_plfa-part2-Substitution-24326" class="Bound">Ψ</a> <a id="plfa_plfa-part2-Substitution-24328" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-24330" href="../Untyped/#plfa_plfa-part2-Untyped-2782" class="Datatype">Context</a><a id="plfa_plfa-part2-Substitution-24337" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-24339" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-24340" href="../Substitution/#plfa_plfa-part2-Substitution-24340" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24342" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-24344" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-24350" href="../Substitution/#plfa_plfa-part2-Substitution-24320" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-24352" href="../Substitution/#plfa_plfa-part2-Substitution-24322" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-24353" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-24355" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-24356" href="../Substitution/#plfa_plfa-part2-Substitution-24356" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-24358" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-24360" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-24366" href="../Substitution/#plfa_plfa-part2-Substitution-24322" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-24368" href="../Substitution/#plfa_plfa-part2-Substitution-24324" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-24369" class="Symbol">}</a>
             <a id="plfa_plfa-part2-Substitution-24384" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-24385" href="../Substitution/#plfa_plfa-part2-Substitution-24385" class="Bound">θ</a> <a id="plfa_plfa-part2-Substitution-24387" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-24389" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-24395" href="../Substitution/#plfa_plfa-part2-Substitution-24324" class="Bound">Σ</a> <a id="plfa_plfa-part2-Substitution-24397" href="../Substitution/#plfa_plfa-part2-Substitution-24326" class="Bound">Ψ</a><a id="plfa_plfa-part2-Substitution-24398" class="Symbol">}</a>
          <a id="plfa_plfa-part2-Substitution-24410" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-24412" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-24414" href="../Substitution/#plfa_plfa-part2-Substitution-24414" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-24415" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-24417" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-24419" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-24420" href="../Substitution/#plfa_plfa-part2-Substitution-24340" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24422" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24424" href="../Substitution/#plfa_plfa-part2-Substitution-24356" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-24425" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-24427" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24429" href="../Substitution/#plfa_plfa-part2-Substitution-24385" class="Bound">θ</a> <a id="plfa_plfa-part2-Substitution-24431" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-24433" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-24434" href="../Substitution/#plfa_plfa-part2-Substitution-24340" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24436" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24438" href="../Substitution/#plfa_plfa-part2-Substitution-24356" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-24440" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24442" href="../Substitution/#plfa_plfa-part2-Substitution-24385" class="Bound">θ</a><a id="plfa_plfa-part2-Substitution-24443" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-24445" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-24446" href="../Substitution/#plfa_plfa-part2-Substitution-24414" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-24447" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-24449" href="../Substitution/#plfa_plfa-part2-Substitution-24306" class="Function">sub-assoc</a> <a id="plfa_plfa-part2-Substitution-24459" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-24460" href="../Substitution/#plfa_plfa-part2-Substitution-24460" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-24461" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-24463" href="../Substitution/#plfa_plfa-part2-Substitution-24463" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-24464" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-24466" href="../Substitution/#plfa_plfa-part2-Substitution-24466" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-24467" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-24469" href="../Substitution/#plfa_plfa-part2-Substitution-24469" class="Bound">Ψ</a><a id="plfa_plfa-part2-Substitution-24470" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-24472" href="../Substitution/#plfa_plfa-part2-Substitution-24472" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-24473" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-24475" href="../Substitution/#plfa_plfa-part2-Substitution-24475" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-24476" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-24478" href="../Substitution/#plfa_plfa-part2-Substitution-24478" class="Bound">θ</a><a id="plfa_plfa-part2-Substitution-24479" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-24481" href="../Substitution/#plfa_plfa-part2-Substitution-24481" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-24482" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-24484" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-24486" href="../Substitution/#plfa_plfa-part2-Substitution-1854" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-24501" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-24503" href="../Substitution/#plfa_plfa-part2-Substitution-24503" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-24505" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-24507" href="../Substitution/#plfa_plfa-part2-Substitution-24530" class="Function">lemma</a><a id="plfa_plfa-part2-Substitution-24512" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-24513" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-24515" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-24517" href="../Substitution/#plfa_plfa-part2-Substitution-24503" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-24518" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-24522" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-24530" href="../Substitution/#plfa_plfa-part2-Substitution-24530" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-24536" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-24538" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-24540" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-24541" href="../Substitution/#plfa_plfa-part2-Substitution-24541" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-24543" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-24545" href="../Substitution/#plfa_plfa-part2-Substitution-24460" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-24547" href="../Untyped/#plfa_plfa-part2-Untyped-3158" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-24549" href="../Substitution/#plfa_plfa-part2-Substitution-24481" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-24550" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-24552" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-24554" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-24556" href="../Substitution/#plfa_plfa-part2-Substitution-24472" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24558" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24560" href="../Substitution/#plfa_plfa-part2-Substitution-24475" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-24561" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-24563" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24565" href="../Substitution/#plfa_plfa-part2-Substitution-24478" class="Bound">θ</a><a id="plfa_plfa-part2-Substitution-24566" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-24568" href="../Substitution/#plfa_plfa-part2-Substitution-24541" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-24570" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-24572" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-24573" href="../Substitution/#plfa_plfa-part2-Substitution-24472" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24575" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24577" href="../Substitution/#plfa_plfa-part2-Substitution-24475" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-24579" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24581" href="../Substitution/#plfa_plfa-part2-Substitution-24478" class="Bound">θ</a><a id="plfa_plfa-part2-Substitution-24582" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-24584" href="../Substitution/#plfa_plfa-part2-Substitution-24541" class="Bound">x</a>
  <a id="plfa_plfa-part2-Substitution-24588" href="../Substitution/#plfa_plfa-part2-Substitution-24530" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-24594" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-24595" href="../Substitution/#plfa_plfa-part2-Substitution-24595" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-24596" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-24598" class="Symbol">=</a>
      <a id="plfa_plfa-part2-Substitution-24606" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
        <a id="plfa_plfa-part2-Substitution-24620" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-24622" href="../Substitution/#plfa_plfa-part2-Substitution-24472" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24624" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24626" href="../Substitution/#plfa_plfa-part2-Substitution-24475" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-24627" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-24629" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24631" href="../Substitution/#plfa_plfa-part2-Substitution-24478" class="Bound">θ</a><a id="plfa_plfa-part2-Substitution-24632" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-24634" href="../Substitution/#plfa_plfa-part2-Substitution-24595" class="Bound">x</a>
      <a id="plfa_plfa-part2-Substitution-24642" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
        <a id="plfa_plfa-part2-Substitution-24654" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-24656" href="../Substitution/#plfa_plfa-part2-Substitution-24478" class="Bound">θ</a> <a id="plfa_plfa-part2-Substitution-24658" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-24660" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-24661" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-24663" href="../Substitution/#plfa_plfa-part2-Substitution-24475" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-24665" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-24667" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-24668" href="../Substitution/#plfa_plfa-part2-Substitution-24472" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24670" href="../Substitution/#plfa_plfa-part2-Substitution-24595" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-24671" class="Symbol">))</a>
      <a id="plfa_plfa-part2-Substitution-24680" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-24683" href="../Substitution/#plfa_plfa-part2-Substitution-22823" class="Function">sub-sub</a><a id="plfa_plfa-part2-Substitution-24690" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-24691" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-24693" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-24695" href="../Substitution/#plfa_plfa-part2-Substitution-24472" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24697" href="../Substitution/#plfa_plfa-part2-Substitution-24595" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-24698" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-24700" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
        <a id="plfa_plfa-part2-Substitution-24710" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-24712" href="../Substitution/#plfa_plfa-part2-Substitution-24475" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-24714" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24716" href="../Substitution/#plfa_plfa-part2-Substitution-24478" class="Bound">θ</a> <a id="plfa_plfa-part2-Substitution-24718" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-24720" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-24721" href="../Substitution/#plfa_plfa-part2-Substitution-24472" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24723" href="../Substitution/#plfa_plfa-part2-Substitution-24595" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-24724" class="Symbol">)</a>
      <a id="plfa_plfa-part2-Substitution-24732" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
        <a id="plfa_plfa-part2-Substitution-24744" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-24745" href="../Substitution/#plfa_plfa-part2-Substitution-24472" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24747" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24749" href="../Substitution/#plfa_plfa-part2-Substitution-24475" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-24751" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24753" href="../Substitution/#plfa_plfa-part2-Substitution-24478" class="Bound">θ</a><a id="plfa_plfa-part2-Substitution-24754" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-24756" href="../Substitution/#plfa_plfa-part2-Substitution-24595" class="Bound">x</a>
      <a id="plfa_plfa-part2-Substitution-24764" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
</pre><h2 id="proof-of-subst-zero-exts-cons">Proof of subst-zero-exts-cons</h2><p>The last equation we needed to prove <code>subst-zero-exts-cons</code> was <code>sub-assoc</code>, so we can now go ahead with its proof. We simply apply the equations for <code>exts</code> and <code>subst-zero</code> and then apply the σ algebra equation to arrive at the normal form <code>M • σ</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-subst-zero-exts-cons"></a><a id="plfa_plfa-part2-Substitution-25065" href="../Substitution/#plfa_plfa-part2-Substitution-25065" class="Function">subst-zero-exts-cons</a> <a id="plfa_plfa-part2-Substitution-25086" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-25088" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-25090" href="../Substitution/#plfa_plfa-part2-Substitution-25090" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-25092" href="../Substitution/#plfa_plfa-part2-Substitution-25092" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-25093" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-25095" href="../Substitution/#plfa_plfa-part2-Substitution-25095" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-25097" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-25099" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-25105" href="../Substitution/#plfa_plfa-part2-Substitution-25090" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-25107" href="../Substitution/#plfa_plfa-part2-Substitution-25092" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-25108" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-25110" href="../Substitution/#plfa_plfa-part2-Substitution-25110" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-25111" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-25113" href="../Substitution/#plfa_plfa-part2-Substitution-25113" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25115" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-25117" href="../Substitution/#plfa_plfa-part2-Substitution-25092" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-25119" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-25121" href="../Substitution/#plfa_plfa-part2-Substitution-25110" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-25122" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-25124" href="../Substitution/#plfa_plfa-part2-Substitution-25124" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-25125" class="Symbol">}</a>
                     <a id="plfa_plfa-part2-Substitution-25148" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-25150" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-25155" href="../Substitution/#plfa_plfa-part2-Substitution-25095" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-25157" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-25159" href="../Untyped/#plfa_plfa-part2-Untyped-7207" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Substitution-25170" href="../Substitution/#plfa_plfa-part2-Substitution-25113" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25172" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-25174" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25175" href="../Substitution/#plfa_plfa-part2-Substitution-25113" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25177" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25179" href="../Substitution/#plfa_plfa-part2-Substitution-25095" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-25180" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-25182" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-25183" href="../Substitution/#plfa_plfa-part2-Substitution-25124" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-25184" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-25186" href="../Substitution/#plfa_plfa-part2-Substitution-25065" class="Function">subst-zero-exts-cons</a> <a id="plfa_plfa-part2-Substitution-25207" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-25208" href="../Substitution/#plfa_plfa-part2-Substitution-25208" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-25209" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-25211" href="../Substitution/#plfa_plfa-part2-Substitution-25211" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-25212" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-25214" href="../Substitution/#plfa_plfa-part2-Substitution-25214" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-25215" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-25217" href="../Substitution/#plfa_plfa-part2-Substitution-25217" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-25218" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-25220" href="../Substitution/#plfa_plfa-part2-Substitution-25220" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-25221" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-25223" href="../Substitution/#plfa_plfa-part2-Substitution-25223" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-25224" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-25226" class="Symbol">=</a>
    <a id="plfa_plfa-part2-Substitution-25232" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
      <a id="plfa_plfa-part2-Substitution-25244" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-25249" href="../Substitution/#plfa_plfa-part2-Substitution-25214" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-25251" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-25253" href="../Untyped/#plfa_plfa-part2-Untyped-7207" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Substitution-25264" href="../Substitution/#plfa_plfa-part2-Substitution-25220" class="Bound">M</a>
    <a id="plfa_plfa-part2-Substitution-25270" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-25273" href="../Substitution/#plfa_plfa-part2-Substitution-12066" class="Function">cong-seq</a> <a id="plfa_plfa-part2-Substitution-25282" href="../Substitution/#plfa_plfa-part2-Substitution-14848" class="Function">exts-cons-shift</a> <a id="plfa_plfa-part2-Substitution-25298" href="../Substitution/#plfa_plfa-part2-Substitution-15637" class="Function">subst-Z-cons-ids</a> <a id="plfa_plfa-part2-Substitution-25315" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
      <a id="plfa_plfa-part2-Substitution-25323" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25324" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-25326" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-Substitution-25328" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25330" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25331" href="../Substitution/#plfa_plfa-part2-Substitution-25214" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-25333" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-25335" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-25336" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-25339" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-25341" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25342" href="../Substitution/#plfa_plfa-part2-Substitution-25220" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25344" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25346" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-25349" class="Symbol">)</a>
    <a id="plfa_plfa-part2-Substitution-25355" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-25358" href="../Substitution/#plfa_plfa-part2-Substitution-9081" class="Function">sub-dist</a> <a id="plfa_plfa-part2-Substitution-25367" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
      <a id="plfa_plfa-part2-Substitution-25375" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25376" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-25378" href="../Substitution/#plfa_plfa-part2-Substitution-25220" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25380" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25382" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-25386" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-25388" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25389" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-25391" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-25392" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-25395" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25397" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-25399" href="../Substitution/#plfa_plfa-part2-Substitution-25214" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-25401" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-25403" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-25404" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-25406" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-25408" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25409" href="../Substitution/#plfa_plfa-part2-Substitution-25220" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25411" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25413" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-25416" class="Symbol">))</a>
    <a id="plfa_plfa-part2-Substitution-25423" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-25426" href="../Substitution/#plfa_plfa-part2-Substitution-11717" class="Function">cong-cons</a> <a id="plfa_plfa-part2-Substitution-25436" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25437" href="../Substitution/#plfa_plfa-part2-Substitution-8246" class="Function">sub-head</a><a id="plfa_plfa-part2-Substitution-25445" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-25446" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-25448" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-25450" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-25453" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-25456" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-25461" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
      <a id="plfa_plfa-part2-Substitution-25469" href="../Substitution/#plfa_plfa-part2-Substitution-25220" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25471" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25473" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-25475" href="../Substitution/#plfa_plfa-part2-Substitution-25214" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-25477" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-25479" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-25480" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-25482" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-25484" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25485" href="../Substitution/#plfa_plfa-part2-Substitution-25220" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25487" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25489" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-25492" class="Symbol">))</a>
    <a id="plfa_plfa-part2-Substitution-25499" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-25502" href="../Substitution/#plfa_plfa-part2-Substitution-11717" class="Function">cong-cons</a> <a id="plfa_plfa-part2-Substitution-25512" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-25517" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25518" href="../Substitution/#plfa_plfa-part2-Substitution-24306" class="Function">sub-assoc</a><a id="plfa_plfa-part2-Substitution-25527" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-25528" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-25530" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-25532" href="../Substitution/#plfa_plfa-part2-Substitution-25214" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-25533" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-25536" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
      <a id="plfa_plfa-part2-Substitution-25544" href="../Substitution/#plfa_plfa-part2-Substitution-25220" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25546" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25548" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25549" href="../Substitution/#plfa_plfa-part2-Substitution-25214" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-25551" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-25553" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25554" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a> <a id="plfa_plfa-part2-Substitution-25556" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-25558" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25559" href="../Substitution/#plfa_plfa-part2-Substitution-25220" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25561" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25563" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-25566" class="Symbol">)))</a>
    <a id="plfa_plfa-part2-Substitution-25574" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-25577" href="../Substitution/#plfa_plfa-part2-Substitution-11717" class="Function">cong-cons</a> <a id="plfa_plfa-part2-Substitution-25587" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-25592" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25593" href="../Substitution/#plfa_plfa-part2-Substitution-12066" class="Function">cong-seq</a><a id="plfa_plfa-part2-Substitution-25601" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-25602" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-25604" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-25606" href="../Substitution/#plfa_plfa-part2-Substitution-25214" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-25607" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-25609" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-25614" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25615" href="../Substitution/#plfa_plfa-part2-Substitution-8356" class="Function">sub-tail</a><a id="plfa_plfa-part2-Substitution-25623" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-25624" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-25626" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-25628" href="../Substitution/#plfa_plfa-part2-Substitution-25220" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-25629" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-25631" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-25633" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-25635" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-25638" class="Symbol">}))</a> <a id="plfa_plfa-part2-Substitution-25642" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
      <a id="plfa_plfa-part2-Substitution-25650" href="../Substitution/#plfa_plfa-part2-Substitution-25220" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25652" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25654" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25655" href="../Substitution/#plfa_plfa-part2-Substitution-25214" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-25657" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-25659" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-25662" class="Symbol">)</a>
    <a id="plfa_plfa-part2-Substitution-25668" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-25671" href="../Substitution/#plfa_plfa-part2-Substitution-11717" class="Function">cong-cons</a> <a id="plfa_plfa-part2-Substitution-25681" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-25686" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25687" href="../Substitution/#plfa_plfa-part2-Substitution-17522" class="Function">sub-idR</a><a id="plfa_plfa-part2-Substitution-25694" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-25695" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-25697" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-25699" href="../Substitution/#plfa_plfa-part2-Substitution-25214" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-25700" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-25703" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
      <a id="plfa_plfa-part2-Substitution-25711" href="../Substitution/#plfa_plfa-part2-Substitution-25220" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25713" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25715" href="../Substitution/#plfa_plfa-part2-Substitution-25214" class="Bound">σ</a>
    <a id="plfa_plfa-part2-Substitution-25721" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
</pre><h2 id="proof-of-the-substitution-lemma">Proof of the substitution lemma</h2><p>We first prove the generalized form of the substitution lemma, showing that a substitution <code>σ</code> commutes with the substitution of <code>M</code> into <code>N</code>.</p><pre><code>⟪ exts σ ⟫ N [ ⟪ σ ⟫ M ] ≡ ⟪ σ ⟫ (N [ M ])</code></pre><p>This proof is where the σ algebra pays off. The proof is by direct equational reasoning. Starting with the left-hand side, we apply σ algebra equations, oriented left-to-right, until we arrive at the normal form</p><pre><code>⟪ ⟪ σ ⟫ M • σ ⟫ N</code></pre><p>We then do the same with the right-hand side, arriving at the same normal form.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-subst-commute"></a><a id="plfa_plfa-part2-Substitution-26283" href="../Substitution/#plfa_plfa-part2-Substitution-26283" class="Function">subst-commute</a> <a id="plfa_plfa-part2-Substitution-26297" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-26299" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-26301" href="../Substitution/#plfa_plfa-part2-Substitution-26301" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-26303" href="../Substitution/#plfa_plfa-part2-Substitution-26303" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-26304" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-26306" href="../Substitution/#plfa_plfa-part2-Substitution-26306" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-26308" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-26310" href="../Substitution/#plfa_plfa-part2-Substitution-26301" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-26312" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-26314" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-Substitution-26316" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-26318" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-26319" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-26321" href="../Substitution/#plfa_plfa-part2-Substitution-26321" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-26323" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-26325" href="../Substitution/#plfa_plfa-part2-Substitution-26301" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-26327" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-26329" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-26330" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-26332" href="../Substitution/#plfa_plfa-part2-Substitution-26332" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26334" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-26336" href="../Substitution/#plfa_plfa-part2-Substitution-2340" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-26342" href="../Substitution/#plfa_plfa-part2-Substitution-26301" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-26344" href="../Substitution/#plfa_plfa-part2-Substitution-26303" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-26346" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Substitution-26352" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-26354" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26356" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-26361" href="../Substitution/#plfa_plfa-part2-Substitution-26332" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26363" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26365" href="../Substitution/#plfa_plfa-part2-Substitution-26306" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-26367" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-26369" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26371" href="../Substitution/#plfa_plfa-part2-Substitution-26332" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26373" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26375" href="../Substitution/#plfa_plfa-part2-Substitution-26321" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-26377" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a> <a id="plfa_plfa-part2-Substitution-26379" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-26381" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26383" href="../Substitution/#plfa_plfa-part2-Substitution-26332" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26385" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26387" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26388" href="../Substitution/#plfa_plfa-part2-Substitution-26306" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-26390" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-26392" href="../Substitution/#plfa_plfa-part2-Substitution-26321" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-26394" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a><a id="plfa_plfa-part2-Substitution-26395" class="Symbol">)</a>
<a id="plfa_plfa-part2-Substitution-26397" href="../Substitution/#plfa_plfa-part2-Substitution-26283" class="Function">subst-commute</a> <a id="plfa_plfa-part2-Substitution-26411" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-26412" href="../Substitution/#plfa_plfa-part2-Substitution-26412" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-26413" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-26415" href="../Substitution/#plfa_plfa-part2-Substitution-26415" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-26416" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-26418" href="../Substitution/#plfa_plfa-part2-Substitution-26418" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-26419" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-26421" href="../Substitution/#plfa_plfa-part2-Substitution-26421" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-26422" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-26424" href="../Substitution/#plfa_plfa-part2-Substitution-26424" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-26425" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-26427" class="Symbol">=</a>
     <a id="plfa_plfa-part2-Substitution-26434" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
       <a id="plfa_plfa-part2-Substitution-26447" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26449" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-26454" href="../Substitution/#plfa_plfa-part2-Substitution-26424" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26456" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26458" href="../Substitution/#plfa_plfa-part2-Substitution-26418" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-26460" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-26462" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26464" href="../Substitution/#plfa_plfa-part2-Substitution-26424" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26466" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26468" href="../Substitution/#plfa_plfa-part2-Substitution-26421" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-26470" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a>
     <a id="plfa_plfa-part2-Substitution-26477" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
       <a id="plfa_plfa-part2-Substitution-26488" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26490" href="../Untyped/#plfa_plfa-part2-Untyped-7207" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Substitution-26501" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26502" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26504" href="../Substitution/#plfa_plfa-part2-Substitution-26424" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26506" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26508" href="../Substitution/#plfa_plfa-part2-Substitution-26421" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-26509" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-26511" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26513" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26514" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26516" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-26521" href="../Substitution/#plfa_plfa-part2-Substitution-26424" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26523" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26525" href="../Substitution/#plfa_plfa-part2-Substitution-26418" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-26526" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-26533" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-26536" href="../Substitution/#plfa_plfa-part2-Substitution-10970" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-26545" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-26546" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-26548" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-26550" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26552" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-26557" href="../Substitution/#plfa_plfa-part2-Substitution-26424" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26559" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26561" href="../Substitution/#plfa_plfa-part2-Substitution-26418" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-26562" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-26564" href="../Substitution/#plfa_plfa-part2-Substitution-15637" class="Function">subst-Z-cons-ids</a> <a id="plfa_plfa-part2-Substitution-26581" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-26586" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-26595" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26597" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26599" href="../Substitution/#plfa_plfa-part2-Substitution-26424" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26601" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26603" href="../Substitution/#plfa_plfa-part2-Substitution-26421" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-26605" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-26607" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-26611" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26613" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26614" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26616" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-26621" href="../Substitution/#plfa_plfa-part2-Substitution-26424" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26623" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26625" href="../Substitution/#plfa_plfa-part2-Substitution-26418" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-26626" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-26633" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-26636" href="../Substitution/#plfa_plfa-part2-Substitution-22823" class="Function">sub-sub</a> <a id="plfa_plfa-part2-Substitution-26644" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-26645" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-26647" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-26649" href="../Substitution/#plfa_plfa-part2-Substitution-26418" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-26650" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-26652" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-26661" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26663" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26664" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-26669" href="../Substitution/#plfa_plfa-part2-Substitution-26424" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-26670" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-26672" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-26674" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-26676" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26678" href="../Substitution/#plfa_plfa-part2-Substitution-26424" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26680" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26682" href="../Substitution/#plfa_plfa-part2-Substitution-26421" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-26683" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-26685" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-26687" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-26690" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-26692" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26694" href="../Substitution/#plfa_plfa-part2-Substitution-26418" class="Bound">N</a>
     <a id="plfa_plfa-part2-Substitution-26701" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-26704" href="../Substitution/#plfa_plfa-part2-Substitution-10970" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-26713" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-26714" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-26716" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-26718" href="../Substitution/#plfa_plfa-part2-Substitution-26418" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-26719" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-26721" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26722" href="../Substitution/#plfa_plfa-part2-Substitution-12066" class="Function">cong-seq</a> <a id="plfa_plfa-part2-Substitution-26731" href="../Substitution/#plfa_plfa-part2-Substitution-14848" class="Function">exts-cons-shift</a> <a id="plfa_plfa-part2-Substitution-26747" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Substitution-26751" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-26753" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-26758" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-26767" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26769" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26770" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-26772" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-Substitution-26774" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-26776" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26777" href="../Substitution/#plfa_plfa-part2-Substitution-26424" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26779" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-26781" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-26782" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-26785" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-26787" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26788" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26790" href="../Substitution/#plfa_plfa-part2-Substitution-26424" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26792" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26794" href="../Substitution/#plfa_plfa-part2-Substitution-26421" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-26796" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-26798" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-26801" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-26803" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26805" href="../Substitution/#plfa_plfa-part2-Substitution-26418" class="Bound">N</a>
     <a id="plfa_plfa-part2-Substitution-26812" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-26815" href="../Substitution/#plfa_plfa-part2-Substitution-10970" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-26824" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-26825" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-26827" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-26829" href="../Substitution/#plfa_plfa-part2-Substitution-26418" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-26830" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-26832" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26833" href="../Substitution/#plfa_plfa-part2-Substitution-9081" class="Function">sub-dist</a> <a id="plfa_plfa-part2-Substitution-26842" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-26843" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-26845" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-26847" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-26849" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-26850" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-26853" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-26858" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-26867" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26869" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26871" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26873" href="../Substitution/#plfa_plfa-part2-Substitution-26424" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26875" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26877" href="../Substitution/#plfa_plfa-part2-Substitution-26421" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-26879" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-26881" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-26885" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26887" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26888" href="../Untyped/#plfa_plfa-part2-Untyped-3971" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-26890" href="../Untyped/#plfa_plfa-part2-Untyped-3194" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-26891" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-26893" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-26895" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-26897" href="../Substitution/#plfa_plfa-part2-Substitution-26424" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26899" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-26901" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-26902" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-26904" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-26906" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26907" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26909" href="../Substitution/#plfa_plfa-part2-Substitution-26424" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26911" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26913" href="../Substitution/#plfa_plfa-part2-Substitution-26421" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-26915" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-26917" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-26920" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-26923" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26925" href="../Substitution/#plfa_plfa-part2-Substitution-26418" class="Bound">N</a>
     <a id="plfa_plfa-part2-Substitution-26932" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2873" class="Function Operator">≡⟨⟩</a>
       <a id="plfa_plfa-part2-Substitution-26943" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26945" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26947" href="../Substitution/#plfa_plfa-part2-Substitution-26424" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26949" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26951" href="../Substitution/#plfa_plfa-part2-Substitution-26421" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-26953" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-26955" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-26957" href="../Substitution/#plfa_plfa-part2-Substitution-26424" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26959" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-26961" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-26962" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-26964" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-26966" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26967" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26969" href="../Substitution/#plfa_plfa-part2-Substitution-26424" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26971" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26973" href="../Substitution/#plfa_plfa-part2-Substitution-26421" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-26975" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-26977" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-26980" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-26983" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26985" href="../Substitution/#plfa_plfa-part2-Substitution-26418" class="Bound">N</a>
     <a id="plfa_plfa-part2-Substitution-26992" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-26995" href="../Substitution/#plfa_plfa-part2-Substitution-10970" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-27003" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-27004" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-27006" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-27008" href="../Substitution/#plfa_plfa-part2-Substitution-26418" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-27009" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-27011" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27012" href="../Substitution/#plfa_plfa-part2-Substitution-11717" class="Function">cong-cons</a> <a id="plfa_plfa-part2-Substitution-27022" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-27027" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27028" href="../Substitution/#plfa_plfa-part2-Substitution-24306" class="Function">sub-assoc</a><a id="plfa_plfa-part2-Substitution-27037" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-27038" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-27040" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-27042" href="../Substitution/#plfa_plfa-part2-Substitution-26424" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-27043" class="Symbol">}))</a> <a id="plfa_plfa-part2-Substitution-27047" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-27052" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-27061" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27063" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27065" href="../Substitution/#plfa_plfa-part2-Substitution-26424" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27067" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27069" href="../Substitution/#plfa_plfa-part2-Substitution-26421" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-27071" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-27073" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27074" href="../Substitution/#plfa_plfa-part2-Substitution-26424" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27076" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-27078" href="../Substitution/#plfa_plfa-part2-Substitution-3138" class="Function">↑</a> <a id="plfa_plfa-part2-Substitution-27080" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-27082" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27084" href="../Substitution/#plfa_plfa-part2-Substitution-26424" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27086" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27088" href="../Substitution/#plfa_plfa-part2-Substitution-26421" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-27090" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-27092" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-27095" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-27097" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27099" href="../Substitution/#plfa_plfa-part2-Substitution-26418" class="Bound">N</a>
     <a id="plfa_plfa-part2-Substitution-27106" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-27109" href="../Substitution/#plfa_plfa-part2-Substitution-10970" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-27117" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-27118" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-27120" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-27122" href="../Substitution/#plfa_plfa-part2-Substitution-26418" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-27123" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-27125" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-27130" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-27135" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-27144" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27146" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27148" href="../Substitution/#plfa_plfa-part2-Substitution-26424" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27150" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27152" href="../Substitution/#plfa_plfa-part2-Substitution-26421" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-27154" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-27156" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27157" href="../Substitution/#plfa_plfa-part2-Substitution-26424" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27159" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-27161" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-27164" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-27166" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27168" href="../Substitution/#plfa_plfa-part2-Substitution-26418" class="Bound">N</a>
     <a id="plfa_plfa-part2-Substitution-27175" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-27178" href="../Substitution/#plfa_plfa-part2-Substitution-10970" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-27186" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-27187" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-27189" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-27191" href="../Substitution/#plfa_plfa-part2-Substitution-26418" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-27192" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-27194" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27195" href="../Substitution/#plfa_plfa-part2-Substitution-11717" class="Function">cong-cons</a> <a id="plfa_plfa-part2-Substitution-27205" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-27210" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27211" href="../Substitution/#plfa_plfa-part2-Substitution-17522" class="Function">sub-idR</a><a id="plfa_plfa-part2-Substitution-27218" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-27219" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-27221" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-27223" href="../Substitution/#plfa_plfa-part2-Substitution-26424" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-27224" class="Symbol">}))</a> <a id="plfa_plfa-part2-Substitution-27228" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-27233" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-27242" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27244" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27246" href="../Substitution/#plfa_plfa-part2-Substitution-26424" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27248" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27250" href="../Substitution/#plfa_plfa-part2-Substitution-26421" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-27252" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-27254" href="../Substitution/#plfa_plfa-part2-Substitution-26424" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27256" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27258" href="../Substitution/#plfa_plfa-part2-Substitution-26418" class="Bound">N</a>
     <a id="plfa_plfa-part2-Substitution-27265" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-27268" href="../Substitution/#plfa_plfa-part2-Substitution-10970" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-27276" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-27277" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-27279" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-27281" href="../Substitution/#plfa_plfa-part2-Substitution-26418" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-27282" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-27284" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27285" href="../Substitution/#plfa_plfa-part2-Substitution-11717" class="Function">cong-cons</a> <a id="plfa_plfa-part2-Substitution-27295" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-27300" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27301" href="../Substitution/#plfa_plfa-part2-Substitution-8970" class="Function">sub-idL</a><a id="plfa_plfa-part2-Substitution-27308" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-27309" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-27311" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-27313" href="../Substitution/#plfa_plfa-part2-Substitution-26424" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-27314" class="Symbol">}))</a> <a id="plfa_plfa-part2-Substitution-27318" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-27323" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-27332" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27334" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27336" href="../Substitution/#plfa_plfa-part2-Substitution-26424" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27338" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27340" href="../Substitution/#plfa_plfa-part2-Substitution-26421" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-27342" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-27344" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27345" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-27349" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-27351" href="../Substitution/#plfa_plfa-part2-Substitution-26424" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-27352" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-27354" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27356" href="../Substitution/#plfa_plfa-part2-Substitution-26418" class="Bound">N</a>
     <a id="plfa_plfa-part2-Substitution-27363" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-27366" href="../Substitution/#plfa_plfa-part2-Substitution-10970" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-27374" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-27375" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-27377" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-27379" href="../Substitution/#plfa_plfa-part2-Substitution-26418" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-27380" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-27382" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27383" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1693" class="Function">sym</a> <a id="plfa_plfa-part2-Substitution-27387" href="../Substitution/#plfa_plfa-part2-Substitution-9081" class="Function">sub-dist</a><a id="plfa_plfa-part2-Substitution-27395" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-27397" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-27402" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-27411" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27413" href="../Substitution/#plfa_plfa-part2-Substitution-26421" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-27415" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-27417" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-27421" href="../Substitution/#plfa_plfa-part2-Substitution-3739" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-27423" href="../Substitution/#plfa_plfa-part2-Substitution-26424" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27425" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27427" href="../Substitution/#plfa_plfa-part2-Substitution-26418" class="Bound">N</a>
     <a id="plfa_plfa-part2-Substitution-27434" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-27437" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1693" class="Function">sym</a> <a id="plfa_plfa-part2-Substitution-27441" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27442" href="../Substitution/#plfa_plfa-part2-Substitution-22823" class="Function">sub-sub</a><a id="plfa_plfa-part2-Substitution-27449" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-27450" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-27452" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-27454" href="../Substitution/#plfa_plfa-part2-Substitution-26418" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-27455" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-27458" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-27467" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27469" href="../Substitution/#plfa_plfa-part2-Substitution-26424" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27471" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27473" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27474" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27476" href="../Substitution/#plfa_plfa-part2-Substitution-26421" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-27478" href="../Substitution/#plfa_plfa-part2-Substitution-3384" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-27480" href="../Substitution/#plfa_plfa-part2-Substitution-2995" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-27484" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27486" href="../Substitution/#plfa_plfa-part2-Substitution-26418" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-27487" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-27494" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-27497" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-27502" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27504" href="../Substitution/#plfa_plfa-part2-Substitution-26424" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27506" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27508" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27509" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1693" class="Function">sym</a> <a id="plfa_plfa-part2-Substitution-27513" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27514" href="../Substitution/#plfa_plfa-part2-Substitution-10970" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-27522" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-27523" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-27525" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-27527" href="../Substitution/#plfa_plfa-part2-Substitution-26418" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-27528" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-27530" href="../Substitution/#plfa_plfa-part2-Substitution-15637" class="Function">subst-Z-cons-ids</a> <a id="plfa_plfa-part2-Substitution-27547" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Substitution-27551" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-27554" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-27563" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27565" href="../Substitution/#plfa_plfa-part2-Substitution-26424" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27567" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27569" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27570" href="../Substitution/#plfa_plfa-part2-Substitution-26418" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-27572" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-27574" href="../Substitution/#plfa_plfa-part2-Substitution-26421" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-27576" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a><a id="plfa_plfa-part2-Substitution-27577" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-27584" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
</pre><p>A corollary of <code>subst-commute</code> is that <code>rename</code> also commutes with substitution. In the proof below, we first exchange <code>rename ρ</code> for the substitution <code>⟪ ren ρ ⟫</code>, and apply <code>subst-commute</code>, and then convert back to <code>rename ρ</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-rename-subst-commute"></a><a id="plfa_plfa-part2-Substitution-27828" href="../Substitution/#plfa_plfa-part2-Substitution-27828" class="Function">rename-subst-commute</a> <a id="plfa_plfa-part2-Substitution-27849" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-27851" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-27853" href="../Substitution/#plfa_plfa-part2-Substitution-27853" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-27855" href="../Substitution/#plfa_plfa-part2-Substitution-27855" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-27856" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-27858" href="../Substitution/#plfa_plfa-part2-Substitution-27858" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-27860" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-27862" href="../Substitution/#plfa_plfa-part2-Substitution-27853" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-27864" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-27866" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-Substitution-27868" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-27870" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-27871" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-27873" href="../Substitution/#plfa_plfa-part2-Substitution-27873" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-27875" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-27877" href="../Substitution/#plfa_plfa-part2-Substitution-27853" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-27879" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-27881" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-27882" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-27884" href="../Substitution/#plfa_plfa-part2-Substitution-27884" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-27886" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-27888" href="../Substitution/#plfa_plfa-part2-Substitution-2123" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-27895" href="../Substitution/#plfa_plfa-part2-Substitution-27853" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-27897" href="../Substitution/#plfa_plfa-part2-Substitution-27855" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-27899" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Substitution-27905" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-27907" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27908" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-27915" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27916" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-27920" href="../Substitution/#plfa_plfa-part2-Substitution-27884" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-27921" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-27923" href="../Substitution/#plfa_plfa-part2-Substitution-27858" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-27924" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-27926" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-27928" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-27935" href="../Substitution/#plfa_plfa-part2-Substitution-27884" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-27937" href="../Substitution/#plfa_plfa-part2-Substitution-27873" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-27939" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a> <a id="plfa_plfa-part2-Substitution-27941" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-27943" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-27950" href="../Substitution/#plfa_plfa-part2-Substitution-27884" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-27952" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27953" href="../Substitution/#plfa_plfa-part2-Substitution-27858" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-27955" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-27957" href="../Substitution/#plfa_plfa-part2-Substitution-27873" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-27959" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a><a id="plfa_plfa-part2-Substitution-27960" class="Symbol">)</a>
<a id="plfa_plfa-part2-Substitution-27962" href="../Substitution/#plfa_plfa-part2-Substitution-27828" class="Function">rename-subst-commute</a> <a id="plfa_plfa-part2-Substitution-27983" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-27984" href="../Substitution/#plfa_plfa-part2-Substitution-27984" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-27985" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-27987" href="../Substitution/#plfa_plfa-part2-Substitution-27987" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-27988" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-27990" href="../Substitution/#plfa_plfa-part2-Substitution-27990" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-27991" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-27993" href="../Substitution/#plfa_plfa-part2-Substitution-27993" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-27994" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-27996" href="../Substitution/#plfa_plfa-part2-Substitution-27996" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-27997" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-27999" class="Symbol">=</a>
     <a id="plfa_plfa-part2-Substitution-28006" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2815" class="Function Operator">begin</a>
       <a id="plfa_plfa-part2-Substitution-28019" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28020" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-28027" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28028" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-28032" href="../Substitution/#plfa_plfa-part2-Substitution-27996" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-28033" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28035" href="../Substitution/#plfa_plfa-part2-Substitution-27990" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-28036" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28038" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-28040" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-28047" href="../Substitution/#plfa_plfa-part2-Substitution-27996" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-28049" href="../Substitution/#plfa_plfa-part2-Substitution-27993" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-28051" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a>
     <a id="plfa_plfa-part2-Substitution-28058" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-28061" href="../Substitution/#plfa_plfa-part2-Substitution-10970" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-28070" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28071" href="../Substitution/#plfa_plfa-part2-Substitution-11462" class="Function">cong-sub-zero</a> <a id="plfa_plfa-part2-Substitution-28085" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28086" href="../Substitution/#plfa_plfa-part2-Substitution-13472" class="Function">rename-subst-ren</a><a id="plfa_plfa-part2-Substitution-28102" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28103" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-28105" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-28107" href="../Substitution/#plfa_plfa-part2-Substitution-27993" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-28108" class="Symbol">}))</a>
                 <a id="plfa_plfa-part2-Substitution-28129" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28130" href="../Substitution/#plfa_plfa-part2-Substitution-13472" class="Function">rename-subst-ren</a><a id="plfa_plfa-part2-Substitution-28146" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28147" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-28149" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-28151" href="../Substitution/#plfa_plfa-part2-Substitution-27990" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-28152" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-28155" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-28164" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28165" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-28167" href="../Substitution/#plfa_plfa-part2-Substitution-6481" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-28171" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28172" href="../Untyped/#plfa_plfa-part2-Untyped-5741" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-28176" href="../Substitution/#plfa_plfa-part2-Substitution-27996" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-28177" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28179" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-28181" href="../Substitution/#plfa_plfa-part2-Substitution-27990" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-28182" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28184" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-28186" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-28188" href="../Substitution/#plfa_plfa-part2-Substitution-6481" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-28192" href="../Substitution/#plfa_plfa-part2-Substitution-27996" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-28194" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-28196" href="../Substitution/#plfa_plfa-part2-Substitution-27993" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-28198" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a>
     <a id="plfa_plfa-part2-Substitution-28205" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-28208" href="../Substitution/#plfa_plfa-part2-Substitution-10970" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-28217" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-28222" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28223" href="../Substitution/#plfa_plfa-part2-Substitution-10970" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-28231" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28232" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-28234" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-28236" href="../Substitution/#plfa_plfa-part2-Substitution-27990" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-28237" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-28239" href="../Substitution/#plfa_plfa-part2-Substitution-13099" class="Function">ren-ext</a> <a id="plfa_plfa-part2-Substitution-28247" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Substitution-28251" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28253" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-28262" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28263" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-28265" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-28270" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28271" href="../Substitution/#plfa_plfa-part2-Substitution-6481" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-28275" href="../Substitution/#plfa_plfa-part2-Substitution-27996" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-28276" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28278" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-28280" href="../Substitution/#plfa_plfa-part2-Substitution-27990" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-28281" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28283" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-28285" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-28287" href="../Substitution/#plfa_plfa-part2-Substitution-6481" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-28291" href="../Substitution/#plfa_plfa-part2-Substitution-27996" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-28293" href="../Substitution/#plfa_plfa-part2-Substitution-2489" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-28295" href="../Substitution/#plfa_plfa-part2-Substitution-27993" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-28297" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a>
     <a id="plfa_plfa-part2-Substitution-28304" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-28307" href="../Substitution/#plfa_plfa-part2-Substitution-26283" class="Function">subst-commute</a><a id="plfa_plfa-part2-Substitution-28320" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28321" class="Argument">N</a> <a id="plfa_plfa-part2-Substitution-28323" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-28325" href="../Substitution/#plfa_plfa-part2-Substitution-27990" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-28326" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-28328" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-28337" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-28343" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28344" href="../Substitution/#plfa_plfa-part2-Substitution-6481" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-28348" href="../Substitution/#plfa_plfa-part2-Substitution-27996" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-28349" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28351" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28352" href="../Substitution/#plfa_plfa-part2-Substitution-27990" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-28354" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-28356" href="../Substitution/#plfa_plfa-part2-Substitution-27993" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-28358" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a><a id="plfa_plfa-part2-Substitution-28359" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-28366" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-28369" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1693" class="Function">sym</a> <a id="plfa_plfa-part2-Substitution-28373" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28374" href="../Substitution/#plfa_plfa-part2-Substitution-13472" class="Function">rename-subst-ren</a><a id="plfa_plfa-part2-Substitution-28390" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28392" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#2932" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-28401" href="../Untyped/#plfa_plfa-part2-Untyped-6055" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-28408" href="../Substitution/#plfa_plfa-part2-Substitution-27996" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-28410" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28411" href="../Substitution/#plfa_plfa-part2-Substitution-27990" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-28413" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-28415" href="../Substitution/#plfa_plfa-part2-Substitution-27993" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-28417" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a><a id="plfa_plfa-part2-Substitution-28418" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-28425" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#3114" class="Function Operator">∎</a>
</pre><p>To present the substitution lemma, we introduce the following notation for substituting a term <code>M</code> for index 1 within term <code>N</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-_〔_〕"></a><a id="plfa_plfa-part2-Substitution-28569" href="../Substitution/#plfa_plfa-part2-Substitution-28569" class="Function Operator">_〔_〕</a> <a id="plfa_plfa-part2-Substitution-28574" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-28576" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-28578" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28579" href="../Substitution/#plfa_plfa-part2-Substitution-28579" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-28581" href="../Substitution/#plfa_plfa-part2-Substitution-28581" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-28583" href="../Substitution/#plfa_plfa-part2-Substitution-28583" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-28585" href="../Substitution/#plfa_plfa-part2-Substitution-28585" class="Bound">C</a><a id="plfa_plfa-part2-Substitution-28586" class="Symbol">}</a>
        <a id="plfa_plfa-part2-Substitution-28596" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-28598" href="../Substitution/#plfa_plfa-part2-Substitution-28579" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-28600" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-28602" href="../Substitution/#plfa_plfa-part2-Substitution-28583" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-28604" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-28606" href="../Substitution/#plfa_plfa-part2-Substitution-28585" class="Bound">C</a> <a id="plfa_plfa-part2-Substitution-28608" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-28610" href="../Substitution/#plfa_plfa-part2-Substitution-28581" class="Bound">A</a>
        <a id="plfa_plfa-part2-Substitution-28620" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-28622" href="../Substitution/#plfa_plfa-part2-Substitution-28579" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-28624" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-28626" href="../Substitution/#plfa_plfa-part2-Substitution-28583" class="Bound">B</a>
          <a id="plfa_plfa-part2-Substitution-28638" class="Comment">---------</a>
        <a id="plfa_plfa-part2-Substitution-28656" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-28658" href="../Substitution/#plfa_plfa-part2-Substitution-28579" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-28660" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-28662" href="../Substitution/#plfa_plfa-part2-Substitution-28585" class="Bound">C</a> <a id="plfa_plfa-part2-Substitution-28664" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-28666" href="../Substitution/#plfa_plfa-part2-Substitution-28581" class="Bound">A</a>
<a id="plfa_plfa-part2-Substitution-28668" href="../Substitution/#plfa_plfa-part2-Substitution-28569" class="Function Operator">_〔_〕</a> <a id="plfa_plfa-part2-Substitution-28673" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28674" href="../Substitution/#plfa_plfa-part2-Substitution-28674" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-28675" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-28677" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28678" href="../Substitution/#plfa_plfa-part2-Substitution-28678" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-28679" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-28681" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28682" href="../Substitution/#plfa_plfa-part2-Substitution-28682" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-28683" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-28685" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28686" href="../Substitution/#plfa_plfa-part2-Substitution-28686" class="Bound">C</a><a id="plfa_plfa-part2-Substitution-28687" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-28689" href="../Substitution/#plfa_plfa-part2-Substitution-28689" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-28691" href="../Substitution/#plfa_plfa-part2-Substitution-28691" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-28693" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-28698" href="../Untyped/#plfa_plfa-part2-Untyped-6791" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-28704" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28705" href="../Substitution/#plfa_plfa-part2-Substitution-28674" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-28707" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-28709" href="../Substitution/#plfa_plfa-part2-Substitution-28682" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-28711" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-28713" href="../Substitution/#plfa_plfa-part2-Substitution-28686" class="Bound">C</a><a id="plfa_plfa-part2-Substitution-28714" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-28716" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28717" href="../Substitution/#plfa_plfa-part2-Substitution-28674" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-28719" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-28721" href="../Substitution/#plfa_plfa-part2-Substitution-28686" class="Bound">C</a><a id="plfa_plfa-part2-Substitution-28722" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-28724" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28725" href="../Untyped/#plfa_plfa-part2-Untyped-6495" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-28730" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28731" href="../Untyped/#plfa_plfa-part2-Untyped-7207" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Substitution-28742" href="../Substitution/#plfa_plfa-part2-Substitution-28691" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-28743" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-28746" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28747" href="../Substitution/#plfa_plfa-part2-Substitution-28678" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-28748" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-28750" href="../Substitution/#plfa_plfa-part2-Substitution-28689" class="Bound">N</a>
</pre><p>The substitution lemma is stated as follows and proved as a corollary of the <code>subst-commute</code> lemma.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-substitution"></a><a id="plfa_plfa-part2-Substitution-28866" href="../Substitution/#plfa_plfa-part2-Substitution-28866" class="Function">substitution</a> <a id="plfa_plfa-part2-Substitution-28879" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-28881" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-28883" href="../Substitution/#plfa_plfa-part2-Substitution-28883" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-28884" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-28886" href="../Substitution/#plfa_plfa-part2-Substitution-28886" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-28888" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-28890" href="../Substitution/#plfa_plfa-part2-Substitution-28883" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-28892" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-28894" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-Substitution-28896" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-28898" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-Substitution-28900" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-28902" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-28903" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-28905" href="../Substitution/#plfa_plfa-part2-Substitution-28905" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-28907" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-28909" href="../Substitution/#plfa_plfa-part2-Substitution-28883" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-28911" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-28913" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-Substitution-28915" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-28917" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-28918" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-28920" href="../Substitution/#plfa_plfa-part2-Substitution-28920" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-28922" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-28924" href="../Substitution/#plfa_plfa-part2-Substitution-28883" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-28926" href="../Untyped/#plfa_plfa-part2-Untyped-3935" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-28928" href="../Untyped/#plfa_plfa-part2-Untyped-2509" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-28929" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Substitution-28935" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-28937" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28938" href="../Substitution/#plfa_plfa-part2-Substitution-28886" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-28940" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-28942" href="../Substitution/#plfa_plfa-part2-Substitution-28905" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-28944" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a><a id="plfa_plfa-part2-Substitution-28945" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28947" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-28949" href="../Substitution/#plfa_plfa-part2-Substitution-28920" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-28951" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a> <a id="plfa_plfa-part2-Substitution-28953" href="https://agda.github.io/agda-stdlib/v1.7.2/Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-28955" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28956" href="../Substitution/#plfa_plfa-part2-Substitution-28886" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-28958" href="../Substitution/#plfa_plfa-part2-Substitution-28569" class="Function Operator">〔</a> <a id="plfa_plfa-part2-Substitution-28960" href="../Substitution/#plfa_plfa-part2-Substitution-28920" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-28962" href="../Substitution/#plfa_plfa-part2-Substitution-28569" class="Function Operator">〕</a><a id="plfa_plfa-part2-Substitution-28963" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28965" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-28967" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28968" href="../Substitution/#plfa_plfa-part2-Substitution-28905" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-28970" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-28972" href="../Substitution/#plfa_plfa-part2-Substitution-28920" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-28974" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a><a id="plfa_plfa-part2-Substitution-28975" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28977" href="../Untyped/#plfa_plfa-part2-Untyped-7323" class="Function Operator">]</a>
<a id="plfa_plfa-part2-Substitution-28979" href="../Substitution/#plfa_plfa-part2-Substitution-28866" class="Function">substitution</a><a id="plfa_plfa-part2-Substitution-28991" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28992" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-28994" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-28996" href="../Substitution/#plfa_plfa-part2-Substitution-28996" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-28997" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-28999" class="Argument">N</a> <a id="plfa_plfa-part2-Substitution-29001" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-29003" href="../Substitution/#plfa_plfa-part2-Substitution-29003" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-29004" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-29006" class="Argument">L</a> <a id="plfa_plfa-part2-Substitution-29008" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-29010" href="../Substitution/#plfa_plfa-part2-Substitution-29010" class="Bound">L</a><a id="plfa_plfa-part2-Substitution-29011" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-29013" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-29018" href="https://agda.github.io/agda-stdlib/v1.7.2/Relation.Binary.PropositionalEquality.Core.html#1693" class="Function">sym</a> <a id="plfa_plfa-part2-Substitution-29022" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-29023" href="../Substitution/#plfa_plfa-part2-Substitution-26283" class="Function">subst-commute</a><a id="plfa_plfa-part2-Substitution-29036" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-29037" class="Argument">N</a> <a id="plfa_plfa-part2-Substitution-29039" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-29041" href="../Substitution/#plfa_plfa-part2-Substitution-28996" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-29042" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-29044" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-29046" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-29048" href="../Substitution/#plfa_plfa-part2-Substitution-29003" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-29049" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-29051" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-29053" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-29055" href="../Untyped/#plfa_plfa-part2-Untyped-7207" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Substitution-29066" href="../Substitution/#plfa_plfa-part2-Substitution-29010" class="Bound">L</a><a id="plfa_plfa-part2-Substitution-29067" class="Symbol">})</a>
</pre><h2 id="notes">Notes</h2><p>Most of the properties and proofs in this file are based on the paper <em>Autosubst: Reasoning with de Bruijn Terms and Parallel Substitution</em> by Schafer, Tebbi, and Smolka (ITP 2015). That paper, in turn, is based on the paper of Abadi, Cardelli, Curien, and Levy (1991) that defines the σ algebra.</p><h2 id="unicode">Unicode</h2><p>This chapter uses the following unicode:</p><pre><code>⟪  U+27EA  MATHEMATICAL LEFT DOUBLE ANGLE BRACKET (\&lt;&lt;)
⟫  U+27EA  MATHEMATICAL RIGHT DOUBLE ANGLE BRACKET (\&gt;&gt;)
↑  U+2191  UPWARDS ARROW (\u)
•  U+2022  BULLET (\bub)
⨟  U+2A1F  Z NOTATION SCHEMA COMPOSITION (C-x 8 RET Z NOTATION SCHEMA COMPOSITION)
〔  U+3014  LEFT TORTOISE SHELL BRACKET (\( option 9 on page 2)
〕  U+3015  RIGHT TORTOISE SHELL BRACKET (\) option 9 on page 2)</code></pre></div><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../ContextualEquivalence/">Prev</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/part2/Substitution.lagda.md">Source</a></li><li class="separator">•</li><li><a class="pagelink" href="../Acknowledgements/">Next</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card" aria-label="Site"><data class="u-url" href="../"></data><div class="wrapper"><h2 class="footer-heading">Programming Language Foundations in Agda</h2><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk"><i class="far fa-envelope"></i>  wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><i class="fab fa-github"></i>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works"><i class="far fa-envelope"></i>  me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><i class="fab fa-github"></i>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><i class="fab fa-twitter"></i>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu"><i class="far fa-envelope"></i>  jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><i class="fab fa-github"></i>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><i class="fab fa-twitter"></i>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></div></footer></body></html>