<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../assets/css/light.css" integrity="sha512-Iet5P6T2OjpPNbRRAfA07eC3B8G+1UJ3G2AfJt2W8DSZoip3L4SeP/NsBQjh6SpoRhSCwBSlybhAjYDEHDEOqw==" title="Light" id="stylesheet-light"><link rel="stylesheet" href="../assets/css/dark.css" integrity="sha512-QeJAmAllnjIvujXwMJ8C6Wms1c7ULCVBi5jR3JQvhRLTq87Gu6EFDALUBAv98KUfhgrdTOvOcRJhWILyetVq2Q==" title="Dark" id="stylesheet-dark" disabled><title>Programming Language Foundations in Agda – Substitution</title><script src="../assets/js/anchor.js" integrity="sha512-Y5IMGqYQp36NYYdEL6gXISLsHNpx0LxW0NS0twvYBvXI8GH5PZa1g5gm1B5lxg6tlFyUAiOOfgKL/NIn0dtY4w==" id="script-anchor"></script><script src="../assets/js/darkmode.js" integrity="sha512-iUX9HnSphH4WbMv88MYJEFtLfkCtTHrvWyFwjigSm5GkwHv1L31GP5grIGDo7kI2jftuYVvt4xu4qeCn2fKbww==" id="script-darkmode"></script><script src="../assets/js/main.js" integrity="sha512-X7aZg6IUKq1TvTVjSureaMGKZ/ylbAD7kxiU2w42IUgh4lUTWoOsoIWzNvrqkwBJdQ1y2GsS67gtsv39Uuq6ew==" id="script-main"></script></head><body><header class="site-header" aria-label="Site"><div class="wrapper"><a class="site-title" href="../">Programming Language Foundations in Agda</a><nav class="site-nav" aria-label="Site"><input type="checkbox" id="nav-trigger" class="nav-trigger"><label for="nav-trigger"><span class="menu-icon"><svg class="svg-icon grey" viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span></label><div class="trigger"><a class="page-link" href="../">The Book</a> <a class="page-link" href="../Announcements/">Announcements</a> <a class="page-link" href="../GettingStarted/">Getting Started</a> <a class="page-link" href="../Citing/">Citing</a> <a class="page-link" href="https://agda-zh.github.io/PLFA-zh/">中文</a> <a class="page-link" onclick="window.darkmode.toggle()"><i id="darkmode-trigger" class="fas fa-moon"></i> </a><a class="page-link" href="../plfa.epub"><i class="fa fa-book"></i></a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../ContextualEquivalence/">Prev</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/part2/Substitution.lagda.md">Source</a></li><li class="separator">•</li><li><a class="pagelink" href="../Acknowledgements/">Next</a></li><li class="separator">•</li></ul></nav><header class="post-header" aria-label="Chapter"><h1 class="post-title">Substitution: Substitution in the untyped lambda calculus</h1></header><div class="post-content"><pre class="Agda"><a id="plfa_plfa-part2-Substitution-118" class="Keyword">module</a> <a id="plfa_plfa-part2-Substitution-125" href="../Substitution/#" class="Module">plfa.part2.Substitution</a> <a id="plfa_plfa-part2-Substitution-149" class="Keyword">where</a>
</pre><h2 id="introduction">Introduction</h2><p>The primary purpose of this chapter is to prove that substitution commutes with itself. Barendregt (1984) refers to this as the substitution lemma:</p><pre><code>M [x:=N] [y:=L] = M [y:=L] [x:= N[y:=L] ]</code></pre><p>In our setting, with de Bruijn indices for variables, the statement of the lemma becomes:</p><pre><code>M [ N ] [ L ] ≡  M〔 L 〕[ N [ L ] ]                     (substitution)</code></pre><p>where the notation <code>M 〔 L 〕</code> is for substituting L for index 1 inside M. In addition, because we define substitution in terms of parallel substitution, we have the following generalization, replacing the substitution of L with an arbitrary parallel substitution σ.</p><pre><code>subst σ (M [ N ]) ≡ (subst (exts σ) M) [ subst σ N ]    (subst-commute)</code></pre><p>The special case for renamings is also useful.</p><pre><code>rename ρ (M [ N ]) ≡ (rename (ext ρ) M) [ rename ρ N ]
                                                 (rename-subst-commute)</code></pre><p>The secondary purpose of this chapter is to define the σ algebra of parallel substitution due to Abadi, Cardelli, Curien, and Levy (1991). The equations of this algebra not only help us prove the substitution lemma, but they are generally useful. Furthermore, when the equations are applied from left to right, they form a rewrite system that <em>decides</em> whether any two substitutions are equal.</p><h2 id="imports">Imports</h2><pre class="Agda"><a id="plfa_plfa-part2-Substitution-1482" class="Keyword">import</a> <a id="plfa_plfa-part2-Substitution-1489" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="plfa_plfa-part2-Substitution-1527" class="Symbol">as</a> <a id="plfa_plfa-part2-Substitution-1530" class="Module">Eq</a>
<a id="plfa_plfa-part2-Substitution-1533" class="Keyword">open</a> <a id="plfa_plfa-part2-Substitution-1538" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.html" class="Module">Eq</a> <a id="plfa_plfa-part2-Substitution-1541" class="Keyword">using</a> <a id="plfa_plfa-part2-Substitution-1547" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-1548" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡_</a><a id="plfa_plfa-part2-Substitution-1551" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1553" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Substitution-1557" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1559" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a><a id="plfa_plfa-part2-Substitution-1562" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1564" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">cong</a><a id="plfa_plfa-part2-Substitution-1568" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1570" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1576" class="Function">cong₂</a><a id="plfa_plfa-part2-Substitution-1575" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1577" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1670" class="Function">cong-app</a><a id="plfa_plfa-part2-Substitution-1585" class="Symbol">)</a>
<a id="plfa_plfa-part2-Substitution-1587" class="Keyword">open</a> <a id="plfa_plfa-part2-Substitution-1592" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Properties.html#6731" class="Module">Eq.≡-Reasoning</a> <a id="plfa_plfa-part2-Substitution-1607" class="Keyword">using</a> <a id="plfa_plfa-part2-Substitution-1613" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-1614" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin_</a><a id="plfa_plfa-part2-Substitution-1620" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1622" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11079" class="Function">step-≡-∣</a><a id="plfa_plfa-part2-Substitution-1630" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1632" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">step-≡-⟩</a><a id="plfa_plfa-part2-Substitution-1640" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1642" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">_∎</a><a id="plfa_plfa-part2-Substitution-1644" class="Symbol">)</a>
<a id="plfa_plfa-part2-Substitution-1646" class="Keyword">open</a> <a id="plfa_plfa-part2-Substitution-1651" class="Keyword">import</a> <a id="plfa_plfa-part2-Substitution-1658" href="https://agda.github.io/agda-stdlib/v2.1/Function.Base.html" class="Module">Function.Base</a> <a id="plfa_plfa-part2-Substitution-1672" class="Keyword">using</a> <a id="plfa_plfa-part2-Substitution-1678" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-1679" href="https://agda.github.io/agda-stdlib/v2.1/Function.Base.html#1115" class="Function Operator">_∘_</a><a id="plfa_plfa-part2-Substitution-1682" class="Symbol">)</a>
<a id="plfa_plfa-part2-Substitution-1684" class="Keyword">open</a> <a id="plfa_plfa-part2-Substitution-1689" class="Keyword">import</a> <a id="plfa_plfa-part2-Substitution-1696" href="../Untyped/#" class="Module">plfa.part2.Untyped</a>
     <a id="plfa_plfa-part2-Substitution-1720" class="Keyword">using</a> <a id="plfa_plfa-part2-Substitution-1726" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-1727" href="../Untyped/#plfa_plfa-part2-Untyped-2458" class="Datatype">Type</a><a id="plfa_plfa-part2-Substitution-1731" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1733" href="../Untyped/#plfa_plfa-part2-Untyped-2750" class="Datatype">Context</a><a id="plfa_plfa-part2-Substitution-1740" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1742" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">_⊢_</a><a id="plfa_plfa-part2-Substitution-1745" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1747" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-1748" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1750" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">_∋_</a><a id="plfa_plfa-part2-Substitution-1753" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1755" href="../Untyped/#plfa_plfa-part2-Untyped-2772" class="InductiveConstructor">∅</a><a id="plfa_plfa-part2-Substitution-1756" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1758" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">_,_</a><a id="plfa_plfa-part2-Substitution-1761" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1763" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-1764" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1766" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part2-Substitution-1768" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1770" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`_</a><a id="plfa_plfa-part2-Substitution-1772" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1774" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ_</a><a id="plfa_plfa-part2-Substitution-1776" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1778" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">_·_</a><a id="plfa_plfa-part2-Substitution-1781" class="Symbol">;</a>
            <a id="plfa_plfa-part2-Substitution-1795" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a><a id="plfa_plfa-part2-Substitution-1801" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1803" href="../Untyped/#plfa_plfa-part2-Untyped-6759" class="Function">subst</a><a id="plfa_plfa-part2-Substitution-1808" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1810" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a><a id="plfa_plfa-part2-Substitution-1813" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1815" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a><a id="plfa_plfa-part2-Substitution-1819" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1821" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">_[_]</a><a id="plfa_plfa-part2-Substitution-1825" class="Symbol">;</a> <a id="plfa_plfa-part2-Substitution-1827" href="../Untyped/#plfa_plfa-part2-Untyped-7175" class="Function">subst-zero</a><a id="plfa_plfa-part2-Substitution-1837" class="Symbol">)</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-1852" class="Keyword">postulate</a>
  <a id="plfa_plfa-part2-Substitution-extensionality"></a><a id="plfa_plfa-part2-Substitution-1864" href="../Substitution/#plfa_plfa-part2-Substitution-1864" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-1879" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-1881" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-1883" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-1884" href="../Substitution/#plfa_plfa-part2-Substitution-1884" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-1886" href="../Substitution/#plfa_plfa-part2-Substitution-1886" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-1888" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-1890" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Primitive.html#388" class="Primitive">Set</a><a id="plfa_plfa-part2-Substitution-1893" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-1895" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-1896" href="../Substitution/#plfa_plfa-part2-Substitution-1896" class="Bound">f</a> <a id="plfa_plfa-part2-Substitution-1898" href="../Substitution/#plfa_plfa-part2-Substitution-1898" class="Bound">g</a> <a id="plfa_plfa-part2-Substitution-1900" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-1902" href="../Substitution/#plfa_plfa-part2-Substitution-1884" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-1904" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-1906" href="../Substitution/#plfa_plfa-part2-Substitution-1886" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-1907" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Substitution-1913" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-1915" class="Symbol">(∀</a> <a id="plfa_plfa-part2-Substitution-1918" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-1919" href="../Substitution/#plfa_plfa-part2-Substitution-1919" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-1921" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-1923" href="../Substitution/#plfa_plfa-part2-Substitution-1884" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-1924" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-1926" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-1928" href="../Substitution/#plfa_plfa-part2-Substitution-1896" class="Bound">f</a> <a id="plfa_plfa-part2-Substitution-1930" href="../Substitution/#plfa_plfa-part2-Substitution-1919" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-1932" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-1934" href="../Substitution/#plfa_plfa-part2-Substitution-1898" class="Bound">g</a> <a id="plfa_plfa-part2-Substitution-1936" href="../Substitution/#plfa_plfa-part2-Substitution-1919" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-1937" class="Symbol">)</a>
      <a id="plfa_plfa-part2-Substitution-1945" class="Comment">-----------------------</a>
    <a id="plfa_plfa-part2-Substitution-1973" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-1975" href="../Substitution/#plfa_plfa-part2-Substitution-1896" class="Bound">f</a> <a id="plfa_plfa-part2-Substitution-1977" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-1979" href="../Substitution/#plfa_plfa-part2-Substitution-1898" class="Bound">g</a>
</pre><h2 id="notation">Notation</h2><p>We introduce the following shorthand for the type of a <em>renaming</em> from variables in context <code>Γ</code> to variables in context <code>Δ</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-Rename"></a><a id="plfa_plfa-part2-Substitution-2133" href="../Substitution/#plfa_plfa-part2-Substitution-2133" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-2140" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-2142" href="../Untyped/#plfa_plfa-part2-Untyped-2750" class="Datatype">Context</a> <a id="plfa_plfa-part2-Substitution-2150" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2152" href="../Untyped/#plfa_plfa-part2-Untyped-2750" class="Datatype">Context</a> <a id="plfa_plfa-part2-Substitution-2160" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2162" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="plfa_plfa-part2-Substitution-2166" href="../Substitution/#plfa_plfa-part2-Substitution-2133" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-2173" href="../Substitution/#plfa_plfa-part2-Substitution-2173" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-2175" href="../Substitution/#plfa_plfa-part2-Substitution-2175" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-2177" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-2179" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-2181" href="../Substitution/#plfa_plfa-part2-Substitution-2181" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-2182" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-2184" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2186" href="../Substitution/#plfa_plfa-part2-Substitution-2173" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-2188" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-2190" href="../Substitution/#plfa_plfa-part2-Substitution-2181" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-2192" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2194" href="../Substitution/#plfa_plfa-part2-Substitution-2175" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-2196" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-2198" href="../Substitution/#plfa_plfa-part2-Substitution-2181" class="Bound">A</a>
</pre><p>Similarly, we introduce the following shorthand for the type of a <em>substitution</em> from variables in context <code>Γ</code> to terms in context <code>Δ</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-Subst"></a><a id="plfa_plfa-part2-Substitution-2350" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-2356" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-2358" href="../Untyped/#plfa_plfa-part2-Untyped-2750" class="Datatype">Context</a> <a id="plfa_plfa-part2-Substitution-2366" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2368" href="../Untyped/#plfa_plfa-part2-Untyped-2750" class="Datatype">Context</a> <a id="plfa_plfa-part2-Substitution-2376" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2378" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="plfa_plfa-part2-Substitution-2382" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-2388" href="../Substitution/#plfa_plfa-part2-Substitution-2388" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-2390" href="../Substitution/#plfa_plfa-part2-Substitution-2390" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-2392" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-2394" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-2396" href="../Substitution/#plfa_plfa-part2-Substitution-2396" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-2397" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-2399" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2401" href="../Substitution/#plfa_plfa-part2-Substitution-2388" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-2403" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-2405" href="../Substitution/#plfa_plfa-part2-Substitution-2396" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-2407" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2409" href="../Substitution/#plfa_plfa-part2-Substitution-2390" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-2411" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-2413" href="../Substitution/#plfa_plfa-part2-Substitution-2396" class="Bound">A</a>
</pre><p>We use the following more succinct notation for the <code>subst</code> function.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-⟪_⟫"></a><a id="plfa_plfa-part2-Substitution-2499" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪_⟫</a> <a id="plfa_plfa-part2-Substitution-2503" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-2505" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-2507" href="../Substitution/#plfa_plfa-part2-Substitution-2507" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-2509" href="../Substitution/#plfa_plfa-part2-Substitution-2509" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-2511" href="../Substitution/#plfa_plfa-part2-Substitution-2511" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-2512" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-2514" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2516" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-2522" href="../Substitution/#plfa_plfa-part2-Substitution-2507" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-2524" href="../Substitution/#plfa_plfa-part2-Substitution-2509" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-2526" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2528" href="../Substitution/#plfa_plfa-part2-Substitution-2507" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-2530" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-2532" href="../Substitution/#plfa_plfa-part2-Substitution-2511" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-2534" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2536" href="../Substitution/#plfa_plfa-part2-Substitution-2509" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-2538" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-2540" href="../Substitution/#plfa_plfa-part2-Substitution-2511" class="Bound">A</a>
<a id="plfa_plfa-part2-Substitution-2542" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-2544" href="../Substitution/#plfa_plfa-part2-Substitution-2544" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-2546" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-2548" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-2550" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-2552" href="../Substitution/#plfa_plfa-part2-Substitution-2552" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-2554" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-2556" href="../Untyped/#plfa_plfa-part2-Untyped-6759" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-2562" href="../Substitution/#plfa_plfa-part2-Substitution-2544" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-2564" href="../Substitution/#plfa_plfa-part2-Substitution-2552" class="Bound">M</a>
</pre><h2 id="the-σ-algebra-of-substitution">The σ algebra of substitution</h2><p>A substitution maps de Bruijn indices (natural numbers) to terms, so we can view a substitution simply as a sequence of terms, or more precisely, as an infinite sequence of terms. The σ algebra consists of four operations for building such sequences: identity <code>ids</code>, shift <code>↑</code>, cons <code>M • σ</code>, and sequencing <code>σ ⨟ τ</code>. The sequence <code>0, 1, 2, ...</code> is constructed by the identity substitution.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-ids"></a><a id="plfa_plfa-part2-Substitution-3005" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-3009" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-3011" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-3013" href="../Substitution/#plfa_plfa-part2-Substitution-3013" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-3014" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-3016" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-3018" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-3024" href="../Substitution/#plfa_plfa-part2-Substitution-3013" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-3026" href="../Substitution/#plfa_plfa-part2-Substitution-3013" class="Bound">Γ</a>
<a id="plfa_plfa-part2-Substitution-3028" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-3032" href="../Substitution/#plfa_plfa-part2-Substitution-3032" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-3034" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-3036" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-3038" href="../Substitution/#plfa_plfa-part2-Substitution-3032" class="Bound">x</a>
</pre><p>The shift operation <code>↑</code> constructs the sequence</p><pre><code>1, 2, 3, ...</code></pre><p>and is defined as follows.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-↑"></a><a id="plfa_plfa-part2-Substitution-3148" href="../Substitution/#plfa_plfa-part2-Substitution-3148" class="Function">↑</a> <a id="plfa_plfa-part2-Substitution-3150" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-3152" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-3154" href="../Substitution/#plfa_plfa-part2-Substitution-3154" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-3156" href="../Substitution/#plfa_plfa-part2-Substitution-3156" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-3157" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-3159" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-3161" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-3167" href="../Substitution/#plfa_plfa-part2-Substitution-3154" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-3169" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-3170" href="../Substitution/#plfa_plfa-part2-Substitution-3154" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-3172" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-3174" href="../Substitution/#plfa_plfa-part2-Substitution-3156" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-3175" class="Symbol">)</a>
<a id="plfa_plfa-part2-Substitution-3177" href="../Substitution/#plfa_plfa-part2-Substitution-3148" class="Function">↑</a> <a id="plfa_plfa-part2-Substitution-3179" href="../Substitution/#plfa_plfa-part2-Substitution-3179" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-3181" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-3183" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-3185" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-3186" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-3188" href="../Substitution/#plfa_plfa-part2-Substitution-3179" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-3189" class="Symbol">)</a>
</pre><p>Given a term <code>M</code> and substitution <code>σ</code>, the operation <code>M • σ</code> constructs the sequence</p><pre><code>M , σ 0, σ 1, σ 2, ...</code></pre><p>This operation is analogous to the <code>cons</code> operation of Lisp.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-3380" class="Keyword">infixr</a> <a id="plfa_plfa-part2-Substitution-3387" class="Number">6</a> <a id="plfa_plfa-part2-Substitution-3389" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">_•_</a>

<a id="plfa_plfa-part2-Substitution-_•_"></a><a id="plfa_plfa-part2-Substitution-3394" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">_•_</a> <a id="plfa_plfa-part2-Substitution-3398" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-3400" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-3402" href="../Substitution/#plfa_plfa-part2-Substitution-3402" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-3404" href="../Substitution/#plfa_plfa-part2-Substitution-3404" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-3406" href="../Substitution/#plfa_plfa-part2-Substitution-3406" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-3407" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-3409" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-3411" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-3412" href="../Substitution/#plfa_plfa-part2-Substitution-3404" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-3414" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-3416" href="../Substitution/#plfa_plfa-part2-Substitution-3406" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-3417" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-3419" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-3421" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-3427" href="../Substitution/#plfa_plfa-part2-Substitution-3402" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-3429" href="../Substitution/#plfa_plfa-part2-Substitution-3404" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-3431" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-3433" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-3439" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-3440" href="../Substitution/#plfa_plfa-part2-Substitution-3402" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-3442" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-3444" href="../Substitution/#plfa_plfa-part2-Substitution-3406" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-3445" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-3447" href="../Substitution/#plfa_plfa-part2-Substitution-3404" class="Bound">Δ</a>
<a id="plfa_plfa-part2-Substitution-3449" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-3450" href="../Substitution/#plfa_plfa-part2-Substitution-3450" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-3452" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-3454" href="../Substitution/#plfa_plfa-part2-Substitution-3454" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-3455" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-3457" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-Substitution-3459" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-3461" href="../Substitution/#plfa_plfa-part2-Substitution-3450" class="Bound">M</a>
<a id="plfa_plfa-part2-Substitution-3463" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-3464" href="../Substitution/#plfa_plfa-part2-Substitution-3464" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-3466" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-3468" href="../Substitution/#plfa_plfa-part2-Substitution-3468" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-3469" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-3471" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-3472" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-3474" href="../Substitution/#plfa_plfa-part2-Substitution-3474" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-3475" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-3477" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-3479" href="../Substitution/#plfa_plfa-part2-Substitution-3468" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-3481" href="../Substitution/#plfa_plfa-part2-Substitution-3474" class="Bound">x</a>
</pre><p>Given two substitutions <code>σ</code> and <code>τ</code>, the sequencing operation <code>σ ⨟ τ</code> composes the two substitutions by first applying <code>σ</code> and then applying <code>τ</code>. So it produces the sequence</p><pre><code>⟪τ⟫(σ 0), ⟪τ⟫(σ 1), ⟪τ⟫(σ 2), ...</code></pre><p>Here is the definition.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-3735" class="Keyword">infixr</a> <a id="plfa_plfa-part2-Substitution-3742" class="Number">5</a> <a id="plfa_plfa-part2-Substitution-3744" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">_⨟_</a>

<a id="plfa_plfa-part2-Substitution-_⨟_"></a><a id="plfa_plfa-part2-Substitution-3749" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">_⨟_</a> <a id="plfa_plfa-part2-Substitution-3753" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-3755" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-3757" href="../Substitution/#plfa_plfa-part2-Substitution-3757" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-3759" href="../Substitution/#plfa_plfa-part2-Substitution-3759" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-3761" href="../Substitution/#plfa_plfa-part2-Substitution-3761" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-3762" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-3764" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-3766" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-3772" href="../Substitution/#plfa_plfa-part2-Substitution-3757" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-3774" href="../Substitution/#plfa_plfa-part2-Substitution-3759" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-3776" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-3778" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-3784" href="../Substitution/#plfa_plfa-part2-Substitution-3759" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-3786" href="../Substitution/#plfa_plfa-part2-Substitution-3761" class="Bound">Σ</a> <a id="plfa_plfa-part2-Substitution-3788" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-3790" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-3796" href="../Substitution/#plfa_plfa-part2-Substitution-3757" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-3798" href="../Substitution/#plfa_plfa-part2-Substitution-3761" class="Bound">Σ</a>
<a id="plfa_plfa-part2-Substitution-3800" href="../Substitution/#plfa_plfa-part2-Substitution-3800" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-3802" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-3804" href="../Substitution/#plfa_plfa-part2-Substitution-3804" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-3806" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-3808" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-3810" href="../Substitution/#plfa_plfa-part2-Substitution-3804" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-3812" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-3814" href="https://agda.github.io/agda-stdlib/v2.1/Function.Base.html#1115" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-3816" href="../Substitution/#plfa_plfa-part2-Substitution-3800" class="Bound">σ</a>
</pre><p>For the sequencing operation, Abadi et al. use the notation of function composition, writing <code>σ ∘ τ</code>, but still with <code>σ</code> applied before <code>τ</code>, which is the opposite of standard mathematical practice. We instead write <code>σ ⨟ τ</code>, because semicolon is the standard notation for forward function composition.</p><h2 id="the-σ-algebra-equations">The σ algebra equations</h2><p>The σ algebra includes the following equations.</p><pre><code>(sub-head)  ⟪ M • σ ⟫ (` Z) ≡ M
(sub-tail)  ↑ ⨟ (M • σ)    ≡ σ
(sub-η)     (⟪ σ ⟫ (` Z)) • (↑ ⨟ σ) ≡ σ
(Z-shift)   (` Z) • ↑      ≡ ids

(sub-id)    ⟪ ids ⟫ M      ≡ M
(sub-app)   ⟪ σ ⟫ (L · M)  ≡ (⟪ σ ⟫ L) · (⟪ σ ⟫ M)
(sub-abs)   ⟪ σ ⟫ (ƛ N) ≡ ƛ ⟪ (` Z) • (σ ⨟ ↑) ⟫ N
(sub-sub)   ⟪ τ ⟫ ⟪ σ ⟫ M  ≡ ⟪ σ ⨟ τ ⟫ M

(sub-idL)   ids ⨟ σ        ≡ σ
(sub-idR)   σ ⨟ ids        ≡ σ
(sub-assoc) (σ ⨟ τ) ⨟ θ    ≡ σ ⨟ (τ ⨟ θ)
(sub-dist)  (M • σ) ⨟ τ    ≡ (⟪ τ ⟫ M) • (σ ⨟ τ)</code></pre><p>The first group of equations describe how the <code>•</code> operator acts like cons. The equation <code>sub-head</code> says that the variable zero <code>Z</code> returns the head of the sequence (it acts like the <code>car</code> of Lisp). Similarly, <code>sub-tail</code> says that sequencing with shift <code>↑</code> returns the tail of the sequence (it acts like <code>cdr</code> of Lisp). The <code>sub-η</code> equation is the η-expansion rule for sequences, saying that taking the head and tail of a sequence, and then cons’ing them together yields the original sequence. The <code>Z-shift</code> equation says that cons’ing zero onto the shifted sequence produces the identity sequence.</p><p>The next four equations involve applying substitutions to terms. The equation <code>sub-id</code> says that the identity substitution returns the term unchanged. The equations <code>sub-app</code> and <code>sub-abs</code> says that substitution is a congruence for the lambda calculus. The <code>sub-sub</code> equation says that the sequence operator <code>⨟</code> behaves as intended.</p><p>The last four equations concern the sequencing of substitutions. The first two equations, <code>sub-idL</code> and <code>sub-idR</code>, say that <code>ids</code> is the left and right unit of the sequencing operator. The <code>sub-assoc</code> equation says that sequencing is associative. Finally, <code>sub-dist</code> says that post-sequencing distributes through cons.</p><h2 id="relating-the-σ-algebra-and-substitution-functions">Relating the σ algebra and substitution functions</h2><p>The definitions of substitution <code>N [ M ]</code> and parallel substitution <code>subst σ N</code> depend on several auxiliary functions: <code>rename</code>, <code>exts</code>, <code>ext</code>, and <code>subst-zero</code>. We shall relate those functions to terms in the σ algebra.</p><p>To begin with, renaming can be expressed in terms of substitution. We have</p><pre><code>rename ρ M ≡ ⟪ ren ρ ⟫ M               (rename-subst-ren)</code></pre><p>where <code>ren</code> turns a renaming <code>ρ</code> into a substitution by post-composing <code>ρ</code> with the identity substitution.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-ren"></a><a id="plfa_plfa-part2-Substitution-6502" href="../Substitution/#plfa_plfa-part2-Substitution-6502" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-6506" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-6508" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-6510" href="../Substitution/#plfa_plfa-part2-Substitution-6510" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-6512" href="../Substitution/#plfa_plfa-part2-Substitution-6512" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-6513" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-6515" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-6517" href="../Substitution/#plfa_plfa-part2-Substitution-2133" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-6524" href="../Substitution/#plfa_plfa-part2-Substitution-6510" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-6526" href="../Substitution/#plfa_plfa-part2-Substitution-6512" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-6528" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-6530" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-6536" href="../Substitution/#plfa_plfa-part2-Substitution-6510" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-6538" href="../Substitution/#plfa_plfa-part2-Substitution-6512" class="Bound">Δ</a>
<a id="plfa_plfa-part2-Substitution-6540" href="../Substitution/#plfa_plfa-part2-Substitution-6502" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-6544" href="../Substitution/#plfa_plfa-part2-Substitution-6544" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-6546" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-6548" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-6552" href="https://agda.github.io/agda-stdlib/v2.1/Function.Base.html#1115" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-6554" href="../Substitution/#plfa_plfa-part2-Substitution-6544" class="Bound">ρ</a>
</pre><p>When the renaming is the increment function, then it is equivalent to shift.</p><pre><code>ren S_ ≡ ↑                             (ren-shift)

rename S_ M ≡ ⟪ ↑ ⟫ M                  (rename-shift)</code></pre><p>Renaming with the identity renaming leaves the term unchanged.</p><pre><code>rename (λ {A} x → x) M ≡ M             (rename-id)</code></pre><p>Next we relate the <code>exts</code> function to the σ algebra. Recall that the <code>exts</code> function extends a substitution as follows:</p><pre><code>exts σ = ` Z, rename S_ (σ 0), rename S_ (σ 1), rename S_ (σ 2), ...</code></pre><p>So <code>exts</code> is equivalent to cons’ing Z onto the sequence formed by applying <code>σ</code> and then shifting.</p><pre><code>exts σ ≡ ` Z • (σ ⨟ ↑)                (exts-cons-shift)</code></pre><p>The <code>ext</code> function does the same job as <code>exts</code> but for renamings instead of substitutions. So composing <code>ext</code> with <code>ren</code> is the same as composing <code>ren</code> with <code>exts</code>.</p><pre><code>ren (ext ρ) ≡ exts (ren ρ)            (ren-ext)</code></pre><p>Thus, we can recast the <code>exts-cons-shift</code> equation in terms of renamings.</p><pre><code>ren (ext ρ) ≡ ` Z • (ren ρ ⨟ ↑)       (ext-cons-Z-shift)</code></pre><p>It is also useful to specialize the <code>sub-sub</code> equation of the σ algebra to the situation where the first substitution is a renaming.</p><pre><code>⟪ σ ⟫ (rename ρ M) ≡ ⟪ σ ∘ ρ ⟫ M       (rename-subst)</code></pre><p>The <code>subst-zero M</code> substitution is equivalent to cons’ing <code>M</code> onto the identity substitution.</p><pre><code>subst-zero M ≡ M • ids                (subst-Z-cons-ids)</code></pre><p>Finally, sequencing <code>exts σ</code> with <code>subst-zero M</code> is equivalent to cons’ing <code>M</code> onto <code>σ</code>.</p><pre><code>exts σ ⨟ subst-zero M ≡ (M • σ)       (subst-zero-exts-cons)</code></pre><h2 id="proofs-of-sub-head-sub-tail-sub-η-z-shift-sub-idl-sub-dist-and-sub-app">Proofs of sub-head, sub-tail, sub-η, Z-shift, sub-idL, sub-dist, and sub-app</h2><p>We start with the proofs that are immediate from the definitions of the operators.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-sub-head"></a><a id="plfa_plfa-part2-Substitution-8267" href="../Substitution/#plfa_plfa-part2-Substitution-8267" class="Function">sub-head</a> <a id="plfa_plfa-part2-Substitution-8276" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8278" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-8280" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8281" href="../Substitution/#plfa_plfa-part2-Substitution-8281" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-8283" href="../Substitution/#plfa_plfa-part2-Substitution-8283" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-8284" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8286" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8287" href="../Substitution/#plfa_plfa-part2-Substitution-8287" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-8288" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8290" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8291" href="../Substitution/#plfa_plfa-part2-Substitution-8291" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-8293" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8295" href="../Substitution/#plfa_plfa-part2-Substitution-8283" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-8297" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-8299" href="../Substitution/#plfa_plfa-part2-Substitution-8287" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-8300" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-8302" href="../Substitution/#plfa_plfa-part2-Substitution-8302" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-8304" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8306" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-8312" href="../Substitution/#plfa_plfa-part2-Substitution-8281" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-8314" href="../Substitution/#plfa_plfa-part2-Substitution-8283" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-8315" class="Symbol">}</a>
         <a id="plfa_plfa-part2-Substitution-8326" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-8328" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-8330" href="../Substitution/#plfa_plfa-part2-Substitution-8291" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-8332" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-8334" href="../Substitution/#plfa_plfa-part2-Substitution-8302" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-8336" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-8338" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-8339" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-8341" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-8342" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-8344" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-8346" href="../Substitution/#plfa_plfa-part2-Substitution-8291" class="Bound">M</a>
<a id="plfa_plfa-part2-Substitution-8348" href="../Substitution/#plfa_plfa-part2-Substitution-8267" class="Function">sub-head</a> <a id="plfa_plfa-part2-Substitution-8357" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8359" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-sub-tail"></a><a id="plfa_plfa-part2-Substitution-8377" href="../Substitution/#plfa_plfa-part2-Substitution-8377" class="Function">sub-tail</a> <a id="plfa_plfa-part2-Substitution-8386" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8388" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-8390" href="../Substitution/#plfa_plfa-part2-Substitution-8390" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-8392" href="../Substitution/#plfa_plfa-part2-Substitution-8392" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-8393" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8395" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8396" href="../Substitution/#plfa_plfa-part2-Substitution-8396" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-8398" href="../Substitution/#plfa_plfa-part2-Substitution-8398" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-8399" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8401" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8402" href="../Substitution/#plfa_plfa-part2-Substitution-8402" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-8404" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8406" href="../Substitution/#plfa_plfa-part2-Substitution-8392" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-8408" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-8410" href="../Substitution/#plfa_plfa-part2-Substitution-8396" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-8411" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8413" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8414" href="../Substitution/#plfa_plfa-part2-Substitution-8414" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-8416" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8418" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-8424" href="../Substitution/#plfa_plfa-part2-Substitution-8390" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-8426" href="../Substitution/#plfa_plfa-part2-Substitution-8392" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-8427" class="Symbol">}</a>
         <a id="plfa_plfa-part2-Substitution-8438" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-8440" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-8441" href="../Substitution/#plfa_plfa-part2-Substitution-3148" class="Function">↑</a> <a id="plfa_plfa-part2-Substitution-8443" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-8445" href="../Substitution/#plfa_plfa-part2-Substitution-8402" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-8447" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-8449" href="../Substitution/#plfa_plfa-part2-Substitution-8414" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-8450" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-8452" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8453" class="Argument">A</a> <a id="plfa_plfa-part2-Substitution-8455" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8457" href="../Substitution/#plfa_plfa-part2-Substitution-8398" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-8458" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8460" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-8462" href="../Substitution/#plfa_plfa-part2-Substitution-8414" class="Bound">σ</a>
<a id="plfa_plfa-part2-Substitution-8464" href="../Substitution/#plfa_plfa-part2-Substitution-8377" class="Function">sub-tail</a> <a id="plfa_plfa-part2-Substitution-8473" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8475" href="../Substitution/#plfa_plfa-part2-Substitution-1864" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-8490" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-8492" href="../Substitution/#plfa_plfa-part2-Substitution-8492" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-8494" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-8496" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-sub-η"></a><a id="plfa_plfa-part2-Substitution-8514" href="../Substitution/#plfa_plfa-part2-Substitution-8514" class="Function">sub-η</a> <a id="plfa_plfa-part2-Substitution-8520" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8522" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-8524" href="../Substitution/#plfa_plfa-part2-Substitution-8524" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-8526" href="../Substitution/#plfa_plfa-part2-Substitution-8526" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-8527" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8529" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8530" href="../Substitution/#plfa_plfa-part2-Substitution-8530" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-8532" href="../Substitution/#plfa_plfa-part2-Substitution-8532" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-8533" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8535" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8536" href="../Substitution/#plfa_plfa-part2-Substitution-8536" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-8538" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8540" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-8546" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-8547" href="../Substitution/#plfa_plfa-part2-Substitution-8524" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-8549" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-8551" href="../Substitution/#plfa_plfa-part2-Substitution-8530" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-8552" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-8554" href="../Substitution/#plfa_plfa-part2-Substitution-8526" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-8555" class="Symbol">}</a>
      <a id="plfa_plfa-part2-Substitution-8563" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-8565" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-8566" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-8568" href="../Substitution/#plfa_plfa-part2-Substitution-8536" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-8570" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-8572" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-8573" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-8575" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-8576" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-8578" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-8580" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-8581" href="../Substitution/#plfa_plfa-part2-Substitution-3148" class="Function">↑</a> <a id="plfa_plfa-part2-Substitution-8583" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-8585" href="../Substitution/#plfa_plfa-part2-Substitution-8536" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-8586" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-8589" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8590" class="Argument">A</a> <a id="plfa_plfa-part2-Substitution-8592" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8594" href="../Substitution/#plfa_plfa-part2-Substitution-8532" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-8595" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8597" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-8599" href="../Substitution/#plfa_plfa-part2-Substitution-8536" class="Bound">σ</a>
<a id="plfa_plfa-part2-Substitution-8601" href="../Substitution/#plfa_plfa-part2-Substitution-8514" class="Function">sub-η</a> <a id="plfa_plfa-part2-Substitution-8607" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8608" href="../Substitution/#plfa_plfa-part2-Substitution-8608" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-8609" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-8611" href="../Substitution/#plfa_plfa-part2-Substitution-8611" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-8612" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-8614" href="../Substitution/#plfa_plfa-part2-Substitution-8614" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-8615" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-8617" href="../Substitution/#plfa_plfa-part2-Substitution-8617" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-8618" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-8620" href="../Substitution/#plfa_plfa-part2-Substitution-8620" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-8621" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8623" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8625" href="../Substitution/#plfa_plfa-part2-Substitution-1864" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-8640" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-8642" href="../Substitution/#plfa_plfa-part2-Substitution-8642" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-8644" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-8646" href="../Substitution/#plfa_plfa-part2-Substitution-8664" class="Function">lemma</a>
   <a id="plfa_plfa-part2-Substitution-8655" class="Keyword">where</a>
   <a id="plfa_plfa-part2-Substitution-8664" href="../Substitution/#plfa_plfa-part2-Substitution-8664" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-8670" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8672" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-8674" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8675" href="../Substitution/#plfa_plfa-part2-Substitution-8675" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-8676" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8678" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-8680" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-8682" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-8684" href="../Substitution/#plfa_plfa-part2-Substitution-8620" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-8686" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-8688" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-8689" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-8691" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-8692" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-8695" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-8697" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-8698" href="../Substitution/#plfa_plfa-part2-Substitution-3148" class="Function">↑</a> <a id="plfa_plfa-part2-Substitution-8700" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-8702" href="../Substitution/#plfa_plfa-part2-Substitution-8620" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-8703" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-8706" href="../Substitution/#plfa_plfa-part2-Substitution-8675" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-8708" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-8710" href="../Substitution/#plfa_plfa-part2-Substitution-8620" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-8712" href="../Substitution/#plfa_plfa-part2-Substitution-8675" class="Bound">x</a>
   <a id="plfa_plfa-part2-Substitution-8717" href="../Substitution/#plfa_plfa-part2-Substitution-8664" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-8723" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8724" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-8726" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8728" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-8729" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8731" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8733" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
   <a id="plfa_plfa-part2-Substitution-8741" href="../Substitution/#plfa_plfa-part2-Substitution-8664" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-8747" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8748" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-8750" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8752" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-8754" href="../Substitution/#plfa_plfa-part2-Substitution-8754" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-8755" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8757" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8759" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-Z-shift"></a><a id="plfa_plfa-part2-Substitution-8777" href="../Substitution/#plfa_plfa-part2-Substitution-8777" class="Function">Z-shift</a> <a id="plfa_plfa-part2-Substitution-8785" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8787" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-8789" href="../Substitution/#plfa_plfa-part2-Substitution-8789" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-8790" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-8792" href="../Substitution/#plfa_plfa-part2-Substitution-8792" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-8794" href="../Substitution/#plfa_plfa-part2-Substitution-8794" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-8795" class="Symbol">}</a>
        <a id="plfa_plfa-part2-Substitution-8805" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-8807" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-8809" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-8811" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-8812" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-8814" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-8816" href="../Substitution/#plfa_plfa-part2-Substitution-3148" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-8817" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-8819" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-8821" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-8825" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8826" href="../Substitution/#plfa_plfa-part2-Substitution-8789" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-8828" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-8830" href="../Substitution/#plfa_plfa-part2-Substitution-8792" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-8831" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8833" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8834" href="../Substitution/#plfa_plfa-part2-Substitution-8794" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-8835" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-8837" href="../Substitution/#plfa_plfa-part2-Substitution-8777" class="Function">Z-shift</a> <a id="plfa_plfa-part2-Substitution-8845" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-8846" href="../Substitution/#plfa_plfa-part2-Substitution-8846" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-8847" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-8849" href="../Substitution/#plfa_plfa-part2-Substitution-8849" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-8850" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-8852" href="../Substitution/#plfa_plfa-part2-Substitution-8852" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-8853" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-8855" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8857" href="../Substitution/#plfa_plfa-part2-Substitution-1864" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-8872" href="../Substitution/#plfa_plfa-part2-Substitution-8890" class="Function">lemma</a>
   <a id="plfa_plfa-part2-Substitution-8881" class="Keyword">where</a>
   <a id="plfa_plfa-part2-Substitution-8890" href="../Substitution/#plfa_plfa-part2-Substitution-8890" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-8896" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8898" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-8899" href="../Substitution/#plfa_plfa-part2-Substitution-8899" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-8901" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-8903" href="../Substitution/#plfa_plfa-part2-Substitution-8846" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-8905" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-8907" href="../Substitution/#plfa_plfa-part2-Substitution-8849" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-8909" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-8911" href="../Substitution/#plfa_plfa-part2-Substitution-8852" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-8912" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-8914" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-8916" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-8918" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-8920" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-8921" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-8923" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-8925" href="../Substitution/#plfa_plfa-part2-Substitution-3148" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-8926" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-8928" href="../Substitution/#plfa_plfa-part2-Substitution-8899" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-8930" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-8932" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-8936" href="../Substitution/#plfa_plfa-part2-Substitution-8899" class="Bound">x</a>
   <a id="plfa_plfa-part2-Substitution-8941" href="../Substitution/#plfa_plfa-part2-Substitution-8890" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-8947" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-Substitution-8949" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8951" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
   <a id="plfa_plfa-part2-Substitution-8959" href="../Substitution/#plfa_plfa-part2-Substitution-8890" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-8965" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-8966" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-8968" href="../Substitution/#plfa_plfa-part2-Substitution-8968" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-8969" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-8971" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-8973" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-sub-idL"></a><a id="plfa_plfa-part2-Substitution-8991" href="../Substitution/#plfa_plfa-part2-Substitution-8991" class="Function">sub-idL</a> <a id="plfa_plfa-part2-Substitution-8999" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9001" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-9003" href="../Substitution/#plfa_plfa-part2-Substitution-9003" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-9005" href="../Substitution/#plfa_plfa-part2-Substitution-9005" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-9006" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9008" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9009" href="../Substitution/#plfa_plfa-part2-Substitution-9009" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-9011" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9013" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-9019" href="../Substitution/#plfa_plfa-part2-Substitution-9003" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-9021" href="../Substitution/#plfa_plfa-part2-Substitution-9005" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-9022" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9024" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9025" href="../Substitution/#plfa_plfa-part2-Substitution-9025" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-9026" class="Symbol">}</a>
       <a id="plfa_plfa-part2-Substitution-9035" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-9037" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-9041" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-9043" href="../Substitution/#plfa_plfa-part2-Substitution-9009" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-9045" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-9047" href="../Substitution/#plfa_plfa-part2-Substitution-9009" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-9049" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9050" href="../Substitution/#plfa_plfa-part2-Substitution-9025" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-9051" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-9053" href="../Substitution/#plfa_plfa-part2-Substitution-8991" class="Function">sub-idL</a> <a id="plfa_plfa-part2-Substitution-9061" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-9063" href="../Substitution/#plfa_plfa-part2-Substitution-1864" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-9078" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-9080" href="../Substitution/#plfa_plfa-part2-Substitution-9080" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-9082" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-9084" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-sub-dist"></a><a id="plfa_plfa-part2-Substitution-9102" href="../Substitution/#plfa_plfa-part2-Substitution-9102" class="Function">sub-dist</a> <a id="plfa_plfa-part2-Substitution-9111" class="Symbol">:</a>  <a id="plfa_plfa-part2-Substitution-9114" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-9116" href="../Substitution/#plfa_plfa-part2-Substitution-9116" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-9118" href="../Substitution/#plfa_plfa-part2-Substitution-9118" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-9120" href="../Substitution/#plfa_plfa-part2-Substitution-9120" class="Bound">Σ</a> <a id="plfa_plfa-part2-Substitution-9122" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9124" href="../Untyped/#plfa_plfa-part2-Untyped-2750" class="Datatype">Context</a><a id="plfa_plfa-part2-Substitution-9131" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9133" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9134" href="../Substitution/#plfa_plfa-part2-Substitution-9134" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-9136" href="../Substitution/#plfa_plfa-part2-Substitution-9136" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-9137" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9139" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9140" href="../Substitution/#plfa_plfa-part2-Substitution-9140" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-9142" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9144" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-9150" href="../Substitution/#plfa_plfa-part2-Substitution-9116" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-9152" href="../Substitution/#plfa_plfa-part2-Substitution-9118" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-9153" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9155" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9156" href="../Substitution/#plfa_plfa-part2-Substitution-9156" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-9158" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9160" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-9166" href="../Substitution/#plfa_plfa-part2-Substitution-9118" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-9168" href="../Substitution/#plfa_plfa-part2-Substitution-9120" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-9169" class="Symbol">}</a>
              <a id="plfa_plfa-part2-Substitution-9185" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9186" href="../Substitution/#plfa_plfa-part2-Substitution-9186" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-9188" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9190" href="../Substitution/#plfa_plfa-part2-Substitution-9118" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-9192" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-9194" href="../Substitution/#plfa_plfa-part2-Substitution-9134" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-9195" class="Symbol">}</a>
         <a id="plfa_plfa-part2-Substitution-9206" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-9208" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-9210" href="../Substitution/#plfa_plfa-part2-Substitution-9186" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-9212" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-9214" href="../Substitution/#plfa_plfa-part2-Substitution-9140" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-9215" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-9217" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-9219" href="../Substitution/#plfa_plfa-part2-Substitution-9156" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-9220" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-9222" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-9224" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-9226" href="../Untyped/#plfa_plfa-part2-Untyped-6759" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-9232" href="../Substitution/#plfa_plfa-part2-Substitution-9156" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-9234" href="../Substitution/#plfa_plfa-part2-Substitution-9186" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-9235" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-9237" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-9239" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-9240" href="../Substitution/#plfa_plfa-part2-Substitution-9140" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-9242" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-9244" href="../Substitution/#plfa_plfa-part2-Substitution-9156" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-9245" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-9248" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9249" href="../Substitution/#plfa_plfa-part2-Substitution-9136" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-9250" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-9252" href="../Substitution/#plfa_plfa-part2-Substitution-9102" class="Function">sub-dist</a> <a id="plfa_plfa-part2-Substitution-9261" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9262" href="../Substitution/#plfa_plfa-part2-Substitution-9262" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-9263" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-9265" href="../Substitution/#plfa_plfa-part2-Substitution-9265" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-9266" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-9268" href="../Substitution/#plfa_plfa-part2-Substitution-9268" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-9269" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-9271" href="../Substitution/#plfa_plfa-part2-Substitution-9271" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-9272" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-9274" href="../Substitution/#plfa_plfa-part2-Substitution-9274" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-9275" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-9277" href="../Substitution/#plfa_plfa-part2-Substitution-9277" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-9278" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-9280" href="../Substitution/#plfa_plfa-part2-Substitution-9280" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-9281" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-9283" href="../Substitution/#plfa_plfa-part2-Substitution-9283" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-9284" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9286" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-9288" href="../Substitution/#plfa_plfa-part2-Substitution-1864" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-9303" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-9305" href="../Substitution/#plfa_plfa-part2-Substitution-9305" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-9307" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-9309" href="../Substitution/#plfa_plfa-part2-Substitution-9333" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-9315" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9316" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-9318" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-9320" href="../Substitution/#plfa_plfa-part2-Substitution-9305" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-9321" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-9325" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-9333" href="../Substitution/#plfa_plfa-part2-Substitution-9333" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-9339" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9341" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-9343" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9344" href="../Substitution/#plfa_plfa-part2-Substitution-9344" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-9346" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9348" href="../Substitution/#plfa_plfa-part2-Substitution-9262" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-9350" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-9352" href="../Substitution/#plfa_plfa-part2-Substitution-9271" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-9354" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-9356" href="../Substitution/#plfa_plfa-part2-Substitution-9274" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-9357" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9359" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-9361" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-9363" href="../Substitution/#plfa_plfa-part2-Substitution-9283" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-9365" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-9367" href="../Substitution/#plfa_plfa-part2-Substitution-9277" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-9368" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-9370" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-9372" href="../Substitution/#plfa_plfa-part2-Substitution-9280" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-9373" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-9375" href="../Substitution/#plfa_plfa-part2-Substitution-9344" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-9377" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-9379" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-9381" href="../Untyped/#plfa_plfa-part2-Untyped-6759" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-9387" href="../Substitution/#plfa_plfa-part2-Substitution-9280" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-9389" href="../Substitution/#plfa_plfa-part2-Substitution-9283" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-9390" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-9392" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-9394" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-9395" href="../Substitution/#plfa_plfa-part2-Substitution-9277" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-9397" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-9399" href="../Substitution/#plfa_plfa-part2-Substitution-9280" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-9400" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-9403" href="../Substitution/#plfa_plfa-part2-Substitution-9344" class="Bound">x</a>
  <a id="plfa_plfa-part2-Substitution-9407" href="../Substitution/#plfa_plfa-part2-Substitution-9333" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-9413" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9414" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-9416" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-9418" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-9419" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9421" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-9423" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
  <a id="plfa_plfa-part2-Substitution-9430" href="../Substitution/#plfa_plfa-part2-Substitution-9333" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-9436" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9437" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-9439" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-9441" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-9443" href="../Substitution/#plfa_plfa-part2-Substitution-9443" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-9444" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9446" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-9448" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-sub-app"></a><a id="plfa_plfa-part2-Substitution-9466" href="../Substitution/#plfa_plfa-part2-Substitution-9466" class="Function">sub-app</a> <a id="plfa_plfa-part2-Substitution-9474" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9476" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-9478" href="../Substitution/#plfa_plfa-part2-Substitution-9478" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-9480" href="../Substitution/#plfa_plfa-part2-Substitution-9480" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-9481" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9483" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9484" href="../Substitution/#plfa_plfa-part2-Substitution-9484" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-9486" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9488" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-9494" href="../Substitution/#plfa_plfa-part2-Substitution-9478" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-9496" href="../Substitution/#plfa_plfa-part2-Substitution-9480" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-9497" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9499" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9500" href="../Substitution/#plfa_plfa-part2-Substitution-9500" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-9502" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9504" href="../Substitution/#plfa_plfa-part2-Substitution-9478" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-9506" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-9508" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-9509" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-9511" href="../Substitution/#plfa_plfa-part2-Substitution-9511" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-9513" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9515" href="../Substitution/#plfa_plfa-part2-Substitution-9478" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-9517" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-9519" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-9520" class="Symbol">}</a>
        <a id="plfa_plfa-part2-Substitution-9530" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-9532" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-9534" href="../Substitution/#plfa_plfa-part2-Substitution-9484" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-9536" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-9538" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-9539" href="../Substitution/#plfa_plfa-part2-Substitution-9500" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-9541" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Substitution-9543" href="../Substitution/#plfa_plfa-part2-Substitution-9511" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-9544" class="Symbol">)</a>  <a id="plfa_plfa-part2-Substitution-9547" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-9549" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-9550" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-9552" href="../Substitution/#plfa_plfa-part2-Substitution-9484" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-9554" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-9556" href="../Substitution/#plfa_plfa-part2-Substitution-9500" class="Bound">L</a><a id="plfa_plfa-part2-Substitution-9557" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-9559" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Substitution-9561" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-9562" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-9564" href="../Substitution/#plfa_plfa-part2-Substitution-9484" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-9566" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-9568" href="../Substitution/#plfa_plfa-part2-Substitution-9511" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-9569" class="Symbol">)</a>
<a id="plfa_plfa-part2-Substitution-9571" href="../Substitution/#plfa_plfa-part2-Substitution-9466" class="Function">sub-app</a> <a id="plfa_plfa-part2-Substitution-9579" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-9581" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
</pre><h2 id="interlude-congruences">Interlude: congruences</h2><p>In this section we establish congruence rules for the σ algebra operators <code>•</code> and <code>⨟</code> and for <code>subst</code> and its helper functions <code>ext</code>, <code>rename</code>, <code>exts</code>, and <code>subst-zero</code>. These congruence rules help with the equational reasoning in the later sections of this chapter.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-cong-ext"></a><a id="plfa_plfa-part2-Substitution-9895" href="../Substitution/#plfa_plfa-part2-Substitution-9895" class="Function">cong-ext</a> <a id="plfa_plfa-part2-Substitution-9904" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9906" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-9908" href="../Substitution/#plfa_plfa-part2-Substitution-9908" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-9910" href="../Substitution/#plfa_plfa-part2-Substitution-9910" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-9911" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-9913" href="../Substitution/#plfa_plfa-part2-Substitution-9913" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-9915" href="../Substitution/#plfa_plfa-part2-Substitution-9915" class="Bound">ρ′</a> <a id="plfa_plfa-part2-Substitution-9918" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-9920" href="../Substitution/#plfa_plfa-part2-Substitution-2133" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-9927" href="../Substitution/#plfa_plfa-part2-Substitution-9908" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-9929" href="../Substitution/#plfa_plfa-part2-Substitution-9910" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-9930" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-9932" href="../Substitution/#plfa_plfa-part2-Substitution-9932" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-9933" class="Symbol">}</a>
   <a id="plfa_plfa-part2-Substitution-9938" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-9940" class="Symbol">(∀{</a><a id="plfa_plfa-part2-Substitution-9943" href="../Substitution/#plfa_plfa-part2-Substitution-9943" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-9944" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-9946" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-9948" href="../Substitution/#plfa_plfa-part2-Substitution-9913" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-9950" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-9952" href="../Substitution/#plfa_plfa-part2-Substitution-9915" class="Bound">ρ′</a> <a id="plfa_plfa-part2-Substitution-9955" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-9956" href="../Substitution/#plfa_plfa-part2-Substitution-9943" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-9957" class="Symbol">})</a>
     <a id="plfa_plfa-part2-Substitution-9965" class="Comment">---------------------------------</a>
   <a id="plfa_plfa-part2-Substitution-10002" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10004" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-10006" href="../Substitution/#plfa_plfa-part2-Substitution-10006" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-10007" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10009" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10011" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-10015" href="../Substitution/#plfa_plfa-part2-Substitution-9913" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-10017" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10018" class="Argument">B</a> <a id="plfa_plfa-part2-Substitution-10020" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10022" href="../Substitution/#plfa_plfa-part2-Substitution-9932" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-10023" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10025" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-10027" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-10031" href="../Substitution/#plfa_plfa-part2-Substitution-9915" class="Bound">ρ′</a> <a id="plfa_plfa-part2-Substitution-10034" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10035" href="../Substitution/#plfa_plfa-part2-Substitution-10006" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-10036" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-10038" href="../Substitution/#plfa_plfa-part2-Substitution-9895" class="Function">cong-ext</a><a id="plfa_plfa-part2-Substitution-10046" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10047" href="../Substitution/#plfa_plfa-part2-Substitution-10047" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-10048" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10050" href="../Substitution/#plfa_plfa-part2-Substitution-10050" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-10051" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10053" href="../Substitution/#plfa_plfa-part2-Substitution-10053" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-10054" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10056" href="../Substitution/#plfa_plfa-part2-Substitution-10056" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-10058" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10060" href="../Substitution/#plfa_plfa-part2-Substitution-10060" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-10061" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10063" href="../Substitution/#plfa_plfa-part2-Substitution-10063" class="Bound">rr</a> <a id="plfa_plfa-part2-Substitution-10066" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10067" href="../Substitution/#plfa_plfa-part2-Substitution-10067" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-10068" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10070" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10072" href="../Substitution/#plfa_plfa-part2-Substitution-1864" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-10087" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-10089" href="../Substitution/#plfa_plfa-part2-Substitution-10089" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-10091" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10093" href="../Substitution/#plfa_plfa-part2-Substitution-10113" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-10099" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10100" href="../Substitution/#plfa_plfa-part2-Substitution-10089" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-10101" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-10105" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-10113" href="../Substitution/#plfa_plfa-part2-Substitution-10113" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-10119" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-10121" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-10123" href="../Substitution/#plfa_plfa-part2-Substitution-10123" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-10125" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-10127" href="../Substitution/#plfa_plfa-part2-Substitution-10047" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-10129" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-10131" href="../Substitution/#plfa_plfa-part2-Substitution-10060" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-10133" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-10135" href="../Substitution/#plfa_plfa-part2-Substitution-10067" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-10136" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10138" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10140" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-10144" href="../Substitution/#plfa_plfa-part2-Substitution-10053" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-10146" href="../Substitution/#plfa_plfa-part2-Substitution-10123" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-10148" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-10150" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-10154" href="../Substitution/#plfa_plfa-part2-Substitution-10056" class="Bound">ρ′</a> <a id="plfa_plfa-part2-Substitution-10157" href="../Substitution/#plfa_plfa-part2-Substitution-10123" class="Bound">x</a>
  <a id="plfa_plfa-part2-Substitution-10161" href="../Substitution/#plfa_plfa-part2-Substitution-10113" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-10167" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10168" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-10169" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10171" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10173" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
  <a id="plfa_plfa-part2-Substitution-10180" href="../Substitution/#plfa_plfa-part2-Substitution-10113" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-10186" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10187" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-10189" href="../Substitution/#plfa_plfa-part2-Substitution-10189" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-10190" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10192" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10194" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-10199" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Substitution-10202" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-10203" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1670" class="Function">cong-app</a> <a id="plfa_plfa-part2-Substitution-10212" href="../Substitution/#plfa_plfa-part2-Substitution-10063" class="Bound">rr</a> <a id="plfa_plfa-part2-Substitution-10215" href="../Substitution/#plfa_plfa-part2-Substitution-10189" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-10216" class="Symbol">)</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-cong-rename"></a><a id="plfa_plfa-part2-Substitution-10231" href="../Substitution/#plfa_plfa-part2-Substitution-10231" class="Function">cong-rename</a> <a id="plfa_plfa-part2-Substitution-10243" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-10245" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-10247" href="../Substitution/#plfa_plfa-part2-Substitution-10247" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-10249" href="../Substitution/#plfa_plfa-part2-Substitution-10249" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-10250" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10252" href="../Substitution/#plfa_plfa-part2-Substitution-10252" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-10254" href="../Substitution/#plfa_plfa-part2-Substitution-10254" class="Bound">ρ′</a> <a id="plfa_plfa-part2-Substitution-10257" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-10259" href="../Substitution/#plfa_plfa-part2-Substitution-2133" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-10266" href="../Substitution/#plfa_plfa-part2-Substitution-10247" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-10268" href="../Substitution/#plfa_plfa-part2-Substitution-10249" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-10269" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10271" href="../Substitution/#plfa_plfa-part2-Substitution-10271" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-10272" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10274" href="../Substitution/#plfa_plfa-part2-Substitution-10274" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-10276" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-10278" href="../Substitution/#plfa_plfa-part2-Substitution-10247" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-10280" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-10282" href="../Substitution/#plfa_plfa-part2-Substitution-10271" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-10283" class="Symbol">}</a>
        <a id="plfa_plfa-part2-Substitution-10293" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10295" class="Symbol">(∀{</a><a id="plfa_plfa-part2-Substitution-10298" href="../Substitution/#plfa_plfa-part2-Substitution-10298" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-10299" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10301" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10303" href="../Substitution/#plfa_plfa-part2-Substitution-10252" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-10305" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-10307" href="../Substitution/#plfa_plfa-part2-Substitution-10254" class="Bound">ρ′</a> <a id="plfa_plfa-part2-Substitution-10310" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10311" href="../Substitution/#plfa_plfa-part2-Substitution-10298" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-10312" class="Symbol">})</a>
          <a id="plfa_plfa-part2-Substitution-10325" class="Comment">------------------------</a>
        <a id="plfa_plfa-part2-Substitution-10358" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10360" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-10367" href="../Substitution/#plfa_plfa-part2-Substitution-10252" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-10369" href="../Substitution/#plfa_plfa-part2-Substitution-10274" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-10371" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-10373" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-10380" href="../Substitution/#plfa_plfa-part2-Substitution-10254" class="Bound">ρ′</a> <a id="plfa_plfa-part2-Substitution-10383" href="../Substitution/#plfa_plfa-part2-Substitution-10274" class="Bound">M</a>
<a id="plfa_plfa-part2-Substitution-10385" href="../Substitution/#plfa_plfa-part2-Substitution-10231" class="Function">cong-rename</a> <a id="plfa_plfa-part2-Substitution-10397" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10398" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-10400" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10402" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-10404" href="../Substitution/#plfa_plfa-part2-Substitution-10404" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-10405" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10407" href="../Substitution/#plfa_plfa-part2-Substitution-10407" class="Bound">rr</a> <a id="plfa_plfa-part2-Substitution-10410" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10412" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-10417" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`_</a> <a id="plfa_plfa-part2-Substitution-10420" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-10421" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1670" class="Function">cong-app</a> <a id="plfa_plfa-part2-Substitution-10430" href="../Substitution/#plfa_plfa-part2-Substitution-10407" class="Bound">rr</a> <a id="plfa_plfa-part2-Substitution-10433" href="../Substitution/#plfa_plfa-part2-Substitution-10404" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-10434" class="Symbol">)</a>
<a id="plfa_plfa-part2-Substitution-10436" href="../Substitution/#plfa_plfa-part2-Substitution-10231" class="Function">cong-rename</a> <a id="plfa_plfa-part2-Substitution-10448" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10449" class="Argument">ρ</a> <a id="plfa_plfa-part2-Substitution-10451" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10453" href="../Substitution/#plfa_plfa-part2-Substitution-10453" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-10454" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10456" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10457" class="Argument">ρ′</a> <a id="plfa_plfa-part2-Substitution-10460" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10462" href="../Substitution/#plfa_plfa-part2-Substitution-10462" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-10464" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10466" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10467" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-10469" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10471" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-10473" href="../Substitution/#plfa_plfa-part2-Substitution-10473" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-10474" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10476" href="../Substitution/#plfa_plfa-part2-Substitution-10476" class="Bound">rr</a> <a id="plfa_plfa-part2-Substitution-10479" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-10484" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-10489" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ_</a> <a id="plfa_plfa-part2-Substitution-10492" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-10493" href="../Substitution/#plfa_plfa-part2-Substitution-10231" class="Function">cong-rename</a> <a id="plfa_plfa-part2-Substitution-10505" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10506" class="Argument">ρ</a> <a id="plfa_plfa-part2-Substitution-10508" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10510" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-10514" href="../Substitution/#plfa_plfa-part2-Substitution-10453" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-10515" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10517" class="Argument">ρ′</a> <a id="plfa_plfa-part2-Substitution-10520" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10522" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-10526" href="../Substitution/#plfa_plfa-part2-Substitution-10462" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-10528" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10530" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-10532" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10534" href="../Substitution/#plfa_plfa-part2-Substitution-10473" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-10535" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10537" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-10538" href="../Substitution/#plfa_plfa-part2-Substitution-9895" class="Function">cong-ext</a> <a id="plfa_plfa-part2-Substitution-10547" href="../Substitution/#plfa_plfa-part2-Substitution-10476" class="Bound">rr</a><a id="plfa_plfa-part2-Substitution-10549" class="Symbol">))</a>
<a id="plfa_plfa-part2-Substitution-10552" href="../Substitution/#plfa_plfa-part2-Substitution-10231" class="Function">cong-rename</a> <a id="plfa_plfa-part2-Substitution-10564" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10565" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-10567" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10569" href="../Substitution/#plfa_plfa-part2-Substitution-10569" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-10571" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Substitution-10573" href="../Substitution/#plfa_plfa-part2-Substitution-10573" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-10574" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10576" href="../Substitution/#plfa_plfa-part2-Substitution-10576" class="Bound">rr</a> <a id="plfa_plfa-part2-Substitution-10579" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-10584" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1576" class="Function">cong₂</a> <a id="plfa_plfa-part2-Substitution-10590" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">_·_</a> <a id="plfa_plfa-part2-Substitution-10594" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-10595" href="../Substitution/#plfa_plfa-part2-Substitution-10231" class="Function">cong-rename</a> <a id="plfa_plfa-part2-Substitution-10607" href="../Substitution/#plfa_plfa-part2-Substitution-10576" class="Bound">rr</a><a id="plfa_plfa-part2-Substitution-10609" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-10611" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-10612" href="../Substitution/#plfa_plfa-part2-Substitution-10231" class="Function">cong-rename</a> <a id="plfa_plfa-part2-Substitution-10624" href="../Substitution/#plfa_plfa-part2-Substitution-10576" class="Bound">rr</a><a id="plfa_plfa-part2-Substitution-10626" class="Symbol">)</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-cong-exts"></a><a id="plfa_plfa-part2-Substitution-10641" href="../Substitution/#plfa_plfa-part2-Substitution-10641" class="Function">cong-exts</a> <a id="plfa_plfa-part2-Substitution-10651" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-10653" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-10655" href="../Substitution/#plfa_plfa-part2-Substitution-10655" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-10657" href="../Substitution/#plfa_plfa-part2-Substitution-10657" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-10658" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10660" href="../Substitution/#plfa_plfa-part2-Substitution-10660" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-10662" href="../Substitution/#plfa_plfa-part2-Substitution-10662" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-10665" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-10667" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-10673" href="../Substitution/#plfa_plfa-part2-Substitution-10655" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-10675" href="../Substitution/#plfa_plfa-part2-Substitution-10657" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-10676" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10678" href="../Substitution/#plfa_plfa-part2-Substitution-10678" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-10679" class="Symbol">}</a>
   <a id="plfa_plfa-part2-Substitution-10684" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10686" class="Symbol">(∀{</a><a id="plfa_plfa-part2-Substitution-10689" href="../Substitution/#plfa_plfa-part2-Substitution-10689" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-10690" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10692" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10694" href="../Substitution/#plfa_plfa-part2-Substitution-10660" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-10696" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-10698" href="../Substitution/#plfa_plfa-part2-Substitution-10662" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-10701" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10702" href="../Substitution/#plfa_plfa-part2-Substitution-10689" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-10703" class="Symbol">})</a>
     <a id="plfa_plfa-part2-Substitution-10711" class="Comment">-----------------------------------</a>
   <a id="plfa_plfa-part2-Substitution-10750" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10752" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-10754" href="../Substitution/#plfa_plfa-part2-Substitution-10754" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-10755" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10757" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10759" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-10764" href="../Substitution/#plfa_plfa-part2-Substitution-10660" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-10766" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10767" class="Argument">B</a> <a id="plfa_plfa-part2-Substitution-10769" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10771" href="../Substitution/#plfa_plfa-part2-Substitution-10678" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-10772" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10774" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-10776" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-10781" href="../Substitution/#plfa_plfa-part2-Substitution-10662" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-10784" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10785" href="../Substitution/#plfa_plfa-part2-Substitution-10754" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-10786" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-10788" href="../Substitution/#plfa_plfa-part2-Substitution-10641" class="Function">cong-exts</a><a id="plfa_plfa-part2-Substitution-10797" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10798" href="../Substitution/#plfa_plfa-part2-Substitution-10798" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-10799" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10801" href="../Substitution/#plfa_plfa-part2-Substitution-10801" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-10802" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10804" href="../Substitution/#plfa_plfa-part2-Substitution-10804" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-10805" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10807" href="../Substitution/#plfa_plfa-part2-Substitution-10807" class="Bound">σ′</a><a id="plfa_plfa-part2-Substitution-10809" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-10811" href="../Substitution/#plfa_plfa-part2-Substitution-10811" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-10812" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10814" href="../Substitution/#plfa_plfa-part2-Substitution-10814" class="Bound">ss</a> <a id="plfa_plfa-part2-Substitution-10817" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10818" href="../Substitution/#plfa_plfa-part2-Substitution-10818" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-10819" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10821" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10823" href="../Substitution/#plfa_plfa-part2-Substitution-1864" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-10838" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-10840" href="../Substitution/#plfa_plfa-part2-Substitution-10840" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-10842" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10844" href="../Substitution/#plfa_plfa-part2-Substitution-10866" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-10850" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10851" href="../Substitution/#plfa_plfa-part2-Substitution-10840" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-10852" class="Symbol">}</a>
   <a id="plfa_plfa-part2-Substitution-10857" class="Keyword">where</a>
   <a id="plfa_plfa-part2-Substitution-10866" href="../Substitution/#plfa_plfa-part2-Substitution-10866" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-10872" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-10874" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-10876" href="../Substitution/#plfa_plfa-part2-Substitution-10876" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-10877" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10879" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-10881" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-10886" href="../Substitution/#plfa_plfa-part2-Substitution-10804" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-10888" href="../Substitution/#plfa_plfa-part2-Substitution-10876" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-10890" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-10892" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-10897" href="../Substitution/#plfa_plfa-part2-Substitution-10807" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-10900" href="../Substitution/#plfa_plfa-part2-Substitution-10876" class="Bound">x</a>
   <a id="plfa_plfa-part2-Substitution-10905" href="../Substitution/#plfa_plfa-part2-Substitution-10866" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-10911" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10912" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-10913" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10915" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10917" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
   <a id="plfa_plfa-part2-Substitution-10925" href="../Substitution/#plfa_plfa-part2-Substitution-10866" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-10931" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10932" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-10934" href="../Substitution/#plfa_plfa-part2-Substitution-10934" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-10935" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-10937" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-10939" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-10944" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-10945" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-10952" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part2-Substitution-10954" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-10956" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-10957" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1670" class="Function">cong-app</a> <a id="plfa_plfa-part2-Substitution-10966" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-10967" href="../Substitution/#plfa_plfa-part2-Substitution-10814" class="Bound">ss</a> <a id="plfa_plfa-part2-Substitution-10970" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-10971" href="../Substitution/#plfa_plfa-part2-Substitution-10818" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-10972" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-10975" href="../Substitution/#plfa_plfa-part2-Substitution-10934" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-10976" class="Symbol">)</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-cong-sub"></a><a id="plfa_plfa-part2-Substitution-10991" href="../Substitution/#plfa_plfa-part2-Substitution-10991" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-11000" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-11002" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-11004" href="../Substitution/#plfa_plfa-part2-Substitution-11004" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-11006" href="../Substitution/#plfa_plfa-part2-Substitution-11006" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-11007" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11009" href="../Substitution/#plfa_plfa-part2-Substitution-11009" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-11011" href="../Substitution/#plfa_plfa-part2-Substitution-11011" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-11014" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-11016" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-11022" href="../Substitution/#plfa_plfa-part2-Substitution-11004" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-11024" href="../Substitution/#plfa_plfa-part2-Substitution-11006" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-11025" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11027" href="../Substitution/#plfa_plfa-part2-Substitution-11027" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11028" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11030" href="../Substitution/#plfa_plfa-part2-Substitution-11030" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-11032" href="../Substitution/#plfa_plfa-part2-Substitution-11032" class="Bound">M′</a> <a id="plfa_plfa-part2-Substitution-11035" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-11037" href="../Substitution/#plfa_plfa-part2-Substitution-11004" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-11039" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-11041" href="../Substitution/#plfa_plfa-part2-Substitution-11027" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11042" class="Symbol">}</a>
            <a id="plfa_plfa-part2-Substitution-11056" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11058" class="Symbol">(∀{</a><a id="plfa_plfa-part2-Substitution-11061" href="../Substitution/#plfa_plfa-part2-Substitution-11061" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11062" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11064" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11066" href="../Substitution/#plfa_plfa-part2-Substitution-11009" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-11068" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-11070" href="../Substitution/#plfa_plfa-part2-Substitution-11011" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-11073" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11074" href="../Substitution/#plfa_plfa-part2-Substitution-11061" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11075" class="Symbol">})</a>  <a id="plfa_plfa-part2-Substitution-11079" class="Symbol">→</a>  <a id="plfa_plfa-part2-Substitution-11082" href="../Substitution/#plfa_plfa-part2-Substitution-11030" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-11084" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-11086" href="../Substitution/#plfa_plfa-part2-Substitution-11032" class="Bound">M′</a>
              <a id="plfa_plfa-part2-Substitution-11103" class="Comment">------------------------------</a>
            <a id="plfa_plfa-part2-Substitution-11146" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11148" href="../Untyped/#plfa_plfa-part2-Untyped-6759" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-11154" href="../Substitution/#plfa_plfa-part2-Substitution-11009" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-11156" href="../Substitution/#plfa_plfa-part2-Substitution-11030" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-11158" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-11160" href="../Untyped/#plfa_plfa-part2-Untyped-6759" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-11166" href="../Substitution/#plfa_plfa-part2-Substitution-11011" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-11169" href="../Substitution/#plfa_plfa-part2-Substitution-11032" class="Bound">M′</a>
<a id="plfa_plfa-part2-Substitution-11172" href="../Substitution/#plfa_plfa-part2-Substitution-10991" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-11181" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11182" href="../Substitution/#plfa_plfa-part2-Substitution-11182" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-11183" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11185" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11186" href="../Substitution/#plfa_plfa-part2-Substitution-11186" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-11187" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11189" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11190" href="../Substitution/#plfa_plfa-part2-Substitution-11190" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-11191" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11193" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11194" href="../Substitution/#plfa_plfa-part2-Substitution-11194" class="Bound">σ′</a><a id="plfa_plfa-part2-Substitution-11196" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11198" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11199" href="../Substitution/#plfa_plfa-part2-Substitution-11199" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11200" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11202" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11203" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-11205" href="../Substitution/#plfa_plfa-part2-Substitution-11205" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-11206" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11208" href="../Substitution/#plfa_plfa-part2-Substitution-11208" class="Bound">ss</a> <a id="plfa_plfa-part2-Substitution-11211" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-11216" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-11218" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1670" class="Function">cong-app</a> <a id="plfa_plfa-part2-Substitution-11227" href="../Substitution/#plfa_plfa-part2-Substitution-11208" class="Bound">ss</a> <a id="plfa_plfa-part2-Substitution-11230" href="../Substitution/#plfa_plfa-part2-Substitution-11205" class="Bound">x</a>
<a id="plfa_plfa-part2-Substitution-11232" href="../Substitution/#plfa_plfa-part2-Substitution-10991" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-11241" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11242" href="../Substitution/#plfa_plfa-part2-Substitution-11242" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-11243" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11245" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11246" href="../Substitution/#plfa_plfa-part2-Substitution-11246" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-11247" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11249" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11250" href="../Substitution/#plfa_plfa-part2-Substitution-11250" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-11251" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11253" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11254" href="../Substitution/#plfa_plfa-part2-Substitution-11254" class="Bound">σ′</a><a id="plfa_plfa-part2-Substitution-11256" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11258" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11259" href="../Substitution/#plfa_plfa-part2-Substitution-11259" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11260" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11262" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11263" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-11265" href="../Substitution/#plfa_plfa-part2-Substitution-11265" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-11266" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11268" href="../Substitution/#plfa_plfa-part2-Substitution-11268" class="Bound">ss</a> <a id="plfa_plfa-part2-Substitution-11271" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-11276" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-11281" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-11286" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ_</a> <a id="plfa_plfa-part2-Substitution-11289" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-11290" href="../Substitution/#plfa_plfa-part2-Substitution-10991" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-11299" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11300" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-11302" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-11304" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-11309" href="../Substitution/#plfa_plfa-part2-Substitution-11250" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-11310" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11312" class="Argument">σ′</a> <a id="plfa_plfa-part2-Substitution-11315" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-11317" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-11322" href="../Substitution/#plfa_plfa-part2-Substitution-11254" class="Bound">σ′</a><a id="plfa_plfa-part2-Substitution-11324" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11326" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11327" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-11329" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-11331" href="../Substitution/#plfa_plfa-part2-Substitution-11265" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-11332" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11334" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-11335" href="../Substitution/#plfa_plfa-part2-Substitution-10641" class="Function">cong-exts</a> <a id="plfa_plfa-part2-Substitution-11345" href="../Substitution/#plfa_plfa-part2-Substitution-11268" class="Bound">ss</a><a id="plfa_plfa-part2-Substitution-11347" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-11349" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Substitution-11353" class="Symbol">)</a>
<a id="plfa_plfa-part2-Substitution-11355" href="../Substitution/#plfa_plfa-part2-Substitution-10991" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-11364" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11365" href="../Substitution/#plfa_plfa-part2-Substitution-11365" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-11366" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11368" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11369" href="../Substitution/#plfa_plfa-part2-Substitution-11369" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-11370" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11372" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11373" href="../Substitution/#plfa_plfa-part2-Substitution-11373" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-11374" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11376" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11377" href="../Substitution/#plfa_plfa-part2-Substitution-11377" class="Bound">σ′</a><a id="plfa_plfa-part2-Substitution-11379" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11381" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11382" href="../Substitution/#plfa_plfa-part2-Substitution-11382" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11383" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11385" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11386" href="../Substitution/#plfa_plfa-part2-Substitution-11386" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-11388" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Substitution-11390" href="../Substitution/#plfa_plfa-part2-Substitution-11390" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-11391" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11393" href="../Substitution/#plfa_plfa-part2-Substitution-11393" class="Bound">ss</a> <a id="plfa_plfa-part2-Substitution-11396" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-11401" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-11406" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1576" class="Function">cong₂</a> <a id="plfa_plfa-part2-Substitution-11412" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">_·_</a> <a id="plfa_plfa-part2-Substitution-11416" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-11417" href="../Substitution/#plfa_plfa-part2-Substitution-10991" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-11426" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11427" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-11429" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-11431" href="../Substitution/#plfa_plfa-part2-Substitution-11386" class="Bound">L</a><a id="plfa_plfa-part2-Substitution-11432" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11434" href="../Substitution/#plfa_plfa-part2-Substitution-11393" class="Bound">ss</a> <a id="plfa_plfa-part2-Substitution-11437" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Substitution-11441" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-11443" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-11444" href="../Substitution/#plfa_plfa-part2-Substitution-10991" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-11453" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11454" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-11456" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-11458" href="../Substitution/#plfa_plfa-part2-Substitution-11390" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-11459" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11461" href="../Substitution/#plfa_plfa-part2-Substitution-11393" class="Bound">ss</a> <a id="plfa_plfa-part2-Substitution-11464" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Substitution-11468" class="Symbol">)</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-cong-sub-zero"></a><a id="plfa_plfa-part2-Substitution-11483" href="../Substitution/#plfa_plfa-part2-Substitution-11483" class="Function">cong-sub-zero</a> <a id="plfa_plfa-part2-Substitution-11497" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-11499" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-11501" href="../Substitution/#plfa_plfa-part2-Substitution-11501" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-11502" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11504" href="../Substitution/#plfa_plfa-part2-Substitution-11504" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-11506" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-11508" href="../Untyped/#plfa_plfa-part2-Untyped-2458" class="Datatype">Type</a><a id="plfa_plfa-part2-Substitution-11512" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11514" href="../Substitution/#plfa_plfa-part2-Substitution-11514" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-11516" href="../Substitution/#plfa_plfa-part2-Substitution-11516" class="Bound">M′</a> <a id="plfa_plfa-part2-Substitution-11519" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-11521" href="../Substitution/#plfa_plfa-part2-Substitution-11501" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-11523" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-11525" href="../Substitution/#plfa_plfa-part2-Substitution-11504" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-11526" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-11530" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11532" href="../Substitution/#plfa_plfa-part2-Substitution-11514" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-11534" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-11536" href="../Substitution/#plfa_plfa-part2-Substitution-11516" class="Bound">M′</a>
    <a id="plfa_plfa-part2-Substitution-11543" class="Comment">-----------------------------------------</a>
  <a id="plfa_plfa-part2-Substitution-11587" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11589" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-11591" href="../Substitution/#plfa_plfa-part2-Substitution-11591" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11592" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11594" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11596" href="../Untyped/#plfa_plfa-part2-Untyped-7175" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Substitution-11607" href="../Substitution/#plfa_plfa-part2-Substitution-11514" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-11609" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-11611" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-11612" href="../Untyped/#plfa_plfa-part2-Untyped-7175" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Substitution-11623" href="../Substitution/#plfa_plfa-part2-Substitution-11516" class="Bound">M′</a><a id="plfa_plfa-part2-Substitution-11625" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-11627" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11628" href="../Substitution/#plfa_plfa-part2-Substitution-11591" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11629" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-11631" href="../Substitution/#plfa_plfa-part2-Substitution-11483" class="Function">cong-sub-zero</a> <a id="plfa_plfa-part2-Substitution-11645" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11646" href="../Substitution/#plfa_plfa-part2-Substitution-11646" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-11647" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11649" href="../Substitution/#plfa_plfa-part2-Substitution-11649" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-11650" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11652" href="../Substitution/#plfa_plfa-part2-Substitution-11652" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-11653" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11655" href="../Substitution/#plfa_plfa-part2-Substitution-11655" class="Bound">M′</a><a id="plfa_plfa-part2-Substitution-11657" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11659" href="../Substitution/#plfa_plfa-part2-Substitution-11659" class="Bound">mm&#39;</a> <a id="plfa_plfa-part2-Substitution-11663" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11664" href="../Substitution/#plfa_plfa-part2-Substitution-11664" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11665" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11667" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-11672" href="../Substitution/#plfa_plfa-part2-Substitution-1864" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-11687" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-11689" href="../Substitution/#plfa_plfa-part2-Substitution-11689" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-11691" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11693" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-11698" class="Symbol">(λ</a> <a id="plfa_plfa-part2-Substitution-11701" href="../Substitution/#plfa_plfa-part2-Substitution-11701" class="Bound">z</a> <a id="plfa_plfa-part2-Substitution-11703" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11705" href="../Untyped/#plfa_plfa-part2-Untyped-7175" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Substitution-11716" href="../Substitution/#plfa_plfa-part2-Substitution-11701" class="Bound">z</a> <a id="plfa_plfa-part2-Substitution-11718" href="../Substitution/#plfa_plfa-part2-Substitution-11689" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-11719" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-11721" href="../Substitution/#plfa_plfa-part2-Substitution-11659" class="Bound">mm&#39;</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-cong-cons"></a><a id="plfa_plfa-part2-Substitution-11738" href="../Substitution/#plfa_plfa-part2-Substitution-11738" class="Function">cong-cons</a> <a id="plfa_plfa-part2-Substitution-11748" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-11750" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-11752" href="../Substitution/#plfa_plfa-part2-Substitution-11752" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-11754" href="../Substitution/#plfa_plfa-part2-Substitution-11754" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-11755" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11757" href="../Substitution/#plfa_plfa-part2-Substitution-11757" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11758" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11760" href="../Substitution/#plfa_plfa-part2-Substitution-11760" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-11762" href="../Substitution/#plfa_plfa-part2-Substitution-11762" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-11764" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-11766" href="../Substitution/#plfa_plfa-part2-Substitution-11754" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-11768" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-11770" href="../Substitution/#plfa_plfa-part2-Substitution-11757" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11771" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11773" href="../Substitution/#plfa_plfa-part2-Substitution-11773" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-11775" href="../Substitution/#plfa_plfa-part2-Substitution-11775" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-11777" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-11779" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-11785" href="../Substitution/#plfa_plfa-part2-Substitution-11752" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-11787" href="../Substitution/#plfa_plfa-part2-Substitution-11754" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-11788" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-11792" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11794" href="../Substitution/#plfa_plfa-part2-Substitution-11760" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-11796" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-11798" href="../Substitution/#plfa_plfa-part2-Substitution-11762" class="Bound">N</a>  <a id="plfa_plfa-part2-Substitution-11801" class="Symbol">→</a>  <a id="plfa_plfa-part2-Substitution-11804" class="Symbol">(∀{</a><a id="plfa_plfa-part2-Substitution-11807" href="../Substitution/#plfa_plfa-part2-Substitution-11807" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11808" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11810" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11812" href="../Substitution/#plfa_plfa-part2-Substitution-11773" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-11814" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11815" href="../Substitution/#plfa_plfa-part2-Substitution-11807" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11816" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11818" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-11820" href="../Substitution/#plfa_plfa-part2-Substitution-11775" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-11822" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11823" href="../Substitution/#plfa_plfa-part2-Substitution-11807" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11824" class="Symbol">})</a>
    <a id="plfa_plfa-part2-Substitution-11831" class="Comment">--------------------------------</a>
  <a id="plfa_plfa-part2-Substitution-11866" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11868" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-11870" href="../Substitution/#plfa_plfa-part2-Substitution-11870" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11871" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11873" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-11875" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-11876" href="../Substitution/#plfa_plfa-part2-Substitution-11760" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-11878" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-11880" href="../Substitution/#plfa_plfa-part2-Substitution-11773" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-11881" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-11883" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11884" href="../Substitution/#plfa_plfa-part2-Substitution-11870" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11885" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11887" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-11889" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-11890" href="../Substitution/#plfa_plfa-part2-Substitution-11762" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-11892" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-11894" href="../Substitution/#plfa_plfa-part2-Substitution-11775" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-11895" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-11897" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11898" href="../Substitution/#plfa_plfa-part2-Substitution-11870" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11899" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-11901" href="../Substitution/#plfa_plfa-part2-Substitution-11738" class="Function">cong-cons</a><a id="plfa_plfa-part2-Substitution-11910" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11911" href="../Substitution/#plfa_plfa-part2-Substitution-11911" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-11912" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11914" href="../Substitution/#plfa_plfa-part2-Substitution-11914" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-11915" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11917" href="../Substitution/#plfa_plfa-part2-Substitution-11917" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-11918" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11920" href="../Substitution/#plfa_plfa-part2-Substitution-11920" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-11921" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11923" href="../Substitution/#plfa_plfa-part2-Substitution-11923" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-11924" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11926" href="../Substitution/#plfa_plfa-part2-Substitution-11926" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-11927" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-11929" href="../Substitution/#plfa_plfa-part2-Substitution-11929" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-11930" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11932" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-11937" href="../Substitution/#plfa_plfa-part2-Substitution-11937" class="Bound">st</a> <a id="plfa_plfa-part2-Substitution-11940" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-11941" href="../Substitution/#plfa_plfa-part2-Substitution-11941" class="Bound">A′</a><a id="plfa_plfa-part2-Substitution-11943" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-11945" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-11947" href="../Substitution/#plfa_plfa-part2-Substitution-1864" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-11962" href="../Substitution/#plfa_plfa-part2-Substitution-11978" class="Function">lemma</a>
  <a id="plfa_plfa-part2-Substitution-11970" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-11978" href="../Substitution/#plfa_plfa-part2-Substitution-11978" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-11984" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-11986" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-11987" href="../Substitution/#plfa_plfa-part2-Substitution-11987" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-11989" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-11991" href="../Substitution/#plfa_plfa-part2-Substitution-11911" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-11993" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-11995" href="../Substitution/#plfa_plfa-part2-Substitution-11917" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-11997" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-11999" href="../Substitution/#plfa_plfa-part2-Substitution-11941" class="Bound">A′</a><a id="plfa_plfa-part2-Substitution-12001" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12003" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-12005" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12006" href="../Substitution/#plfa_plfa-part2-Substitution-11920" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-12008" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-12010" href="../Substitution/#plfa_plfa-part2-Substitution-11926" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-12011" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12013" href="../Substitution/#plfa_plfa-part2-Substitution-11987" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-12015" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-12017" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12018" href="../Substitution/#plfa_plfa-part2-Substitution-11920" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-12020" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-12022" href="../Substitution/#plfa_plfa-part2-Substitution-11929" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-12023" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12025" href="../Substitution/#plfa_plfa-part2-Substitution-11987" class="Bound">x</a>
  <a id="plfa_plfa-part2-Substitution-12029" href="../Substitution/#plfa_plfa-part2-Substitution-11978" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-12035" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-Substitution-12037" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-12039" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
  <a id="plfa_plfa-part2-Substitution-12046" href="../Substitution/#plfa_plfa-part2-Substitution-11978" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-12052" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12053" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-12055" href="../Substitution/#plfa_plfa-part2-Substitution-12055" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-12056" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12058" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-12060" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1670" class="Function">cong-app</a> <a id="plfa_plfa-part2-Substitution-12069" href="../Substitution/#plfa_plfa-part2-Substitution-11937" class="Bound">st</a> <a id="plfa_plfa-part2-Substitution-12072" href="../Substitution/#plfa_plfa-part2-Substitution-12055" class="Bound">x</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Substitution-cong-seq"></a><a id="plfa_plfa-part2-Substitution-12087" href="../Substitution/#plfa_plfa-part2-Substitution-12087" class="Function">cong-seq</a> <a id="plfa_plfa-part2-Substitution-12096" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-12098" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-12100" href="../Substitution/#plfa_plfa-part2-Substitution-12100" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-12102" href="../Substitution/#plfa_plfa-part2-Substitution-12102" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-12104" href="../Substitution/#plfa_plfa-part2-Substitution-12104" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-12105" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-12107" href="../Substitution/#plfa_plfa-part2-Substitution-12107" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-12109" href="../Substitution/#plfa_plfa-part2-Substitution-12109" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-12112" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-12114" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-12120" href="../Substitution/#plfa_plfa-part2-Substitution-12100" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-12122" href="../Substitution/#plfa_plfa-part2-Substitution-12102" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-12123" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-12125" href="../Substitution/#plfa_plfa-part2-Substitution-12125" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-12127" href="../Substitution/#plfa_plfa-part2-Substitution-12127" class="Bound">τ′</a> <a id="plfa_plfa-part2-Substitution-12130" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-12132" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-12138" href="../Substitution/#plfa_plfa-part2-Substitution-12102" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-12140" href="../Substitution/#plfa_plfa-part2-Substitution-12104" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-12141" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-12145" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-12147" class="Symbol">(∀{</a><a id="plfa_plfa-part2-Substitution-12150" href="../Substitution/#plfa_plfa-part2-Substitution-12150" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-12151" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-12153" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-12155" href="../Substitution/#plfa_plfa-part2-Substitution-12107" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-12157" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-12158" href="../Substitution/#plfa_plfa-part2-Substitution-12150" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-12159" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-12161" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-12163" href="../Substitution/#plfa_plfa-part2-Substitution-12109" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-12166" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-12167" href="../Substitution/#plfa_plfa-part2-Substitution-12150" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-12168" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-12171" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-12173" class="Symbol">(∀{</a><a id="plfa_plfa-part2-Substitution-12176" href="../Substitution/#plfa_plfa-part2-Substitution-12176" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-12177" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-12179" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-12181" href="../Substitution/#plfa_plfa-part2-Substitution-12125" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-12183" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-12184" href="../Substitution/#plfa_plfa-part2-Substitution-12176" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-12185" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-12187" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-12189" href="../Substitution/#plfa_plfa-part2-Substitution-12127" class="Bound">τ′</a> <a id="plfa_plfa-part2-Substitution-12192" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-12193" href="../Substitution/#plfa_plfa-part2-Substitution-12176" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-12194" class="Symbol">})</a>
  <a id="plfa_plfa-part2-Substitution-12199" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-12201" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-12203" href="../Substitution/#plfa_plfa-part2-Substitution-12203" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-12204" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-12206" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-12208" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12209" href="../Substitution/#plfa_plfa-part2-Substitution-12107" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-12211" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-12213" href="../Substitution/#plfa_plfa-part2-Substitution-12125" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-12214" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12216" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-12217" href="../Substitution/#plfa_plfa-part2-Substitution-12203" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-12218" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-12220" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-12222" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12223" href="../Substitution/#plfa_plfa-part2-Substitution-12109" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-12226" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-12228" href="../Substitution/#plfa_plfa-part2-Substitution-12127" class="Bound">τ′</a><a id="plfa_plfa-part2-Substitution-12230" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12232" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-12233" href="../Substitution/#plfa_plfa-part2-Substitution-12203" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-12234" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-12236" href="../Substitution/#plfa_plfa-part2-Substitution-12087" class="Function">cong-seq</a> <a id="plfa_plfa-part2-Substitution-12245" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-12246" href="../Substitution/#plfa_plfa-part2-Substitution-12246" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-12247" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-12249" href="../Substitution/#plfa_plfa-part2-Substitution-12249" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-12250" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-12252" href="../Substitution/#plfa_plfa-part2-Substitution-12252" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-12253" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-12255" href="../Substitution/#plfa_plfa-part2-Substitution-12255" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-12256" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-12258" href="../Substitution/#plfa_plfa-part2-Substitution-12258" class="Bound">σ′</a><a id="plfa_plfa-part2-Substitution-12260" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-12262" href="../Substitution/#plfa_plfa-part2-Substitution-12262" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-12263" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-12265" href="../Substitution/#plfa_plfa-part2-Substitution-12265" class="Bound">τ′</a><a id="plfa_plfa-part2-Substitution-12267" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-12269" href="../Substitution/#plfa_plfa-part2-Substitution-12269" class="Bound">ss&#39;</a> <a id="plfa_plfa-part2-Substitution-12273" href="../Substitution/#plfa_plfa-part2-Substitution-12273" class="Bound">tt&#39;</a> <a id="plfa_plfa-part2-Substitution-12277" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-12278" href="../Substitution/#plfa_plfa-part2-Substitution-12278" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-12279" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-12281" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-12283" href="../Substitution/#plfa_plfa-part2-Substitution-1864" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-12298" href="../Substitution/#plfa_plfa-part2-Substitution-12314" class="Function">lemma</a>
  <a id="plfa_plfa-part2-Substitution-12306" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-12314" href="../Substitution/#plfa_plfa-part2-Substitution-12314" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-12320" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-12322" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12323" href="../Substitution/#plfa_plfa-part2-Substitution-12323" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-12325" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-12327" href="../Substitution/#plfa_plfa-part2-Substitution-12246" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-12329" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-12331" href="../Substitution/#plfa_plfa-part2-Substitution-12278" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-12332" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12334" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-12336" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12337" href="../Substitution/#plfa_plfa-part2-Substitution-12255" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-12339" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-12341" href="../Substitution/#plfa_plfa-part2-Substitution-12262" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-12342" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12344" href="../Substitution/#plfa_plfa-part2-Substitution-12323" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-12346" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-12348" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12349" href="../Substitution/#plfa_plfa-part2-Substitution-12258" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-12352" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-12354" href="../Substitution/#plfa_plfa-part2-Substitution-12265" class="Bound">τ′</a><a id="plfa_plfa-part2-Substitution-12356" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12358" href="../Substitution/#plfa_plfa-part2-Substitution-12323" class="Bound">x</a>
  <a id="plfa_plfa-part2-Substitution-12362" href="../Substitution/#plfa_plfa-part2-Substitution-12314" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-12368" href="../Substitution/#plfa_plfa-part2-Substitution-12368" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-12370" class="Symbol">=</a>
     <a id="plfa_plfa-part2-Substitution-12377" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
       <a id="plfa_plfa-part2-Substitution-12390" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12391" href="../Substitution/#plfa_plfa-part2-Substitution-12255" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-12393" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-12395" href="../Substitution/#plfa_plfa-part2-Substitution-12262" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-12396" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12398" href="../Substitution/#plfa_plfa-part2-Substitution-12368" class="Bound">x</a>
     <a id="plfa_plfa-part2-Substitution-12405" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11079" class="Function">≡⟨⟩</a>
       <a id="plfa_plfa-part2-Substitution-12416" href="../Untyped/#plfa_plfa-part2-Untyped-6759" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-12422" href="../Substitution/#plfa_plfa-part2-Substitution-12262" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-12424" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12425" href="../Substitution/#plfa_plfa-part2-Substitution-12255" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-12427" href="../Substitution/#plfa_plfa-part2-Substitution-12368" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-12428" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-12435" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-12438" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-12443" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12444" href="../Untyped/#plfa_plfa-part2-Untyped-6759" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-12450" href="../Substitution/#plfa_plfa-part2-Substitution-12262" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-12451" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12453" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12454" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1670" class="Function">cong-app</a> <a id="plfa_plfa-part2-Substitution-12463" href="../Substitution/#plfa_plfa-part2-Substitution-12269" class="Bound">ss&#39;</a> <a id="plfa_plfa-part2-Substitution-12467" href="../Substitution/#plfa_plfa-part2-Substitution-12368" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-12468" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12470" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-12479" href="../Untyped/#plfa_plfa-part2-Untyped-6759" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-12485" href="../Substitution/#plfa_plfa-part2-Substitution-12262" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-12487" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12488" href="../Substitution/#plfa_plfa-part2-Substitution-12258" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-12491" href="../Substitution/#plfa_plfa-part2-Substitution-12368" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-12492" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-12499" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-12502" href="../Substitution/#plfa_plfa-part2-Substitution-10991" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-12510" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-12511" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-12513" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-12515" href="../Substitution/#plfa_plfa-part2-Substitution-12258" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-12518" href="../Substitution/#plfa_plfa-part2-Substitution-12368" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-12519" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-12521" href="../Substitution/#plfa_plfa-part2-Substitution-12273" class="Bound">tt&#39;</a> <a id="plfa_plfa-part2-Substitution-12525" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-12530" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-12539" href="../Untyped/#plfa_plfa-part2-Untyped-6759" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-12545" href="../Substitution/#plfa_plfa-part2-Substitution-12265" class="Bound">τ′</a> <a id="plfa_plfa-part2-Substitution-12548" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12549" href="../Substitution/#plfa_plfa-part2-Substitution-12258" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-12552" href="../Substitution/#plfa_plfa-part2-Substitution-12368" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-12553" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-12560" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11079" class="Function">≡⟨⟩</a>
       <a id="plfa_plfa-part2-Substitution-12571" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-12572" href="../Substitution/#plfa_plfa-part2-Substitution-12258" class="Bound">σ′</a> <a id="plfa_plfa-part2-Substitution-12575" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-12577" href="../Substitution/#plfa_plfa-part2-Substitution-12265" class="Bound">τ′</a><a id="plfa_plfa-part2-Substitution-12579" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-12581" href="../Substitution/#plfa_plfa-part2-Substitution-12368" class="Bound">x</a>
     <a id="plfa_plfa-part2-Substitution-12588" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
</pre><h2 id="relating-rename-exts-ext-and-subst-zero-to-the-σ-algebra">Relating <code>rename</code>, <code>exts</code>, <code>ext</code>, and <code>subst-zero</code> to the σ algebra</h2><p>In this section we establish equations that relate <code>subst</code> and its helper functions (<code>rename</code>, <code>exts</code>, <code>ext</code>, and <code>subst-zero</code>) to terms in the σ algebra.</p><p>The first equation we prove is</p><pre><code>rename ρ M ≡ ⟪ ren ρ ⟫ M              (rename-subst-ren)</code></pre><p>Because <code>subst</code> uses the <code>exts</code> function, we need the following lemma which says that <code>exts</code> and <code>ext</code> do the same thing except that <code>ext</code> works on renamings and <code>exts</code> works on substitutions.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-ren-ext"></a><a id="plfa_plfa-part2-Substitution-13120" href="../Substitution/#plfa_plfa-part2-Substitution-13120" class="Function">ren-ext</a> <a id="plfa_plfa-part2-Substitution-13128" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-13130" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-13132" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13133" href="../Substitution/#plfa_plfa-part2-Substitution-13133" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-13135" href="../Substitution/#plfa_plfa-part2-Substitution-13135" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-13136" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-13138" href="../Substitution/#plfa_plfa-part2-Substitution-13138" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-13140" href="../Substitution/#plfa_plfa-part2-Substitution-13140" class="Bound">C</a> <a id="plfa_plfa-part2-Substitution-13142" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-13144" href="../Untyped/#plfa_plfa-part2-Untyped-2458" class="Datatype">Type</a><a id="plfa_plfa-part2-Substitution-13148" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-13150" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13151" href="../Substitution/#plfa_plfa-part2-Substitution-13151" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-13153" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-13155" href="../Substitution/#plfa_plfa-part2-Substitution-2133" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-13162" href="../Substitution/#plfa_plfa-part2-Substitution-13133" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-13164" href="../Substitution/#plfa_plfa-part2-Substitution-13135" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-13165" class="Symbol">}</a>
        <a id="plfa_plfa-part2-Substitution-13175" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-13177" href="../Substitution/#plfa_plfa-part2-Substitution-6502" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-13181" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13182" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-13186" href="../Substitution/#plfa_plfa-part2-Substitution-13151" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-13188" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13189" class="Argument">B</a> <a id="plfa_plfa-part2-Substitution-13191" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13193" href="../Substitution/#plfa_plfa-part2-Substitution-13138" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-13194" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-13197" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-13199" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-13204" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13205" href="../Substitution/#plfa_plfa-part2-Substitution-6502" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-13209" href="../Substitution/#plfa_plfa-part2-Substitution-13151" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-13210" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-13212" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13213" href="../Substitution/#plfa_plfa-part2-Substitution-13140" class="Bound">C</a><a id="plfa_plfa-part2-Substitution-13214" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-13216" href="../Substitution/#plfa_plfa-part2-Substitution-13120" class="Function">ren-ext</a> <a id="plfa_plfa-part2-Substitution-13224" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13225" href="../Substitution/#plfa_plfa-part2-Substitution-13225" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-13226" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-13228" href="../Substitution/#plfa_plfa-part2-Substitution-13228" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-13229" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-13231" href="../Substitution/#plfa_plfa-part2-Substitution-13231" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-13232" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-13234" href="../Substitution/#plfa_plfa-part2-Substitution-13234" class="Bound">C</a><a id="plfa_plfa-part2-Substitution-13235" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-13237" href="../Substitution/#plfa_plfa-part2-Substitution-13237" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-13238" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-13240" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13242" href="../Substitution/#plfa_plfa-part2-Substitution-1864" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-13257" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-13259" href="../Substitution/#plfa_plfa-part2-Substitution-13259" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-13261" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-13263" href="../Substitution/#plfa_plfa-part2-Substitution-13287" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-13269" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13270" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-13272" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13274" href="../Substitution/#plfa_plfa-part2-Substitution-13259" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-13275" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-13279" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-13287" href="../Substitution/#plfa_plfa-part2-Substitution-13287" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-13293" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-13295" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-13297" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13298" href="../Substitution/#plfa_plfa-part2-Substitution-13298" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-13300" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-13302" href="../Substitution/#plfa_plfa-part2-Substitution-13225" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-13304" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-13306" href="../Substitution/#plfa_plfa-part2-Substitution-13231" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-13308" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-13310" href="../Substitution/#plfa_plfa-part2-Substitution-13234" class="Bound">C</a><a id="plfa_plfa-part2-Substitution-13311" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-13313" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-13315" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13316" href="../Substitution/#plfa_plfa-part2-Substitution-6502" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-13320" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13321" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-13325" href="../Substitution/#plfa_plfa-part2-Substitution-13237" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-13326" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-13329" href="../Substitution/#plfa_plfa-part2-Substitution-13298" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-13331" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-13333" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-13338" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13339" href="../Substitution/#plfa_plfa-part2-Substitution-6502" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-13343" href="../Substitution/#plfa_plfa-part2-Substitution-13237" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-13344" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-13346" href="../Substitution/#plfa_plfa-part2-Substitution-13298" class="Bound">x</a>
  <a id="plfa_plfa-part2-Substitution-13350" href="../Substitution/#plfa_plfa-part2-Substitution-13287" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-13356" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13357" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-13359" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13361" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-13362" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-13364" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13366" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
  <a id="plfa_plfa-part2-Substitution-13373" href="../Substitution/#plfa_plfa-part2-Substitution-13287" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-13379" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13380" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-13382" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13384" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-13386" href="../Substitution/#plfa_plfa-part2-Substitution-13386" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-13387" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-13389" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13391" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
</pre><p>With this lemma in hand, the proof is a straightforward induction on the term <code>M</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-rename-subst-ren"></a><a id="plfa_plfa-part2-Substitution-13493" href="../Substitution/#plfa_plfa-part2-Substitution-13493" class="Function">rename-subst-ren</a> <a id="plfa_plfa-part2-Substitution-13510" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-13512" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-13514" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13515" href="../Substitution/#plfa_plfa-part2-Substitution-13515" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-13517" href="../Substitution/#plfa_plfa-part2-Substitution-13517" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-13518" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-13520" href="../Substitution/#plfa_plfa-part2-Substitution-13520" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-13521" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-13523" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13524" href="../Substitution/#plfa_plfa-part2-Substitution-13524" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-13526" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-13528" href="../Substitution/#plfa_plfa-part2-Substitution-2133" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-13535" href="../Substitution/#plfa_plfa-part2-Substitution-13515" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-13537" href="../Substitution/#plfa_plfa-part2-Substitution-13517" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-13538" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-13540" href="../Substitution/#plfa_plfa-part2-Substitution-13540" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-13542" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-13544" href="../Substitution/#plfa_plfa-part2-Substitution-13515" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-13546" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-13548" href="../Substitution/#plfa_plfa-part2-Substitution-13520" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-13549" class="Symbol">}</a>
                 <a id="plfa_plfa-part2-Substitution-13568" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-13570" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-13577" href="../Substitution/#plfa_plfa-part2-Substitution-13524" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-13579" href="../Substitution/#plfa_plfa-part2-Substitution-13540" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-13581" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-13583" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-13585" href="../Substitution/#plfa_plfa-part2-Substitution-6502" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-13589" href="../Substitution/#plfa_plfa-part2-Substitution-13524" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-13591" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-13593" href="../Substitution/#plfa_plfa-part2-Substitution-13540" class="Bound">M</a>
<a id="plfa_plfa-part2-Substitution-13595" href="../Substitution/#plfa_plfa-part2-Substitution-13493" class="Function">rename-subst-ren</a> <a id="plfa_plfa-part2-Substitution-13612" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13613" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-13615" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13617" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-13619" href="../Substitution/#plfa_plfa-part2-Substitution-13619" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-13620" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-13622" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13624" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part2-Substitution-13629" href="../Substitution/#plfa_plfa-part2-Substitution-13493" class="Function">rename-subst-ren</a> <a id="plfa_plfa-part2-Substitution-13646" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13647" class="Argument">ρ</a> <a id="plfa_plfa-part2-Substitution-13649" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13651" href="../Substitution/#plfa_plfa-part2-Substitution-13651" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-13652" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-13654" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-13656" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13658" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-13660" href="../Substitution/#plfa_plfa-part2-Substitution-13660" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-13661" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-13663" class="Symbol">=</a>
  <a id="plfa_plfa-part2-Substitution-13667" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
      <a id="plfa_plfa-part2-Substitution-13679" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-13686" href="../Substitution/#plfa_plfa-part2-Substitution-13651" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-13688" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13689" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-13691" href="../Substitution/#plfa_plfa-part2-Substitution-13660" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-13692" class="Symbol">)</a>
    <a id="plfa_plfa-part2-Substitution-13698" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11079" class="Function">≡⟨⟩</a>
      <a id="plfa_plfa-part2-Substitution-13708" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-13710" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-13717" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13718" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-13722" href="../Substitution/#plfa_plfa-part2-Substitution-13651" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-13723" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-13725" href="../Substitution/#plfa_plfa-part2-Substitution-13660" class="Bound">N</a>
    <a id="plfa_plfa-part2-Substitution-13731" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-13734" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-13739" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ_</a> <a id="plfa_plfa-part2-Substitution-13742" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13743" href="../Substitution/#plfa_plfa-part2-Substitution-13493" class="Function">rename-subst-ren</a> <a id="plfa_plfa-part2-Substitution-13760" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13761" class="Argument">ρ</a> <a id="plfa_plfa-part2-Substitution-13763" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13765" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-13769" href="../Substitution/#plfa_plfa-part2-Substitution-13651" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-13770" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-13772" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-13774" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13776" href="../Substitution/#plfa_plfa-part2-Substitution-13660" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-13777" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-13780" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
      <a id="plfa_plfa-part2-Substitution-13788" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-13790" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-13792" href="../Substitution/#plfa_plfa-part2-Substitution-6502" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-13796" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13797" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-13801" href="../Substitution/#plfa_plfa-part2-Substitution-13651" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-13802" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-13804" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-13806" href="../Substitution/#plfa_plfa-part2-Substitution-13660" class="Bound">N</a>
    <a id="plfa_plfa-part2-Substitution-13812" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-13815" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-13820" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ_</a> <a id="plfa_plfa-part2-Substitution-13823" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13824" href="../Substitution/#plfa_plfa-part2-Substitution-10991" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-13833" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13834" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-13836" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13838" href="../Substitution/#plfa_plfa-part2-Substitution-13660" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-13839" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-13841" href="../Substitution/#plfa_plfa-part2-Substitution-13120" class="Function">ren-ext</a> <a id="plfa_plfa-part2-Substitution-13849" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Substitution-13853" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-13855" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
      <a id="plfa_plfa-part2-Substitution-13863" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-13865" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-13867" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-13872" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13873" href="../Substitution/#plfa_plfa-part2-Substitution-6502" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-13877" href="../Substitution/#plfa_plfa-part2-Substitution-13651" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-13878" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-13880" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a>  <a id="plfa_plfa-part2-Substitution-13883" href="../Substitution/#plfa_plfa-part2-Substitution-13660" class="Bound">N</a>
    <a id="plfa_plfa-part2-Substitution-13889" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11079" class="Function">≡⟨⟩</a>
      <a id="plfa_plfa-part2-Substitution-13899" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-13901" href="../Substitution/#plfa_plfa-part2-Substitution-6502" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-13905" href="../Substitution/#plfa_plfa-part2-Substitution-13651" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-13907" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-13909" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-13910" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-13912" href="../Substitution/#plfa_plfa-part2-Substitution-13660" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-13913" class="Symbol">)</a>
  <a id="plfa_plfa-part2-Substitution-13917" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
<a id="plfa_plfa-part2-Substitution-13919" href="../Substitution/#plfa_plfa-part2-Substitution-13493" class="Function">rename-subst-ren</a> <a id="plfa_plfa-part2-Substitution-13936" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-13937" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-13939" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13941" href="../Substitution/#plfa_plfa-part2-Substitution-13941" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-13943" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Substitution-13945" href="../Substitution/#plfa_plfa-part2-Substitution-13945" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-13946" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-13948" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-13950" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1576" class="Function">cong₂</a> <a id="plfa_plfa-part2-Substitution-13956" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">_·_</a> <a id="plfa_plfa-part2-Substitution-13960" href="../Substitution/#plfa_plfa-part2-Substitution-13493" class="Function">rename-subst-ren</a> <a id="plfa_plfa-part2-Substitution-13977" href="../Substitution/#plfa_plfa-part2-Substitution-13493" class="Function">rename-subst-ren</a>
</pre><p>The substitution <code>ren S_</code> is equivalent to <code>↑</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-ren-shift"></a><a id="plfa_plfa-part2-Substitution-14056" href="../Substitution/#plfa_plfa-part2-Substitution-14056" class="Function">ren-shift</a> <a id="plfa_plfa-part2-Substitution-14066" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-14068" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-14070" href="../Substitution/#plfa_plfa-part2-Substitution-14070" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-14071" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-14073" href="../Substitution/#plfa_plfa-part2-Substitution-14073" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-14074" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-14076" href="../Substitution/#plfa_plfa-part2-Substitution-14076" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-14077" class="Symbol">}</a>
          <a id="plfa_plfa-part2-Substitution-14089" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-14091" href="../Substitution/#plfa_plfa-part2-Substitution-6502" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-14095" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Substitution-14098" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-14100" href="../Substitution/#plfa_plfa-part2-Substitution-3148" class="Function">↑</a> <a id="plfa_plfa-part2-Substitution-14102" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14103" class="Argument">A</a> <a id="plfa_plfa-part2-Substitution-14105" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14107" href="../Substitution/#plfa_plfa-part2-Substitution-14076" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-14108" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14110" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14111" href="../Substitution/#plfa_plfa-part2-Substitution-14073" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-14112" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-14114" href="../Substitution/#plfa_plfa-part2-Substitution-14056" class="Function">ren-shift</a> <a id="plfa_plfa-part2-Substitution-14124" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14125" href="../Substitution/#plfa_plfa-part2-Substitution-14125" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-14126" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-14128" href="../Substitution/#plfa_plfa-part2-Substitution-14128" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-14129" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-14131" href="../Substitution/#plfa_plfa-part2-Substitution-14131" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-14132" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14134" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14136" href="../Substitution/#plfa_plfa-part2-Substitution-1864" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-14151" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-14153" href="../Substitution/#plfa_plfa-part2-Substitution-14153" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-14155" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-14157" href="../Substitution/#plfa_plfa-part2-Substitution-14181" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-14163" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14164" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-14166" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14168" href="../Substitution/#plfa_plfa-part2-Substitution-14153" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-14169" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-14173" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-14181" href="../Substitution/#plfa_plfa-part2-Substitution-14181" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-14187" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-14189" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-14191" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14192" href="../Substitution/#plfa_plfa-part2-Substitution-14192" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-14194" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-14196" href="../Substitution/#plfa_plfa-part2-Substitution-14125" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-14198" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-14200" href="../Substitution/#plfa_plfa-part2-Substitution-14128" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-14201" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14203" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-14205" href="../Substitution/#plfa_plfa-part2-Substitution-6502" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-14209" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-14210" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part2-Substitution-14212" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14213" class="Argument">B</a> <a id="plfa_plfa-part2-Substitution-14215" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14217" href="../Substitution/#plfa_plfa-part2-Substitution-14131" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-14218" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-14221" href="../Substitution/#plfa_plfa-part2-Substitution-14192" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-14223" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-14225" href="../Substitution/#plfa_plfa-part2-Substitution-3148" class="Function">↑</a> <a id="plfa_plfa-part2-Substitution-14227" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14228" class="Argument">A</a> <a id="plfa_plfa-part2-Substitution-14230" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14232" href="../Substitution/#plfa_plfa-part2-Substitution-14131" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-14233" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14235" href="../Substitution/#plfa_plfa-part2-Substitution-14192" class="Bound">x</a>
  <a id="plfa_plfa-part2-Substitution-14239" href="../Substitution/#plfa_plfa-part2-Substitution-14181" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-14245" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14246" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-14248" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14250" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-14251" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14253" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14255" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
  <a id="plfa_plfa-part2-Substitution-14262" href="../Substitution/#plfa_plfa-part2-Substitution-14181" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-14268" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14269" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-14271" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14273" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-14275" href="../Substitution/#plfa_plfa-part2-Substitution-14275" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-14276" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14278" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14280" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
</pre><p>The substitution <code>rename S_ M</code> is equivalent to shifting: <code>⟪ ↑ ⟫ M</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-rename-shift"></a><a id="plfa_plfa-part2-Substitution-14368" href="../Substitution/#plfa_plfa-part2-Substitution-14368" class="Function">rename-shift</a> <a id="plfa_plfa-part2-Substitution-14381" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-14383" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-14385" href="../Substitution/#plfa_plfa-part2-Substitution-14385" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-14386" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14388" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14389" href="../Substitution/#plfa_plfa-part2-Substitution-14389" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-14390" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14392" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14393" href="../Substitution/#plfa_plfa-part2-Substitution-14393" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-14394" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14396" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14397" href="../Substitution/#plfa_plfa-part2-Substitution-14397" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-14399" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-14401" href="../Substitution/#plfa_plfa-part2-Substitution-14385" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-14403" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-14405" href="../Substitution/#plfa_plfa-part2-Substitution-14389" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-14406" class="Symbol">}</a>
             <a id="plfa_plfa-part2-Substitution-14421" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-14423" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-14430" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-14431" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part2-Substitution-14433" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14434" class="Argument">B</a> <a id="plfa_plfa-part2-Substitution-14436" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14438" href="../Substitution/#plfa_plfa-part2-Substitution-14393" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-14439" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-14442" href="../Substitution/#plfa_plfa-part2-Substitution-14397" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-14444" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-14446" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-14448" href="../Substitution/#plfa_plfa-part2-Substitution-3148" class="Function">↑</a> <a id="plfa_plfa-part2-Substitution-14450" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-14452" href="../Substitution/#plfa_plfa-part2-Substitution-14397" class="Bound">M</a>
<a id="plfa_plfa-part2-Substitution-14454" href="../Substitution/#plfa_plfa-part2-Substitution-14368" class="Function">rename-shift</a><a id="plfa_plfa-part2-Substitution-14466" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14467" href="../Substitution/#plfa_plfa-part2-Substitution-14467" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-14468" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-14470" href="../Substitution/#plfa_plfa-part2-Substitution-14470" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-14471" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-14473" href="../Substitution/#plfa_plfa-part2-Substitution-14473" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-14474" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-14476" href="../Substitution/#plfa_plfa-part2-Substitution-14476" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-14477" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14479" class="Symbol">=</a>
  <a id="plfa_plfa-part2-Substitution-14483" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
    <a id="plfa_plfa-part2-Substitution-14493" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-14500" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Substitution-14503" href="../Substitution/#plfa_plfa-part2-Substitution-14476" class="Bound">M</a>
  <a id="plfa_plfa-part2-Substitution-14507" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-14510" href="../Substitution/#plfa_plfa-part2-Substitution-13493" class="Function">rename-subst-ren</a> <a id="plfa_plfa-part2-Substitution-14527" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
    <a id="plfa_plfa-part2-Substitution-14533" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-14535" href="../Substitution/#plfa_plfa-part2-Substitution-6502" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-14539" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Substitution-14542" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-14544" href="../Substitution/#plfa_plfa-part2-Substitution-14476" class="Bound">M</a>
  <a id="plfa_plfa-part2-Substitution-14548" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-14551" href="../Substitution/#plfa_plfa-part2-Substitution-10991" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-14559" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14560" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-14562" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14564" href="../Substitution/#plfa_plfa-part2-Substitution-14476" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-14565" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14567" href="../Substitution/#plfa_plfa-part2-Substitution-14056" class="Function">ren-shift</a> <a id="plfa_plfa-part2-Substitution-14577" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-14582" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
    <a id="plfa_plfa-part2-Substitution-14588" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-14590" href="../Substitution/#plfa_plfa-part2-Substitution-3148" class="Function">↑</a> <a id="plfa_plfa-part2-Substitution-14592" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-14594" href="../Substitution/#plfa_plfa-part2-Substitution-14476" class="Bound">M</a>
  <a id="plfa_plfa-part2-Substitution-14598" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
</pre><p>Next we prove the equation <code>exts-cons-shift</code>, which states that <code>exts</code> is equivalent to cons’ing Z onto the sequence formed by applying <code>σ</code> and then shifting. The proof is by case analysis on the variable <code>x</code>, using <code>rename-subst-ren</code> for when <code>x = S y</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-exts-cons-shift"></a><a id="plfa_plfa-part2-Substitution-14869" href="../Substitution/#plfa_plfa-part2-Substitution-14869" class="Function">exts-cons-shift</a> <a id="plfa_plfa-part2-Substitution-14885" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-14887" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-14889" href="../Substitution/#plfa_plfa-part2-Substitution-14889" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-14891" href="../Substitution/#plfa_plfa-part2-Substitution-14891" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-14892" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14894" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14895" href="../Substitution/#plfa_plfa-part2-Substitution-14895" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-14897" href="../Substitution/#plfa_plfa-part2-Substitution-14897" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-14898" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14900" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14901" href="../Substitution/#plfa_plfa-part2-Substitution-14901" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-14903" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-14905" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-14911" href="../Substitution/#plfa_plfa-part2-Substitution-14889" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-14913" href="../Substitution/#plfa_plfa-part2-Substitution-14891" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-14914" class="Symbol">}</a>
                <a id="plfa_plfa-part2-Substitution-14932" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-14934" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-14939" href="../Substitution/#plfa_plfa-part2-Substitution-14901" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-14941" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14942" href="../Substitution/#plfa_plfa-part2-Substitution-14895" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-14943" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14945" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-14946" href="../Substitution/#plfa_plfa-part2-Substitution-14897" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-14947" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-14949" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-14951" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-14952" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-14954" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-Substitution-14956" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-14958" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-14959" href="../Substitution/#plfa_plfa-part2-Substitution-14901" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-14961" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-14963" href="../Substitution/#plfa_plfa-part2-Substitution-3148" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-14964" class="Symbol">))</a>
<a id="plfa_plfa-part2-Substitution-14967" href="../Substitution/#plfa_plfa-part2-Substitution-14869" class="Function">exts-cons-shift</a> <a id="plfa_plfa-part2-Substitution-14983" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-14985" href="../Substitution/#plfa_plfa-part2-Substitution-1864" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-15000" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-15002" href="../Substitution/#plfa_plfa-part2-Substitution-15002" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-15004" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-15006" href="../Substitution/#plfa_plfa-part2-Substitution-15029" class="Function">lemma</a><a id="plfa_plfa-part2-Substitution-15011" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15012" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-15014" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15016" href="../Substitution/#plfa_plfa-part2-Substitution-15002" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-15017" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-15021" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-15029" href="../Substitution/#plfa_plfa-part2-Substitution-15029" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-15035" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15037" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-15039" href="../Substitution/#plfa_plfa-part2-Substitution-15039" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-15041" href="../Substitution/#plfa_plfa-part2-Substitution-15041" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-15042" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-15044" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15045" href="../Substitution/#plfa_plfa-part2-Substitution-15045" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-15047" href="../Substitution/#plfa_plfa-part2-Substitution-15047" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-15048" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-15050" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15051" href="../Substitution/#plfa_plfa-part2-Substitution-15051" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-15053" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15055" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-15061" href="../Substitution/#plfa_plfa-part2-Substitution-15039" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-15063" href="../Substitution/#plfa_plfa-part2-Substitution-15041" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-15064" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-15066" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15067" href="../Substitution/#plfa_plfa-part2-Substitution-15067" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-15069" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15071" href="../Substitution/#plfa_plfa-part2-Substitution-15039" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-15073" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-15075" href="../Substitution/#plfa_plfa-part2-Substitution-15047" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-15077" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-15079" href="../Substitution/#plfa_plfa-part2-Substitution-15045" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-15080" class="Symbol">}</a>
                  <a id="plfa_plfa-part2-Substitution-15100" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-15102" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-15107" href="../Substitution/#plfa_plfa-part2-Substitution-15051" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-15109" href="../Substitution/#plfa_plfa-part2-Substitution-15067" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-15111" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-15113" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-15114" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-15116" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-Substitution-15118" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-15120" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-15121" href="../Substitution/#plfa_plfa-part2-Substitution-15051" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-15123" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-15125" href="../Substitution/#plfa_plfa-part2-Substitution-3148" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-15126" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-15129" href="../Substitution/#plfa_plfa-part2-Substitution-15067" class="Bound">x</a>
  <a id="plfa_plfa-part2-Substitution-15133" href="../Substitution/#plfa_plfa-part2-Substitution-15029" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-15139" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15140" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-15142" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15144" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-15145" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-15147" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15149" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
  <a id="plfa_plfa-part2-Substitution-15156" href="../Substitution/#plfa_plfa-part2-Substitution-15029" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-15162" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15163" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-15165" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15167" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-15169" href="../Substitution/#plfa_plfa-part2-Substitution-15169" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-15170" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-15172" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15174" href="../Substitution/#plfa_plfa-part2-Substitution-13493" class="Function">rename-subst-ren</a>
</pre><p>As a corollary, we have a similar correspondence for <code>ren (ext ρ)</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-ext-cons-Z-shift"></a><a id="plfa_plfa-part2-Substitution-15273" href="../Substitution/#plfa_plfa-part2-Substitution-15273" class="Function">ext-cons-Z-shift</a> <a id="plfa_plfa-part2-Substitution-15290" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15292" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-15294" href="../Substitution/#plfa_plfa-part2-Substitution-15294" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-15296" href="../Substitution/#plfa_plfa-part2-Substitution-15296" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-15297" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-15299" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15300" href="../Substitution/#plfa_plfa-part2-Substitution-15300" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-15302" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15304" href="../Substitution/#plfa_plfa-part2-Substitution-2133" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-15311" href="../Substitution/#plfa_plfa-part2-Substitution-15294" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-15313" href="../Substitution/#plfa_plfa-part2-Substitution-15296" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-15314" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-15316" href="../Substitution/#plfa_plfa-part2-Substitution-15316" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-15317" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-15319" href="../Substitution/#plfa_plfa-part2-Substitution-15319" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-15320" class="Symbol">}</a>
                 <a id="plfa_plfa-part2-Substitution-15339" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-15341" href="../Substitution/#plfa_plfa-part2-Substitution-6502" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-15345" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-15346" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-15350" href="../Substitution/#plfa_plfa-part2-Substitution-15300" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-15352" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15353" class="Argument">B</a> <a id="plfa_plfa-part2-Substitution-15355" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15357" href="../Substitution/#plfa_plfa-part2-Substitution-15319" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-15358" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-15361" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-15363" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-15364" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-15366" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-Substitution-15368" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-15370" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-15371" href="../Substitution/#plfa_plfa-part2-Substitution-6502" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-15375" href="../Substitution/#plfa_plfa-part2-Substitution-15300" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-15377" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-15379" href="../Substitution/#plfa_plfa-part2-Substitution-3148" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-15380" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-15383" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15384" href="../Substitution/#plfa_plfa-part2-Substitution-15316" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-15385" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-15387" href="../Substitution/#plfa_plfa-part2-Substitution-15273" class="Function">ext-cons-Z-shift</a> <a id="plfa_plfa-part2-Substitution-15404" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15405" href="../Substitution/#plfa_plfa-part2-Substitution-15405" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-15406" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-15408" href="../Substitution/#plfa_plfa-part2-Substitution-15408" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-15409" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-15411" href="../Substitution/#plfa_plfa-part2-Substitution-15411" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-15412" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-15414" href="../Substitution/#plfa_plfa-part2-Substitution-15414" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-15415" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-15417" href="../Substitution/#plfa_plfa-part2-Substitution-15417" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-15418" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-15420" class="Symbol">=</a>
  <a id="plfa_plfa-part2-Substitution-15424" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
    <a id="plfa_plfa-part2-Substitution-15434" href="../Substitution/#plfa_plfa-part2-Substitution-6502" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-15438" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-15439" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-15443" href="../Substitution/#plfa_plfa-part2-Substitution-15411" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-15444" class="Symbol">)</a>
  <a id="plfa_plfa-part2-Substitution-15448" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-15451" href="../Substitution/#plfa_plfa-part2-Substitution-13120" class="Function">ren-ext</a> <a id="plfa_plfa-part2-Substitution-15459" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
    <a id="plfa_plfa-part2-Substitution-15465" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-15470" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-15471" href="../Substitution/#plfa_plfa-part2-Substitution-6502" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-15475" href="../Substitution/#plfa_plfa-part2-Substitution-15411" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-15476" class="Symbol">)</a>
  <a id="plfa_plfa-part2-Substitution-15480" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-15483" href="../Substitution/#plfa_plfa-part2-Substitution-14869" class="Function">exts-cons-shift</a><a id="plfa_plfa-part2-Substitution-15498" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15499" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-15501" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15503" href="../Substitution/#plfa_plfa-part2-Substitution-6502" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-15507" href="../Substitution/#plfa_plfa-part2-Substitution-15411" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-15508" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-15510" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
   <a id="plfa_plfa-part2-Substitution-15515" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-15517" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-15519" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-15520" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-15522" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-15524" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-15525" href="../Substitution/#plfa_plfa-part2-Substitution-6502" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-15529" href="../Substitution/#plfa_plfa-part2-Substitution-15411" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-15531" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-15533" href="../Substitution/#plfa_plfa-part2-Substitution-3148" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-15534" class="Symbol">))</a>
  <a id="plfa_plfa-part2-Substitution-15539" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
</pre><p>Finally, the <code>subst-zero M</code> substitution is equivalent to cons’ing <code>M</code> onto the identity substitution.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-subst-Z-cons-ids"></a><a id="plfa_plfa-part2-Substitution-15658" href="../Substitution/#plfa_plfa-part2-Substitution-15658" class="Function">subst-Z-cons-ids</a> <a id="plfa_plfa-part2-Substitution-15675" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15677" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-15679" href="../Substitution/#plfa_plfa-part2-Substitution-15679" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-15680" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-15682" href="../Substitution/#plfa_plfa-part2-Substitution-15682" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-15684" href="../Substitution/#plfa_plfa-part2-Substitution-15684" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-15686" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15688" href="../Untyped/#plfa_plfa-part2-Untyped-2458" class="Datatype">Type</a><a id="plfa_plfa-part2-Substitution-15692" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-15694" href="../Substitution/#plfa_plfa-part2-Substitution-15694" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-15696" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15698" href="../Substitution/#plfa_plfa-part2-Substitution-15679" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-15700" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-15702" href="../Substitution/#plfa_plfa-part2-Substitution-15684" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-15703" class="Symbol">}</a>
                 <a id="plfa_plfa-part2-Substitution-15722" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-15724" href="../Untyped/#plfa_plfa-part2-Untyped-7175" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Substitution-15735" href="../Substitution/#plfa_plfa-part2-Substitution-15694" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-15737" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-15739" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-15740" href="../Substitution/#plfa_plfa-part2-Substitution-15694" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-15742" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-15744" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-15747" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-15749" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15750" href="../Substitution/#plfa_plfa-part2-Substitution-15682" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-15751" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-15753" href="../Substitution/#plfa_plfa-part2-Substitution-15658" class="Function">subst-Z-cons-ids</a> <a id="plfa_plfa-part2-Substitution-15770" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15772" href="../Substitution/#plfa_plfa-part2-Substitution-1864" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-15787" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-15789" href="../Substitution/#plfa_plfa-part2-Substitution-15789" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-15791" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-15793" href="../Substitution/#plfa_plfa-part2-Substitution-15817" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-15799" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15800" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-15802" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15804" href="../Substitution/#plfa_plfa-part2-Substitution-15789" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-15805" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-15809" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-15817" href="../Substitution/#plfa_plfa-part2-Substitution-15817" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-15823" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15825" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-15827" href="../Substitution/#plfa_plfa-part2-Substitution-15827" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-15828" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-15830" href="../Substitution/#plfa_plfa-part2-Substitution-15830" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-15832" href="../Substitution/#plfa_plfa-part2-Substitution-15832" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-15834" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15836" href="../Untyped/#plfa_plfa-part2-Untyped-2458" class="Datatype">Type</a><a id="plfa_plfa-part2-Substitution-15840" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-15842" href="../Substitution/#plfa_plfa-part2-Substitution-15842" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-15844" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15846" href="../Substitution/#plfa_plfa-part2-Substitution-15827" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-15848" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-15850" href="../Substitution/#plfa_plfa-part2-Substitution-15832" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-15851" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-15853" href="../Substitution/#plfa_plfa-part2-Substitution-15853" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-15855" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-15857" href="../Substitution/#plfa_plfa-part2-Substitution-15827" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-15859" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-15861" href="../Substitution/#plfa_plfa-part2-Substitution-15832" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-15863" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-15865" href="../Substitution/#plfa_plfa-part2-Substitution-15830" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-15866" class="Symbol">}</a>
                      <a id="plfa_plfa-part2-Substitution-15890" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-15892" href="../Untyped/#plfa_plfa-part2-Untyped-7175" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Substitution-15903" href="../Substitution/#plfa_plfa-part2-Substitution-15842" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-15905" href="../Substitution/#plfa_plfa-part2-Substitution-15853" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-15907" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-15909" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-15910" href="../Substitution/#plfa_plfa-part2-Substitution-15842" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-15912" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-15914" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-15917" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-15919" href="../Substitution/#plfa_plfa-part2-Substitution-15853" class="Bound">x</a>
  <a id="plfa_plfa-part2-Substitution-15923" href="../Substitution/#plfa_plfa-part2-Substitution-15817" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-15929" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15930" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-15932" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15934" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-15935" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-15937" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15939" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
  <a id="plfa_plfa-part2-Substitution-15946" href="../Substitution/#plfa_plfa-part2-Substitution-15817" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-15952" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-15953" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-15955" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15957" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-15959" href="../Substitution/#plfa_plfa-part2-Substitution-15959" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-15960" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-15962" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-15964" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
</pre><h2 id="proofs-of-sub-abs-sub-id-and-rename-id">Proofs of sub-abs, sub-id, and rename-id</h2><p>The equation <code>sub-abs</code> follows immediately from the equation <code>exts-cons-shift</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-sub-abs"></a><a id="plfa_plfa-part2-Substitution-16109" href="../Substitution/#plfa_plfa-part2-Substitution-16109" class="Function">sub-abs</a> <a id="plfa_plfa-part2-Substitution-16117" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-16119" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-16121" href="../Substitution/#plfa_plfa-part2-Substitution-16121" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-16123" href="../Substitution/#plfa_plfa-part2-Substitution-16123" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-16124" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-16126" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-16127" href="../Substitution/#plfa_plfa-part2-Substitution-16127" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-16129" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-16131" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-16137" href="../Substitution/#plfa_plfa-part2-Substitution-16121" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-16139" href="../Substitution/#plfa_plfa-part2-Substitution-16123" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-16140" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-16142" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-16143" href="../Substitution/#plfa_plfa-part2-Substitution-16143" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-16145" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-16147" href="../Substitution/#plfa_plfa-part2-Substitution-16121" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-16149" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-16151" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-Substitution-16153" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-16155" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-16156" class="Symbol">}</a>
        <a id="plfa_plfa-part2-Substitution-16166" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-16168" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-16170" href="../Substitution/#plfa_plfa-part2-Substitution-16127" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-16172" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-16174" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-16175" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-16177" href="../Substitution/#plfa_plfa-part2-Substitution-16143" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-16178" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-16180" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-16182" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-16184" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-16186" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-16187" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-16189" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-16190" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-16192" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-16194" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-16195" href="../Substitution/#plfa_plfa-part2-Substitution-16127" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-16197" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-16199" href="../Substitution/#plfa_plfa-part2-Substitution-3148" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-16200" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-16202" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-16204" href="../Substitution/#plfa_plfa-part2-Substitution-16143" class="Bound">N</a>
<a id="plfa_plfa-part2-Substitution-16206" href="../Substitution/#plfa_plfa-part2-Substitution-16109" class="Function">sub-abs</a> <a id="plfa_plfa-part2-Substitution-16214" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-16215" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-16217" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-16219" href="../Substitution/#plfa_plfa-part2-Substitution-16219" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-16220" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-16222" class="Argument">N</a> <a id="plfa_plfa-part2-Substitution-16224" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-16226" href="../Substitution/#plfa_plfa-part2-Substitution-16226" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-16227" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-16229" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-16234" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
     <a id="plfa_plfa-part2-Substitution-16245" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-16247" href="../Substitution/#plfa_plfa-part2-Substitution-16219" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-16249" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-16251" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-16252" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-16254" href="../Substitution/#plfa_plfa-part2-Substitution-16226" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-16255" class="Symbol">)</a>
   <a id="plfa_plfa-part2-Substitution-16260" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11079" class="Function">≡⟨⟩</a>
     <a id="plfa_plfa-part2-Substitution-16269" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-16271" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-16273" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-16278" href="../Substitution/#plfa_plfa-part2-Substitution-16219" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-16280" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-16282" href="../Substitution/#plfa_plfa-part2-Substitution-16226" class="Bound">N</a>
   <a id="plfa_plfa-part2-Substitution-16287" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-16290" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-16295" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ_</a> <a id="plfa_plfa-part2-Substitution-16298" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-16299" href="../Substitution/#plfa_plfa-part2-Substitution-10991" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-16307" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-16308" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-16310" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-16312" href="../Substitution/#plfa_plfa-part2-Substitution-16226" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-16313" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-16315" href="../Substitution/#plfa_plfa-part2-Substitution-14869" class="Function">exts-cons-shift</a> <a id="plfa_plfa-part2-Substitution-16331" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Substitution-16335" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-16337" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
     <a id="plfa_plfa-part2-Substitution-16344" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-16346" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-16348" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-16349" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-16351" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-16352" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-16354" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-16356" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-16357" href="../Substitution/#plfa_plfa-part2-Substitution-16219" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-16359" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-16361" href="../Substitution/#plfa_plfa-part2-Substitution-3148" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-16362" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-16364" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-16366" href="../Substitution/#plfa_plfa-part2-Substitution-16226" class="Bound">N</a>
   <a id="plfa_plfa-part2-Substitution-16371" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
</pre><p>The proof of <code>sub-id</code> requires the following lemma which says that extending the identity substitution produces the identity substitution.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-exts-ids"></a><a id="plfa_plfa-part2-Substitution-16526" href="../Substitution/#plfa_plfa-part2-Substitution-16526" class="Function">exts-ids</a> <a id="plfa_plfa-part2-Substitution-16535" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-16537" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-16539" href="../Substitution/#plfa_plfa-part2-Substitution-16539" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-16540" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-16542" href="../Substitution/#plfa_plfa-part2-Substitution-16542" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-16544" href="../Substitution/#plfa_plfa-part2-Substitution-16544" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-16545" class="Symbol">}</a>
         <a id="plfa_plfa-part2-Substitution-16556" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-16558" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-16563" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-16567" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-16569" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-16573" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-16574" href="../Substitution/#plfa_plfa-part2-Substitution-16539" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-16576" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-16578" href="../Substitution/#plfa_plfa-part2-Substitution-16544" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-16579" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-16581" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-16582" href="../Substitution/#plfa_plfa-part2-Substitution-16542" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-16583" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-16585" href="../Substitution/#plfa_plfa-part2-Substitution-16526" class="Function">exts-ids</a> <a id="plfa_plfa-part2-Substitution-16594" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-16595" href="../Substitution/#plfa_plfa-part2-Substitution-16595" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-16596" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-16598" href="../Substitution/#plfa_plfa-part2-Substitution-16598" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-16599" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-16601" href="../Substitution/#plfa_plfa-part2-Substitution-16601" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-16602" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-16604" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-16606" href="../Substitution/#plfa_plfa-part2-Substitution-1864" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-16621" href="../Substitution/#plfa_plfa-part2-Substitution-16635" class="Function">lemma</a>
  <a id="plfa_plfa-part2-Substitution-16629" class="Keyword">where</a> <a id="plfa_plfa-part2-Substitution-16635" href="../Substitution/#plfa_plfa-part2-Substitution-16635" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-16641" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-16643" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-16644" href="../Substitution/#plfa_plfa-part2-Substitution-16644" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-16646" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-16648" href="../Substitution/#plfa_plfa-part2-Substitution-16595" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-16650" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-16652" href="../Substitution/#plfa_plfa-part2-Substitution-16601" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-16654" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-16656" href="../Substitution/#plfa_plfa-part2-Substitution-16598" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-16657" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-16659" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-16661" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-16666" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-16670" href="../Substitution/#plfa_plfa-part2-Substitution-16644" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-16672" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-16674" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-16678" href="../Substitution/#plfa_plfa-part2-Substitution-16644" class="Bound">x</a>
        <a id="plfa_plfa-part2-Substitution-16688" href="../Substitution/#plfa_plfa-part2-Substitution-16635" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-16694" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-Substitution-16696" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-16698" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
        <a id="plfa_plfa-part2-Substitution-16711" href="../Substitution/#plfa_plfa-part2-Substitution-16635" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-16717" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-16718" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-16720" href="../Substitution/#plfa_plfa-part2-Substitution-16720" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-16721" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-16723" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-16725" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
</pre><p>The proof of <code>⟪ ids ⟫ M ≡ M</code> now follows easily by induction on <code>M</code>, using <code>exts-ids</code> in the case for <code>M ≡ ƛ N</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-sub-id"></a><a id="plfa_plfa-part2-Substitution-16857" href="../Substitution/#plfa_plfa-part2-Substitution-16857" class="Function">sub-id</a> <a id="plfa_plfa-part2-Substitution-16864" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-16866" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-16868" href="../Substitution/#plfa_plfa-part2-Substitution-16868" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-16869" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-16871" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-16872" href="../Substitution/#plfa_plfa-part2-Substitution-16872" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-16873" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-16875" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-16876" href="../Substitution/#plfa_plfa-part2-Substitution-16876" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-16878" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-16880" href="../Substitution/#plfa_plfa-part2-Substitution-16868" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-16882" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-16884" href="../Substitution/#plfa_plfa-part2-Substitution-16872" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-16885" class="Symbol">}</a>
         <a id="plfa_plfa-part2-Substitution-16896" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-16898" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-16900" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-16904" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-16906" href="../Substitution/#plfa_plfa-part2-Substitution-16876" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-16908" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-16910" href="../Substitution/#plfa_plfa-part2-Substitution-16876" class="Bound">M</a>
<a id="plfa_plfa-part2-Substitution-16912" href="../Substitution/#plfa_plfa-part2-Substitution-16857" class="Function">sub-id</a> <a id="plfa_plfa-part2-Substitution-16919" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-16920" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-16922" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-16924" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-16926" href="../Substitution/#plfa_plfa-part2-Substitution-16926" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-16927" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-16929" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-16931" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part2-Substitution-16936" href="../Substitution/#plfa_plfa-part2-Substitution-16857" class="Function">sub-id</a> <a id="plfa_plfa-part2-Substitution-16943" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-16944" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-16946" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-16948" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-16950" href="../Substitution/#plfa_plfa-part2-Substitution-16950" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-16951" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-16953" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-16958" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
     <a id="plfa_plfa-part2-Substitution-16969" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-16971" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-16975" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-16977" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-16978" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-16980" href="../Substitution/#plfa_plfa-part2-Substitution-16950" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-16981" class="Symbol">)</a>
   <a id="plfa_plfa-part2-Substitution-16986" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11079" class="Function">≡⟨⟩</a>
     <a id="plfa_plfa-part2-Substitution-16995" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-16997" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-16999" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-17004" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-17008" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-17010" href="../Substitution/#plfa_plfa-part2-Substitution-16950" class="Bound">N</a>
   <a id="plfa_plfa-part2-Substitution-17015" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-17018" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-17023" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ_</a> <a id="plfa_plfa-part2-Substitution-17026" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-17027" href="../Substitution/#plfa_plfa-part2-Substitution-10991" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-17035" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17036" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-17038" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-17040" href="../Substitution/#plfa_plfa-part2-Substitution-16950" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-17041" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-17043" href="../Substitution/#plfa_plfa-part2-Substitution-16526" class="Function">exts-ids</a> <a id="plfa_plfa-part2-Substitution-17052" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Substitution-17056" class="Symbol">)</a>  <a id="plfa_plfa-part2-Substitution-17059" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
     <a id="plfa_plfa-part2-Substitution-17066" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-17068" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-17070" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-17074" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-17076" href="../Substitution/#plfa_plfa-part2-Substitution-16950" class="Bound">N</a>
   <a id="plfa_plfa-part2-Substitution-17081" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-17084" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-17089" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ_</a> <a id="plfa_plfa-part2-Substitution-17092" href="../Substitution/#plfa_plfa-part2-Substitution-16857" class="Function">sub-id</a> <a id="plfa_plfa-part2-Substitution-17099" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
     <a id="plfa_plfa-part2-Substitution-17106" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-17108" href="../Substitution/#plfa_plfa-part2-Substitution-16950" class="Bound">N</a>
   <a id="plfa_plfa-part2-Substitution-17113" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
<a id="plfa_plfa-part2-Substitution-17115" href="../Substitution/#plfa_plfa-part2-Substitution-16857" class="Function">sub-id</a> <a id="plfa_plfa-part2-Substitution-17122" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17123" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-17125" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-17127" href="../Substitution/#plfa_plfa-part2-Substitution-17127" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-17129" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Substitution-17131" href="../Substitution/#plfa_plfa-part2-Substitution-17131" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-17132" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-17134" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-17136" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1576" class="Function">cong₂</a> <a id="plfa_plfa-part2-Substitution-17142" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">_·_</a> <a id="plfa_plfa-part2-Substitution-17146" href="../Substitution/#plfa_plfa-part2-Substitution-16857" class="Function">sub-id</a> <a id="plfa_plfa-part2-Substitution-17153" href="../Substitution/#plfa_plfa-part2-Substitution-16857" class="Function">sub-id</a>
</pre><p>The <code>rename-id</code> equation is a corollary is <code>sub-id</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-rename-id"></a><a id="plfa_plfa-part2-Substitution-17227" href="../Substitution/#plfa_plfa-part2-Substitution-17227" class="Function">rename-id</a> <a id="plfa_plfa-part2-Substitution-17237" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-17239" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-17241" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17242" href="../Substitution/#plfa_plfa-part2-Substitution-17242" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-17243" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-17245" href="../Substitution/#plfa_plfa-part2-Substitution-17245" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-17246" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-17248" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17249" href="../Substitution/#plfa_plfa-part2-Substitution-17249" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-17251" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-17253" href="../Substitution/#plfa_plfa-part2-Substitution-17242" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-17255" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-17257" href="../Substitution/#plfa_plfa-part2-Substitution-17245" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-17258" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-17262" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-17264" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-17271" class="Symbol">(λ</a> <a id="plfa_plfa-part2-Substitution-17274" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17275" href="../Substitution/#plfa_plfa-part2-Substitution-17275" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-17276" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-17278" href="../Substitution/#plfa_plfa-part2-Substitution-17278" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-17280" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-17282" href="../Substitution/#plfa_plfa-part2-Substitution-17278" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-17283" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-17285" href="../Substitution/#plfa_plfa-part2-Substitution-17249" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-17287" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-17289" href="../Substitution/#plfa_plfa-part2-Substitution-17249" class="Bound">M</a>
<a id="plfa_plfa-part2-Substitution-17291" href="../Substitution/#plfa_plfa-part2-Substitution-17227" class="Function">rename-id</a> <a id="plfa_plfa-part2-Substitution-17301" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17302" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-17304" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-17306" href="../Substitution/#plfa_plfa-part2-Substitution-17306" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-17307" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-17309" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-17314" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
     <a id="plfa_plfa-part2-Substitution-17325" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-17332" class="Symbol">(λ</a> <a id="plfa_plfa-part2-Substitution-17335" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17336" href="../Substitution/#plfa_plfa-part2-Substitution-17336" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-17337" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-17339" href="../Substitution/#plfa_plfa-part2-Substitution-17339" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-17341" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-17343" href="../Substitution/#plfa_plfa-part2-Substitution-17339" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-17344" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-17346" href="../Substitution/#plfa_plfa-part2-Substitution-17306" class="Bound">M</a>
   <a id="plfa_plfa-part2-Substitution-17351" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-17354" href="../Substitution/#plfa_plfa-part2-Substitution-13493" class="Function">rename-subst-ren</a>  <a id="plfa_plfa-part2-Substitution-17372" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
     <a id="plfa_plfa-part2-Substitution-17379" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-17381" href="../Substitution/#plfa_plfa-part2-Substitution-6502" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-17385" class="Symbol">(λ</a> <a id="plfa_plfa-part2-Substitution-17388" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17389" href="../Substitution/#plfa_plfa-part2-Substitution-17389" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-17390" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-17392" href="../Substitution/#plfa_plfa-part2-Substitution-17392" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-17394" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-17396" href="../Substitution/#plfa_plfa-part2-Substitution-17392" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-17397" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-17399" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-17401" href="../Substitution/#plfa_plfa-part2-Substitution-17306" class="Bound">M</a>
   <a id="plfa_plfa-part2-Substitution-17406" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11079" class="Function">≡⟨⟩</a>
     <a id="plfa_plfa-part2-Substitution-17415" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-17417" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-17421" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-17423" href="../Substitution/#plfa_plfa-part2-Substitution-17306" class="Bound">M</a>
   <a id="plfa_plfa-part2-Substitution-17428" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-17431" href="../Substitution/#plfa_plfa-part2-Substitution-16857" class="Function">sub-id</a>  <a id="plfa_plfa-part2-Substitution-17439" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
     <a id="plfa_plfa-part2-Substitution-17446" href="../Substitution/#plfa_plfa-part2-Substitution-17306" class="Bound">M</a>
   <a id="plfa_plfa-part2-Substitution-17451" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
</pre><h2 id="proof-of-sub-idr">Proof of sub-idR</h2><p>The proof of <code>sub-idR</code> follows directly from <code>sub-id</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-sub-idR"></a><a id="plfa_plfa-part2-Substitution-17543" href="../Substitution/#plfa_plfa-part2-Substitution-17543" class="Function">sub-idR</a> <a id="plfa_plfa-part2-Substitution-17551" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-17553" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-17555" href="../Substitution/#plfa_plfa-part2-Substitution-17555" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-17557" href="../Substitution/#plfa_plfa-part2-Substitution-17557" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-17558" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-17560" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17561" href="../Substitution/#plfa_plfa-part2-Substitution-17561" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-17563" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-17565" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-17571" href="../Substitution/#plfa_plfa-part2-Substitution-17555" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-17573" href="../Substitution/#plfa_plfa-part2-Substitution-17557" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-17574" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-17576" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17577" href="../Substitution/#plfa_plfa-part2-Substitution-17577" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-17578" class="Symbol">}</a>
       <a id="plfa_plfa-part2-Substitution-17587" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-17589" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-17590" href="../Substitution/#plfa_plfa-part2-Substitution-17561" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-17592" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-17594" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-17597" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-17599" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-17601" href="../Substitution/#plfa_plfa-part2-Substitution-17561" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-17603" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17604" href="../Substitution/#plfa_plfa-part2-Substitution-17577" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-17605" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-17607" href="../Substitution/#plfa_plfa-part2-Substitution-17543" class="Function">sub-idR</a> <a id="plfa_plfa-part2-Substitution-17615" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-17616" href="../Substitution/#plfa_plfa-part2-Substitution-17616" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-17617" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-17619" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-17621" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-17623" href="../Substitution/#plfa_plfa-part2-Substitution-17623" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-17624" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-17626" href="../Substitution/#plfa_plfa-part2-Substitution-17626" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-17627" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-17629" class="Symbol">=</a>
          <a id="plfa_plfa-part2-Substitution-17641" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
            <a id="plfa_plfa-part2-Substitution-17659" href="../Substitution/#plfa_plfa-part2-Substitution-17623" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-17661" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-17663" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a>
          <a id="plfa_plfa-part2-Substitution-17677" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11079" class="Function">≡⟨⟩</a>
            <a id="plfa_plfa-part2-Substitution-17693" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-17695" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-17699" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-17701" href="https://agda.github.io/agda-stdlib/v2.1/Function.Base.html#1115" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-17703" href="../Substitution/#plfa_plfa-part2-Substitution-17623" class="Bound">σ</a>
          <a id="plfa_plfa-part2-Substitution-17715" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-17718" href="../Substitution/#plfa_plfa-part2-Substitution-1864" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-17733" class="Symbol">(λ</a> <a id="plfa_plfa-part2-Substitution-17736" href="../Substitution/#plfa_plfa-part2-Substitution-17736" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-17738" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-17740" href="../Substitution/#plfa_plfa-part2-Substitution-16857" class="Function">sub-id</a><a id="plfa_plfa-part2-Substitution-17746" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-17748" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
            <a id="plfa_plfa-part2-Substitution-17762" href="../Substitution/#plfa_plfa-part2-Substitution-17623" class="Bound">σ</a>
          <a id="plfa_plfa-part2-Substitution-17774" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
</pre><h2 id="proof-of-sub-sub">Proof of sub-sub</h2><p>The <code>sub-sub</code> equation states that sequenced substitutions <code>σ ⨟ τ</code> are equivalent to first applying <code>σ</code> then applying <code>τ</code>.</p><pre><code>⟪ τ ⟫ ⟪ σ ⟫ M  ≡ ⟪ σ ⨟ τ ⟫ M</code></pre><p>The proof requires several lemmas. First, we need to prove the specialization for renaming.</p><pre><code>rename ρ (rename ρ′ M) ≡ rename (ρ ∘ ρ′) M</code></pre><p>This in turn requires the following lemma about <code>ext</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-compose-ext"></a><a id="plfa_plfa-part2-Substitution-18166" href="../Substitution/#plfa_plfa-part2-Substitution-18166" class="Function">compose-ext</a> <a id="plfa_plfa-part2-Substitution-18178" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18180" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-18182" href="../Substitution/#plfa_plfa-part2-Substitution-18182" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-18184" href="../Substitution/#plfa_plfa-part2-Substitution-18184" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-18186" href="../Substitution/#plfa_plfa-part2-Substitution-18186" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-18187" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18189" href="../Substitution/#plfa_plfa-part2-Substitution-18189" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-18191" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18193" href="../Substitution/#plfa_plfa-part2-Substitution-2133" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-18200" href="../Substitution/#plfa_plfa-part2-Substitution-18184" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-18202" href="../Substitution/#plfa_plfa-part2-Substitution-18186" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-18203" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-18205" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18206" href="../Substitution/#plfa_plfa-part2-Substitution-18206" class="Bound">ρ′</a> <a id="plfa_plfa-part2-Substitution-18209" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18211" href="../Substitution/#plfa_plfa-part2-Substitution-2133" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-18218" href="../Substitution/#plfa_plfa-part2-Substitution-18182" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-18220" href="../Substitution/#plfa_plfa-part2-Substitution-18184" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-18221" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-18223" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18224" href="../Substitution/#plfa_plfa-part2-Substitution-18224" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-18226" href="../Substitution/#plfa_plfa-part2-Substitution-18226" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-18227" class="Symbol">}</a>
            <a id="plfa_plfa-part2-Substitution-18241" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-18243" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-18245" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-18249" href="../Substitution/#plfa_plfa-part2-Substitution-18189" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-18250" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-18252" href="https://agda.github.io/agda-stdlib/v2.1/Function.Base.html#1115" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-18254" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-18255" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-18259" href="../Substitution/#plfa_plfa-part2-Substitution-18206" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-18261" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-18264" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-18266" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-18270" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-18271" href="../Substitution/#plfa_plfa-part2-Substitution-18189" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-18273" href="https://agda.github.io/agda-stdlib/v2.1/Function.Base.html#1115" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-18275" href="../Substitution/#plfa_plfa-part2-Substitution-18206" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-18277" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-18279" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18280" href="../Substitution/#plfa_plfa-part2-Substitution-18226" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-18281" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-18283" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18284" href="../Substitution/#plfa_plfa-part2-Substitution-18224" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-18285" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-18287" href="../Substitution/#plfa_plfa-part2-Substitution-18166" class="Function">compose-ext</a> <a id="plfa_plfa-part2-Substitution-18299" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-18301" href="../Substitution/#plfa_plfa-part2-Substitution-1864" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-18316" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-18318" href="../Substitution/#plfa_plfa-part2-Substitution-18318" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-18320" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-18322" href="../Substitution/#plfa_plfa-part2-Substitution-18346" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-18328" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18329" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-18331" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-18333" href="../Substitution/#plfa_plfa-part2-Substitution-18318" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-18334" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-18338" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-18346" href="../Substitution/#plfa_plfa-part2-Substitution-18346" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-18352" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18354" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-18356" href="../Substitution/#plfa_plfa-part2-Substitution-18356" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-18358" href="../Substitution/#plfa_plfa-part2-Substitution-18358" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-18360" href="../Substitution/#plfa_plfa-part2-Substitution-18360" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-18361" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18363" href="../Substitution/#plfa_plfa-part2-Substitution-18363" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-18365" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18367" href="../Substitution/#plfa_plfa-part2-Substitution-2133" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-18374" href="../Substitution/#plfa_plfa-part2-Substitution-18358" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-18376" href="../Substitution/#plfa_plfa-part2-Substitution-18360" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-18377" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-18379" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18380" href="../Substitution/#plfa_plfa-part2-Substitution-18380" class="Bound">ρ′</a> <a id="plfa_plfa-part2-Substitution-18383" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18385" href="../Substitution/#plfa_plfa-part2-Substitution-2133" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-18392" href="../Substitution/#plfa_plfa-part2-Substitution-18356" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-18394" href="../Substitution/#plfa_plfa-part2-Substitution-18358" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-18395" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-18397" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18398" href="../Substitution/#plfa_plfa-part2-Substitution-18398" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-18400" href="../Substitution/#plfa_plfa-part2-Substitution-18400" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-18401" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-18403" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18404" href="../Substitution/#plfa_plfa-part2-Substitution-18404" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-18406" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18408" href="../Substitution/#plfa_plfa-part2-Substitution-18356" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-18410" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-18412" href="../Substitution/#plfa_plfa-part2-Substitution-18400" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-18414" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-18416" href="../Substitution/#plfa_plfa-part2-Substitution-18398" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-18417" class="Symbol">}</a>
              <a id="plfa_plfa-part2-Substitution-18433" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-18435" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-18437" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-18441" href="../Substitution/#plfa_plfa-part2-Substitution-18363" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-18442" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-18444" href="https://agda.github.io/agda-stdlib/v2.1/Function.Base.html#1115" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-18446" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-18447" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-18451" href="../Substitution/#plfa_plfa-part2-Substitution-18380" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-18453" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-18456" href="../Substitution/#plfa_plfa-part2-Substitution-18404" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-18458" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-18460" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-18464" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-18465" href="../Substitution/#plfa_plfa-part2-Substitution-18363" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-18467" href="https://agda.github.io/agda-stdlib/v2.1/Function.Base.html#1115" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-18469" href="../Substitution/#plfa_plfa-part2-Substitution-18380" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-18471" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-18473" href="../Substitution/#plfa_plfa-part2-Substitution-18404" class="Bound">x</a>
  <a id="plfa_plfa-part2-Substitution-18477" href="../Substitution/#plfa_plfa-part2-Substitution-18346" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-18483" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18484" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-18486" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-18488" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-18489" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-18491" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-18493" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
  <a id="plfa_plfa-part2-Substitution-18500" href="../Substitution/#plfa_plfa-part2-Substitution-18346" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-18506" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18507" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-18509" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-18511" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-18513" href="../Substitution/#plfa_plfa-part2-Substitution-18513" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-18514" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-18516" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-18518" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
</pre><p>To prove that composing renamings is equivalent to applying one after the other using <code>rename</code>, we proceed by induction on the term <code>M</code>, using the <code>compose-ext</code> lemma in the case for <code>M ≡ ƛ N</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-compose-rename"></a><a id="plfa_plfa-part2-Substitution-18731" href="../Substitution/#plfa_plfa-part2-Substitution-18731" class="Function">compose-rename</a> <a id="plfa_plfa-part2-Substitution-18746" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18748" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-18750" href="../Substitution/#plfa_plfa-part2-Substitution-18750" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-18752" href="../Substitution/#plfa_plfa-part2-Substitution-18752" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-18754" href="../Substitution/#plfa_plfa-part2-Substitution-18754" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-18755" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18757" href="../Substitution/#plfa_plfa-part2-Substitution-18757" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-18758" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18760" href="../Substitution/#plfa_plfa-part2-Substitution-18760" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-18762" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18764" href="../Substitution/#plfa_plfa-part2-Substitution-18750" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-18766" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-18768" href="../Substitution/#plfa_plfa-part2-Substitution-18757" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-18769" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18771" href="../Substitution/#plfa_plfa-part2-Substitution-18771" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-18773" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18775" href="../Substitution/#plfa_plfa-part2-Substitution-2133" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-18782" href="../Substitution/#plfa_plfa-part2-Substitution-18752" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-18784" href="../Substitution/#plfa_plfa-part2-Substitution-18754" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-18785" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18787" href="../Substitution/#plfa_plfa-part2-Substitution-18787" class="Bound">ρ′</a> <a id="plfa_plfa-part2-Substitution-18790" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18792" href="../Substitution/#plfa_plfa-part2-Substitution-2133" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-18799" href="../Substitution/#plfa_plfa-part2-Substitution-18750" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-18801" href="../Substitution/#plfa_plfa-part2-Substitution-18752" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-18802" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-18806" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-18808" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-18815" href="../Substitution/#plfa_plfa-part2-Substitution-18771" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-18817" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-18818" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-18825" href="../Substitution/#plfa_plfa-part2-Substitution-18787" class="Bound">ρ′</a> <a id="plfa_plfa-part2-Substitution-18828" href="../Substitution/#plfa_plfa-part2-Substitution-18760" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-18829" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-18831" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-18833" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-18840" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-18841" href="../Substitution/#plfa_plfa-part2-Substitution-18771" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-18843" href="https://agda.github.io/agda-stdlib/v2.1/Function.Base.html#1115" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-18845" href="../Substitution/#plfa_plfa-part2-Substitution-18787" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-18847" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-18849" href="../Substitution/#plfa_plfa-part2-Substitution-18760" class="Bound">M</a>
<a id="plfa_plfa-part2-Substitution-18851" href="../Substitution/#plfa_plfa-part2-Substitution-18731" class="Function">compose-rename</a> <a id="plfa_plfa-part2-Substitution-18866" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18867" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-18869" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-18871" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-18873" href="../Substitution/#plfa_plfa-part2-Substitution-18873" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-18874" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-18876" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-18878" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part2-Substitution-18883" href="../Substitution/#plfa_plfa-part2-Substitution-18731" class="Function">compose-rename</a> <a id="plfa_plfa-part2-Substitution-18898" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-18899" href="../Substitution/#plfa_plfa-part2-Substitution-18899" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-18900" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18902" href="../Substitution/#plfa_plfa-part2-Substitution-18902" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-18903" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18905" href="../Substitution/#plfa_plfa-part2-Substitution-18905" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-18906" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18908" href="../Substitution/#plfa_plfa-part2-Substitution-18908" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-18909" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18911" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-18913" href="../Substitution/#plfa_plfa-part2-Substitution-18913" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-18914" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18916" href="../Substitution/#plfa_plfa-part2-Substitution-18916" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-18917" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-18919" href="../Substitution/#plfa_plfa-part2-Substitution-18919" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-18921" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-18923" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-18925" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-18930" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ_</a> <a id="plfa_plfa-part2-Substitution-18933" href="../Substitution/#plfa_plfa-part2-Substitution-18945" class="Function">G</a>
  <a id="plfa_plfa-part2-Substitution-18937" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-18945" href="../Substitution/#plfa_plfa-part2-Substitution-18945" class="Function">G</a> <a id="plfa_plfa-part2-Substitution-18947" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-18949" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-18956" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-18957" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-18961" href="../Substitution/#plfa_plfa-part2-Substitution-18916" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-18962" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-18964" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-18965" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-18972" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-18973" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-18977" href="../Substitution/#plfa_plfa-part2-Substitution-18919" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-18979" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-18981" href="../Substitution/#plfa_plfa-part2-Substitution-18913" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-18982" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-18984" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-18986" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-18993" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-18994" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-18998" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-18999" href="../Substitution/#plfa_plfa-part2-Substitution-18916" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-19001" href="https://agda.github.io/agda-stdlib/v2.1/Function.Base.html#1115" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-19003" href="../Substitution/#plfa_plfa-part2-Substitution-18919" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-19005" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-19008" href="../Substitution/#plfa_plfa-part2-Substitution-18913" class="Bound">N</a>
  <a id="plfa_plfa-part2-Substitution-19012" href="../Substitution/#plfa_plfa-part2-Substitution-18945" class="Function">G</a> <a id="plfa_plfa-part2-Substitution-19014" class="Symbol">=</a>
      <a id="plfa_plfa-part2-Substitution-19022" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
        <a id="plfa_plfa-part2-Substitution-19036" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-19043" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19044" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-19048" href="../Substitution/#plfa_plfa-part2-Substitution-18916" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-19049" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-19051" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19052" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-19059" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19060" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-19064" href="../Substitution/#plfa_plfa-part2-Substitution-18919" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-19066" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-19068" href="../Substitution/#plfa_plfa-part2-Substitution-18913" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-19069" class="Symbol">)</a>
      <a id="plfa_plfa-part2-Substitution-19077" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-19080" href="../Substitution/#plfa_plfa-part2-Substitution-18731" class="Function">compose-rename</a><a id="plfa_plfa-part2-Substitution-19094" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-19095" class="Argument">ρ</a> <a id="plfa_plfa-part2-Substitution-19097" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-19099" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-19103" href="../Substitution/#plfa_plfa-part2-Substitution-18916" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-19104" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19106" class="Argument">ρ′</a> <a id="plfa_plfa-part2-Substitution-19109" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-19111" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-19115" href="../Substitution/#plfa_plfa-part2-Substitution-18919" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-19117" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-19119" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
        <a id="plfa_plfa-part2-Substitution-19129" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-19136" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-19138" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-19142" href="../Substitution/#plfa_plfa-part2-Substitution-18916" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-19143" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-19145" href="https://agda.github.io/agda-stdlib/v2.1/Function.Base.html#1115" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-19147" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19148" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-19152" href="../Substitution/#plfa_plfa-part2-Substitution-18919" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-19154" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-19157" href="../Substitution/#plfa_plfa-part2-Substitution-18913" class="Bound">N</a>
      <a id="plfa_plfa-part2-Substitution-19165" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-19168" href="../Substitution/#plfa_plfa-part2-Substitution-10231" class="Function">cong-rename</a> <a id="plfa_plfa-part2-Substitution-19180" href="../Substitution/#plfa_plfa-part2-Substitution-18166" class="Function">compose-ext</a> <a id="plfa_plfa-part2-Substitution-19192" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
        <a id="plfa_plfa-part2-Substitution-19202" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-19209" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19210" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-19214" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19215" href="../Substitution/#plfa_plfa-part2-Substitution-18916" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-19217" href="https://agda.github.io/agda-stdlib/v2.1/Function.Base.html#1115" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-19219" href="../Substitution/#plfa_plfa-part2-Substitution-18919" class="Bound">ρ′</a><a id="plfa_plfa-part2-Substitution-19221" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-19224" href="../Substitution/#plfa_plfa-part2-Substitution-18913" class="Bound">N</a>
      <a id="plfa_plfa-part2-Substitution-19232" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
<a id="plfa_plfa-part2-Substitution-19234" href="../Substitution/#plfa_plfa-part2-Substitution-18731" class="Function">compose-rename</a> <a id="plfa_plfa-part2-Substitution-19249" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-19250" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-19252" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-19254" href="../Substitution/#plfa_plfa-part2-Substitution-19254" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-19256" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Substitution-19258" href="../Substitution/#plfa_plfa-part2-Substitution-19258" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-19259" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-19261" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-19263" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1576" class="Function">cong₂</a> <a id="plfa_plfa-part2-Substitution-19269" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">_·_</a> <a id="plfa_plfa-part2-Substitution-19273" href="../Substitution/#plfa_plfa-part2-Substitution-18731" class="Function">compose-rename</a> <a id="plfa_plfa-part2-Substitution-19288" href="../Substitution/#plfa_plfa-part2-Substitution-18731" class="Function">compose-rename</a>
</pre><p>The next lemma states that if a renaming and substitution commute on variables, then they also commute on terms. We explain the proof in detail below.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-commute-subst-rename"></a><a id="plfa_plfa-part2-Substitution-19468" href="../Substitution/#plfa_plfa-part2-Substitution-19468" class="Function">commute-subst-rename</a> <a id="plfa_plfa-part2-Substitution-19489" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-19491" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-19493" href="../Substitution/#plfa_plfa-part2-Substitution-19493" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-19495" href="../Substitution/#plfa_plfa-part2-Substitution-19495" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-19496" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19498" href="../Substitution/#plfa_plfa-part2-Substitution-19498" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-19500" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-19502" href="../Substitution/#plfa_plfa-part2-Substitution-19493" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-19504" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-19506" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-19507" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19509" href="../Substitution/#plfa_plfa-part2-Substitution-19509" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-19511" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-19513" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-19519" href="../Substitution/#plfa_plfa-part2-Substitution-19493" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-19521" href="../Substitution/#plfa_plfa-part2-Substitution-19495" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-19522" class="Symbol">}</a>
                        <a id="plfa_plfa-part2-Substitution-19548" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-19549" href="../Substitution/#plfa_plfa-part2-Substitution-19549" class="Bound">ρ₁</a> <a id="plfa_plfa-part2-Substitution-19552" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-19554" href="../Substitution/#plfa_plfa-part2-Substitution-2133" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-19561" href="../Substitution/#plfa_plfa-part2-Substitution-19493" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-19563" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19564" href="../Substitution/#plfa_plfa-part2-Substitution-19493" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-19566" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-19568" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-19569" class="Symbol">)}{</a><a id="plfa_plfa-part2-Substitution-19572" href="../Substitution/#plfa_plfa-part2-Substitution-19572" class="Bound">ρ₂</a> <a id="plfa_plfa-part2-Substitution-19575" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-19577" href="../Substitution/#plfa_plfa-part2-Substitution-2133" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-19584" href="../Substitution/#plfa_plfa-part2-Substitution-19495" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-19586" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19587" href="../Substitution/#plfa_plfa-part2-Substitution-19495" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-19589" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-19591" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-19592" class="Symbol">)}</a>
                     <a id="plfa_plfa-part2-Substitution-19616" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-19618" class="Symbol">(∀{</a><a id="plfa_plfa-part2-Substitution-19621" href="../Substitution/#plfa_plfa-part2-Substitution-19621" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-19623" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-19625" href="../Substitution/#plfa_plfa-part2-Substitution-19493" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-19627" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-19629" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-19630" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-19632" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-19634" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-19639" href="../Substitution/#plfa_plfa-part2-Substitution-19509" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-19641" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19642" href="../Substitution/#plfa_plfa-part2-Substitution-19549" class="Bound">ρ₁</a> <a id="plfa_plfa-part2-Substitution-19645" href="../Substitution/#plfa_plfa-part2-Substitution-19621" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-19646" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-19648" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-19650" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-19657" href="../Substitution/#plfa_plfa-part2-Substitution-19572" class="Bound">ρ₂</a> <a id="plfa_plfa-part2-Substitution-19660" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19661" href="../Substitution/#plfa_plfa-part2-Substitution-19509" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-19663" href="../Substitution/#plfa_plfa-part2-Substitution-19621" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-19664" class="Symbol">))</a>
                     <a id="plfa_plfa-part2-Substitution-19688" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-19690" href="../Untyped/#plfa_plfa-part2-Untyped-6759" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-19696" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19697" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-19702" href="../Substitution/#plfa_plfa-part2-Substitution-19509" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-19703" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-19705" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19706" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-19713" href="../Substitution/#plfa_plfa-part2-Substitution-19549" class="Bound">ρ₁</a> <a id="plfa_plfa-part2-Substitution-19716" href="../Substitution/#plfa_plfa-part2-Substitution-19498" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-19717" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-19719" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-19721" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-19728" href="../Substitution/#plfa_plfa-part2-Substitution-19572" class="Bound">ρ₂</a> <a id="plfa_plfa-part2-Substitution-19731" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19732" href="../Untyped/#plfa_plfa-part2-Untyped-6759" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-19738" href="../Substitution/#plfa_plfa-part2-Substitution-19509" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-19740" href="../Substitution/#plfa_plfa-part2-Substitution-19498" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-19741" class="Symbol">)</a>
<a id="plfa_plfa-part2-Substitution-19743" href="../Substitution/#plfa_plfa-part2-Substitution-19468" class="Function">commute-subst-rename</a> <a id="plfa_plfa-part2-Substitution-19764" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-19765" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-19767" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-19769" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-19771" href="../Substitution/#plfa_plfa-part2-Substitution-19771" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-19772" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-19774" href="../Substitution/#plfa_plfa-part2-Substitution-19774" class="Bound">H</a> <a id="plfa_plfa-part2-Substitution-19776" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-19778" href="../Substitution/#plfa_plfa-part2-Substitution-19774" class="Bound">H</a>
<a id="plfa_plfa-part2-Substitution-19780" href="../Substitution/#plfa_plfa-part2-Substitution-19468" class="Function">commute-subst-rename</a> <a id="plfa_plfa-part2-Substitution-19801" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-19802" href="../Substitution/#plfa_plfa-part2-Substitution-19802" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-19803" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19805" href="../Substitution/#plfa_plfa-part2-Substitution-19805" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-19806" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19808" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-19810" href="../Substitution/#plfa_plfa-part2-Substitution-19810" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-19811" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19813" href="../Substitution/#plfa_plfa-part2-Substitution-19813" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-19814" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19816" href="../Substitution/#plfa_plfa-part2-Substitution-19816" class="Bound">ρ₁</a><a id="plfa_plfa-part2-Substitution-19818" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19820" href="../Substitution/#plfa_plfa-part2-Substitution-19820" class="Bound">ρ₂</a><a id="plfa_plfa-part2-Substitution-19822" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-19824" href="../Substitution/#plfa_plfa-part2-Substitution-19824" class="Bound">H</a> <a id="plfa_plfa-part2-Substitution-19826" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-19831" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-19836" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ_</a> <a id="plfa_plfa-part2-Substitution-19839" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19840" href="../Substitution/#plfa_plfa-part2-Substitution-19468" class="Function">commute-subst-rename</a><a id="plfa_plfa-part2-Substitution-19860" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-19861" href="../Substitution/#plfa_plfa-part2-Substitution-19802" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-19863" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-19865" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-19866" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19868" href="../Substitution/#plfa_plfa-part2-Substitution-19805" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-19870" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-19872" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-19873" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19875" href="../Substitution/#plfa_plfa-part2-Substitution-19810" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-19876" class="Symbol">}</a>
               <a id="plfa_plfa-part2-Substitution-19893" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-19894" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-19899" href="../Substitution/#plfa_plfa-part2-Substitution-19813" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-19900" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19902" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-19906" href="../Substitution/#plfa_plfa-part2-Substitution-19816" class="Bound">ρ₁</a><a id="plfa_plfa-part2-Substitution-19908" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-19910" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-19914" href="../Substitution/#plfa_plfa-part2-Substitution-19820" class="Bound">ρ₂</a><a id="plfa_plfa-part2-Substitution-19916" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-19918" class="Symbol">(λ</a> <a id="plfa_plfa-part2-Substitution-19921" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-19922" href="../Substitution/#plfa_plfa-part2-Substitution-19922" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-19923" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-19925" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-19927" href="../Substitution/#plfa_plfa-part2-Substitution-19948" class="Function">H′</a> <a id="plfa_plfa-part2-Substitution-19930" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-19931" href="../Substitution/#plfa_plfa-part2-Substitution-19922" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-19932" class="Symbol">}))</a>
   <a id="plfa_plfa-part2-Substitution-19939" class="Keyword">where</a>
   <a id="plfa_plfa-part2-Substitution-19948" href="../Substitution/#plfa_plfa-part2-Substitution-19948" class="Function">H′</a> <a id="plfa_plfa-part2-Substitution-19951" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-19953" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-19954" href="../Substitution/#plfa_plfa-part2-Substitution-19954" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-19956" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-19958" href="../Substitution/#plfa_plfa-part2-Substitution-19802" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-19960" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-19962" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-Substitution-19964" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-19966" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-19967" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-19969" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-19971" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-19976" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19977" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-19982" href="../Substitution/#plfa_plfa-part2-Substitution-19813" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-19983" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-19985" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-19986" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-19990" href="../Substitution/#plfa_plfa-part2-Substitution-19816" class="Bound">ρ₁</a> <a id="plfa_plfa-part2-Substitution-19993" href="../Substitution/#plfa_plfa-part2-Substitution-19954" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-19994" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-19996" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-19998" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-20005" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20006" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-20010" href="../Substitution/#plfa_plfa-part2-Substitution-19820" class="Bound">ρ₂</a><a id="plfa_plfa-part2-Substitution-20012" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-20014" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20015" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-20020" href="../Substitution/#plfa_plfa-part2-Substitution-19813" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-20022" href="../Substitution/#plfa_plfa-part2-Substitution-19954" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-20023" class="Symbol">)</a>
   <a id="plfa_plfa-part2-Substitution-20028" href="../Substitution/#plfa_plfa-part2-Substitution-19948" class="Function">H′</a> <a id="plfa_plfa-part2-Substitution-20031" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-20032" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-20033" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-20035" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-20037" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
   <a id="plfa_plfa-part2-Substitution-20045" href="../Substitution/#plfa_plfa-part2-Substitution-19948" class="Function">H′</a> <a id="plfa_plfa-part2-Substitution-20048" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-20049" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-20051" href="../Substitution/#plfa_plfa-part2-Substitution-20051" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-20052" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-20054" class="Symbol">=</a>
     <a id="plfa_plfa-part2-Substitution-20061" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
       <a id="plfa_plfa-part2-Substitution-20074" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-20079" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20080" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-20085" href="../Substitution/#plfa_plfa-part2-Substitution-19813" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-20086" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-20088" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20089" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-20093" href="../Substitution/#plfa_plfa-part2-Substitution-19816" class="Bound">ρ₁</a> <a id="plfa_plfa-part2-Substitution-20096" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20097" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-20099" href="../Substitution/#plfa_plfa-part2-Substitution-20051" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-20100" class="Symbol">))</a>
     <a id="plfa_plfa-part2-Substitution-20108" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11079" class="Function">≡⟨⟩</a>
       <a id="plfa_plfa-part2-Substitution-20119" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-20126" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Substitution-20129" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20130" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-20135" href="../Substitution/#plfa_plfa-part2-Substitution-19813" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-20137" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20138" href="../Substitution/#plfa_plfa-part2-Substitution-19816" class="Bound">ρ₁</a> <a id="plfa_plfa-part2-Substitution-20141" href="../Substitution/#plfa_plfa-part2-Substitution-20051" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-20142" class="Symbol">))</a>
     <a id="plfa_plfa-part2-Substitution-20150" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-20153" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-20158" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20159" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-20166" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part2-Substitution-20168" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-20170" href="../Substitution/#plfa_plfa-part2-Substitution-19824" class="Bound">H</a> <a id="plfa_plfa-part2-Substitution-20172" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-20181" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-20188" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Substitution-20191" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20192" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-20199" href="../Substitution/#plfa_plfa-part2-Substitution-19820" class="Bound">ρ₂</a> <a id="plfa_plfa-part2-Substitution-20202" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20203" href="../Substitution/#plfa_plfa-part2-Substitution-19813" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-20205" href="../Substitution/#plfa_plfa-part2-Substitution-20051" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-20206" class="Symbol">))</a>
     <a id="plfa_plfa-part2-Substitution-20214" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-20217" href="../Substitution/#plfa_plfa-part2-Substitution-18731" class="Function">compose-rename</a> <a id="plfa_plfa-part2-Substitution-20232" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-20241" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-20248" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20249" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Substitution-20252" href="https://agda.github.io/agda-stdlib/v2.1/Function.Base.html#1115" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-20254" href="../Substitution/#plfa_plfa-part2-Substitution-19820" class="Bound">ρ₂</a><a id="plfa_plfa-part2-Substitution-20256" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-20258" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20259" href="../Substitution/#plfa_plfa-part2-Substitution-19813" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-20261" href="../Substitution/#plfa_plfa-part2-Substitution-20051" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-20262" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-20269" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11079" class="Function">≡⟨⟩</a>
       <a id="plfa_plfa-part2-Substitution-20280" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-20287" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-20289" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-20293" href="../Substitution/#plfa_plfa-part2-Substitution-19820" class="Bound">ρ₂</a><a id="plfa_plfa-part2-Substitution-20295" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-20297" href="https://agda.github.io/agda-stdlib/v2.1/Function.Base.html#1115" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-20299" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part2-Substitution-20301" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-20303" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20304" href="../Substitution/#plfa_plfa-part2-Substitution-19813" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-20306" href="../Substitution/#plfa_plfa-part2-Substitution-20051" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-20307" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-20314" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-20317" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="plfa_plfa-part2-Substitution-20321" href="../Substitution/#plfa_plfa-part2-Substitution-18731" class="Function">compose-rename</a> <a id="plfa_plfa-part2-Substitution-20336" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-20345" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-20352" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20353" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-20357" href="../Substitution/#plfa_plfa-part2-Substitution-19820" class="Bound">ρ₂</a><a id="plfa_plfa-part2-Substitution-20359" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-20361" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20362" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-20369" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Substitution-20372" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20373" href="../Substitution/#plfa_plfa-part2-Substitution-19813" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-20375" href="../Substitution/#plfa_plfa-part2-Substitution-20051" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-20376" class="Symbol">))</a>
     <a id="plfa_plfa-part2-Substitution-20384" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11079" class="Function">≡⟨⟩</a>
       <a id="plfa_plfa-part2-Substitution-20395" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-20402" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20403" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-20407" href="../Substitution/#plfa_plfa-part2-Substitution-19820" class="Bound">ρ₂</a><a id="plfa_plfa-part2-Substitution-20409" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-20411" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20412" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-20417" href="../Substitution/#plfa_plfa-part2-Substitution-19813" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-20419" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20420" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-20422" href="../Substitution/#plfa_plfa-part2-Substitution-20051" class="Bound">y</a><a id="plfa_plfa-part2-Substitution-20423" class="Symbol">))</a>
     <a id="plfa_plfa-part2-Substitution-20431" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
<a id="plfa_plfa-part2-Substitution-20433" href="../Substitution/#plfa_plfa-part2-Substitution-19468" class="Function">commute-subst-rename</a> <a id="plfa_plfa-part2-Substitution-20454" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-20455" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-20457" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-20459" href="../Substitution/#plfa_plfa-part2-Substitution-20459" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-20461" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Substitution-20463" href="../Substitution/#plfa_plfa-part2-Substitution-20463" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-20464" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-20466" href="../Substitution/#plfa_plfa-part2-Substitution-20466" class="Bound">H</a> <a id="plfa_plfa-part2-Substitution-20468" class="Symbol">=</a>
  <a id="plfa_plfa-part2-Substitution-20472" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1576" class="Function">cong₂</a> <a id="plfa_plfa-part2-Substitution-20478" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">_·_</a> <a id="plfa_plfa-part2-Substitution-20482" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20483" href="../Substitution/#plfa_plfa-part2-Substitution-19468" class="Function">commute-subst-rename</a><a id="plfa_plfa-part2-Substitution-20503" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-20504" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-20506" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-20508" href="../Substitution/#plfa_plfa-part2-Substitution-20459" class="Bound">L</a><a id="plfa_plfa-part2-Substitution-20509" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-20511" href="../Substitution/#plfa_plfa-part2-Substitution-20466" class="Bound">H</a><a id="plfa_plfa-part2-Substitution-20512" class="Symbol">)</a>
            <a id="plfa_plfa-part2-Substitution-20526" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-20527" href="../Substitution/#plfa_plfa-part2-Substitution-19468" class="Function">commute-subst-rename</a><a id="plfa_plfa-part2-Substitution-20547" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-20548" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-20550" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-20552" href="../Substitution/#plfa_plfa-part2-Substitution-20463" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-20553" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-20555" href="../Substitution/#plfa_plfa-part2-Substitution-20466" class="Bound">H</a><a id="plfa_plfa-part2-Substitution-20556" class="Symbol">)</a>
</pre><p>The proof is by induction on the term <code>M</code>.</p><ul><li><p>If <code>M</code> is a variable, then we use the premise to conclude.</p></li><li><p>If <code>M ≡ ƛ N</code>, we conclude using the induction hypothesis for <code>N</code>. However, to use the induction hypothesis, we must show that</p><pre><code>  exts (exts σ) (ext ρ₁ x) ≡ rename (ext ρ₂) (exts σ x)</code></pre><p>We prove this equation by cases on x.</p><ul><li><p>If <code>x = Z</code>, the two sides are equal by definition.</p></li><li><p>If <code>x = S y</code>, we obtain the goal by the following equational reasoning.</p><pre><code>  exts (exts σ) (ext ρ₁ (S y))
≡ rename S_ (exts σ (ρ₁ y))
≡ rename S_ (rename ρ₂ (σ y))        (by the premise)
≡ rename (S_ ∘ ρ₂) (σ y)             (by compose-rename)
≡ rename ((ext ρ₂) ∘ S_) (σ y)
≡ rename (ext ρ₂) (rename S_ (σ y))  (by compose-rename)
≡ rename (ext ρ₂) (exts σ (S y))</code></pre></li></ul></li><li><p>If <code>M</code> is an application, we obtain the goal using the induction hypothesis for each subterm.</p></li></ul><p>The last lemma needed to prove <code>sub-sub</code> states that the <code>exts</code> function distributes with sequencing. It is a corollary of <code>commute-subst-rename</code> as described below. (It would have been nicer to prove this directly by equational reasoning in the σ algebra, but that would require the <code>sub-assoc</code> equation, whose proof depends on <code>sub-sub</code>, which in turn depends on this lemma.)</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-exts-seq"></a><a id="plfa_plfa-part2-Substitution-21893" href="../Substitution/#plfa_plfa-part2-Substitution-21893" class="Function">exts-seq</a> <a id="plfa_plfa-part2-Substitution-21902" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-21904" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-21906" href="../Substitution/#plfa_plfa-part2-Substitution-21906" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-21908" href="../Substitution/#plfa_plfa-part2-Substitution-21908" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-21910" href="../Substitution/#plfa_plfa-part2-Substitution-21910" class="Bound">Δ′</a><a id="plfa_plfa-part2-Substitution-21912" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-21914" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-21915" href="../Substitution/#plfa_plfa-part2-Substitution-21915" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-21918" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-21920" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-21926" href="../Substitution/#plfa_plfa-part2-Substitution-21906" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-21928" href="../Substitution/#plfa_plfa-part2-Substitution-21908" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-21929" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-21931" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-21932" href="../Substitution/#plfa_plfa-part2-Substitution-21932" class="Bound">σ₂</a> <a id="plfa_plfa-part2-Substitution-21935" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-21937" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-21943" href="../Substitution/#plfa_plfa-part2-Substitution-21908" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-21945" href="../Substitution/#plfa_plfa-part2-Substitution-21910" class="Bound">Δ′</a><a id="plfa_plfa-part2-Substitution-21947" class="Symbol">}</a>
         <a id="plfa_plfa-part2-Substitution-21958" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-21960" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-21962" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-21963" href="../Substitution/#plfa_plfa-part2-Substitution-21963" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-21964" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-21966" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-21968" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-21969" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-21974" href="../Substitution/#plfa_plfa-part2-Substitution-21915" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-21977" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-21979" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-21984" href="../Substitution/#plfa_plfa-part2-Substitution-21932" class="Bound">σ₂</a><a id="plfa_plfa-part2-Substitution-21986" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-21988" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-21989" href="../Substitution/#plfa_plfa-part2-Substitution-21963" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-21990" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-21992" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-21994" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-21999" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-22000" href="../Substitution/#plfa_plfa-part2-Substitution-21915" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-22003" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-22005" href="../Substitution/#plfa_plfa-part2-Substitution-21932" class="Bound">σ₂</a><a id="plfa_plfa-part2-Substitution-22007" class="Symbol">)</a>
<a id="plfa_plfa-part2-Substitution-22009" href="../Substitution/#plfa_plfa-part2-Substitution-21893" class="Function">exts-seq</a> <a id="plfa_plfa-part2-Substitution-22018" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22020" href="../Substitution/#plfa_plfa-part2-Substitution-1864" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-22035" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-22037" href="../Substitution/#plfa_plfa-part2-Substitution-22037" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-22039" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-22041" href="../Substitution/#plfa_plfa-part2-Substitution-22065" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-22047" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-22048" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-22050" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22052" href="../Substitution/#plfa_plfa-part2-Substitution-22037" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-22053" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-22057" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-22065" href="../Substitution/#plfa_plfa-part2-Substitution-22065" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-22071" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-22073" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-22075" href="../Substitution/#plfa_plfa-part2-Substitution-22075" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-22077" href="../Substitution/#plfa_plfa-part2-Substitution-22077" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-22079" href="../Substitution/#plfa_plfa-part2-Substitution-22079" class="Bound">Δ′</a><a id="plfa_plfa-part2-Substitution-22081" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22083" href="../Substitution/#plfa_plfa-part2-Substitution-22083" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-22084" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22086" href="../Substitution/#plfa_plfa-part2-Substitution-22086" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-22088" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-22090" href="../Substitution/#plfa_plfa-part2-Substitution-22075" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-22092" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-22094" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-Substitution-22096" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-22098" href="../Substitution/#plfa_plfa-part2-Substitution-22083" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-22099" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-22101" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-22102" href="../Substitution/#plfa_plfa-part2-Substitution-22102" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-22105" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-22107" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-22113" href="../Substitution/#plfa_plfa-part2-Substitution-22075" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-22115" href="../Substitution/#plfa_plfa-part2-Substitution-22077" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-22116" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22118" href="../Substitution/#plfa_plfa-part2-Substitution-22118" class="Bound">σ₂</a> <a id="plfa_plfa-part2-Substitution-22121" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-22123" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-22129" href="../Substitution/#plfa_plfa-part2-Substitution-22077" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-22131" href="../Substitution/#plfa_plfa-part2-Substitution-22079" class="Bound">Δ′</a><a id="plfa_plfa-part2-Substitution-22133" class="Symbol">}</a>
     <a id="plfa_plfa-part2-Substitution-22140" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-22142" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-22143" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-22148" href="../Substitution/#plfa_plfa-part2-Substitution-22102" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-22151" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-22153" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-22158" href="../Substitution/#plfa_plfa-part2-Substitution-22118" class="Bound">σ₂</a><a id="plfa_plfa-part2-Substitution-22160" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-22162" href="../Substitution/#plfa_plfa-part2-Substitution-22086" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-22164" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-22166" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-22171" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-22172" href="../Substitution/#plfa_plfa-part2-Substitution-22102" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-22175" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-22177" href="../Substitution/#plfa_plfa-part2-Substitution-22118" class="Bound">σ₂</a><a id="plfa_plfa-part2-Substitution-22179" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-22181" href="../Substitution/#plfa_plfa-part2-Substitution-22086" class="Bound">x</a>
  <a id="plfa_plfa-part2-Substitution-22185" href="../Substitution/#plfa_plfa-part2-Substitution-22065" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-22191" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-22192" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-22194" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22196" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-22197" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-22199" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22201" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
  <a id="plfa_plfa-part2-Substitution-22208" href="../Substitution/#plfa_plfa-part2-Substitution-22065" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-22214" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-22215" class="Argument">A</a> <a id="plfa_plfa-part2-Substitution-22217" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22219" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-22220" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22222" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-22224" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22226" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-22228" href="../Substitution/#plfa_plfa-part2-Substitution-22228" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-22229" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22231" href="../Substitution/#plfa_plfa-part2-Substitution-22231" class="Bound">σ₁</a><a id="plfa_plfa-part2-Substitution-22233" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22235" href="../Substitution/#plfa_plfa-part2-Substitution-22235" class="Bound">σ₂</a><a id="plfa_plfa-part2-Substitution-22237" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-22239" class="Symbol">=</a>
     <a id="plfa_plfa-part2-Substitution-22246" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
       <a id="plfa_plfa-part2-Substitution-22259" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-22260" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-22265" href="../Substitution/#plfa_plfa-part2-Substitution-22231" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-22268" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-22270" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-22275" href="../Substitution/#plfa_plfa-part2-Substitution-22235" class="Bound">σ₂</a><a id="plfa_plfa-part2-Substitution-22277" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-22279" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-22280" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part2-Substitution-22282" href="../Substitution/#plfa_plfa-part2-Substitution-22228" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-22283" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-22290" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11079" class="Function">≡⟨⟩</a>
       <a id="plfa_plfa-part2-Substitution-22301" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-22303" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-22308" href="../Substitution/#plfa_plfa-part2-Substitution-22235" class="Bound">σ₂</a> <a id="plfa_plfa-part2-Substitution-22311" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-22313" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-22314" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-22321" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Substitution-22324" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-22325" href="../Substitution/#plfa_plfa-part2-Substitution-22231" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-22328" href="../Substitution/#plfa_plfa-part2-Substitution-22228" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-22329" class="Symbol">))</a>
     <a id="plfa_plfa-part2-Substitution-22337" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-22340" href="../Substitution/#plfa_plfa-part2-Substitution-19468" class="Function">commute-subst-rename</a><a id="plfa_plfa-part2-Substitution-22360" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-22361" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-22363" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22365" href="../Substitution/#plfa_plfa-part2-Substitution-22231" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-22368" href="../Substitution/#plfa_plfa-part2-Substitution-22228" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-22369" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22371" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-22373" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22375" href="../Substitution/#plfa_plfa-part2-Substitution-22235" class="Bound">σ₂</a><a id="plfa_plfa-part2-Substitution-22377" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22379" class="Argument">ρ₁</a> <a id="plfa_plfa-part2-Substitution-22382" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22384" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part2-Substitution-22386" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22388" class="Argument">ρ₂</a> <a id="plfa_plfa-part2-Substitution-22391" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22393" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part2-Substitution-22395" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-22397" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-22402" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-22411" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-22418" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Substitution-22421" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-22422" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-22424" href="../Substitution/#plfa_plfa-part2-Substitution-22235" class="Bound">σ₂</a> <a id="plfa_plfa-part2-Substitution-22427" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-22429" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-22430" href="../Substitution/#plfa_plfa-part2-Substitution-22231" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-22433" href="../Substitution/#plfa_plfa-part2-Substitution-22228" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-22434" class="Symbol">))</a>
     <a id="plfa_plfa-part2-Substitution-22442" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11079" class="Function">≡⟨⟩</a>
       <a id="plfa_plfa-part2-Substitution-22453" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-22460" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part2-Substitution-22463" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-22465" href="../Substitution/#plfa_plfa-part2-Substitution-22231" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-22468" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-22470" href="../Substitution/#plfa_plfa-part2-Substitution-22235" class="Bound">σ₂</a><a id="plfa_plfa-part2-Substitution-22472" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-22474" href="../Substitution/#plfa_plfa-part2-Substitution-22228" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-22475" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-22482" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
</pre><p>The proof proceed by cases on <code>x</code>.</p><ul><li><p>If <code>x = Z</code>, the two sides are equal by the definition of <code>exts</code> and sequencing.</p></li><li><p>If <code>x = S x</code>, we unfold the first use of <code>exts</code> and sequencing, then apply the lemma <code>commute-subst-rename</code>. We conclude by the definition of sequencing.</p></li></ul><p>Now we come to the proof of <code>sub-sub</code>, which we explain below.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-sub-sub"></a><a id="plfa_plfa-part2-Substitution-22844" href="../Substitution/#plfa_plfa-part2-Substitution-22844" class="Function">sub-sub</a> <a id="plfa_plfa-part2-Substitution-22852" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-22854" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-22856" href="../Substitution/#plfa_plfa-part2-Substitution-22856" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-22858" href="../Substitution/#plfa_plfa-part2-Substitution-22858" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-22860" href="../Substitution/#plfa_plfa-part2-Substitution-22860" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-22861" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22863" href="../Substitution/#plfa_plfa-part2-Substitution-22863" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-22864" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22866" href="../Substitution/#plfa_plfa-part2-Substitution-22866" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-22868" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-22870" href="../Substitution/#plfa_plfa-part2-Substitution-22856" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-22872" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-22874" href="../Substitution/#plfa_plfa-part2-Substitution-22863" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-22875" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-22877" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-22878" href="../Substitution/#plfa_plfa-part2-Substitution-22878" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-22881" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-22883" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-22889" href="../Substitution/#plfa_plfa-part2-Substitution-22856" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-22891" href="../Substitution/#plfa_plfa-part2-Substitution-22858" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-22892" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22894" href="../Substitution/#plfa_plfa-part2-Substitution-22894" class="Bound">σ₂</a> <a id="plfa_plfa-part2-Substitution-22897" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-22899" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-22905" href="../Substitution/#plfa_plfa-part2-Substitution-22858" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-22907" href="../Substitution/#plfa_plfa-part2-Substitution-22860" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-22908" class="Symbol">}</a>
            <a id="plfa_plfa-part2-Substitution-22922" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-22924" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-22926" href="../Substitution/#plfa_plfa-part2-Substitution-22894" class="Bound">σ₂</a> <a id="plfa_plfa-part2-Substitution-22929" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-22931" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-22932" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-22934" href="../Substitution/#plfa_plfa-part2-Substitution-22878" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-22937" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-22939" href="../Substitution/#plfa_plfa-part2-Substitution-22866" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-22940" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-22942" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-22944" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-22946" href="../Substitution/#plfa_plfa-part2-Substitution-22878" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-22949" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-22951" href="../Substitution/#plfa_plfa-part2-Substitution-22894" class="Bound">σ₂</a> <a id="plfa_plfa-part2-Substitution-22954" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-22956" href="../Substitution/#plfa_plfa-part2-Substitution-22866" class="Bound">M</a>
<a id="plfa_plfa-part2-Substitution-22958" href="../Substitution/#plfa_plfa-part2-Substitution-22844" class="Function">sub-sub</a> <a id="plfa_plfa-part2-Substitution-22966" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-22967" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-22969" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22971" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-22973" href="../Substitution/#plfa_plfa-part2-Substitution-22973" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-22974" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-22976" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-22978" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part2-Substitution-22983" href="../Substitution/#plfa_plfa-part2-Substitution-22844" class="Function">sub-sub</a> <a id="plfa_plfa-part2-Substitution-22991" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-22992" href="../Substitution/#plfa_plfa-part2-Substitution-22992" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-22993" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22995" href="../Substitution/#plfa_plfa-part2-Substitution-22995" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-22996" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-22998" href="../Substitution/#plfa_plfa-part2-Substitution-22998" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-22999" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-23001" href="../Substitution/#plfa_plfa-part2-Substitution-23001" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-23002" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-23004" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-23006" href="../Substitution/#plfa_plfa-part2-Substitution-23006" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-23007" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-23009" href="../Substitution/#plfa_plfa-part2-Substitution-23009" class="Bound">σ₁</a><a id="plfa_plfa-part2-Substitution-23011" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-23013" href="../Substitution/#plfa_plfa-part2-Substitution-23013" class="Bound">σ₂</a><a id="plfa_plfa-part2-Substitution-23015" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-23017" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-23022" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
     <a id="plfa_plfa-part2-Substitution-23033" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-23035" href="../Substitution/#plfa_plfa-part2-Substitution-23013" class="Bound">σ₂</a> <a id="plfa_plfa-part2-Substitution-23038" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-23040" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-23041" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-23043" href="../Substitution/#plfa_plfa-part2-Substitution-23009" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-23046" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-23048" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-23049" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-23051" href="../Substitution/#plfa_plfa-part2-Substitution-23006" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-23052" class="Symbol">))</a>
   <a id="plfa_plfa-part2-Substitution-23058" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11079" class="Function">≡⟨⟩</a>
     <a id="plfa_plfa-part2-Substitution-23067" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-23069" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-23071" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-23076" href="../Substitution/#plfa_plfa-part2-Substitution-23013" class="Bound">σ₂</a> <a id="plfa_plfa-part2-Substitution-23079" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-23081" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-23082" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-23084" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-23089" href="../Substitution/#plfa_plfa-part2-Substitution-23009" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-23092" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-23094" href="../Substitution/#plfa_plfa-part2-Substitution-23006" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-23095" class="Symbol">)</a>
   <a id="plfa_plfa-part2-Substitution-23100" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-23103" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-23108" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ_</a> <a id="plfa_plfa-part2-Substitution-23111" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-23112" href="../Substitution/#plfa_plfa-part2-Substitution-22844" class="Function">sub-sub</a><a id="plfa_plfa-part2-Substitution-23119" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-23120" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-23122" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-23124" href="../Substitution/#plfa_plfa-part2-Substitution-23006" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-23125" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-23127" class="Argument">σ₁</a> <a id="plfa_plfa-part2-Substitution-23130" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-23132" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-23137" href="../Substitution/#plfa_plfa-part2-Substitution-23009" class="Bound">σ₁</a><a id="plfa_plfa-part2-Substitution-23139" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-23141" class="Argument">σ₂</a> <a id="plfa_plfa-part2-Substitution-23144" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-23146" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-23151" href="../Substitution/#plfa_plfa-part2-Substitution-23013" class="Bound">σ₂</a><a id="plfa_plfa-part2-Substitution-23153" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-23156" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
     <a id="plfa_plfa-part2-Substitution-23163" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-23165" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-23167" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-23172" href="../Substitution/#plfa_plfa-part2-Substitution-23009" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-23175" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-23177" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-23182" href="../Substitution/#plfa_plfa-part2-Substitution-23013" class="Bound">σ₂</a> <a id="plfa_plfa-part2-Substitution-23185" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-23187" href="../Substitution/#plfa_plfa-part2-Substitution-23006" class="Bound">N</a>
   <a id="plfa_plfa-part2-Substitution-23192" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-23195" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-23200" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ_</a> <a id="plfa_plfa-part2-Substitution-23203" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-23204" href="../Substitution/#plfa_plfa-part2-Substitution-10991" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-23212" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-23213" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-23215" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-23217" href="../Substitution/#plfa_plfa-part2-Substitution-23006" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-23218" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-23220" class="Symbol">(λ</a> <a id="plfa_plfa-part2-Substitution-23223" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-23224" href="../Substitution/#plfa_plfa-part2-Substitution-23224" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-23225" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-23227" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-23229" href="../Substitution/#plfa_plfa-part2-Substitution-21893" class="Function">exts-seq</a><a id="plfa_plfa-part2-Substitution-23237" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-23239" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Substitution-23243" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-23245" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
     <a id="plfa_plfa-part2-Substitution-23252" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Substitution-23254" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-23256" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-23261" class="Symbol">(</a> <a id="plfa_plfa-part2-Substitution-23263" href="../Substitution/#plfa_plfa-part2-Substitution-23009" class="Bound">σ₁</a> <a id="plfa_plfa-part2-Substitution-23266" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-23268" href="../Substitution/#plfa_plfa-part2-Substitution-23013" class="Bound">σ₂</a><a id="plfa_plfa-part2-Substitution-23270" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-23272" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-23274" href="../Substitution/#plfa_plfa-part2-Substitution-23006" class="Bound">N</a>
   <a id="plfa_plfa-part2-Substitution-23279" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
<a id="plfa_plfa-part2-Substitution-23281" href="../Substitution/#plfa_plfa-part2-Substitution-22844" class="Function">sub-sub</a> <a id="plfa_plfa-part2-Substitution-23289" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-23290" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-23292" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-23294" href="../Substitution/#plfa_plfa-part2-Substitution-23294" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-23296" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Substitution-23298" href="../Substitution/#plfa_plfa-part2-Substitution-23298" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-23299" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-23301" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-23303" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1576" class="Function">cong₂</a> <a id="plfa_plfa-part2-Substitution-23309" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">_·_</a> <a id="plfa_plfa-part2-Substitution-23313" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-23314" href="../Substitution/#plfa_plfa-part2-Substitution-22844" class="Function">sub-sub</a><a id="plfa_plfa-part2-Substitution-23321" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-23322" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-23324" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-23326" href="../Substitution/#plfa_plfa-part2-Substitution-23294" class="Bound">L</a><a id="plfa_plfa-part2-Substitution-23327" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-23330" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-23331" href="../Substitution/#plfa_plfa-part2-Substitution-22844" class="Function">sub-sub</a><a id="plfa_plfa-part2-Substitution-23338" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-23339" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-23341" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-23343" href="../Substitution/#plfa_plfa-part2-Substitution-23298" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-23344" class="Symbol">})</a>
</pre><p>We proceed by induction on the term <code>M</code>.</p><ul><li><p>If <code>M = x</code>, then both sides are equal to <code>σ₂ (σ₁ x)</code>.</p></li><li><p>If <code>M = ƛ N</code>, we first use the induction hypothesis to show that</p><pre><code>  ƛ ⟪ exts σ₂ ⟫ (⟪ exts σ₁ ⟫ N) ≡ ƛ ⟪ exts σ₁ ⨟ exts σ₂ ⟫ N</code></pre><p>and then use the lemma <code>exts-seq</code> to show</p><pre><code>  ƛ ⟪ exts σ₁ ⨟ exts σ₂ ⟫ N ≡ ƛ ⟪ exts ( σ₁ ⨟ σ₂) ⟫ N</code></pre></li><li><p>If <code>M</code> is an application, we use the induction hypothesis for both subterms.</p></li></ul><p>The following corollary of <code>sub-sub</code> specializes the first substitution to a renaming.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-rename-subst"></a><a id="plfa_plfa-part2-Substitution-23871" href="../Substitution/#plfa_plfa-part2-Substitution-23871" class="Function">rename-subst</a> <a id="plfa_plfa-part2-Substitution-23884" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-23886" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-23888" href="../Substitution/#plfa_plfa-part2-Substitution-23888" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-23890" href="../Substitution/#plfa_plfa-part2-Substitution-23890" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-23892" href="../Substitution/#plfa_plfa-part2-Substitution-23892" class="Bound">Δ′</a><a id="plfa_plfa-part2-Substitution-23894" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-23896" href="../Substitution/#plfa_plfa-part2-Substitution-23896" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-23898" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-23900" href="../Substitution/#plfa_plfa-part2-Substitution-23888" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-23902" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-23904" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-23905" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-23907" href="../Substitution/#plfa_plfa-part2-Substitution-23907" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-23909" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-23911" href="../Substitution/#plfa_plfa-part2-Substitution-2133" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-23918" href="../Substitution/#plfa_plfa-part2-Substitution-23888" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-23920" href="../Substitution/#plfa_plfa-part2-Substitution-23890" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-23921" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-23923" href="../Substitution/#plfa_plfa-part2-Substitution-23923" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-23925" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-23927" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-23933" href="../Substitution/#plfa_plfa-part2-Substitution-23890" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-23935" href="../Substitution/#plfa_plfa-part2-Substitution-23892" class="Bound">Δ′</a><a id="plfa_plfa-part2-Substitution-23937" class="Symbol">}</a>
             <a id="plfa_plfa-part2-Substitution-23952" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-23954" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-23956" href="../Substitution/#plfa_plfa-part2-Substitution-23923" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-23958" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-23960" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-23961" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-23968" href="../Substitution/#plfa_plfa-part2-Substitution-23907" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-23970" href="../Substitution/#plfa_plfa-part2-Substitution-23896" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-23971" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-23973" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-23975" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-23977" href="../Substitution/#plfa_plfa-part2-Substitution-23923" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-23979" href="https://agda.github.io/agda-stdlib/v2.1/Function.Base.html#1115" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-23981" href="../Substitution/#plfa_plfa-part2-Substitution-23907" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-23983" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-23985" href="../Substitution/#plfa_plfa-part2-Substitution-23896" class="Bound">M</a>
<a id="plfa_plfa-part2-Substitution-23987" href="../Substitution/#plfa_plfa-part2-Substitution-23871" class="Function">rename-subst</a> <a id="plfa_plfa-part2-Substitution-24000" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-24001" href="../Substitution/#plfa_plfa-part2-Substitution-24001" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-24002" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-24004" href="../Substitution/#plfa_plfa-part2-Substitution-24004" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-24005" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-24007" href="../Substitution/#plfa_plfa-part2-Substitution-24007" class="Bound">Δ′</a><a id="plfa_plfa-part2-Substitution-24009" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-24011" href="../Substitution/#plfa_plfa-part2-Substitution-24011" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-24012" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-24014" href="../Substitution/#plfa_plfa-part2-Substitution-24014" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-24015" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-24017" href="../Substitution/#plfa_plfa-part2-Substitution-24017" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-24018" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-24020" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-24025" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
     <a id="plfa_plfa-part2-Substitution-24036" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-24038" href="../Substitution/#plfa_plfa-part2-Substitution-24017" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24040" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-24042" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-24043" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-24050" href="../Substitution/#plfa_plfa-part2-Substitution-24014" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-24052" href="../Substitution/#plfa_plfa-part2-Substitution-24011" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-24053" class="Symbol">)</a>
   <a id="plfa_plfa-part2-Substitution-24058" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-24061" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-24066" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-24068" href="../Substitution/#plfa_plfa-part2-Substitution-24017" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24070" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-24072" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-24073" href="../Substitution/#plfa_plfa-part2-Substitution-13493" class="Function">rename-subst-ren</a><a id="plfa_plfa-part2-Substitution-24089" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-24090" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-24092" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-24094" href="../Substitution/#plfa_plfa-part2-Substitution-24011" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-24095" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-24098" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
     <a id="plfa_plfa-part2-Substitution-24105" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-24107" href="../Substitution/#plfa_plfa-part2-Substitution-24017" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24109" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-24111" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-24112" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-24114" href="../Substitution/#plfa_plfa-part2-Substitution-6502" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-24118" href="../Substitution/#plfa_plfa-part2-Substitution-24014" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-24120" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-24122" href="../Substitution/#plfa_plfa-part2-Substitution-24011" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-24123" class="Symbol">)</a>
   <a id="plfa_plfa-part2-Substitution-24128" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-24131" href="../Substitution/#plfa_plfa-part2-Substitution-22844" class="Function">sub-sub</a><a id="plfa_plfa-part2-Substitution-24138" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-24139" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-24141" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-24143" href="../Substitution/#plfa_plfa-part2-Substitution-24011" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-24144" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-24146" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
     <a id="plfa_plfa-part2-Substitution-24153" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-24155" href="../Substitution/#plfa_plfa-part2-Substitution-6502" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-24159" href="../Substitution/#plfa_plfa-part2-Substitution-24014" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-24161" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24163" href="../Substitution/#plfa_plfa-part2-Substitution-24017" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24165" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-24167" href="../Substitution/#plfa_plfa-part2-Substitution-24011" class="Bound">M</a>
   <a id="plfa_plfa-part2-Substitution-24172" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11079" class="Function">≡⟨⟩</a>
     <a id="plfa_plfa-part2-Substitution-24181" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-24183" href="../Substitution/#plfa_plfa-part2-Substitution-24017" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24185" href="https://agda.github.io/agda-stdlib/v2.1/Function.Base.html#1115" class="Function Operator">∘</a> <a id="plfa_plfa-part2-Substitution-24187" href="../Substitution/#plfa_plfa-part2-Substitution-24014" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-24189" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-24191" href="../Substitution/#plfa_plfa-part2-Substitution-24011" class="Bound">M</a>
   <a id="plfa_plfa-part2-Substitution-24196" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
</pre><h2 id="proof-of-sub-assoc">Proof of sub-assoc</h2><p>The proof of <code>sub-assoc</code> follows directly from <code>sub-sub</code> and the definition of sequencing.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-sub-assoc"></a><a id="plfa_plfa-part2-Substitution-24327" href="../Substitution/#plfa_plfa-part2-Substitution-24327" class="Function">sub-assoc</a> <a id="plfa_plfa-part2-Substitution-24337" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-24339" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-24341" href="../Substitution/#plfa_plfa-part2-Substitution-24341" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-24343" href="../Substitution/#plfa_plfa-part2-Substitution-24343" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-24345" href="../Substitution/#plfa_plfa-part2-Substitution-24345" class="Bound">Σ</a> <a id="plfa_plfa-part2-Substitution-24347" href="../Substitution/#plfa_plfa-part2-Substitution-24347" class="Bound">Ψ</a> <a id="plfa_plfa-part2-Substitution-24349" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-24351" href="../Untyped/#plfa_plfa-part2-Untyped-2750" class="Datatype">Context</a><a id="plfa_plfa-part2-Substitution-24358" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-24360" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-24361" href="../Substitution/#plfa_plfa-part2-Substitution-24361" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24363" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-24365" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-24371" href="../Substitution/#plfa_plfa-part2-Substitution-24341" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-24373" href="../Substitution/#plfa_plfa-part2-Substitution-24343" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-24374" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-24376" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-24377" href="../Substitution/#plfa_plfa-part2-Substitution-24377" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-24379" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-24381" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-24387" href="../Substitution/#plfa_plfa-part2-Substitution-24343" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-24389" href="../Substitution/#plfa_plfa-part2-Substitution-24345" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-24390" class="Symbol">}</a>
             <a id="plfa_plfa-part2-Substitution-24405" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-24406" href="../Substitution/#plfa_plfa-part2-Substitution-24406" class="Bound">θ</a> <a id="plfa_plfa-part2-Substitution-24408" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-24410" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-24416" href="../Substitution/#plfa_plfa-part2-Substitution-24345" class="Bound">Σ</a> <a id="plfa_plfa-part2-Substitution-24418" href="../Substitution/#plfa_plfa-part2-Substitution-24347" class="Bound">Ψ</a><a id="plfa_plfa-part2-Substitution-24419" class="Symbol">}</a>
          <a id="plfa_plfa-part2-Substitution-24431" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-24433" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-24435" href="../Substitution/#plfa_plfa-part2-Substitution-24435" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-24436" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-24438" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-24440" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-24441" href="../Substitution/#plfa_plfa-part2-Substitution-24361" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24443" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24445" href="../Substitution/#plfa_plfa-part2-Substitution-24377" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-24446" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-24448" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24450" href="../Substitution/#plfa_plfa-part2-Substitution-24406" class="Bound">θ</a> <a id="plfa_plfa-part2-Substitution-24452" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-24454" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-24455" href="../Substitution/#plfa_plfa-part2-Substitution-24361" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24457" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24459" href="../Substitution/#plfa_plfa-part2-Substitution-24377" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-24461" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24463" href="../Substitution/#plfa_plfa-part2-Substitution-24406" class="Bound">θ</a><a id="plfa_plfa-part2-Substitution-24464" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-24466" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-24467" href="../Substitution/#plfa_plfa-part2-Substitution-24435" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-24468" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-24470" href="../Substitution/#plfa_plfa-part2-Substitution-24327" class="Function">sub-assoc</a> <a id="plfa_plfa-part2-Substitution-24480" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-24481" href="../Substitution/#plfa_plfa-part2-Substitution-24481" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-24482" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-24484" href="../Substitution/#plfa_plfa-part2-Substitution-24484" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-24485" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-24487" href="../Substitution/#plfa_plfa-part2-Substitution-24487" class="Bound">Σ</a><a id="plfa_plfa-part2-Substitution-24488" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-24490" href="../Substitution/#plfa_plfa-part2-Substitution-24490" class="Bound">Ψ</a><a id="plfa_plfa-part2-Substitution-24491" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-24493" href="../Substitution/#plfa_plfa-part2-Substitution-24493" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-24494" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-24496" href="../Substitution/#plfa_plfa-part2-Substitution-24496" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-24497" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-24499" href="../Substitution/#plfa_plfa-part2-Substitution-24499" class="Bound">θ</a><a id="plfa_plfa-part2-Substitution-24500" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-24502" href="../Substitution/#plfa_plfa-part2-Substitution-24502" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-24503" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-24505" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-24507" href="../Substitution/#plfa_plfa-part2-Substitution-1864" class="Postulate">extensionality</a> <a id="plfa_plfa-part2-Substitution-24522" class="Symbol">λ</a> <a id="plfa_plfa-part2-Substitution-24524" href="../Substitution/#plfa_plfa-part2-Substitution-24524" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-24526" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-24528" href="../Substitution/#plfa_plfa-part2-Substitution-24551" class="Function">lemma</a><a id="plfa_plfa-part2-Substitution-24533" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-24534" class="Argument">x</a> <a id="plfa_plfa-part2-Substitution-24536" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-24538" href="../Substitution/#plfa_plfa-part2-Substitution-24524" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-24539" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Substitution-24543" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Substitution-24551" href="../Substitution/#plfa_plfa-part2-Substitution-24551" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-24557" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-24559" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-24561" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-24562" href="../Substitution/#plfa_plfa-part2-Substitution-24562" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-24564" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-24566" href="../Substitution/#plfa_plfa-part2-Substitution-24481" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-24568" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Substitution-24570" href="../Substitution/#plfa_plfa-part2-Substitution-24502" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-24571" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-24573" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-24575" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-24577" href="../Substitution/#plfa_plfa-part2-Substitution-24493" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24579" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24581" href="../Substitution/#plfa_plfa-part2-Substitution-24496" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-24582" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-24584" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24586" href="../Substitution/#plfa_plfa-part2-Substitution-24499" class="Bound">θ</a><a id="plfa_plfa-part2-Substitution-24587" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-24589" href="../Substitution/#plfa_plfa-part2-Substitution-24562" class="Bound">x</a> <a id="plfa_plfa-part2-Substitution-24591" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-24593" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-24594" href="../Substitution/#plfa_plfa-part2-Substitution-24493" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24596" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24598" href="../Substitution/#plfa_plfa-part2-Substitution-24496" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-24600" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24602" href="../Substitution/#plfa_plfa-part2-Substitution-24499" class="Bound">θ</a><a id="plfa_plfa-part2-Substitution-24603" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-24605" href="../Substitution/#plfa_plfa-part2-Substitution-24562" class="Bound">x</a>
  <a id="plfa_plfa-part2-Substitution-24609" href="../Substitution/#plfa_plfa-part2-Substitution-24551" class="Function">lemma</a> <a id="plfa_plfa-part2-Substitution-24615" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-24616" href="../Substitution/#plfa_plfa-part2-Substitution-24616" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-24617" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-24619" class="Symbol">=</a>
      <a id="plfa_plfa-part2-Substitution-24627" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
        <a id="plfa_plfa-part2-Substitution-24641" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-24643" href="../Substitution/#plfa_plfa-part2-Substitution-24493" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24645" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24647" href="../Substitution/#plfa_plfa-part2-Substitution-24496" class="Bound">τ</a><a id="plfa_plfa-part2-Substitution-24648" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-24650" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24652" href="../Substitution/#plfa_plfa-part2-Substitution-24499" class="Bound">θ</a><a id="plfa_plfa-part2-Substitution-24653" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-24655" href="../Substitution/#plfa_plfa-part2-Substitution-24616" class="Bound">x</a>
      <a id="plfa_plfa-part2-Substitution-24663" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11079" class="Function">≡⟨⟩</a>
        <a id="plfa_plfa-part2-Substitution-24675" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-24677" href="../Substitution/#plfa_plfa-part2-Substitution-24499" class="Bound">θ</a> <a id="plfa_plfa-part2-Substitution-24679" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-24681" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-24682" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-24684" href="../Substitution/#plfa_plfa-part2-Substitution-24496" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-24686" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-24688" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-24689" href="../Substitution/#plfa_plfa-part2-Substitution-24493" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24691" href="../Substitution/#plfa_plfa-part2-Substitution-24616" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-24692" class="Symbol">))</a>
      <a id="plfa_plfa-part2-Substitution-24701" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-24704" href="../Substitution/#plfa_plfa-part2-Substitution-22844" class="Function">sub-sub</a><a id="plfa_plfa-part2-Substitution-24711" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-24712" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-24714" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-24716" href="../Substitution/#plfa_plfa-part2-Substitution-24493" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24718" href="../Substitution/#plfa_plfa-part2-Substitution-24616" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-24719" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-24721" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
        <a id="plfa_plfa-part2-Substitution-24731" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-24733" href="../Substitution/#plfa_plfa-part2-Substitution-24496" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-24735" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24737" href="../Substitution/#plfa_plfa-part2-Substitution-24499" class="Bound">θ</a> <a id="plfa_plfa-part2-Substitution-24739" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-24741" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-24742" href="../Substitution/#plfa_plfa-part2-Substitution-24493" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24744" href="../Substitution/#plfa_plfa-part2-Substitution-24616" class="Bound">x</a><a id="plfa_plfa-part2-Substitution-24745" class="Symbol">)</a>
      <a id="plfa_plfa-part2-Substitution-24753" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11079" class="Function">≡⟨⟩</a>
        <a id="plfa_plfa-part2-Substitution-24765" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-24766" href="../Substitution/#plfa_plfa-part2-Substitution-24493" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-24768" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24770" href="../Substitution/#plfa_plfa-part2-Substitution-24496" class="Bound">τ</a> <a id="plfa_plfa-part2-Substitution-24772" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-24774" href="../Substitution/#plfa_plfa-part2-Substitution-24499" class="Bound">θ</a><a id="plfa_plfa-part2-Substitution-24775" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-24777" href="../Substitution/#plfa_plfa-part2-Substitution-24616" class="Bound">x</a>
      <a id="plfa_plfa-part2-Substitution-24785" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
</pre><h2 id="proof-of-subst-zero-exts-cons">Proof of subst-zero-exts-cons</h2><p>The last equation we needed to prove <code>subst-zero-exts-cons</code> was <code>sub-assoc</code>, so we can now go ahead with its proof. We simply apply the equations for <code>exts</code> and <code>subst-zero</code> and then apply the σ algebra equation to arrive at the normal form <code>M • σ</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-subst-zero-exts-cons"></a><a id="plfa_plfa-part2-Substitution-25086" href="../Substitution/#plfa_plfa-part2-Substitution-25086" class="Function">subst-zero-exts-cons</a> <a id="plfa_plfa-part2-Substitution-25107" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-25109" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-25111" href="../Substitution/#plfa_plfa-part2-Substitution-25111" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-25113" href="../Substitution/#plfa_plfa-part2-Substitution-25113" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-25114" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-25116" href="../Substitution/#plfa_plfa-part2-Substitution-25116" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-25118" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-25120" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-25126" href="../Substitution/#plfa_plfa-part2-Substitution-25111" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-25128" href="../Substitution/#plfa_plfa-part2-Substitution-25113" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-25129" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-25131" href="../Substitution/#plfa_plfa-part2-Substitution-25131" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-25132" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-25134" href="../Substitution/#plfa_plfa-part2-Substitution-25134" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25136" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-25138" href="../Substitution/#plfa_plfa-part2-Substitution-25113" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-25140" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-25142" href="../Substitution/#plfa_plfa-part2-Substitution-25131" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-25143" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-25145" href="../Substitution/#plfa_plfa-part2-Substitution-25145" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-25146" class="Symbol">}</a>
                     <a id="plfa_plfa-part2-Substitution-25169" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-25171" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-25176" href="../Substitution/#plfa_plfa-part2-Substitution-25116" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-25178" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-25180" href="../Untyped/#plfa_plfa-part2-Untyped-7175" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Substitution-25191" href="../Substitution/#plfa_plfa-part2-Substitution-25134" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25193" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-25195" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25196" href="../Substitution/#plfa_plfa-part2-Substitution-25134" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25198" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25200" href="../Substitution/#plfa_plfa-part2-Substitution-25116" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-25201" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-25203" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-25204" href="../Substitution/#plfa_plfa-part2-Substitution-25145" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-25205" class="Symbol">}</a>
<a id="plfa_plfa-part2-Substitution-25207" href="../Substitution/#plfa_plfa-part2-Substitution-25086" class="Function">subst-zero-exts-cons</a> <a id="plfa_plfa-part2-Substitution-25228" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-25229" href="../Substitution/#plfa_plfa-part2-Substitution-25229" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-25230" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-25232" href="../Substitution/#plfa_plfa-part2-Substitution-25232" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-25233" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-25235" href="../Substitution/#plfa_plfa-part2-Substitution-25235" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-25236" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-25238" href="../Substitution/#plfa_plfa-part2-Substitution-25238" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-25239" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-25241" href="../Substitution/#plfa_plfa-part2-Substitution-25241" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-25242" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-25244" href="../Substitution/#plfa_plfa-part2-Substitution-25244" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-25245" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-25247" class="Symbol">=</a>
    <a id="plfa_plfa-part2-Substitution-25253" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
      <a id="plfa_plfa-part2-Substitution-25265" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-25270" href="../Substitution/#plfa_plfa-part2-Substitution-25235" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-25272" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-25274" href="../Untyped/#plfa_plfa-part2-Untyped-7175" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Substitution-25285" href="../Substitution/#plfa_plfa-part2-Substitution-25241" class="Bound">M</a>
    <a id="plfa_plfa-part2-Substitution-25291" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-25294" href="../Substitution/#plfa_plfa-part2-Substitution-12087" class="Function">cong-seq</a> <a id="plfa_plfa-part2-Substitution-25303" href="../Substitution/#plfa_plfa-part2-Substitution-14869" class="Function">exts-cons-shift</a> <a id="plfa_plfa-part2-Substitution-25319" href="../Substitution/#plfa_plfa-part2-Substitution-15658" class="Function">subst-Z-cons-ids</a> <a id="plfa_plfa-part2-Substitution-25336" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
      <a id="plfa_plfa-part2-Substitution-25344" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25345" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-25347" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-Substitution-25349" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25351" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25352" href="../Substitution/#plfa_plfa-part2-Substitution-25235" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-25354" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-25356" href="../Substitution/#plfa_plfa-part2-Substitution-3148" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-25357" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-25360" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-25362" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25363" href="../Substitution/#plfa_plfa-part2-Substitution-25241" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25365" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25367" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-25370" class="Symbol">)</a>
    <a id="plfa_plfa-part2-Substitution-25376" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-25379" href="../Substitution/#plfa_plfa-part2-Substitution-9102" class="Function">sub-dist</a> <a id="plfa_plfa-part2-Substitution-25388" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
      <a id="plfa_plfa-part2-Substitution-25396" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25397" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-25399" href="../Substitution/#plfa_plfa-part2-Substitution-25241" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25401" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25403" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-25407" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-25409" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25410" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-25412" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-25413" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-25416" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25418" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-25420" href="../Substitution/#plfa_plfa-part2-Substitution-25235" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-25422" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-25424" href="../Substitution/#plfa_plfa-part2-Substitution-3148" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-25425" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-25427" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-25429" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25430" href="../Substitution/#plfa_plfa-part2-Substitution-25241" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25432" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25434" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-25437" class="Symbol">))</a>
    <a id="plfa_plfa-part2-Substitution-25444" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-25447" href="../Substitution/#plfa_plfa-part2-Substitution-11738" class="Function">cong-cons</a> <a id="plfa_plfa-part2-Substitution-25457" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25458" href="../Substitution/#plfa_plfa-part2-Substitution-8267" class="Function">sub-head</a><a id="plfa_plfa-part2-Substitution-25466" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-25467" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-25469" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-25471" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-25474" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-25477" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-25482" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
      <a id="plfa_plfa-part2-Substitution-25490" href="../Substitution/#plfa_plfa-part2-Substitution-25241" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25492" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25494" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-25496" href="../Substitution/#plfa_plfa-part2-Substitution-25235" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-25498" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-25500" href="../Substitution/#plfa_plfa-part2-Substitution-3148" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-25501" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-25503" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-25505" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25506" href="../Substitution/#plfa_plfa-part2-Substitution-25241" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25508" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25510" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-25513" class="Symbol">))</a>
    <a id="plfa_plfa-part2-Substitution-25520" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-25523" href="../Substitution/#plfa_plfa-part2-Substitution-11738" class="Function">cong-cons</a> <a id="plfa_plfa-part2-Substitution-25533" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-25538" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25539" href="../Substitution/#plfa_plfa-part2-Substitution-24327" class="Function">sub-assoc</a><a id="plfa_plfa-part2-Substitution-25548" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-25549" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-25551" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-25553" href="../Substitution/#plfa_plfa-part2-Substitution-25235" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-25554" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-25557" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
      <a id="plfa_plfa-part2-Substitution-25565" href="../Substitution/#plfa_plfa-part2-Substitution-25241" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25567" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25569" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25570" href="../Substitution/#plfa_plfa-part2-Substitution-25235" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-25572" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-25574" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25575" href="../Substitution/#plfa_plfa-part2-Substitution-3148" class="Function">↑</a> <a id="plfa_plfa-part2-Substitution-25577" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-25579" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25580" href="../Substitution/#plfa_plfa-part2-Substitution-25241" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25582" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25584" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-25587" class="Symbol">)))</a>
    <a id="plfa_plfa-part2-Substitution-25595" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-25598" href="../Substitution/#plfa_plfa-part2-Substitution-11738" class="Function">cong-cons</a> <a id="plfa_plfa-part2-Substitution-25608" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-25613" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25614" href="../Substitution/#plfa_plfa-part2-Substitution-12087" class="Function">cong-seq</a><a id="plfa_plfa-part2-Substitution-25622" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-25623" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-25625" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-25627" href="../Substitution/#plfa_plfa-part2-Substitution-25235" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-25628" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-25630" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-25635" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25636" href="../Substitution/#plfa_plfa-part2-Substitution-8377" class="Function">sub-tail</a><a id="plfa_plfa-part2-Substitution-25644" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-25645" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-25647" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-25649" href="../Substitution/#plfa_plfa-part2-Substitution-25241" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-25650" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-25652" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-25654" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-25656" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-25659" class="Symbol">}))</a> <a id="plfa_plfa-part2-Substitution-25663" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
      <a id="plfa_plfa-part2-Substitution-25671" href="../Substitution/#plfa_plfa-part2-Substitution-25241" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25673" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25675" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25676" href="../Substitution/#plfa_plfa-part2-Substitution-25235" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-25678" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-25680" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-25683" class="Symbol">)</a>
    <a id="plfa_plfa-part2-Substitution-25689" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-25692" href="../Substitution/#plfa_plfa-part2-Substitution-11738" class="Function">cong-cons</a> <a id="plfa_plfa-part2-Substitution-25702" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-25707" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-25708" href="../Substitution/#plfa_plfa-part2-Substitution-17543" class="Function">sub-idR</a><a id="plfa_plfa-part2-Substitution-25715" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-25716" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-25718" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-25720" href="../Substitution/#plfa_plfa-part2-Substitution-25235" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-25721" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-25724" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
      <a id="plfa_plfa-part2-Substitution-25732" href="../Substitution/#plfa_plfa-part2-Substitution-25241" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-25734" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-25736" href="../Substitution/#plfa_plfa-part2-Substitution-25235" class="Bound">σ</a>
    <a id="plfa_plfa-part2-Substitution-25742" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
</pre><h2 id="proof-of-the-substitution-lemma">Proof of the substitution lemma</h2><p>We first prove the generalized form of the substitution lemma, showing that a substitution <code>σ</code> commutes with the substitution of <code>M</code> into <code>N</code>.</p><pre><code>⟪ exts σ ⟫ N [ ⟪ σ ⟫ M ] ≡ ⟪ σ ⟫ (N [ M ])</code></pre><p>This proof is where the σ algebra pays off. The proof is by direct equational reasoning. Starting with the left-hand side, we apply σ algebra equations, oriented left-to-right, until we arrive at the normal form</p><pre><code>⟪ ⟪ σ ⟫ M • σ ⟫ N</code></pre><p>We then do the same with the right-hand side, arriving at the same normal form.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-subst-commute"></a><a id="plfa_plfa-part2-Substitution-26304" href="../Substitution/#plfa_plfa-part2-Substitution-26304" class="Function">subst-commute</a> <a id="plfa_plfa-part2-Substitution-26318" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-26320" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-26322" href="../Substitution/#plfa_plfa-part2-Substitution-26322" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-26324" href="../Substitution/#plfa_plfa-part2-Substitution-26324" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-26325" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-26327" href="../Substitution/#plfa_plfa-part2-Substitution-26327" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-26329" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-26331" href="../Substitution/#plfa_plfa-part2-Substitution-26322" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-26333" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-26335" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-Substitution-26337" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-26339" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-26340" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-26342" href="../Substitution/#plfa_plfa-part2-Substitution-26342" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-26344" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-26346" href="../Substitution/#plfa_plfa-part2-Substitution-26322" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-26348" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-26350" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-26351" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-26353" href="../Substitution/#plfa_plfa-part2-Substitution-26353" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26355" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-26357" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part2-Substitution-26363" href="../Substitution/#plfa_plfa-part2-Substitution-26322" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-26365" href="../Substitution/#plfa_plfa-part2-Substitution-26324" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-26367" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Substitution-26373" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-26375" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26377" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-26382" href="../Substitution/#plfa_plfa-part2-Substitution-26353" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26384" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26386" href="../Substitution/#plfa_plfa-part2-Substitution-26327" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-26388" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-26390" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26392" href="../Substitution/#plfa_plfa-part2-Substitution-26353" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26394" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26396" href="../Substitution/#plfa_plfa-part2-Substitution-26342" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-26398" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">]</a> <a id="plfa_plfa-part2-Substitution-26400" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-26402" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26404" href="../Substitution/#plfa_plfa-part2-Substitution-26353" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26406" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26408" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26409" href="../Substitution/#plfa_plfa-part2-Substitution-26327" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-26411" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-26413" href="../Substitution/#plfa_plfa-part2-Substitution-26342" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-26415" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">]</a><a id="plfa_plfa-part2-Substitution-26416" class="Symbol">)</a>
<a id="plfa_plfa-part2-Substitution-26418" href="../Substitution/#plfa_plfa-part2-Substitution-26304" class="Function">subst-commute</a> <a id="plfa_plfa-part2-Substitution-26432" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-26433" href="../Substitution/#plfa_plfa-part2-Substitution-26433" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-26434" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-26436" href="../Substitution/#plfa_plfa-part2-Substitution-26436" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-26437" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-26439" href="../Substitution/#plfa_plfa-part2-Substitution-26439" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-26440" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-26442" href="../Substitution/#plfa_plfa-part2-Substitution-26442" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-26443" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-26445" href="../Substitution/#plfa_plfa-part2-Substitution-26445" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-26446" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-26448" class="Symbol">=</a>
     <a id="plfa_plfa-part2-Substitution-26455" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
       <a id="plfa_plfa-part2-Substitution-26468" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26470" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-26475" href="../Substitution/#plfa_plfa-part2-Substitution-26445" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26477" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26479" href="../Substitution/#plfa_plfa-part2-Substitution-26439" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-26481" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-26483" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26485" href="../Substitution/#plfa_plfa-part2-Substitution-26445" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26487" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26489" href="../Substitution/#plfa_plfa-part2-Substitution-26442" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-26491" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">]</a>
     <a id="plfa_plfa-part2-Substitution-26498" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11079" class="Function">≡⟨⟩</a>
       <a id="plfa_plfa-part2-Substitution-26509" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26511" href="../Untyped/#plfa_plfa-part2-Untyped-7175" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Substitution-26522" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26523" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26525" href="../Substitution/#plfa_plfa-part2-Substitution-26445" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26527" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26529" href="../Substitution/#plfa_plfa-part2-Substitution-26442" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-26530" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-26532" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26534" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26535" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26537" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-26542" href="../Substitution/#plfa_plfa-part2-Substitution-26445" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26544" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26546" href="../Substitution/#plfa_plfa-part2-Substitution-26439" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-26547" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-26554" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-26557" href="../Substitution/#plfa_plfa-part2-Substitution-10991" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-26566" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-26567" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-26569" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-26571" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26573" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-26578" href="../Substitution/#plfa_plfa-part2-Substitution-26445" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26580" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26582" href="../Substitution/#plfa_plfa-part2-Substitution-26439" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-26583" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-26585" href="../Substitution/#plfa_plfa-part2-Substitution-15658" class="Function">subst-Z-cons-ids</a> <a id="plfa_plfa-part2-Substitution-26602" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-26607" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-26616" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26618" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26620" href="../Substitution/#plfa_plfa-part2-Substitution-26445" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26622" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26624" href="../Substitution/#plfa_plfa-part2-Substitution-26442" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-26626" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-26628" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-26632" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26634" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26635" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26637" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-26642" href="../Substitution/#plfa_plfa-part2-Substitution-26445" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26644" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26646" href="../Substitution/#plfa_plfa-part2-Substitution-26439" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-26647" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-26654" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-26657" href="../Substitution/#plfa_plfa-part2-Substitution-22844" class="Function">sub-sub</a> <a id="plfa_plfa-part2-Substitution-26665" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-26666" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-26668" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-26670" href="../Substitution/#plfa_plfa-part2-Substitution-26439" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-26671" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-26673" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-26682" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26684" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26685" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-26690" href="../Substitution/#plfa_plfa-part2-Substitution-26445" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-26691" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-26693" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-26695" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-26697" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26699" href="../Substitution/#plfa_plfa-part2-Substitution-26445" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26701" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26703" href="../Substitution/#plfa_plfa-part2-Substitution-26442" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-26704" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-26706" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-26708" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-26711" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-26713" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26715" href="../Substitution/#plfa_plfa-part2-Substitution-26439" class="Bound">N</a>
     <a id="plfa_plfa-part2-Substitution-26722" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-26725" href="../Substitution/#plfa_plfa-part2-Substitution-10991" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-26734" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-26735" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-26737" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-26739" href="../Substitution/#plfa_plfa-part2-Substitution-26439" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-26740" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-26742" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26743" href="../Substitution/#plfa_plfa-part2-Substitution-12087" class="Function">cong-seq</a> <a id="plfa_plfa-part2-Substitution-26752" href="../Substitution/#plfa_plfa-part2-Substitution-14869" class="Function">exts-cons-shift</a> <a id="plfa_plfa-part2-Substitution-26768" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Substitution-26772" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-26774" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-26779" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-26788" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26790" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26791" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-26793" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-Substitution-26795" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-26797" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26798" href="../Substitution/#plfa_plfa-part2-Substitution-26445" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26800" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-26802" href="../Substitution/#plfa_plfa-part2-Substitution-3148" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-26803" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-26806" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-26808" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26809" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26811" href="../Substitution/#plfa_plfa-part2-Substitution-26445" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26813" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26815" href="../Substitution/#plfa_plfa-part2-Substitution-26442" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-26817" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-26819" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-26822" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-26824" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26826" href="../Substitution/#plfa_plfa-part2-Substitution-26439" class="Bound">N</a>
     <a id="plfa_plfa-part2-Substitution-26833" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-26836" href="../Substitution/#plfa_plfa-part2-Substitution-10991" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-26845" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-26846" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-26848" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-26850" href="../Substitution/#plfa_plfa-part2-Substitution-26439" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-26851" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-26853" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26854" href="../Substitution/#plfa_plfa-part2-Substitution-9102" class="Function">sub-dist</a> <a id="plfa_plfa-part2-Substitution-26863" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-26864" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-26866" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-26868" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-26870" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-26871" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-26874" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-26879" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-26888" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26890" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26892" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26894" href="../Substitution/#plfa_plfa-part2-Substitution-26445" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26896" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26898" href="../Substitution/#plfa_plfa-part2-Substitution-26442" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-26900" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-26902" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-26906" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26908" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26909" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Substitution-26911" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a><a id="plfa_plfa-part2-Substitution-26912" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-26914" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-26916" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-26918" href="../Substitution/#plfa_plfa-part2-Substitution-26445" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26920" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-26922" href="../Substitution/#plfa_plfa-part2-Substitution-3148" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-26923" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-26925" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-26927" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26928" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26930" href="../Substitution/#plfa_plfa-part2-Substitution-26445" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26932" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26934" href="../Substitution/#plfa_plfa-part2-Substitution-26442" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-26936" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-26938" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-26941" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-26944" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26946" href="../Substitution/#plfa_plfa-part2-Substitution-26439" class="Bound">N</a>
     <a id="plfa_plfa-part2-Substitution-26953" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11079" class="Function">≡⟨⟩</a>
       <a id="plfa_plfa-part2-Substitution-26964" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26966" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26968" href="../Substitution/#plfa_plfa-part2-Substitution-26445" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26970" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26972" href="../Substitution/#plfa_plfa-part2-Substitution-26442" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-26974" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-26976" class="Symbol">((</a><a id="plfa_plfa-part2-Substitution-26978" href="../Substitution/#plfa_plfa-part2-Substitution-26445" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26980" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-26982" href="../Substitution/#plfa_plfa-part2-Substitution-3148" class="Function">↑</a><a id="plfa_plfa-part2-Substitution-26983" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-26985" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-26987" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-26988" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-26990" href="../Substitution/#plfa_plfa-part2-Substitution-26445" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-26992" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-26994" href="../Substitution/#plfa_plfa-part2-Substitution-26442" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-26996" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-26998" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-27001" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-27004" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27006" href="../Substitution/#plfa_plfa-part2-Substitution-26439" class="Bound">N</a>
     <a id="plfa_plfa-part2-Substitution-27013" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-27016" href="../Substitution/#plfa_plfa-part2-Substitution-10991" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-27024" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-27025" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-27027" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-27029" href="../Substitution/#plfa_plfa-part2-Substitution-26439" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-27030" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-27032" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27033" href="../Substitution/#plfa_plfa-part2-Substitution-11738" class="Function">cong-cons</a> <a id="plfa_plfa-part2-Substitution-27043" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-27048" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27049" href="../Substitution/#plfa_plfa-part2-Substitution-24327" class="Function">sub-assoc</a><a id="plfa_plfa-part2-Substitution-27058" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-27059" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-27061" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-27063" href="../Substitution/#plfa_plfa-part2-Substitution-26445" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-27064" class="Symbol">}))</a> <a id="plfa_plfa-part2-Substitution-27068" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-27073" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-27082" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27084" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27086" href="../Substitution/#plfa_plfa-part2-Substitution-26445" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27088" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27090" href="../Substitution/#plfa_plfa-part2-Substitution-26442" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-27092" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-27094" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27095" href="../Substitution/#plfa_plfa-part2-Substitution-26445" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27097" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-27099" href="../Substitution/#plfa_plfa-part2-Substitution-3148" class="Function">↑</a> <a id="plfa_plfa-part2-Substitution-27101" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-27103" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27105" href="../Substitution/#plfa_plfa-part2-Substitution-26445" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27107" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27109" href="../Substitution/#plfa_plfa-part2-Substitution-26442" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-27111" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-27113" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-27116" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-27118" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27120" href="../Substitution/#plfa_plfa-part2-Substitution-26439" class="Bound">N</a>
     <a id="plfa_plfa-part2-Substitution-27127" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-27130" href="../Substitution/#plfa_plfa-part2-Substitution-10991" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-27138" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-27139" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-27141" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-27143" href="../Substitution/#plfa_plfa-part2-Substitution-26439" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-27144" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-27146" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-27151" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-27156" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-27165" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27167" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27169" href="../Substitution/#plfa_plfa-part2-Substitution-26445" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27171" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27173" href="../Substitution/#plfa_plfa-part2-Substitution-26442" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-27175" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-27177" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27178" href="../Substitution/#plfa_plfa-part2-Substitution-26445" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27180" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-27182" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a><a id="plfa_plfa-part2-Substitution-27185" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-27187" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27189" href="../Substitution/#plfa_plfa-part2-Substitution-26439" class="Bound">N</a>
     <a id="plfa_plfa-part2-Substitution-27196" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-27199" href="../Substitution/#plfa_plfa-part2-Substitution-10991" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-27207" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-27208" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-27210" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-27212" href="../Substitution/#plfa_plfa-part2-Substitution-26439" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-27213" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-27215" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27216" href="../Substitution/#plfa_plfa-part2-Substitution-11738" class="Function">cong-cons</a> <a id="plfa_plfa-part2-Substitution-27226" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-27231" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27232" href="../Substitution/#plfa_plfa-part2-Substitution-17543" class="Function">sub-idR</a><a id="plfa_plfa-part2-Substitution-27239" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-27240" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-27242" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-27244" href="../Substitution/#plfa_plfa-part2-Substitution-26445" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-27245" class="Symbol">}))</a> <a id="plfa_plfa-part2-Substitution-27249" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-27254" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-27263" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27265" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27267" href="../Substitution/#plfa_plfa-part2-Substitution-26445" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27269" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27271" href="../Substitution/#plfa_plfa-part2-Substitution-26442" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-27273" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-27275" href="../Substitution/#plfa_plfa-part2-Substitution-26445" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27277" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27279" href="../Substitution/#plfa_plfa-part2-Substitution-26439" class="Bound">N</a>
     <a id="plfa_plfa-part2-Substitution-27286" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-27289" href="../Substitution/#plfa_plfa-part2-Substitution-10991" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-27297" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-27298" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-27300" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-27302" href="../Substitution/#plfa_plfa-part2-Substitution-26439" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-27303" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-27305" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27306" href="../Substitution/#plfa_plfa-part2-Substitution-11738" class="Function">cong-cons</a> <a id="plfa_plfa-part2-Substitution-27316" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-27321" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27322" href="../Substitution/#plfa_plfa-part2-Substitution-8991" class="Function">sub-idL</a><a id="plfa_plfa-part2-Substitution-27329" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-27330" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-27332" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-27334" href="../Substitution/#plfa_plfa-part2-Substitution-26445" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-27335" class="Symbol">}))</a> <a id="plfa_plfa-part2-Substitution-27339" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-27344" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-27353" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27355" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27357" href="../Substitution/#plfa_plfa-part2-Substitution-26445" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27359" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27361" href="../Substitution/#plfa_plfa-part2-Substitution-26442" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-27363" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-27365" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27366" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-27370" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-27372" href="../Substitution/#plfa_plfa-part2-Substitution-26445" class="Bound">σ</a><a id="plfa_plfa-part2-Substitution-27373" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-27375" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27377" href="../Substitution/#plfa_plfa-part2-Substitution-26439" class="Bound">N</a>
     <a id="plfa_plfa-part2-Substitution-27384" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-27387" href="../Substitution/#plfa_plfa-part2-Substitution-10991" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-27395" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-27396" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-27398" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-27400" href="../Substitution/#plfa_plfa-part2-Substitution-26439" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-27401" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-27403" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27404" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="plfa_plfa-part2-Substitution-27408" href="../Substitution/#plfa_plfa-part2-Substitution-9102" class="Function">sub-dist</a><a id="plfa_plfa-part2-Substitution-27416" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-27418" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-27423" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-27432" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27434" href="../Substitution/#plfa_plfa-part2-Substitution-26442" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-27436" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-27438" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-27442" href="../Substitution/#plfa_plfa-part2-Substitution-3749" class="Function Operator">⨟</a> <a id="plfa_plfa-part2-Substitution-27444" href="../Substitution/#plfa_plfa-part2-Substitution-26445" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27446" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27448" href="../Substitution/#plfa_plfa-part2-Substitution-26439" class="Bound">N</a>
     <a id="plfa_plfa-part2-Substitution-27455" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-27458" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="plfa_plfa-part2-Substitution-27462" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27463" href="../Substitution/#plfa_plfa-part2-Substitution-22844" class="Function">sub-sub</a><a id="plfa_plfa-part2-Substitution-27470" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-27471" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-27473" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-27475" href="../Substitution/#plfa_plfa-part2-Substitution-26439" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-27476" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-27479" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-27488" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27490" href="../Substitution/#plfa_plfa-part2-Substitution-26445" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27492" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27494" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27495" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27497" href="../Substitution/#plfa_plfa-part2-Substitution-26442" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-27499" href="../Substitution/#plfa_plfa-part2-Substitution-3394" class="Function Operator">•</a> <a id="plfa_plfa-part2-Substitution-27501" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a> <a id="plfa_plfa-part2-Substitution-27505" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27507" href="../Substitution/#plfa_plfa-part2-Substitution-26439" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-27508" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-27515" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-27518" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">cong</a> <a id="plfa_plfa-part2-Substitution-27523" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27525" href="../Substitution/#plfa_plfa-part2-Substitution-26445" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27527" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27529" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27530" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="plfa_plfa-part2-Substitution-27534" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27535" href="../Substitution/#plfa_plfa-part2-Substitution-10991" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-27543" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-27544" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-27546" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-27548" href="../Substitution/#plfa_plfa-part2-Substitution-26439" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-27549" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-27551" href="../Substitution/#plfa_plfa-part2-Substitution-15658" class="Function">subst-Z-cons-ids</a> <a id="plfa_plfa-part2-Substitution-27568" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Substitution-27572" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-27575" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-27584" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-27586" href="../Substitution/#plfa_plfa-part2-Substitution-26445" class="Bound">σ</a> <a id="plfa_plfa-part2-Substitution-27588" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-27590" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27591" href="../Substitution/#plfa_plfa-part2-Substitution-26439" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-27593" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-27595" href="../Substitution/#plfa_plfa-part2-Substitution-26442" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-27597" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">]</a><a id="plfa_plfa-part2-Substitution-27598" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-27605" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
</pre><p>A corollary of <code>subst-commute</code> is that <code>rename</code> also commutes with substitution. In the proof below, we first exchange <code>rename ρ</code> for the substitution <code>⟪ ren ρ ⟫</code>, and apply <code>subst-commute</code>, and then convert back to <code>rename ρ</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-rename-subst-commute"></a><a id="plfa_plfa-part2-Substitution-27849" href="../Substitution/#plfa_plfa-part2-Substitution-27849" class="Function">rename-subst-commute</a> <a id="plfa_plfa-part2-Substitution-27870" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-27872" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-27874" href="../Substitution/#plfa_plfa-part2-Substitution-27874" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-27876" href="../Substitution/#plfa_plfa-part2-Substitution-27876" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-27877" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-27879" href="../Substitution/#plfa_plfa-part2-Substitution-27879" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-27881" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-27883" href="../Substitution/#plfa_plfa-part2-Substitution-27874" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-27885" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-27887" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-Substitution-27889" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-27891" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-27892" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-27894" href="../Substitution/#plfa_plfa-part2-Substitution-27894" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-27896" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-27898" href="../Substitution/#plfa_plfa-part2-Substitution-27874" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-27900" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-27902" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-27903" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-27905" href="../Substitution/#plfa_plfa-part2-Substitution-27905" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-27907" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-27909" href="../Substitution/#plfa_plfa-part2-Substitution-2133" class="Function">Rename</a> <a id="plfa_plfa-part2-Substitution-27916" href="../Substitution/#plfa_plfa-part2-Substitution-27874" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-27918" href="../Substitution/#plfa_plfa-part2-Substitution-27876" class="Bound">Δ</a> <a id="plfa_plfa-part2-Substitution-27920" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Substitution-27926" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-27928" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27929" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-27936" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27937" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-27941" href="../Substitution/#plfa_plfa-part2-Substitution-27905" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-27942" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-27944" href="../Substitution/#plfa_plfa-part2-Substitution-27879" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-27945" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-27947" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-27949" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-27956" href="../Substitution/#plfa_plfa-part2-Substitution-27905" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-27958" href="../Substitution/#plfa_plfa-part2-Substitution-27894" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-27960" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">]</a> <a id="plfa_plfa-part2-Substitution-27962" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-27964" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-27971" href="../Substitution/#plfa_plfa-part2-Substitution-27905" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-27973" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-27974" href="../Substitution/#plfa_plfa-part2-Substitution-27879" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-27976" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-27978" href="../Substitution/#plfa_plfa-part2-Substitution-27894" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-27980" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">]</a><a id="plfa_plfa-part2-Substitution-27981" class="Symbol">)</a>
<a id="plfa_plfa-part2-Substitution-27983" href="../Substitution/#plfa_plfa-part2-Substitution-27849" class="Function">rename-subst-commute</a> <a id="plfa_plfa-part2-Substitution-28004" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28005" href="../Substitution/#plfa_plfa-part2-Substitution-28005" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-28006" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-28008" href="../Substitution/#plfa_plfa-part2-Substitution-28008" class="Bound">Δ</a><a id="plfa_plfa-part2-Substitution-28009" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-28011" href="../Substitution/#plfa_plfa-part2-Substitution-28011" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-28012" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-28014" href="../Substitution/#plfa_plfa-part2-Substitution-28014" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-28015" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-28017" href="../Substitution/#plfa_plfa-part2-Substitution-28017" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-28018" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-28020" class="Symbol">=</a>
     <a id="plfa_plfa-part2-Substitution-28027" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
       <a id="plfa_plfa-part2-Substitution-28040" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28041" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-28048" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28049" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-28053" href="../Substitution/#plfa_plfa-part2-Substitution-28017" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-28054" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28056" href="../Substitution/#plfa_plfa-part2-Substitution-28011" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-28057" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28059" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-28061" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-28068" href="../Substitution/#plfa_plfa-part2-Substitution-28017" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-28070" href="../Substitution/#plfa_plfa-part2-Substitution-28014" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-28072" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">]</a>
     <a id="plfa_plfa-part2-Substitution-28079" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-28082" href="../Substitution/#plfa_plfa-part2-Substitution-10991" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-28091" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28092" href="../Substitution/#plfa_plfa-part2-Substitution-11483" class="Function">cong-sub-zero</a> <a id="plfa_plfa-part2-Substitution-28106" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28107" href="../Substitution/#plfa_plfa-part2-Substitution-13493" class="Function">rename-subst-ren</a><a id="plfa_plfa-part2-Substitution-28123" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28124" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-28126" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-28128" href="../Substitution/#plfa_plfa-part2-Substitution-28014" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-28129" class="Symbol">}))</a>
                 <a id="plfa_plfa-part2-Substitution-28150" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28151" href="../Substitution/#plfa_plfa-part2-Substitution-13493" class="Function">rename-subst-ren</a><a id="plfa_plfa-part2-Substitution-28167" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28168" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-28170" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-28172" href="../Substitution/#plfa_plfa-part2-Substitution-28011" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-28173" class="Symbol">})</a> <a id="plfa_plfa-part2-Substitution-28176" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-28185" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28186" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-28188" href="../Substitution/#plfa_plfa-part2-Substitution-6502" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-28192" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28193" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part2-Substitution-28197" href="../Substitution/#plfa_plfa-part2-Substitution-28017" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-28198" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28200" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-28202" href="../Substitution/#plfa_plfa-part2-Substitution-28011" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-28203" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28205" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-28207" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-28209" href="../Substitution/#plfa_plfa-part2-Substitution-6502" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-28213" href="../Substitution/#plfa_plfa-part2-Substitution-28017" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-28215" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-28217" href="../Substitution/#plfa_plfa-part2-Substitution-28014" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-28219" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">]</a>
     <a id="plfa_plfa-part2-Substitution-28226" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-28229" href="../Substitution/#plfa_plfa-part2-Substitution-10991" class="Function">cong-sub</a> <a id="plfa_plfa-part2-Substitution-28238" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Substitution-28243" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28244" href="../Substitution/#plfa_plfa-part2-Substitution-10991" class="Function">cong-sub</a><a id="plfa_plfa-part2-Substitution-28252" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28253" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-28255" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-28257" href="../Substitution/#plfa_plfa-part2-Substitution-28011" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-28258" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-28260" href="../Substitution/#plfa_plfa-part2-Substitution-13120" class="Function">ren-ext</a> <a id="plfa_plfa-part2-Substitution-28268" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Substitution-28272" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28274" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-28283" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28284" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-28286" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-28291" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28292" href="../Substitution/#plfa_plfa-part2-Substitution-6502" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-28296" href="../Substitution/#plfa_plfa-part2-Substitution-28017" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-28297" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28299" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-28301" href="../Substitution/#plfa_plfa-part2-Substitution-28011" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-28302" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28304" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-28306" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟪</a> <a id="plfa_plfa-part2-Substitution-28308" href="../Substitution/#plfa_plfa-part2-Substitution-6502" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-28312" href="../Substitution/#plfa_plfa-part2-Substitution-28017" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-28314" href="../Substitution/#plfa_plfa-part2-Substitution-2499" class="Function Operator">⟫</a> <a id="plfa_plfa-part2-Substitution-28316" href="../Substitution/#plfa_plfa-part2-Substitution-28014" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-28318" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">]</a>
     <a id="plfa_plfa-part2-Substitution-28325" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-28328" href="../Substitution/#plfa_plfa-part2-Substitution-26304" class="Function">subst-commute</a><a id="plfa_plfa-part2-Substitution-28341" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28342" class="Argument">N</a> <a id="plfa_plfa-part2-Substitution-28344" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-28346" href="../Substitution/#plfa_plfa-part2-Substitution-28011" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-28347" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-28349" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-28358" href="../Untyped/#plfa_plfa-part2-Untyped-6759" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-28364" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28365" href="../Substitution/#plfa_plfa-part2-Substitution-6502" class="Function">ren</a> <a id="plfa_plfa-part2-Substitution-28369" href="../Substitution/#plfa_plfa-part2-Substitution-28017" class="Bound">ρ</a><a id="plfa_plfa-part2-Substitution-28370" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28372" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28373" href="../Substitution/#plfa_plfa-part2-Substitution-28011" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-28375" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-28377" href="../Substitution/#plfa_plfa-part2-Substitution-28014" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-28379" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">]</a><a id="plfa_plfa-part2-Substitution-28380" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-28387" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="plfa_plfa-part2-Substitution-28390" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="plfa_plfa-part2-Substitution-28394" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28395" href="../Substitution/#plfa_plfa-part2-Substitution-13493" class="Function">rename-subst-ren</a><a id="plfa_plfa-part2-Substitution-28411" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28413" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
       <a id="plfa_plfa-part2-Substitution-28422" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part2-Substitution-28429" href="../Substitution/#plfa_plfa-part2-Substitution-28017" class="Bound">ρ</a> <a id="plfa_plfa-part2-Substitution-28431" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28432" href="../Substitution/#plfa_plfa-part2-Substitution-28011" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-28434" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-28436" href="../Substitution/#plfa_plfa-part2-Substitution-28014" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-28438" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">]</a><a id="plfa_plfa-part2-Substitution-28439" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Substitution-28446" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
</pre><p>To present the substitution lemma, we introduce the following notation for substituting a term <code>M</code> for index 1 within term <code>N</code>.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-_〔_〕"></a><a id="plfa_plfa-part2-Substitution-28590" href="../Substitution/#plfa_plfa-part2-Substitution-28590" class="Function Operator">_〔_〕</a> <a id="plfa_plfa-part2-Substitution-28595" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-28597" class="Symbol">∀</a> <a id="plfa_plfa-part2-Substitution-28599" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28600" href="../Substitution/#plfa_plfa-part2-Substitution-28600" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-28602" href="../Substitution/#plfa_plfa-part2-Substitution-28602" class="Bound">A</a> <a id="plfa_plfa-part2-Substitution-28604" href="../Substitution/#plfa_plfa-part2-Substitution-28604" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-28606" href="../Substitution/#plfa_plfa-part2-Substitution-28606" class="Bound">C</a><a id="plfa_plfa-part2-Substitution-28607" class="Symbol">}</a>
        <a id="plfa_plfa-part2-Substitution-28617" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-28619" href="../Substitution/#plfa_plfa-part2-Substitution-28600" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-28621" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-28623" href="../Substitution/#plfa_plfa-part2-Substitution-28604" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-28625" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-28627" href="../Substitution/#plfa_plfa-part2-Substitution-28606" class="Bound">C</a> <a id="plfa_plfa-part2-Substitution-28629" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-28631" href="../Substitution/#plfa_plfa-part2-Substitution-28602" class="Bound">A</a>
        <a id="plfa_plfa-part2-Substitution-28641" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-28643" href="../Substitution/#plfa_plfa-part2-Substitution-28600" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-28645" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-28647" href="../Substitution/#plfa_plfa-part2-Substitution-28604" class="Bound">B</a>
          <a id="plfa_plfa-part2-Substitution-28659" class="Comment">---------</a>
        <a id="plfa_plfa-part2-Substitution-28677" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-28679" href="../Substitution/#plfa_plfa-part2-Substitution-28600" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-28681" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-28683" href="../Substitution/#plfa_plfa-part2-Substitution-28606" class="Bound">C</a> <a id="plfa_plfa-part2-Substitution-28685" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-28687" href="../Substitution/#plfa_plfa-part2-Substitution-28602" class="Bound">A</a>
<a id="plfa_plfa-part2-Substitution-28689" href="../Substitution/#plfa_plfa-part2-Substitution-28590" class="Function Operator">_〔_〕</a> <a id="plfa_plfa-part2-Substitution-28694" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28695" href="../Substitution/#plfa_plfa-part2-Substitution-28695" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-28696" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-28698" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28699" href="../Substitution/#plfa_plfa-part2-Substitution-28699" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-28700" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-28702" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28703" href="../Substitution/#plfa_plfa-part2-Substitution-28703" class="Bound">B</a><a id="plfa_plfa-part2-Substitution-28704" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-28706" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28707" href="../Substitution/#plfa_plfa-part2-Substitution-28707" class="Bound">C</a><a id="plfa_plfa-part2-Substitution-28708" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-28710" href="../Substitution/#plfa_plfa-part2-Substitution-28710" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-28712" href="../Substitution/#plfa_plfa-part2-Substitution-28712" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-28714" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-28719" href="../Untyped/#plfa_plfa-part2-Untyped-6759" class="Function">subst</a> <a id="plfa_plfa-part2-Substitution-28725" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28726" href="../Substitution/#plfa_plfa-part2-Substitution-28695" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-28728" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-28730" href="../Substitution/#plfa_plfa-part2-Substitution-28703" class="Bound">B</a> <a id="plfa_plfa-part2-Substitution-28732" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-28734" href="../Substitution/#plfa_plfa-part2-Substitution-28707" class="Bound">C</a><a id="plfa_plfa-part2-Substitution-28735" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-28737" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28738" href="../Substitution/#plfa_plfa-part2-Substitution-28695" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-28740" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-28742" href="../Substitution/#plfa_plfa-part2-Substitution-28707" class="Bound">C</a><a id="plfa_plfa-part2-Substitution-28743" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-28745" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28746" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part2-Substitution-28751" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28752" href="../Untyped/#plfa_plfa-part2-Untyped-7175" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Substitution-28763" href="../Substitution/#plfa_plfa-part2-Substitution-28712" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-28764" class="Symbol">))</a> <a id="plfa_plfa-part2-Substitution-28767" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-28768" href="../Substitution/#plfa_plfa-part2-Substitution-28699" class="Bound">A</a><a id="plfa_plfa-part2-Substitution-28769" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-28771" href="../Substitution/#plfa_plfa-part2-Substitution-28710" class="Bound">N</a>
</pre><p>The substitution lemma is stated as follows and proved as a corollary of the <code>subst-commute</code> lemma.</p><pre class="Agda"><a id="plfa_plfa-part2-Substitution-substitution"></a><a id="plfa_plfa-part2-Substitution-28887" href="../Substitution/#plfa_plfa-part2-Substitution-28887" class="Function">substitution</a> <a id="plfa_plfa-part2-Substitution-28900" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-28902" class="Symbol">∀{</a><a id="plfa_plfa-part2-Substitution-28904" href="../Substitution/#plfa_plfa-part2-Substitution-28904" class="Bound">Γ</a><a id="plfa_plfa-part2-Substitution-28905" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-28907" href="../Substitution/#plfa_plfa-part2-Substitution-28907" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-28909" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-28911" href="../Substitution/#plfa_plfa-part2-Substitution-28904" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-28913" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-28915" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-Substitution-28917" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-28919" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-Substitution-28921" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-28923" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-28924" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-28926" href="../Substitution/#plfa_plfa-part2-Substitution-28926" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-28928" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-28930" href="../Substitution/#plfa_plfa-part2-Substitution-28904" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-28932" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Substitution-28934" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a> <a id="plfa_plfa-part2-Substitution-28936" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-28938" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-28939" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-28941" href="../Substitution/#plfa_plfa-part2-Substitution-28941" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-28943" class="Symbol">:</a> <a id="plfa_plfa-part2-Substitution-28945" href="../Substitution/#plfa_plfa-part2-Substitution-28904" class="Bound">Γ</a> <a id="plfa_plfa-part2-Substitution-28947" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Substitution-28949" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part2-Substitution-28950" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Substitution-28956" class="Symbol">→</a> <a id="plfa_plfa-part2-Substitution-28958" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28959" href="../Substitution/#plfa_plfa-part2-Substitution-28907" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-28961" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-28963" href="../Substitution/#plfa_plfa-part2-Substitution-28926" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-28965" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">]</a><a id="plfa_plfa-part2-Substitution-28966" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28968" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-28970" href="../Substitution/#plfa_plfa-part2-Substitution-28941" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-28972" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">]</a> <a id="plfa_plfa-part2-Substitution-28974" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Substitution-28976" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28977" href="../Substitution/#plfa_plfa-part2-Substitution-28907" class="Bound">M</a> <a id="plfa_plfa-part2-Substitution-28979" href="../Substitution/#plfa_plfa-part2-Substitution-28590" class="Function Operator">〔</a> <a id="plfa_plfa-part2-Substitution-28981" href="../Substitution/#plfa_plfa-part2-Substitution-28941" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-28983" href="../Substitution/#plfa_plfa-part2-Substitution-28590" class="Function Operator">〕</a><a id="plfa_plfa-part2-Substitution-28984" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28986" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-28988" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-28989" href="../Substitution/#plfa_plfa-part2-Substitution-28926" class="Bound">N</a> <a id="plfa_plfa-part2-Substitution-28991" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">[</a> <a id="plfa_plfa-part2-Substitution-28993" href="../Substitution/#plfa_plfa-part2-Substitution-28941" class="Bound">L</a> <a id="plfa_plfa-part2-Substitution-28995" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">]</a><a id="plfa_plfa-part2-Substitution-28996" class="Symbol">)</a> <a id="plfa_plfa-part2-Substitution-28998" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">]</a>
<a id="plfa_plfa-part2-Substitution-29000" href="../Substitution/#plfa_plfa-part2-Substitution-28887" class="Function">substitution</a><a id="plfa_plfa-part2-Substitution-29012" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-29013" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-29015" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-29017" href="../Substitution/#plfa_plfa-part2-Substitution-29017" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-29018" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-29020" class="Argument">N</a> <a id="plfa_plfa-part2-Substitution-29022" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-29024" href="../Substitution/#plfa_plfa-part2-Substitution-29024" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-29025" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-29027" class="Argument">L</a> <a id="plfa_plfa-part2-Substitution-29029" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-29031" href="../Substitution/#plfa_plfa-part2-Substitution-29031" class="Bound">L</a><a id="plfa_plfa-part2-Substitution-29032" class="Symbol">}</a> <a id="plfa_plfa-part2-Substitution-29034" class="Symbol">=</a>
   <a id="plfa_plfa-part2-Substitution-29039" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="plfa_plfa-part2-Substitution-29043" class="Symbol">(</a><a id="plfa_plfa-part2-Substitution-29044" href="../Substitution/#plfa_plfa-part2-Substitution-26304" class="Function">subst-commute</a><a id="plfa_plfa-part2-Substitution-29057" class="Symbol">{</a><a id="plfa_plfa-part2-Substitution-29058" class="Argument">N</a> <a id="plfa_plfa-part2-Substitution-29060" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-29062" href="../Substitution/#plfa_plfa-part2-Substitution-29017" class="Bound">M</a><a id="plfa_plfa-part2-Substitution-29063" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-29065" class="Argument">M</a> <a id="plfa_plfa-part2-Substitution-29067" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-29069" href="../Substitution/#plfa_plfa-part2-Substitution-29024" class="Bound">N</a><a id="plfa_plfa-part2-Substitution-29070" class="Symbol">}{</a><a id="plfa_plfa-part2-Substitution-29072" class="Argument">σ</a> <a id="plfa_plfa-part2-Substitution-29074" class="Symbol">=</a> <a id="plfa_plfa-part2-Substitution-29076" href="../Untyped/#plfa_plfa-part2-Untyped-7175" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Substitution-29087" href="../Substitution/#plfa_plfa-part2-Substitution-29031" class="Bound">L</a><a id="plfa_plfa-part2-Substitution-29088" class="Symbol">})</a>
</pre><h2 id="notes">Notes</h2><p>Most of the properties and proofs in this file are based on the paper <em>Autosubst: Reasoning with de Bruijn Terms and Parallel Substitution</em> by Schafer, Tebbi, and Smolka (ITP 2015). That paper, in turn, is based on the paper of Abadi, Cardelli, Curien, and Levy (1991) that defines the σ algebra.</p><h2 id="unicode">Unicode</h2><p>This chapter uses the following unicode:</p><pre><code>⟪  U+27EA  MATHEMATICAL LEFT DOUBLE ANGLE BRACKET (\&lt;&lt;)
⟫  U+27EA  MATHEMATICAL RIGHT DOUBLE ANGLE BRACKET (\&gt;&gt;)
↑  U+2191  UPWARDS ARROW (\u)
•  U+2022  BULLET (\bub)
⨟  U+2A1F  Z NOTATION SCHEMA COMPOSITION (C-x 8 RET Z NOTATION SCHEMA COMPOSITION)
〔  U+3014  LEFT TORTOISE SHELL BRACKET (\( option 9 on page 2)
〕  U+3015  RIGHT TORTOISE SHELL BRACKET (\) option 9 on page 2)</code></pre></div><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../ContextualEquivalence/">Prev</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/part2/Substitution.lagda.md">Source</a></li><li class="separator">•</li><li><a class="pagelink" href="../Acknowledgements/">Next</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card" aria-label="Site"><data class="u-url" href="../"></data><div class="wrapper"><h2 class="footer-heading">Programming Language Foundations in Agda</h2><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk"><i class="far fa-envelope"></i>  wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><i class="fab fa-github"></i>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works"><i class="far fa-envelope"></i>  me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><i class="fab fa-github"></i>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><i class="fab fa-twitter"></i>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu"><i class="far fa-envelope"></i>  jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><i class="fab fa-github"></i>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><i class="fab fa-twitter"></i>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></div></footer></body></html>