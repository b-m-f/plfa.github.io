<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../assets/css/light.css" integrity="sha512-Bc/dwugBgT+/ITMtRScPY8Mo32Ow+ffTdkXjpSzqi4NuijufZ6PK8Er7QAI6wFBv745YoRIKu/ldMHI2iup7Mg==" title="Light" id="stylesheet-light"><link rel="stylesheet" href="../assets/css/dark.css" integrity="sha512-bcS7iunw3oUP9G9pEymcU5lD/IBBtZAKHbLteS8L2IG97X7mbhqnmPXgPRxLyXxgt5fcBRnbvKl9jsgCsROfDw==" title="Dark" id="stylesheet-dark" disabled><title>Programming Language Foundations in Agda – Soundness</title><script src="../assets/js/anchor.js" integrity="sha512-Y5IMGqYQp36NYYdEL6gXISLsHNpx0LxW0NS0twvYBvXI8GH5PZa1g5gm1B5lxg6tlFyUAiOOfgKL/NIn0dtY4w==" id="script-anchor"></script><script src="../assets/js/darkmode.js" integrity="sha512-iUX9HnSphH4WbMv88MYJEFtLfkCtTHrvWyFwjigSm5GkwHv1L31GP5grIGDo7kI2jftuYVvt4xu4qeCn2fKbww==" id="script-darkmode"></script><script src="../assets/js/main.js" integrity="sha512-X7aZg6IUKq1TvTVjSureaMGKZ/ylbAD7kxiU2w42IUgh4lUTWoOsoIWzNvrqkwBJdQ1y2GsS67gtsv39Uuq6ew==" id="script-main"></script></head><body><header class="site-header" aria-label="Site"><div class="wrapper"><a class="site-title" href="../">Programming Language Foundations in Agda</a><nav class="site-nav" aria-label="Site"><input type="checkbox" id="nav-trigger" class="nav-trigger"><label for="nav-trigger"><span class="menu-icon"><svg class="svg-icon grey" viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span></label><div class="trigger"><a class="page-link" href="../">The Book</a> <a class="page-link" href="../Announcements/">Announcements</a> <a class="page-link" href="../GettingStarted/">Getting Started</a> <a class="page-link" href="../Citing/">Citing</a> <a class="page-link" href="https://agda-zh.github.io/PLFA-zh/">中文</a> <a class="page-link" onclick="window.darkmode.toggle()"><i id="darkmode-trigger" class="fas fa-moon"></i> </a><a class="page-link" href="../plfa.epub"><i class="fa fa-book"></i></a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Compositional/">Prev</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/part3/Soundness.lagda.md">Source</a></li><li class="separator">•</li><li><a class="pagelink" href="../Adequacy/">Next</a></li><li class="separator">•</li></ul></nav><header class="post-header" aria-label="Chapter"><h1 class="post-title">Soundness: Soundness of reduction with respect to denotational semantics</h1></header><div class="post-content"><pre class="Agda"><a id="plfa_plfa-part3-Soundness-129" class="Keyword">module</a> <a id="plfa_plfa-part3-Soundness-136" href="../Soundness/#" class="Module">plfa.part3.Soundness</a> <a id="plfa_plfa-part3-Soundness-157" class="Keyword">where</a>
</pre><h2 id="introduction">Introduction</h2><p>In this chapter we prove that the reduction semantics is sound with respect to the denotational semantics, i.e., for any term L</p><pre><code>L —↠ ƛ N  implies  ℰ L ≃ ℰ (ƛ N)</code></pre><p>The proof is by induction on the reduction sequence, so the main lemma concerns a single reduction step. We prove that if any term <code>M</code> steps to a term <code>N</code>, then <code>M</code> and <code>N</code> are denotationally equal. We shall prove each direction of this if-and-only-if separately. One direction will look just like a type preservation proof. The other direction is like proving type preservation for reduction going in reverse. Recall that type preservation is sometimes called subject reduction. Preservation in reverse is a well-known property and is called <em>subject expansion</em>. It is also well-known that subject expansion is false for most typed lambda calculi!</p><h2 id="imports">Imports</h2><pre class="Agda"><a id="plfa_plfa-part3-Soundness-1025" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1030" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1037" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>
  <a id="plfa_plfa-part3-Soundness-1077" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1083" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1084" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡_</a><a id="plfa_plfa-part3-Soundness-1087" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1089" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">_≢_</a><a id="plfa_plfa-part3-Soundness-1092" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1094" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-1098" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1100" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a><a id="plfa_plfa-part3-Soundness-1103" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1105" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1110" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1117" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html" class="Module">Data.Product.Base</a> <a id="plfa_plfa-part3-Soundness-1135" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1141" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1142" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1618" class="Function Operator">_×_</a><a id="plfa_plfa-part3-Soundness-1145" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1147" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Sigma.html#165" class="Record">Σ</a><a id="plfa_plfa-part3-Soundness-1148" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1150" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1244" class="Function">Σ-syntax</a><a id="plfa_plfa-part3-Soundness-1158" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1160" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#852" class="Function">∃</a><a id="plfa_plfa-part3-Soundness-1161" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1163" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1371" class="Function">∃-syntax</a><a id="plfa_plfa-part3-Soundness-1171" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1173" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#636" class="Field">proj₁</a><a id="plfa_plfa-part3-Soundness-1178" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1180" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#650" class="Field">proj₂</a><a id="plfa_plfa-part3-Soundness-1185" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-1189" class="Keyword">renaming</a> <a id="plfa_plfa-part3-Soundness-1198" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1199" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">_,_</a> <a id="plfa_plfa-part3-Soundness-1203" class="Symbol">to</a> <a id="plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="plfa_plfa-part3-Soundness-1211" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1213" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1218" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1225" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Nullary.Negation.html" class="Module">Relation.Nullary.Negation</a> <a id="plfa_plfa-part3-Soundness-1251" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1257" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1258" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Nullary.Negation.Core.html#658" class="Function Operator">¬_</a><a id="plfa_plfa-part3-Soundness-1260" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1262" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Nullary.Negation.Core.html#1270" class="Function">contradiction</a><a id="plfa_plfa-part3-Soundness-1275" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1277" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1282" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1289" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Nullary.Decidable.html" class="Module">Relation.Nullary.Decidable</a> <a id="plfa_plfa-part3-Soundness-1316" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1322" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1323" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Nullary.Decidable.Core.html#1861" class="Record">Dec</a><a id="plfa_plfa-part3-Soundness-1326" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1328" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a><a id="plfa_plfa-part3-Soundness-1331" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1333" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a><a id="plfa_plfa-part3-Soundness-1335" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1337" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1342" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1349" href="https://agda.github.io/agda-stdlib/v2.1/Function.Base.html" class="Module">Function.Base</a> <a id="plfa_plfa-part3-Soundness-1363" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1369" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1370" href="https://agda.github.io/agda-stdlib/v2.1/Function.Base.html#1115" class="Function Operator">_∘_</a><a id="plfa_plfa-part3-Soundness-1373" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1375" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1380" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1387" href="../Untyped/#" class="Module">plfa.part2.Untyped</a>
     <a id="plfa_plfa-part3-Soundness-1411" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1417" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1418" href="../Untyped/#plfa_plfa-part2-Untyped-2750" class="Datatype">Context</a><a id="plfa_plfa-part3-Soundness-1425" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1427" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">_,_</a><a id="plfa_plfa-part3-Soundness-1430" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1432" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">_∋_</a><a id="plfa_plfa-part3-Soundness-1435" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1437" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">_⊢_</a><a id="plfa_plfa-part3-Soundness-1440" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1442" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-1443" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1445" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a><a id="plfa_plfa-part3-Soundness-1446" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1448" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part3-Soundness-1450" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1452" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`_</a><a id="plfa_plfa-part3-Soundness-1454" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1456" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ_</a><a id="plfa_plfa-part3-Soundness-1458" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1460" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">_·_</a><a id="plfa_plfa-part3-Soundness-1463" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-1477" href="../Untyped/#plfa_plfa-part2-Untyped-6759" class="Function">subst</a><a id="plfa_plfa-part3-Soundness-1482" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1484" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">_[_]</a><a id="plfa_plfa-part3-Soundness-1488" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1490" href="../Untyped/#plfa_plfa-part2-Untyped-7175" class="Function">subst-zero</a><a id="plfa_plfa-part3-Soundness-1500" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1502" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a><a id="plfa_plfa-part3-Soundness-1505" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1507" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a><a id="plfa_plfa-part3-Soundness-1513" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1515" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a><a id="plfa_plfa-part3-Soundness-1519" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-1533" href="../Untyped/#plfa_plfa-part2-Untyped-9826" class="Datatype Operator">_—→_</a><a id="plfa_plfa-part3-Soundness-1537" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1539" href="../Untyped/#plfa_plfa-part2-Untyped-9876" class="InductiveConstructor">ξ₁</a><a id="plfa_plfa-part3-Soundness-1541" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1543" href="../Untyped/#plfa_plfa-part2-Untyped-9966" class="InductiveConstructor">ξ₂</a><a id="plfa_plfa-part3-Soundness-1545" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1547" href="../Untyped/#plfa_plfa-part2-Untyped-10056" class="InductiveConstructor">β</a><a id="plfa_plfa-part3-Soundness-1548" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1550" href="../Untyped/#plfa_plfa-part2-Untyped-10164" class="InductiveConstructor">ζ</a><a id="plfa_plfa-part3-Soundness-1551" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1553" href="../Untyped/#plfa_plfa-part2-Untyped-10958" class="Datatype Operator">_—↠_</a><a id="plfa_plfa-part3-Soundness-1557" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1559" href="../Untyped/#plfa_plfa-part2-Untyped-11146" class="InductiveConstructor Operator">_—→⟨_⟩_</a><a id="plfa_plfa-part3-Soundness-1566" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1568" href="../Untyped/#plfa_plfa-part2-Untyped-11004" class="InductiveConstructor Operator">_∎</a><a id="plfa_plfa-part3-Soundness-1570" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1572" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1577" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1584" href="../Substitution/#" class="Module">plfa.part2.Substitution</a> <a id="plfa_plfa-part3-Soundness-1608" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1614" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1615" href="../Substitution/#plfa_plfa-part2-Substitution-2133" class="Function">Rename</a><a id="plfa_plfa-part3-Soundness-1621" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1623" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a><a id="plfa_plfa-part3-Soundness-1628" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1630" href="../Substitution/#plfa_plfa-part2-Substitution-3005" class="Function">ids</a><a id="plfa_plfa-part3-Soundness-1633" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1635" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1640" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1647" href="../Denotational/#" class="Module">plfa.part3.Denotational</a>
     <a id="plfa_plfa-part3-Soundness-1676" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1682" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1683" href="../Denotational/#plfa_plfa-part3-Denotational-3907" class="Datatype">Value</a><a id="plfa_plfa-part3-Soundness-1688" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1690" href="../Denotational/#plfa_plfa-part3-Denotational-3927" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Soundness-1691" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1693" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a><a id="plfa_plfa-part3-Soundness-1696" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1698" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">_⊢_↓_</a><a id="plfa_plfa-part3-Soundness-1703" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1705" href="../Denotational/#plfa_plfa-part3-Denotational-7229" class="Function Operator">_`,_</a><a id="plfa_plfa-part3-Soundness-1709" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1711" href="../Denotational/#plfa_plfa-part3-Denotational-4268" class="Datatype Operator">_⊑_</a><a id="plfa_plfa-part3-Soundness-1714" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1716" href="../Denotational/#plfa_plfa-part3-Denotational-7900" class="Function Operator">_`⊑_</a><a id="plfa_plfa-part3-Soundness-1720" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1722" href="../Denotational/#plfa_plfa-part3-Denotational-8107" class="Function">`⊥</a><a id="plfa_plfa-part3-Soundness-1724" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1726" href="../Denotational/#plfa_plfa-part3-Denotational-8136" class="Function Operator">_`⊔_</a><a id="plfa_plfa-part3-Soundness-1730" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1732" href="../Denotational/#plfa_plfa-part3-Denotational-7474" class="Function">init</a><a id="plfa_plfa-part3-Soundness-1736" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1738" href="../Denotational/#plfa_plfa-part3-Denotational-7529" class="Function">last</a><a id="plfa_plfa-part3-Soundness-1742" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1744" href="../Denotational/#plfa_plfa-part3-Denotational-7578" class="Function">init-last</a><a id="plfa_plfa-part3-Soundness-1753" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-1767" href="../Denotational/#plfa_plfa-part3-Denotational-5402" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Soundness-1773" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1775" href="../Denotational/#plfa_plfa-part3-Denotational-4558" class="InductiveConstructor">⊑-trans</a><a id="plfa_plfa-part3-Soundness-1782" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1784" href="../Denotational/#plfa_plfa-part3-Denotational-8399" class="Function">`⊑-refl</a><a id="plfa_plfa-part3-Soundness-1791" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1793" href="../Denotational/#plfa_plfa-part3-Denotational-25039" class="Function">⊑-env</a><a id="plfa_plfa-part3-Soundness-1798" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1800" href="../Denotational/#plfa_plfa-part3-Denotational-8470" class="Function">⊑-env-conj-R1</a><a id="plfa_plfa-part3-Soundness-1813" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1815" href="../Denotational/#plfa_plfa-part3-Denotational-8576" class="Function">⊑-env-conj-R2</a><a id="plfa_plfa-part3-Soundness-1828" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1830" href="../Denotational/#plfa_plfa-part3-Denotational-25488" class="Function">up-env</a><a id="plfa_plfa-part3-Soundness-1836" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-1850" href="../Denotational/#plfa_plfa-part3-Denotational-9204" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Soundness-1853" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1855" href="../Denotational/#plfa_plfa-part3-Denotational-9279" class="InductiveConstructor">↦-elim</a><a id="plfa_plfa-part3-Soundness-1861" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1863" href="../Denotational/#plfa_plfa-part3-Denotational-9401" class="InductiveConstructor">↦-intro</a><a id="plfa_plfa-part3-Soundness-1870" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1872" href="../Denotational/#plfa_plfa-part3-Denotational-9513" class="InductiveConstructor">⊥-intro</a><a id="plfa_plfa-part3-Soundness-1879" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1881" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊔-intro</a><a id="plfa_plfa-part3-Soundness-1888" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1890" href="../Denotational/#plfa_plfa-part3-Denotational-9695" class="InductiveConstructor">sub</a><a id="plfa_plfa-part3-Soundness-1893" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-1907" href="../Denotational/#plfa_plfa-part3-Denotational-23466" class="Function">rename-pres</a><a id="plfa_plfa-part3-Soundness-1918" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1920" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a><a id="plfa_plfa-part3-Soundness-1921" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1923" href="../Denotational/#plfa_plfa-part3-Denotational-17528" class="Function Operator">_≃_</a><a id="plfa_plfa-part3-Soundness-1926" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1928" href="../Denotational/#plfa_plfa-part3-Denotational-17937" class="Function">≃-trans</a><a id="plfa_plfa-part3-Soundness-1935" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1937" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1942" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1949" href="../Compositional/#" class="Module">plfa.part3.Compositional</a> <a id="plfa_plfa-part3-Soundness-1974" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1980" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1981" href="../Compositional/#plfa_plfa-part3-Compositional-3633" class="Function">lambda-inversion</a><a id="plfa_plfa-part3-Soundness-1997" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1999" href="../Compositional/#plfa_plfa-part3-Compositional-9833" class="Function">var-inv</a><a id="plfa_plfa-part3-Soundness-2006" class="Symbol">)</a>
</pre><h2 id="forward-reduction-preserves-denotations">Forward reduction preserves denotations</h2><p>The proof of preservation in this section mixes techniques from previous chapters. Like the proof of preservation for the STLC, we are preserving a relation defined separately from the syntax, in contrast to the intrinsically-typed terms. On the other hand, we are using de Bruijn indices for variables.</p><p>The outline of the proof remains the same in that we must prove lemmas concerning all of the auxiliary functions used in the reduction relation: substitution, renaming, and extension.</p><h3 id="simultaneous-substitution-preserves-denotations">Simultaneous substitution preserves denotations</h3><p>Our next goal is to prove that simultaneous substitution preserves meaning. That is, if <code>M</code> results in <code>v</code> in environment <code>γ</code>, then applying a substitution <code>σ</code> to <code>M</code> gives us a program that also results in <code>v</code>, but in an environment <code>δ</code> in which, for every variable <code>x</code>, <code>σ x</code> results in the same value as the one for <code>x</code> in the original environment <code>γ</code>. We write <code>δ `⊢ σ ↓ γ</code> for this condition.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-3013" class="Keyword">infix</a> <a id="plfa_plfa-part3-Soundness-3019" class="Number">3</a> <a id="plfa_plfa-part3-Soundness-3021" href="../Soundness/#plfa_plfa-part3-Soundness-3028" class="Function Operator">_`⊢_↓_</a>
<a id="plfa_plfa-part3-Soundness-_`⊢_↓_"></a><a id="plfa_plfa-part3-Soundness-3028" href="../Soundness/#plfa_plfa-part3-Soundness-3028" class="Function Operator">_`⊢_↓_</a> <a id="plfa_plfa-part3-Soundness-3035" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-3037" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-3039" href="../Soundness/#plfa_plfa-part3-Soundness-3039" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-3041" href="../Soundness/#plfa_plfa-part3-Soundness-3041" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-3042" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-3044" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3046" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-3050" href="../Soundness/#plfa_plfa-part3-Soundness-3039" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-3052" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3054" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-3060" href="../Soundness/#plfa_plfa-part3-Soundness-3041" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-3062" href="../Soundness/#plfa_plfa-part3-Soundness-3039" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-3064" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3066" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-3070" href="../Soundness/#plfa_plfa-part3-Soundness-3041" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-3072" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3074" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="plfa_plfa-part3-Soundness-3078" href="../Soundness/#plfa_plfa-part3-Soundness-3028" class="Function Operator">_`⊢_↓_</a> <a id="plfa_plfa-part3-Soundness-3085" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-3086" href="../Soundness/#plfa_plfa-part3-Soundness-3086" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-3087" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-3089" href="../Soundness/#plfa_plfa-part3-Soundness-3089" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-3090" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-3092" href="../Soundness/#plfa_plfa-part3-Soundness-3092" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-3094" href="../Soundness/#plfa_plfa-part3-Soundness-3094" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-3096" href="../Soundness/#plfa_plfa-part3-Soundness-3096" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-3098" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-3100" class="Symbol">(∀</a> <a id="plfa_plfa-part3-Soundness-3103" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-3104" href="../Soundness/#plfa_plfa-part3-Soundness-3104" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-3106" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-3108" href="../Soundness/#plfa_plfa-part3-Soundness-3089" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-3110" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-3112" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-3113" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-3115" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3117" href="../Soundness/#plfa_plfa-part3-Soundness-3092" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-3119" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-3121" href="../Soundness/#plfa_plfa-part3-Soundness-3094" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-3123" href="../Soundness/#plfa_plfa-part3-Soundness-3104" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-3125" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-3127" href="../Soundness/#plfa_plfa-part3-Soundness-3096" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-3129" href="../Soundness/#plfa_plfa-part3-Soundness-3104" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-3130" class="Symbol">)</a>
</pre><p>As usual, to prepare for lambda abstraction, we prove an extension lemma. It says that applying the <code>exts</code> function to a substitution produces a new substitution that maps variables to terms that when evaluated in <code>δ , v</code> produce the values in <code>γ , v</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-ext"></a><a id="plfa_plfa-part3-Soundness-3399" href="../Soundness/#plfa_plfa-part3-Soundness-3399" class="Function">subst-ext</a> <a id="plfa_plfa-part3-Soundness-3409" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-3411" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-3413" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-3414" href="../Soundness/#plfa_plfa-part3-Soundness-3414" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-3416" href="../Soundness/#plfa_plfa-part3-Soundness-3416" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-3418" href="../Soundness/#plfa_plfa-part3-Soundness-3418" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-3419" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-3421" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-3422" href="../Soundness/#plfa_plfa-part3-Soundness-3422" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-3424" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-3426" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-3430" href="../Soundness/#plfa_plfa-part3-Soundness-3414" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-3431" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-3433" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-3434" href="../Soundness/#plfa_plfa-part3-Soundness-3434" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-3436" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-3438" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-3442" href="../Soundness/#plfa_plfa-part3-Soundness-3416" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-3443" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-3447" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3449" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-3450" href="../Soundness/#plfa_plfa-part3-Soundness-3450" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-3452" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-3454" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-3460" href="../Soundness/#plfa_plfa-part3-Soundness-3414" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-3462" href="../Soundness/#plfa_plfa-part3-Soundness-3416" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-3463" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-3467" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3469" href="../Soundness/#plfa_plfa-part3-Soundness-3434" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-3471" href="../Soundness/#plfa_plfa-part3-Soundness-3028" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-3474" href="../Soundness/#plfa_plfa-part3-Soundness-3450" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-3476" href="../Soundness/#plfa_plfa-part3-Soundness-3028" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-3478" href="../Soundness/#plfa_plfa-part3-Soundness-3422" class="Bound">γ</a>
   <a id="plfa_plfa-part3-Soundness-3483" class="Comment">--------------------------</a>
  <a id="plfa_plfa-part3-Soundness-3512" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3514" href="../Soundness/#plfa_plfa-part3-Soundness-3434" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-3516" href="../Denotational/#plfa_plfa-part3-Denotational-7229" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-3519" href="../Soundness/#plfa_plfa-part3-Soundness-3418" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-3521" href="../Soundness/#plfa_plfa-part3-Soundness-3028" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-3524" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part3-Soundness-3529" href="../Soundness/#plfa_plfa-part3-Soundness-3450" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-3531" href="../Soundness/#plfa_plfa-part3-Soundness-3028" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-3533" href="../Soundness/#plfa_plfa-part3-Soundness-3422" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-3535" href="../Denotational/#plfa_plfa-part3-Denotational-7229" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-3538" href="../Soundness/#plfa_plfa-part3-Soundness-3418" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-3540" href="../Soundness/#plfa_plfa-part3-Soundness-3399" class="Function">subst-ext</a> <a id="plfa_plfa-part3-Soundness-3550" href="../Soundness/#plfa_plfa-part3-Soundness-3550" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-3552" href="../Soundness/#plfa_plfa-part3-Soundness-3552" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-3554" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-3556" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-3558" href="../Denotational/#plfa_plfa-part3-Denotational-9204" class="InductiveConstructor">var</a>
<a id="plfa_plfa-part3-Soundness-3562" href="../Soundness/#plfa_plfa-part3-Soundness-3399" class="Function">subst-ext</a> <a id="plfa_plfa-part3-Soundness-3572" href="../Soundness/#plfa_plfa-part3-Soundness-3572" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-3574" href="../Soundness/#plfa_plfa-part3-Soundness-3574" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-3576" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-3577" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-3579" href="../Soundness/#plfa_plfa-part3-Soundness-3579" class="Bound">x′</a><a id="plfa_plfa-part3-Soundness-3581" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-3583" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-3585" href="../Denotational/#plfa_plfa-part3-Denotational-23466" class="Function">rename-pres</a> <a id="plfa_plfa-part3-Soundness-3597" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part3-Soundness-3600" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-3603" href="../Soundness/#plfa_plfa-part3-Soundness-3603" class="Bound">_</a> <a id="plfa_plfa-part3-Soundness-3605" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3607" href="../Denotational/#plfa_plfa-part3-Denotational-5402" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Soundness-3613" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-3615" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-3616" href="../Soundness/#plfa_plfa-part3-Soundness-3574" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-3618" href="../Soundness/#plfa_plfa-part3-Soundness-3579" class="Bound">x′</a><a id="plfa_plfa-part3-Soundness-3620" class="Symbol">)</a>
</pre><p>The proof is by cases on the de Bruijn index <code>x</code>.</p><ul><li><p>If it is <code>Z</code>, then we need to show that <code>δ , v ⊢ # 0 ↓ v</code>, which we have by rule <code>var</code>.</p></li><li><p>If it is <code>S x′</code>,then we need to show that <code>δ , v ⊢ rename S_ (σ x′) ↓ γ x′</code>, which we obtain by the <code>rename-pres</code> lemma.</p></li></ul><p>With the extension lemma in hand, the proof that simultaneous substitution preserves meaning is straightforward. Let’s dive in!</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-pres"></a><a id="plfa_plfa-part3-Soundness-4037" href="../Soundness/#plfa_plfa-part3-Soundness-4037" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4048" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4050" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-4052" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4053" href="../Soundness/#plfa_plfa-part3-Soundness-4053" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-4055" href="../Soundness/#plfa_plfa-part3-Soundness-4055" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-4057" href="../Soundness/#plfa_plfa-part3-Soundness-4057" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-4058" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-4060" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4061" href="../Soundness/#plfa_plfa-part3-Soundness-4061" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-4063" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4065" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-4069" href="../Soundness/#plfa_plfa-part3-Soundness-4053" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-4070" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-4072" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4073" href="../Soundness/#plfa_plfa-part3-Soundness-4073" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-4075" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4077" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-4081" href="../Soundness/#plfa_plfa-part3-Soundness-4055" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-4082" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-4084" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4085" href="../Soundness/#plfa_plfa-part3-Soundness-4085" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-4087" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4089" href="../Soundness/#plfa_plfa-part3-Soundness-4053" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-4091" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-4093" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-4094" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-4098" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4100" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4101" href="../Soundness/#plfa_plfa-part3-Soundness-4101" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4103" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4105" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-4111" href="../Soundness/#plfa_plfa-part3-Soundness-4053" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-4113" href="../Soundness/#plfa_plfa-part3-Soundness-4055" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-4114" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-4118" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4120" href="../Soundness/#plfa_plfa-part3-Soundness-4073" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-4122" href="../Soundness/#plfa_plfa-part3-Soundness-3028" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-4125" href="../Soundness/#plfa_plfa-part3-Soundness-4101" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4127" href="../Soundness/#plfa_plfa-part3-Soundness-3028" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-4129" href="../Soundness/#plfa_plfa-part3-Soundness-4061" class="Bound">γ</a>
  <a id="plfa_plfa-part3-Soundness-4133" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4135" href="../Soundness/#plfa_plfa-part3-Soundness-4061" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-4137" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-4139" href="../Soundness/#plfa_plfa-part3-Soundness-4085" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-4141" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-4143" href="../Soundness/#plfa_plfa-part3-Soundness-4057" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-4149" class="Comment">------------------</a>
  <a id="plfa_plfa-part3-Soundness-4170" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4172" href="../Soundness/#plfa_plfa-part3-Soundness-4073" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-4174" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-4176" href="../Untyped/#plfa_plfa-part2-Untyped-6759" class="Function">subst</a> <a id="plfa_plfa-part3-Soundness-4182" href="../Soundness/#plfa_plfa-part3-Soundness-4101" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4184" href="../Soundness/#plfa_plfa-part3-Soundness-4085" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-4186" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-4188" href="../Soundness/#plfa_plfa-part3-Soundness-4057" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-4190" href="../Soundness/#plfa_plfa-part3-Soundness-4037" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4201" href="../Soundness/#plfa_plfa-part3-Soundness-4201" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4203" href="../Soundness/#plfa_plfa-part3-Soundness-4203" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4205" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4206" href="../Denotational/#plfa_plfa-part3-Denotational-9204" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-4210" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4211" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-4213" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-4215" href="../Soundness/#plfa_plfa-part3-Soundness-4215" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-4216" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-4219" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-4221" href="../Soundness/#plfa_plfa-part3-Soundness-4203" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4223" href="../Soundness/#plfa_plfa-part3-Soundness-4215" class="Bound">x</a>
<a id="plfa_plfa-part3-Soundness-4225" href="../Soundness/#plfa_plfa-part3-Soundness-4037" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4236" href="../Soundness/#plfa_plfa-part3-Soundness-4236" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4238" href="../Soundness/#plfa_plfa-part3-Soundness-4238" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4240" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4241" href="../Denotational/#plfa_plfa-part3-Denotational-9279" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-4248" href="../Soundness/#plfa_plfa-part3-Soundness-4248" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-4251" href="../Soundness/#plfa_plfa-part3-Soundness-4251" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-4253" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4255" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Soundness-4259" href="../Denotational/#plfa_plfa-part3-Denotational-9279" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-4266" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4267" href="../Soundness/#plfa_plfa-part3-Soundness-4037" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4278" href="../Soundness/#plfa_plfa-part3-Soundness-4236" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4280" href="../Soundness/#plfa_plfa-part3-Soundness-4238" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4282" href="../Soundness/#plfa_plfa-part3-Soundness-4248" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-4284" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4286" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4287" href="../Soundness/#plfa_plfa-part3-Soundness-4037" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4298" href="../Soundness/#plfa_plfa-part3-Soundness-4236" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4300" href="../Soundness/#plfa_plfa-part3-Soundness-4238" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4302" href="../Soundness/#plfa_plfa-part3-Soundness-4251" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-4304" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-4306" href="../Soundness/#plfa_plfa-part3-Soundness-4037" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4317" href="../Soundness/#plfa_plfa-part3-Soundness-4317" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4319" href="../Soundness/#plfa_plfa-part3-Soundness-4319" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4321" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4322" href="../Denotational/#plfa_plfa-part3-Denotational-9401" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-4330" href="../Soundness/#plfa_plfa-part3-Soundness-4330" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-4331" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4333" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Soundness-4337" href="../Denotational/#plfa_plfa-part3-Denotational-9401" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-4345" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4346" href="../Soundness/#plfa_plfa-part3-Soundness-4037" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4357" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-4360" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4361" href="../Soundness/#plfa_plfa-part3-Soundness-4361" class="Bound">A</a><a id="plfa_plfa-part3-Soundness-4362" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-4364" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4366" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part3-Soundness-4371" href="../Soundness/#plfa_plfa-part3-Soundness-4317" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-4372" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4374" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4375" href="../Soundness/#plfa_plfa-part3-Soundness-3399" class="Function">subst-ext</a> <a id="plfa_plfa-part3-Soundness-4385" href="../Soundness/#plfa_plfa-part3-Soundness-4317" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4387" href="../Soundness/#plfa_plfa-part3-Soundness-4319" class="Bound">s</a><a id="plfa_plfa-part3-Soundness-4388" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4390" href="../Soundness/#plfa_plfa-part3-Soundness-4330" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-4391" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-4393" href="../Soundness/#plfa_plfa-part3-Soundness-4037" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4404" href="../Soundness/#plfa_plfa-part3-Soundness-4404" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4406" href="../Soundness/#plfa_plfa-part3-Soundness-4406" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4408" href="../Denotational/#plfa_plfa-part3-Denotational-9513" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-4416" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-4418" href="../Denotational/#plfa_plfa-part3-Denotational-9513" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-4426" href="../Soundness/#plfa_plfa-part3-Soundness-4037" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4437" href="../Soundness/#plfa_plfa-part3-Soundness-4437" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4439" href="../Soundness/#plfa_plfa-part3-Soundness-4439" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4441" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4442" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-4450" href="../Soundness/#plfa_plfa-part3-Soundness-4450" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-4453" href="../Soundness/#plfa_plfa-part3-Soundness-4453" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-4455" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4457" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Soundness-4461" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-4469" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4470" href="../Soundness/#plfa_plfa-part3-Soundness-4037" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4481" href="../Soundness/#plfa_plfa-part3-Soundness-4437" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4483" href="../Soundness/#plfa_plfa-part3-Soundness-4439" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4485" href="../Soundness/#plfa_plfa-part3-Soundness-4450" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-4487" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4489" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4490" href="../Soundness/#plfa_plfa-part3-Soundness-4037" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4501" href="../Soundness/#plfa_plfa-part3-Soundness-4437" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4503" href="../Soundness/#plfa_plfa-part3-Soundness-4439" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4505" href="../Soundness/#plfa_plfa-part3-Soundness-4453" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-4507" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-4509" href="../Soundness/#plfa_plfa-part3-Soundness-4037" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4520" href="../Soundness/#plfa_plfa-part3-Soundness-4520" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4522" href="../Soundness/#plfa_plfa-part3-Soundness-4522" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4524" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4525" href="../Denotational/#plfa_plfa-part3-Denotational-9695" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-4529" href="../Soundness/#plfa_plfa-part3-Soundness-4529" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-4531" href="../Soundness/#plfa_plfa-part3-Soundness-4531" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-4533" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4535" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-4537" href="../Denotational/#plfa_plfa-part3-Denotational-9695" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-4541" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4542" href="../Soundness/#plfa_plfa-part3-Soundness-4037" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4553" href="../Soundness/#plfa_plfa-part3-Soundness-4520" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4555" href="../Soundness/#plfa_plfa-part3-Soundness-4522" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4557" href="../Soundness/#plfa_plfa-part3-Soundness-4529" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-4558" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4560" href="../Soundness/#plfa_plfa-part3-Soundness-4531" class="Bound">lt</a>
</pre><p>The proof is by induction on the semantics of <code>M</code>. The two interesting cases are for variables and lambda abstractions.</p><ul><li><p>For a variable <code>x</code>, we have that <code>v = γ x</code> and we need to show that <code>δ ⊢ σ x ↓ v</code>. From the premise applied to <code>x</code>, we have that <code>δ ⊢ σ x ↓ γ x</code> aka <code>δ ⊢ σ x ↓ v</code>.</p></li><li><p>For a lambda abstraction, we must extend the substitution for the induction hypothesis. We apply the <code>subst-ext</code> lemma to show that the extended substitution maps variables to terms that result in the appropriate values.</p></li></ul><h3 id="single-substitution-preserves-denotations">Single substitution preserves denotations</h3><p>For β reduction, <code>(ƛ N) · M —→ N [ M ]</code>, we need to show that the semantics is preserved when substituting <code>M</code> for de Bruijn index 0 in term <code>N</code>. By inversion on the rules <code>↦-elim</code> and <code>↦-intro</code>, we have that <code>γ , v ⊢ M ↓ w</code> and <code>γ ⊢ N ↓ v</code>. So we need to show that <code>γ ⊢ M [ N ] ↓ w</code>, or equivalently, that <code>γ ⊢ subst (subst-zero N) M ↓ w</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-substitution"></a><a id="plfa_plfa-part3-Soundness-5490" href="../Soundness/#plfa_plfa-part3-Soundness-5490" class="Function">substitution</a> <a id="plfa_plfa-part3-Soundness-5503" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-5505" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-5507" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5508" href="../Soundness/#plfa_plfa-part3-Soundness-5508" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-5509" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-5511" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5512" href="../Soundness/#plfa_plfa-part3-Soundness-5512" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-5514" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-5516" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-5520" href="../Soundness/#plfa_plfa-part3-Soundness-5508" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-5521" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-5523" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5524" href="../Soundness/#plfa_plfa-part3-Soundness-5524" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-5526" href="../Soundness/#plfa_plfa-part3-Soundness-5526" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-5528" href="../Soundness/#plfa_plfa-part3-Soundness-5528" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-5530" href="../Soundness/#plfa_plfa-part3-Soundness-5530" class="Bound">w</a><a id="plfa_plfa-part3-Soundness-5531" class="Symbol">}</a>
   <a id="plfa_plfa-part3-Soundness-5536" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-5538" href="../Soundness/#plfa_plfa-part3-Soundness-5512" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-5540" href="../Denotational/#plfa_plfa-part3-Denotational-7229" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-5543" href="../Soundness/#plfa_plfa-part3-Soundness-5528" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-5545" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-5547" href="../Soundness/#plfa_plfa-part3-Soundness-5524" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-5549" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-5551" href="../Soundness/#plfa_plfa-part3-Soundness-5530" class="Bound">w</a>
   <a id="plfa_plfa-part3-Soundness-5556" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-5558" href="../Soundness/#plfa_plfa-part3-Soundness-5512" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-5560" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-5562" href="../Soundness/#plfa_plfa-part3-Soundness-5526" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-5564" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-5566" href="../Soundness/#plfa_plfa-part3-Soundness-5528" class="Bound">v</a>
     <a id="plfa_plfa-part3-Soundness-5573" class="Comment">---------------</a>
   <a id="plfa_plfa-part3-Soundness-5592" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-5594" href="../Soundness/#plfa_plfa-part3-Soundness-5512" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-5596" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-5598" href="../Soundness/#plfa_plfa-part3-Soundness-5524" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-5600" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">[</a> <a id="plfa_plfa-part3-Soundness-5602" href="../Soundness/#plfa_plfa-part3-Soundness-5526" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-5604" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">]</a> <a id="plfa_plfa-part3-Soundness-5606" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-5608" href="../Soundness/#plfa_plfa-part3-Soundness-5530" class="Bound">w</a>
<a id="plfa_plfa-part3-Soundness-5610" href="../Soundness/#plfa_plfa-part3-Soundness-5490" class="Function">substitution</a><a id="plfa_plfa-part3-Soundness-5622" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5623" href="../Soundness/#plfa_plfa-part3-Soundness-5623" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-5624" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-5626" href="../Soundness/#plfa_plfa-part3-Soundness-5626" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-5627" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-5629" href="../Soundness/#plfa_plfa-part3-Soundness-5629" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-5630" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-5632" href="../Soundness/#plfa_plfa-part3-Soundness-5632" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-5633" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-5635" href="../Soundness/#plfa_plfa-part3-Soundness-5635" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-5636" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-5638" href="../Soundness/#plfa_plfa-part3-Soundness-5638" class="Bound">w</a><a id="plfa_plfa-part3-Soundness-5639" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-5641" href="../Soundness/#plfa_plfa-part3-Soundness-5641" class="Bound">dn</a> <a id="plfa_plfa-part3-Soundness-5644" href="../Soundness/#plfa_plfa-part3-Soundness-5644" class="Bound">dm</a> <a id="plfa_plfa-part3-Soundness-5647" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Soundness-5651" href="../Soundness/#plfa_plfa-part3-Soundness-4037" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5662" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5663" href="../Untyped/#plfa_plfa-part2-Untyped-7175" class="Function">subst-zero</a> <a id="plfa_plfa-part3-Soundness-5674" href="../Soundness/#plfa_plfa-part3-Soundness-5632" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-5675" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5677" href="../Soundness/#plfa_plfa-part3-Soundness-5699" class="Function">sub-z-ok</a> <a id="plfa_plfa-part3-Soundness-5686" href="../Soundness/#plfa_plfa-part3-Soundness-5641" class="Bound">dn</a>
  <a id="plfa_plfa-part3-Soundness-5691" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Soundness-5699" href="../Soundness/#plfa_plfa-part3-Soundness-5699" class="Function">sub-z-ok</a> <a id="plfa_plfa-part3-Soundness-5708" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-5710" href="../Soundness/#plfa_plfa-part3-Soundness-5626" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-5712" href="../Soundness/#plfa_plfa-part3-Soundness-3028" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-5715" href="../Untyped/#plfa_plfa-part2-Untyped-7175" class="Function">subst-zero</a> <a id="plfa_plfa-part3-Soundness-5726" href="../Soundness/#plfa_plfa-part3-Soundness-5632" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-5728" href="../Soundness/#plfa_plfa-part3-Soundness-3028" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-5730" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5731" href="../Soundness/#plfa_plfa-part3-Soundness-5626" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-5733" href="../Denotational/#plfa_plfa-part3-Denotational-7229" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-5736" href="../Soundness/#plfa_plfa-part3-Soundness-5635" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-5737" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-5741" href="../Soundness/#plfa_plfa-part3-Soundness-5699" class="Function">sub-z-ok</a> <a id="plfa_plfa-part3-Soundness-5750" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-5752" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-5754" href="../Soundness/#plfa_plfa-part3-Soundness-5644" class="Bound">dm</a>
  <a id="plfa_plfa-part3-Soundness-5759" href="../Soundness/#plfa_plfa-part3-Soundness-5699" class="Function">sub-z-ok</a> <a id="plfa_plfa-part3-Soundness-5768" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5769" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-5771" href="../Soundness/#plfa_plfa-part3-Soundness-5771" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-5772" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5774" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-5776" href="../Denotational/#plfa_plfa-part3-Denotational-9204" class="InductiveConstructor">var</a>
</pre><p>This result is a corollary of the lemma for simultaneous substitution. To use the lemma, we just need to show that <code>subst-zero M</code> maps variables to terms that produces the same values as those in <code>γ , v</code>. Let <code>y</code> be an arbitrary variable (de Bruijn index).</p><ul><li><p>If it is <code>Z</code>, then <code>(subst-zero M) y = M</code> and <code>(γ , v) y = v</code>. By the premise we conclude that <code>γ ⊢ M ↓ v</code>.</p></li><li><p>If it is <code>S x</code>, then <code>(subst-zero M) (S x) = x</code> and <code>(γ , v) (S x) = γ x</code>. So we conclude that <code>γ ⊢ x ↓ γ x</code> by rule <code>var</code>.</p></li></ul><h3 id="reduction-preserves-denotations">Reduction preserves denotations</h3><p>With the substitution lemma in hand, it is straightforward to prove that reduction preserves denotations.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-preserve"></a><a id="plfa_plfa-part3-Soundness-6441" href="../Soundness/#plfa_plfa-part3-Soundness-6441" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6450" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-6452" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-6454" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-6455" href="../Soundness/#plfa_plfa-part3-Soundness-6455" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-6456" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-6458" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-6459" href="../Soundness/#plfa_plfa-part3-Soundness-6459" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-6461" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-6463" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-6467" href="../Soundness/#plfa_plfa-part3-Soundness-6455" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-6468" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-6470" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-6471" href="../Soundness/#plfa_plfa-part3-Soundness-6471" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-6473" href="../Soundness/#plfa_plfa-part3-Soundness-6473" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-6475" href="../Soundness/#plfa_plfa-part3-Soundness-6475" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-6476" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-6480" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-6482" href="../Soundness/#plfa_plfa-part3-Soundness-6459" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-6484" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-6486" href="../Soundness/#plfa_plfa-part3-Soundness-6471" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-6488" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-6490" href="../Soundness/#plfa_plfa-part3-Soundness-6475" class="Bound">v</a>
  <a id="plfa_plfa-part3-Soundness-6494" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-6496" href="../Soundness/#plfa_plfa-part3-Soundness-6471" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-6498" href="../Untyped/#plfa_plfa-part2-Untyped-9826" class="Datatype Operator">—→</a> <a id="plfa_plfa-part3-Soundness-6501" href="../Soundness/#plfa_plfa-part3-Soundness-6473" class="Bound">N</a>
    <a id="plfa_plfa-part3-Soundness-6507" class="Comment">----------</a>
  <a id="plfa_plfa-part3-Soundness-6520" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-6522" href="../Soundness/#plfa_plfa-part3-Soundness-6459" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-6524" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-6526" href="../Soundness/#plfa_plfa-part3-Soundness-6473" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-6528" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-6530" href="../Soundness/#plfa_plfa-part3-Soundness-6475" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-6532" href="../Soundness/#plfa_plfa-part3-Soundness-6441" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6541" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6542" href="../Denotational/#plfa_plfa-part3-Denotational-9204" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Soundness-6545" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6547" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-6550" href="../Soundness/#plfa_plfa-part3-Soundness-6441" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6559" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6560" href="../Denotational/#plfa_plfa-part3-Denotational-9279" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-6567" href="../Soundness/#plfa_plfa-part3-Soundness-6567" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-6570" href="../Soundness/#plfa_plfa-part3-Soundness-6570" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-6572" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6574" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6575" href="../Untyped/#plfa_plfa-part2-Untyped-9876" class="InductiveConstructor">ξ₁</a> <a id="plfa_plfa-part3-Soundness-6578" href="../Soundness/#plfa_plfa-part3-Soundness-6578" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-6579" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6581" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-6583" href="../Denotational/#plfa_plfa-part3-Denotational-9279" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-6590" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6591" href="../Soundness/#plfa_plfa-part3-Soundness-6441" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6600" href="../Soundness/#plfa_plfa-part3-Soundness-6567" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-6603" href="../Soundness/#plfa_plfa-part3-Soundness-6578" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-6604" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6606" href="../Soundness/#plfa_plfa-part3-Soundness-6570" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-6609" href="../Soundness/#plfa_plfa-part3-Soundness-6441" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6618" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6619" href="../Denotational/#plfa_plfa-part3-Denotational-9279" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-6626" href="../Soundness/#plfa_plfa-part3-Soundness-6626" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-6629" href="../Soundness/#plfa_plfa-part3-Soundness-6629" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-6631" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6633" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6634" href="../Untyped/#plfa_plfa-part2-Untyped-9966" class="InductiveConstructor">ξ₂</a> <a id="plfa_plfa-part3-Soundness-6637" href="../Soundness/#plfa_plfa-part3-Soundness-6637" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-6638" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6640" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-6642" href="../Denotational/#plfa_plfa-part3-Denotational-9279" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-6649" href="../Soundness/#plfa_plfa-part3-Soundness-6626" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-6652" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6653" href="../Soundness/#plfa_plfa-part3-Soundness-6441" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6662" href="../Soundness/#plfa_plfa-part3-Soundness-6629" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-6665" href="../Soundness/#plfa_plfa-part3-Soundness-6637" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-6666" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-6668" href="../Soundness/#plfa_plfa-part3-Soundness-6441" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6677" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6678" href="../Denotational/#plfa_plfa-part3-Denotational-9279" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-6685" href="../Soundness/#plfa_plfa-part3-Soundness-6685" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-6688" href="../Soundness/#plfa_plfa-part3-Soundness-6688" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-6690" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6692" href="../Untyped/#plfa_plfa-part2-Untyped-10056" class="InductiveConstructor">β</a> <a id="plfa_plfa-part3-Soundness-6694" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-6696" href="../Soundness/#plfa_plfa-part3-Soundness-5490" class="Function">substitution</a> <a id="plfa_plfa-part3-Soundness-6709" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6710" href="../Compositional/#plfa_plfa-part3-Compositional-3633" class="Function">lambda-inversion</a> <a id="plfa_plfa-part3-Soundness-6727" href="../Soundness/#plfa_plfa-part3-Soundness-6685" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-6729" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6731" href="../Soundness/#plfa_plfa-part3-Soundness-6688" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-6734" href="../Soundness/#plfa_plfa-part3-Soundness-6441" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6743" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6744" href="../Denotational/#plfa_plfa-part3-Denotational-9401" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-6752" href="../Soundness/#plfa_plfa-part3-Soundness-6752" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-6753" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6755" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6756" href="../Untyped/#plfa_plfa-part2-Untyped-10164" class="InductiveConstructor">ζ</a> <a id="plfa_plfa-part3-Soundness-6758" href="../Soundness/#plfa_plfa-part3-Soundness-6758" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-6759" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6761" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-6763" href="../Denotational/#plfa_plfa-part3-Denotational-9401" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-6771" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6772" href="../Soundness/#plfa_plfa-part3-Soundness-6441" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6781" href="../Soundness/#plfa_plfa-part3-Soundness-6752" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-6783" href="../Soundness/#plfa_plfa-part3-Soundness-6758" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-6784" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-6786" href="../Soundness/#plfa_plfa-part3-Soundness-6441" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6795" href="../Denotational/#plfa_plfa-part3-Denotational-9513" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-6803" href="../Soundness/#plfa_plfa-part3-Soundness-6803" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-6805" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-6807" href="../Denotational/#plfa_plfa-part3-Denotational-9513" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-6815" href="../Soundness/#plfa_plfa-part3-Soundness-6441" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6824" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6825" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-6833" href="../Soundness/#plfa_plfa-part3-Soundness-6833" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-6835" href="../Soundness/#plfa_plfa-part3-Soundness-6835" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-6837" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6839" href="../Soundness/#plfa_plfa-part3-Soundness-6839" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-6841" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-6843" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-6851" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6852" href="../Soundness/#plfa_plfa-part3-Soundness-6441" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6861" href="../Soundness/#plfa_plfa-part3-Soundness-6833" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-6863" href="../Soundness/#plfa_plfa-part3-Soundness-6839" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-6864" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6866" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6867" href="../Soundness/#plfa_plfa-part3-Soundness-6441" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6876" href="../Soundness/#plfa_plfa-part3-Soundness-6835" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-6879" href="../Soundness/#plfa_plfa-part3-Soundness-6839" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-6880" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-6882" href="../Soundness/#plfa_plfa-part3-Soundness-6441" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6891" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6892" href="../Denotational/#plfa_plfa-part3-Denotational-9695" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-6896" href="../Soundness/#plfa_plfa-part3-Soundness-6896" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-6898" href="../Soundness/#plfa_plfa-part3-Soundness-6898" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-6900" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6902" href="../Soundness/#plfa_plfa-part3-Soundness-6902" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-6904" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-6906" href="../Denotational/#plfa_plfa-part3-Denotational-9695" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-6910" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6911" href="../Soundness/#plfa_plfa-part3-Soundness-6441" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6920" href="../Soundness/#plfa_plfa-part3-Soundness-6896" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-6922" href="../Soundness/#plfa_plfa-part3-Soundness-6902" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-6923" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6925" href="../Soundness/#plfa_plfa-part3-Soundness-6898" class="Bound">lt</a>
</pre><p>We proceed by induction on the semantics of <code>M</code> with case analysis on the reduction.</p><ul><li><p>If <code>M</code> is a variable, then there is no such reduction.</p></li><li><p>If <code>M</code> is an application, then the reduction is either a congruence (ξ₁ or ξ₂) or β. For each congruence, we use the induction hypothesis. For β reduction we use the substitution lemma and the <code>sub</code> rule.</p></li><li><p>The rest of the cases are straightforward.</p></li></ul><h2 id="reduction-reflects-denotations">Reduction reflects denotations</h2><p>This section proves that reduction reflects the denotation of a term. That is, if <code>N</code> results in <code>v</code>, and if <code>M</code> reduces to <code>N</code>, then <code>M</code> also results in <code>v</code>. While there are some broad similarities between this proof and the above proof of semantic preservation, we shall require a few more technical lemmas to obtain this result.</p><p>The main challenge is dealing with the substitution in β reduction:</p><pre><code>(ƛ N) · M —→ N [ M ]</code></pre><p>We have that <code>γ ⊢ N [ M ] ↓ v</code> and need to show that <code>γ ⊢ (ƛ N) · M ↓ v</code>. Now consider the derivation of <code>γ ⊢ N [ M ] ↓ v</code>. The term <code>M</code> may occur 0, 1, or many times inside <code>N [ M ]</code>. At each of those occurrences, <code>M</code> may result in a different value. But to build a derivation for <code>(ƛ N) · M</code>, we need a single value for <code>M</code>. If <code>M</code> occurred more than 1 time, then we can join all of the different values using <code>⊔</code>. If <code>M</code> occurred 0 times, then we do not need any information about <code>M</code> and can therefore use <code>⊥</code> for the value of <code>M</code>.</p><h3 id="renaming-reflects-meaning">Renaming reflects meaning</h3><p>Previously we showed that renaming variables preserves meaning. Now we prove the opposite, that it reflects meaning. That is, if <code>δ ⊢ rename ρ M ↓ v</code>, then <code>γ ⊢ M ↓ v</code>, where <code>(δ ∘ ρ) `⊑ γ</code>.</p>First, we need a variant of a lemma given earlier.<pre class="Agda"><a id="plfa_plfa-part3-Soundness-ext-`⊑"></a><a id="plfa_plfa-part3-Soundness-8624" href="../Soundness/#plfa_plfa-part3-Soundness-8624" class="Function">ext-`⊑</a> <a id="plfa_plfa-part3-Soundness-8631" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-8633" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-8635" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-8636" href="../Soundness/#plfa_plfa-part3-Soundness-8636" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-8638" href="../Soundness/#plfa_plfa-part3-Soundness-8638" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-8640" href="../Soundness/#plfa_plfa-part3-Soundness-8640" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-8641" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-8643" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-8644" href="../Soundness/#plfa_plfa-part3-Soundness-8644" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-8646" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-8648" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-8652" href="../Soundness/#plfa_plfa-part3-Soundness-8636" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-8653" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-8655" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-8656" href="../Soundness/#plfa_plfa-part3-Soundness-8656" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-8658" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-8660" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-8664" href="../Soundness/#plfa_plfa-part3-Soundness-8638" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-8665" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-8669" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-8671" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8672" href="../Soundness/#plfa_plfa-part3-Soundness-8672" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-8674" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-8676" href="../Substitution/#plfa_plfa-part2-Substitution-2133" class="Function">Rename</a> <a id="plfa_plfa-part3-Soundness-8683" href="../Soundness/#plfa_plfa-part3-Soundness-8636" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-8685" href="../Soundness/#plfa_plfa-part3-Soundness-8638" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-8686" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-8690" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-8692" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8693" href="../Soundness/#plfa_plfa-part3-Soundness-8656" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-8695" href="https://agda.github.io/agda-stdlib/v2.1/Function.Base.html#1115" class="Function Operator">∘</a> <a id="plfa_plfa-part3-Soundness-8697" href="../Soundness/#plfa_plfa-part3-Soundness-8672" class="Bound">ρ</a><a id="plfa_plfa-part3-Soundness-8698" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8700" href="../Denotational/#plfa_plfa-part3-Denotational-7900" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-8703" href="../Soundness/#plfa_plfa-part3-Soundness-8644" class="Bound">γ</a>
    <a id="plfa_plfa-part3-Soundness-8709" class="Comment">------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-8742" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-8744" class="Symbol">((</a><a id="plfa_plfa-part3-Soundness-8746" href="../Soundness/#plfa_plfa-part3-Soundness-8656" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-8748" href="../Denotational/#plfa_plfa-part3-Denotational-7229" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-8751" href="../Soundness/#plfa_plfa-part3-Soundness-8640" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-8752" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8754" href="https://agda.github.io/agda-stdlib/v2.1/Function.Base.html#1115" class="Function Operator">∘</a> <a id="plfa_plfa-part3-Soundness-8756" href="../Untyped/#plfa_plfa-part2-Untyped-5709" class="Function">ext</a> <a id="plfa_plfa-part3-Soundness-8760" href="../Soundness/#plfa_plfa-part3-Soundness-8672" class="Bound">ρ</a><a id="plfa_plfa-part3-Soundness-8761" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8763" href="../Denotational/#plfa_plfa-part3-Denotational-7900" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-8766" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8767" href="../Soundness/#plfa_plfa-part3-Soundness-8644" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-8769" href="../Denotational/#plfa_plfa-part3-Denotational-7229" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-8772" href="../Soundness/#plfa_plfa-part3-Soundness-8640" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-8773" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-8775" href="../Soundness/#plfa_plfa-part3-Soundness-8624" class="Function">ext-`⊑</a> <a id="plfa_plfa-part3-Soundness-8782" href="../Soundness/#plfa_plfa-part3-Soundness-8782" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-8784" href="../Soundness/#plfa_plfa-part3-Soundness-8784" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-8787" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-8789" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-8791" href="../Denotational/#plfa_plfa-part3-Denotational-5402" class="Function">⊑-refl</a>
<a id="plfa_plfa-part3-Soundness-8798" href="../Soundness/#plfa_plfa-part3-Soundness-8624" class="Function">ext-`⊑</a> <a id="plfa_plfa-part3-Soundness-8805" href="../Soundness/#plfa_plfa-part3-Soundness-8805" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-8807" href="../Soundness/#plfa_plfa-part3-Soundness-8807" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-8810" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8811" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-8813" href="../Soundness/#plfa_plfa-part3-Soundness-8813" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-8814" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8816" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-8818" href="../Soundness/#plfa_plfa-part3-Soundness-8807" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-8821" href="../Soundness/#plfa_plfa-part3-Soundness-8813" class="Bound">x</a>
</pre>The proof is then as follows.<pre class="Agda"><a id="plfa_plfa-part3-Soundness-rename-reflect"></a><a id="plfa_plfa-part3-Soundness-8866" href="../Soundness/#plfa_plfa-part3-Soundness-8866" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-8881" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-8883" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-8885" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-8886" href="../Soundness/#plfa_plfa-part3-Soundness-8886" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-8888" href="../Soundness/#plfa_plfa-part3-Soundness-8888" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-8890" href="../Soundness/#plfa_plfa-part3-Soundness-8890" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-8891" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-8893" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-8894" href="../Soundness/#plfa_plfa-part3-Soundness-8894" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-8896" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-8898" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-8902" href="../Soundness/#plfa_plfa-part3-Soundness-8886" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-8903" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-8905" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-8906" href="../Soundness/#plfa_plfa-part3-Soundness-8906" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-8908" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-8910" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-8914" href="../Soundness/#plfa_plfa-part3-Soundness-8888" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-8915" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-8917" class="Symbol">{</a> <a id="plfa_plfa-part3-Soundness-8919" href="../Soundness/#plfa_plfa-part3-Soundness-8919" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-8921" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-8923" href="../Soundness/#plfa_plfa-part3-Soundness-8886" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-8925" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-8927" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-8928" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-8932" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-8934" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-8935" href="../Soundness/#plfa_plfa-part3-Soundness-8935" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-8937" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-8939" href="../Substitution/#plfa_plfa-part2-Substitution-2133" class="Function">Rename</a> <a id="plfa_plfa-part3-Soundness-8946" href="../Soundness/#plfa_plfa-part3-Soundness-8886" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-8948" href="../Soundness/#plfa_plfa-part3-Soundness-8888" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-8949" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-8953" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-8955" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8956" href="../Soundness/#plfa_plfa-part3-Soundness-8906" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-8958" href="https://agda.github.io/agda-stdlib/v2.1/Function.Base.html#1115" class="Function Operator">∘</a> <a id="plfa_plfa-part3-Soundness-8960" href="../Soundness/#plfa_plfa-part3-Soundness-8935" class="Bound">ρ</a><a id="plfa_plfa-part3-Soundness-8961" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8963" href="../Denotational/#plfa_plfa-part3-Denotational-7900" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-8966" href="../Soundness/#plfa_plfa-part3-Soundness-8894" class="Bound">γ</a>
  <a id="plfa_plfa-part3-Soundness-8970" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-8972" href="../Soundness/#plfa_plfa-part3-Soundness-8906" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-8974" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-8976" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part3-Soundness-8983" href="../Soundness/#plfa_plfa-part3-Soundness-8935" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-8985" href="../Soundness/#plfa_plfa-part3-Soundness-8919" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-8987" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-8989" href="../Soundness/#plfa_plfa-part3-Soundness-8890" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-8995" class="Comment">------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-9034" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-9036" href="../Soundness/#plfa_plfa-part3-Soundness-8894" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-9038" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-9040" href="../Soundness/#plfa_plfa-part3-Soundness-8919" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-9042" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-9044" href="../Soundness/#plfa_plfa-part3-Soundness-8890" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-9046" href="../Soundness/#plfa_plfa-part3-Soundness-8866" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9061" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9062" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9064" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9066" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-9068" href="../Soundness/#plfa_plfa-part3-Soundness-9068" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-9069" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9071" href="../Soundness/#plfa_plfa-part3-Soundness-9071" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9077" href="../Soundness/#plfa_plfa-part3-Soundness-9077" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-9079" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-9084" href="../Compositional/#plfa_plfa-part3-Compositional-9833" class="Function">var-inv</a> <a id="plfa_plfa-part3-Soundness-9092" href="../Soundness/#plfa_plfa-part3-Soundness-9077" class="Bound">d</a>
<a id="plfa_plfa-part3-Soundness-9094" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-9098" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-9100" href="../Soundness/#plfa_plfa-part3-Soundness-9100" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-9103" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-9106" href="../Denotational/#plfa_plfa-part3-Denotational-9695" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-9110" href="../Denotational/#plfa_plfa-part3-Denotational-9204" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-9114" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9115" href="../Denotational/#plfa_plfa-part3-Denotational-4558" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Soundness-9123" href="../Soundness/#plfa_plfa-part3-Soundness-9100" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-9126" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9127" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9133" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-9134" class="Symbol">))</a>
<a id="plfa_plfa-part3-Soundness-9137" href="../Soundness/#plfa_plfa-part3-Soundness-8866" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9152" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9153" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9155" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9157" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-9159" href="../Soundness/#plfa_plfa-part3-Soundness-9159" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-9160" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-9162" class="Argument">ρ</a> <a id="plfa_plfa-part3-Soundness-9164" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9166" href="../Soundness/#plfa_plfa-part3-Soundness-9166" class="Bound">ρ</a><a id="plfa_plfa-part3-Soundness-9167" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9169" href="../Soundness/#plfa_plfa-part3-Soundness-9169" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9175" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9176" href="../Denotational/#plfa_plfa-part3-Denotational-9401" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-9184" href="../Soundness/#plfa_plfa-part3-Soundness-9184" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-9185" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9187" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-9192" href="../Denotational/#plfa_plfa-part3-Denotational-9401" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-9200" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9201" href="../Soundness/#plfa_plfa-part3-Soundness-8866" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9216" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9217" href="../Soundness/#plfa_plfa-part3-Soundness-8624" class="Function">ext-`⊑</a> <a id="plfa_plfa-part3-Soundness-9224" href="../Soundness/#plfa_plfa-part3-Soundness-9166" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-9226" href="../Soundness/#plfa_plfa-part3-Soundness-9169" class="Bound">all-n</a><a id="plfa_plfa-part3-Soundness-9231" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9233" href="../Soundness/#plfa_plfa-part3-Soundness-9184" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-9234" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-9236" href="../Soundness/#plfa_plfa-part3-Soundness-8866" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9251" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9252" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9254" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9256" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-9258" href="../Soundness/#plfa_plfa-part3-Soundness-9258" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-9259" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9261" href="../Soundness/#plfa_plfa-part3-Soundness-9261" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9267" href="../Denotational/#plfa_plfa-part3-Denotational-9513" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-9275" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9277" href="../Denotational/#plfa_plfa-part3-Denotational-9513" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-9285" href="../Soundness/#plfa_plfa-part3-Soundness-8866" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9300" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9301" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9303" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9305" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-9307" href="../Soundness/#plfa_plfa-part3-Soundness-9307" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-9308" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9310" href="../Soundness/#plfa_plfa-part3-Soundness-9310" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9316" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9317" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-9325" href="../Soundness/#plfa_plfa-part3-Soundness-9325" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-9328" href="../Soundness/#plfa_plfa-part3-Soundness-9328" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-9330" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9332" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-9337" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-9345" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9346" href="../Soundness/#plfa_plfa-part3-Soundness-8866" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9361" href="../Soundness/#plfa_plfa-part3-Soundness-9310" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9367" href="../Soundness/#plfa_plfa-part3-Soundness-9325" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-9369" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9371" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9372" href="../Soundness/#plfa_plfa-part3-Soundness-8866" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9387" href="../Soundness/#plfa_plfa-part3-Soundness-9310" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9393" href="../Soundness/#plfa_plfa-part3-Soundness-9328" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-9395" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-9397" href="../Soundness/#plfa_plfa-part3-Soundness-8866" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9412" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9413" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9415" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9417" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-9419" href="../Soundness/#plfa_plfa-part3-Soundness-9419" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-9420" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9422" href="../Soundness/#plfa_plfa-part3-Soundness-9422" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9428" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9429" href="../Denotational/#plfa_plfa-part3-Denotational-9695" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-9433" href="../Soundness/#plfa_plfa-part3-Soundness-9433" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-9436" href="../Soundness/#plfa_plfa-part3-Soundness-9436" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-9438" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9440" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-9445" href="../Denotational/#plfa_plfa-part3-Denotational-9695" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-9449" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9450" href="../Soundness/#plfa_plfa-part3-Soundness-8866" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9465" href="../Soundness/#plfa_plfa-part3-Soundness-9422" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9471" href="../Soundness/#plfa_plfa-part3-Soundness-9433" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-9473" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9475" href="../Soundness/#plfa_plfa-part3-Soundness-9436" class="Bound">lt</a>
<a id="plfa_plfa-part3-Soundness-9478" href="../Soundness/#plfa_plfa-part3-Soundness-8866" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9493" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9494" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9496" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9498" href="../Soundness/#plfa_plfa-part3-Soundness-9498" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-9500" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-9502" href="../Soundness/#plfa_plfa-part3-Soundness-9502" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-9503" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9505" href="../Soundness/#plfa_plfa-part3-Soundness-9505" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9511" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9512" href="../Denotational/#plfa_plfa-part3-Denotational-9279" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-9519" href="../Soundness/#plfa_plfa-part3-Soundness-9519" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-9522" href="../Soundness/#plfa_plfa-part3-Soundness-9522" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-9524" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9526" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-9531" href="../Denotational/#plfa_plfa-part3-Denotational-9279" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-9538" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9539" href="../Soundness/#plfa_plfa-part3-Soundness-8866" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9554" href="../Soundness/#plfa_plfa-part3-Soundness-9505" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9560" href="../Soundness/#plfa_plfa-part3-Soundness-9519" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-9562" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9564" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9565" href="../Soundness/#plfa_plfa-part3-Soundness-8866" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9580" href="../Soundness/#plfa_plfa-part3-Soundness-9505" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9586" href="../Soundness/#plfa_plfa-part3-Soundness-9522" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-9588" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-9590" href="../Soundness/#plfa_plfa-part3-Soundness-8866" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9605" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9606" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9608" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9610" href="../Soundness/#plfa_plfa-part3-Soundness-9610" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-9612" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-9614" href="../Soundness/#plfa_plfa-part3-Soundness-9614" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-9615" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9617" href="../Soundness/#plfa_plfa-part3-Soundness-9617" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9623" href="../Denotational/#plfa_plfa-part3-Denotational-9513" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-9631" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9633" href="../Denotational/#plfa_plfa-part3-Denotational-9513" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-9641" href="../Soundness/#plfa_plfa-part3-Soundness-8866" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9656" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9657" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9659" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9661" href="../Soundness/#plfa_plfa-part3-Soundness-9661" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-9663" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-9665" href="../Soundness/#plfa_plfa-part3-Soundness-9665" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-9666" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9668" href="../Soundness/#plfa_plfa-part3-Soundness-9668" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9674" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9675" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-9683" href="../Soundness/#plfa_plfa-part3-Soundness-9683" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-9686" href="../Soundness/#plfa_plfa-part3-Soundness-9686" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-9688" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9690" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-9695" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-9703" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9704" href="../Soundness/#plfa_plfa-part3-Soundness-8866" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9719" href="../Soundness/#plfa_plfa-part3-Soundness-9668" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9725" href="../Soundness/#plfa_plfa-part3-Soundness-9683" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-9727" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9729" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9730" href="../Soundness/#plfa_plfa-part3-Soundness-8866" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9745" href="../Soundness/#plfa_plfa-part3-Soundness-9668" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9751" href="../Soundness/#plfa_plfa-part3-Soundness-9686" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-9753" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-9755" href="../Soundness/#plfa_plfa-part3-Soundness-8866" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9770" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9771" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9773" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9775" href="../Soundness/#plfa_plfa-part3-Soundness-9775" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-9777" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-9779" href="../Soundness/#plfa_plfa-part3-Soundness-9779" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-9780" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9782" href="../Soundness/#plfa_plfa-part3-Soundness-9782" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9788" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9789" href="../Denotational/#plfa_plfa-part3-Denotational-9695" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-9793" href="../Soundness/#plfa_plfa-part3-Soundness-9793" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-9796" href="../Soundness/#plfa_plfa-part3-Soundness-9796" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-9798" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9800" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-9805" href="../Denotational/#plfa_plfa-part3-Denotational-9695" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-9809" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9810" href="../Soundness/#plfa_plfa-part3-Soundness-8866" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9825" href="../Soundness/#plfa_plfa-part3-Soundness-9782" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9831" href="../Soundness/#plfa_plfa-part3-Soundness-9793" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-9833" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9835" href="../Soundness/#plfa_plfa-part3-Soundness-9796" class="Bound">lt</a>
</pre><p>We cannot prove this lemma by induction on the derivation of <code>δ ⊢ rename ρ M ↓ v</code>, so instead we proceed by induction on <code>M</code>.</p><ul><li><p>If it is a variable, we apply the inversion lemma to obtain that <code>v ⊑ δ (ρ x)</code>. Instantiating the premise to <code>x</code> we have <code>δ (ρ x) ⊑ γ x</code>, so we conclude by the <code>var</code> rule.</p></li><li><p>If it is a lambda abstraction <code>ƛ N</code>, we have rename <code>ρ (ƛ N) = ƛ (rename (ext ρ) N)</code>. We proceed by cases on <code>δ ⊢ ƛ (rename (ext ρ) N) ↓ v</code>.</p><ul><li><p>Rule <code>↦-intro</code>: To satisfy the premise of the induction hypothesis, we prove that the renaming can be extended to be a mapping from <code>γ , v</code> to <code>δ , v</code>.</p></li><li><p>Rule <code>⊥-intro</code>: We simply apply <code>⊥-intro</code>.</p></li><li><p>Rule <code>⊔-intro</code>: We apply the induction hypotheses and <code>⊔-intro</code>.</p></li><li><p>Rule <code>sub</code>: We apply the induction hypothesis and <code>sub</code>.</p></li></ul></li><li><p>If it is an application <code>L · M</code>, we have <code>rename ρ (L · M) = (rename ρ L) · (rename ρ M)</code>. We proceed by cases on <code>δ ⊢ (rename ρ L) · (rename ρ M) ↓ v</code> and all the cases are straightforward.</p></li></ul><p>In the upcoming uses of <code>rename-reflect</code>, the renaming will always be the increment function. So we prove a corollary for that special case.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-rename-inc-reflect"></a><a id="plfa_plfa-part3-Soundness-10992" href="../Soundness/#plfa_plfa-part3-Soundness-10992" class="Function">rename-inc-reflect</a> <a id="plfa_plfa-part3-Soundness-11011" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11013" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-11015" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11016" href="../Soundness/#plfa_plfa-part3-Soundness-11016" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-11018" href="../Soundness/#plfa_plfa-part3-Soundness-11018" class="Bound">v′</a> <a id="plfa_plfa-part3-Soundness-11021" href="../Soundness/#plfa_plfa-part3-Soundness-11021" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-11022" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-11024" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11025" href="../Soundness/#plfa_plfa-part3-Soundness-11025" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-11027" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11029" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-11033" href="../Soundness/#plfa_plfa-part3-Soundness-11016" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-11034" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-11036" class="Symbol">{</a> <a id="plfa_plfa-part3-Soundness-11038" href="../Soundness/#plfa_plfa-part3-Soundness-11038" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-11040" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11042" href="../Soundness/#plfa_plfa-part3-Soundness-11016" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-11044" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-11046" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-11047" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-11051" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-11053" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-11054" href="../Soundness/#plfa_plfa-part3-Soundness-11025" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-11056" href="../Denotational/#plfa_plfa-part3-Denotational-7229" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-11059" href="../Soundness/#plfa_plfa-part3-Soundness-11018" class="Bound">v′</a><a id="plfa_plfa-part3-Soundness-11061" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-11063" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-11065" href="../Untyped/#plfa_plfa-part2-Untyped-6023" class="Function">rename</a> <a id="plfa_plfa-part3-Soundness-11072" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part3-Soundness-11075" href="../Soundness/#plfa_plfa-part3-Soundness-11038" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-11077" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-11079" href="../Soundness/#plfa_plfa-part3-Soundness-11021" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-11085" class="Comment">----------------------------</a>
  <a id="plfa_plfa-part3-Soundness-11116" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-11118" href="../Soundness/#plfa_plfa-part3-Soundness-11025" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-11120" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-11122" href="../Soundness/#plfa_plfa-part3-Soundness-11038" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-11124" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-11126" href="../Soundness/#plfa_plfa-part3-Soundness-11021" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-11128" href="../Soundness/#plfa_plfa-part3-Soundness-10992" class="Function">rename-inc-reflect</a> <a id="plfa_plfa-part3-Soundness-11147" href="../Soundness/#plfa_plfa-part3-Soundness-11147" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-11149" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-11151" href="../Soundness/#plfa_plfa-part3-Soundness-8866" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-11166" href="../Denotational/#plfa_plfa-part3-Denotational-8399" class="Function">`⊑-refl</a> <a id="plfa_plfa-part3-Soundness-11174" href="../Soundness/#plfa_plfa-part3-Soundness-11147" class="Bound">d</a>
</pre><h3 id="substitution-reflects-denotations-the-variable-case">Substitution reflects denotations, the variable case</h3><p>We are almost ready to begin proving that simultaneous substitution reflects denotations. That is, if <code>γ ⊢ (subst σ M) ↓ v</code>, then <code>γ ⊢ σ k ↓ δ k</code> and <code>δ ⊢ M ↓ v</code> for any <code>k</code> and some <code>δ</code>. We shall start with the case in which <code>M</code> is a variable <code>x</code>. So instead the premise is <code>γ ⊢ σ x ↓ v</code> and we need to show that <code>δ ⊢ ` x ↓ v</code> for some <code>δ</code>. The <code>δ</code> that we choose shall be the environment that maps <code>x</code> to <code>v</code> and every other variable to <code>⊥</code>.</p><p>Next we define the environment that maps <code>x</code> to <code>v</code> and every other variable to <code>⊥</code>, that is <code>const-env x v</code>. To tell variables apart, we define the following function for deciding equality of variables.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-_var≟_"></a><a id="plfa_plfa-part3-Soundness-11902" href="../Soundness/#plfa_plfa-part3-Soundness-11902" class="Function Operator">_var≟_</a> <a id="plfa_plfa-part3-Soundness-11909" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11911" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-11913" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11914" href="../Soundness/#plfa_plfa-part3-Soundness-11914" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-11915" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-11917" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-11919" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-11920" href="../Soundness/#plfa_plfa-part3-Soundness-11920" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-11922" href="../Soundness/#plfa_plfa-part3-Soundness-11922" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-11924" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11926" href="../Soundness/#plfa_plfa-part3-Soundness-11914" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-11928" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-11930" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-11931" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-11933" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-11935" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Nullary.Decidable.Core.html#1861" class="Record">Dec</a> <a id="plfa_plfa-part3-Soundness-11939" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-11940" href="../Soundness/#plfa_plfa-part3-Soundness-11920" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-11942" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-11944" href="../Soundness/#plfa_plfa-part3-Soundness-11922" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-11945" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-11947" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-11949" href="../Soundness/#plfa_plfa-part3-Soundness-11902" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-11954" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a>  <a id="plfa_plfa-part3-Soundness-11957" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-11960" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-11964" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-11969" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-11971" href="../Soundness/#plfa_plfa-part3-Soundness-11902" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-11976" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-11977" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-11979" class="Symbol">_)</a>  <a id="plfa_plfa-part3-Soundness-11983" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-11986" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-11989" class="Symbol">λ()</a>
<a id="plfa_plfa-part3-Soundness-11993" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-11994" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-11996" class="Symbol">_)</a> <a id="plfa_plfa-part3-Soundness-11999" href="../Soundness/#plfa_plfa-part3-Soundness-11902" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-12004" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a>  <a id="plfa_plfa-part3-Soundness-12007" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-12010" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-12013" class="Symbol">λ()</a>
<a id="plfa_plfa-part3-Soundness-12017" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12018" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-12020" href="../Soundness/#plfa_plfa-part3-Soundness-12020" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-12021" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12023" href="../Soundness/#plfa_plfa-part3-Soundness-11902" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-12028" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12029" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-12031" href="../Soundness/#plfa_plfa-part3-Soundness-12031" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-12032" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12034" class="Keyword">with</a>  <a id="plfa_plfa-part3-Soundness-12040" href="../Soundness/#plfa_plfa-part3-Soundness-12020" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12042" href="../Soundness/#plfa_plfa-part3-Soundness-11902" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-12047" href="../Soundness/#plfa_plfa-part3-Soundness-12031" class="Bound">y</a>
<a id="plfa_plfa-part3-Soundness-12049" class="Symbol">...</a>                 <a id="plfa_plfa-part3-Soundness-12069" class="Symbol">|</a>  <a id="plfa_plfa-part3-Soundness-12072" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-12076" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-12081" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-12084" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-12088" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-12093" class="Symbol">...</a>                 <a id="plfa_plfa-part3-Soundness-12113" class="Symbol">|</a>  <a id="plfa_plfa-part3-Soundness-12116" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-12119" href="../Soundness/#plfa_plfa-part3-Soundness-12119" class="Bound">neq</a>   <a id="plfa_plfa-part3-Soundness-12125" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-12128" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-12131" class="Symbol">λ{</a><a id="plfa_plfa-part3-Soundness-12133" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-12138" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12140" href="../Soundness/#plfa_plfa-part3-Soundness-12119" class="Bound">neq</a> <a id="plfa_plfa-part3-Soundness-12144" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-12148" class="Symbol">}</a>

<a id="plfa_plfa-part3-Soundness-var≟-refl"></a><a id="plfa_plfa-part3-Soundness-12151" href="../Soundness/#plfa_plfa-part3-Soundness-12151" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-12161" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12163" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-12165" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12166" href="../Soundness/#plfa_plfa-part3-Soundness-12166" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-12167" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12169" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12170" href="../Soundness/#plfa_plfa-part3-Soundness-12170" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12172" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12174" href="../Soundness/#plfa_plfa-part3-Soundness-12166" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-12176" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-12178" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-12179" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12181" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12183" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12184" href="../Soundness/#plfa_plfa-part3-Soundness-12170" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12186" href="../Soundness/#plfa_plfa-part3-Soundness-11902" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-12191" href="../Soundness/#plfa_plfa-part3-Soundness-12170" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-12192" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12194" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-12196" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-12200" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-12205" href="../Soundness/#plfa_plfa-part3-Soundness-12151" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-12215" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-12217" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12219" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-12224" href="../Soundness/#plfa_plfa-part3-Soundness-12151" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-12234" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12235" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-12237" href="../Soundness/#plfa_plfa-part3-Soundness-12237" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-12238" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12240" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-12248" href="../Soundness/#plfa_plfa-part3-Soundness-12151" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-12258" href="../Soundness/#plfa_plfa-part3-Soundness-12237" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12260" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12262" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
</pre><p>Now we use <code>var≟</code> to define <code>const-env</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-const-env"></a><a id="plfa_plfa-part3-Soundness-12322" href="../Soundness/#plfa_plfa-part3-Soundness-12322" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-12332" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12334" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-12336" href="../Soundness/#plfa_plfa-part3-Soundness-12336" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-12337" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12339" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12341" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12342" href="../Soundness/#plfa_plfa-part3-Soundness-12342" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12344" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12346" href="../Soundness/#plfa_plfa-part3-Soundness-12336" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-12348" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-12350" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-12351" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12353" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12355" href="../Denotational/#plfa_plfa-part3-Denotational-3907" class="Datatype">Value</a> <a id="plfa_plfa-part3-Soundness-12361" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12363" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-12367" href="../Soundness/#plfa_plfa-part3-Soundness-12336" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Soundness-12369" href="../Soundness/#plfa_plfa-part3-Soundness-12322" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-12379" href="../Soundness/#plfa_plfa-part3-Soundness-12379" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12381" href="../Soundness/#plfa_plfa-part3-Soundness-12381" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-12383" href="../Soundness/#plfa_plfa-part3-Soundness-12383" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-12385" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-12390" href="../Soundness/#plfa_plfa-part3-Soundness-12379" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12392" href="../Soundness/#plfa_plfa-part3-Soundness-11902" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-12397" href="../Soundness/#plfa_plfa-part3-Soundness-12383" class="Bound">y</a>
<a id="plfa_plfa-part3-Soundness-12399" class="Symbol">...</a>             <a id="plfa_plfa-part3-Soundness-12415" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-12417" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-12421" class="Symbol">_</a>       <a id="plfa_plfa-part3-Soundness-12429" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12431" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-12433" class="Symbol">...</a>             <a id="plfa_plfa-part3-Soundness-12449" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-12451" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-12454" class="Symbol">_</a>        <a id="plfa_plfa-part3-Soundness-12463" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12465" href="../Denotational/#plfa_plfa-part3-Denotational-3927" class="InductiveConstructor">⊥</a>
</pre><p>Of course, <code>const-env x v</code> maps <code>x</code> to value <code>v</code></p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-same-const-env"></a><a id="plfa_plfa-part3-Soundness-12530" href="../Soundness/#plfa_plfa-part3-Soundness-12530" class="Function">same-const-env</a> <a id="plfa_plfa-part3-Soundness-12545" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12547" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-12549" href="../Soundness/#plfa_plfa-part3-Soundness-12549" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-12550" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12552" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12553" href="../Soundness/#plfa_plfa-part3-Soundness-12553" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12555" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12557" href="../Soundness/#plfa_plfa-part3-Soundness-12549" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-12559" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-12561" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-12562" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12564" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12565" href="../Soundness/#plfa_plfa-part3-Soundness-12565" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-12566" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12568" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12570" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12571" href="../Soundness/#plfa_plfa-part3-Soundness-12322" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-12581" href="../Soundness/#plfa_plfa-part3-Soundness-12553" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12583" href="../Soundness/#plfa_plfa-part3-Soundness-12565" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-12584" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12586" href="../Soundness/#plfa_plfa-part3-Soundness-12553" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12588" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-12590" href="../Soundness/#plfa_plfa-part3-Soundness-12565" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-12592" href="../Soundness/#plfa_plfa-part3-Soundness-12530" class="Function">same-const-env</a> <a id="plfa_plfa-part3-Soundness-12607" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12608" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-12610" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12612" href="../Soundness/#plfa_plfa-part3-Soundness-12612" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-12613" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12615" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-12623" href="../Soundness/#plfa_plfa-part3-Soundness-12151" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-12633" href="../Soundness/#plfa_plfa-part3-Soundness-12612" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12635" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12637" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
</pre><p>and <code>const-env x v</code> maps <code>y</code> to <code>⊥</code>, so long as <code>x ≢ y</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-diff-const-env"></a><a id="plfa_plfa-part3-Soundness-12713" href="../Soundness/#plfa_plfa-part3-Soundness-12713" class="Function">diff-const-env</a> <a id="plfa_plfa-part3-Soundness-12728" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12730" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-12732" href="../Soundness/#plfa_plfa-part3-Soundness-12732" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-12733" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12735" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12736" href="../Soundness/#plfa_plfa-part3-Soundness-12736" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12738" href="../Soundness/#plfa_plfa-part3-Soundness-12738" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-12740" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12742" href="../Soundness/#plfa_plfa-part3-Soundness-12732" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-12744" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-12746" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-12747" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12749" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12750" href="../Soundness/#plfa_plfa-part3-Soundness-12750" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-12751" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-12755" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12757" href="../Soundness/#plfa_plfa-part3-Soundness-12736" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12759" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="plfa_plfa-part3-Soundness-12761" href="../Soundness/#plfa_plfa-part3-Soundness-12738" class="Bound">y</a>
    <a id="plfa_plfa-part3-Soundness-12767" class="Comment">-------------------</a>
  <a id="plfa_plfa-part3-Soundness-12789" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12791" href="../Soundness/#plfa_plfa-part3-Soundness-12322" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-12801" href="../Soundness/#plfa_plfa-part3-Soundness-12736" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12803" href="../Soundness/#plfa_plfa-part3-Soundness-12750" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-12805" href="../Soundness/#plfa_plfa-part3-Soundness-12738" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-12807" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-12809" href="../Denotational/#plfa_plfa-part3-Denotational-3927" class="InductiveConstructor">⊥</a>
<a id="plfa_plfa-part3-Soundness-12811" href="../Soundness/#plfa_plfa-part3-Soundness-12713" class="Function">diff-const-env</a> <a id="plfa_plfa-part3-Soundness-12826" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12827" href="../Soundness/#plfa_plfa-part3-Soundness-12827" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-12828" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12830" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12831" href="../Soundness/#plfa_plfa-part3-Soundness-12831" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-12832" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12834" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12835" href="../Soundness/#plfa_plfa-part3-Soundness-12835" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-12836" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12838" href="../Soundness/#plfa_plfa-part3-Soundness-12838" class="Bound">neq</a> <a id="plfa_plfa-part3-Soundness-12842" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-12847" href="../Soundness/#plfa_plfa-part3-Soundness-12831" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12849" href="../Soundness/#plfa_plfa-part3-Soundness-11902" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-12854" href="../Soundness/#plfa_plfa-part3-Soundness-12835" class="Bound">y</a>
<a id="plfa_plfa-part3-Soundness-12856" class="Symbol">...</a>  <a id="plfa_plfa-part3-Soundness-12861" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-12863" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-12867" href="../Soundness/#plfa_plfa-part3-Soundness-12867" class="Bound">eq</a>  <a id="plfa_plfa-part3-Soundness-12871" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-12874" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Nullary.Negation.Core.html#1270" class="Function">contradiction</a> <a id="plfa_plfa-part3-Soundness-12888" href="../Soundness/#plfa_plfa-part3-Soundness-12867" class="Bound">eq</a> <a id="plfa_plfa-part3-Soundness-12891" class="Bound">neq</a>
<a id="plfa_plfa-part3-Soundness-12895" class="Symbol">...</a>  <a id="plfa_plfa-part3-Soundness-12900" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-12902" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-12905" class="Symbol">_</a>    <a id="plfa_plfa-part3-Soundness-12910" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-12913" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
</pre><p>So we choose <code>const-env x v</code> for <code>δ</code> and obtain <code>δ ⊢ ` x ↓ v</code> with the <code>var</code> rule.</p><p>It remains to prove that <code>γ `⊢ σ ↓ δ</code> and <code>δ ⊢ M ↓ v</code> for any <code>k</code>, given that we have chosen <code>const-env x v</code> for <code>δ</code>. We shall have two cases to consider, <code>x ≡ y</code> or <code>x ≢ y</code>.</p><p>Now to finish the two cases of the proof.</p><ul><li>In the case where <code>x ≡ y</code>, we need to show that <code>γ ⊢ σ y ↓ v</code>, but that’s just our premise.</li><li>In the case where <code>x ≢ y</code>, we need to show that <code>γ ⊢ σ y ↓ ⊥</code>, which we do via rule <code>⊥-intro</code>.</li></ul><p>Thus, we have completed the variable case of the proof that simultaneous substitution reflects denotations. Here is the proof again, formally.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-reflect-var"></a><a id="plfa_plfa-part3-Soundness-13584" href="../Soundness/#plfa_plfa-part3-Soundness-13584" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-13602" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-13604" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-13606" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-13607" href="../Soundness/#plfa_plfa-part3-Soundness-13607" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-13609" href="../Soundness/#plfa_plfa-part3-Soundness-13609" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-13610" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-13612" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-13613" href="../Soundness/#plfa_plfa-part3-Soundness-13613" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-13615" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-13617" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-13621" href="../Soundness/#plfa_plfa-part3-Soundness-13609" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-13622" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-13624" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-13625" href="../Soundness/#plfa_plfa-part3-Soundness-13625" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-13627" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-13629" href="../Soundness/#plfa_plfa-part3-Soundness-13607" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-13631" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-13633" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-13634" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-13636" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-13637" href="../Soundness/#plfa_plfa-part3-Soundness-13637" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-13638" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-13640" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-13641" href="../Soundness/#plfa_plfa-part3-Soundness-13641" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-13643" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-13645" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-13651" href="../Soundness/#plfa_plfa-part3-Soundness-13607" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-13653" href="../Soundness/#plfa_plfa-part3-Soundness-13609" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-13654" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-13658" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-13660" href="../Soundness/#plfa_plfa-part3-Soundness-13613" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-13662" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-13664" href="../Soundness/#plfa_plfa-part3-Soundness-13641" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-13666" href="../Soundness/#plfa_plfa-part3-Soundness-13625" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-13668" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-13670" href="../Soundness/#plfa_plfa-part3-Soundness-13637" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-13676" class="Comment">-----------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-13720" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-13722" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1244" class="Function">Σ[</a> <a id="plfa_plfa-part3-Soundness-13725" href="../Soundness/#plfa_plfa-part3-Soundness-13725" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-13727" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1244" class="Function">∈</a> <a id="plfa_plfa-part3-Soundness-13729" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-13733" href="../Soundness/#plfa_plfa-part3-Soundness-13607" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-13735" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1244" class="Function">]</a> <a id="plfa_plfa-part3-Soundness-13737" href="../Soundness/#plfa_plfa-part3-Soundness-13613" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-13739" href="../Soundness/#plfa_plfa-part3-Soundness-3028" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-13742" href="../Soundness/#plfa_plfa-part3-Soundness-13641" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-13744" href="../Soundness/#plfa_plfa-part3-Soundness-3028" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-13746" href="../Soundness/#plfa_plfa-part3-Soundness-13725" class="Bound">δ</a>  <a id="plfa_plfa-part3-Soundness-13749" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1618" class="Function Operator">×</a>  <a id="plfa_plfa-part3-Soundness-13752" href="../Soundness/#plfa_plfa-part3-Soundness-13725" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-13754" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-13756" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-13758" href="../Soundness/#plfa_plfa-part3-Soundness-13625" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-13760" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-13762" href="../Soundness/#plfa_plfa-part3-Soundness-13637" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-13764" href="../Soundness/#plfa_plfa-part3-Soundness-13584" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-13782" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-13783" href="../Soundness/#plfa_plfa-part3-Soundness-13783" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-13784" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-13786" href="../Soundness/#plfa_plfa-part3-Soundness-13786" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-13787" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-13789" href="../Soundness/#plfa_plfa-part3-Soundness-13789" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-13790" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-13792" href="../Soundness/#plfa_plfa-part3-Soundness-13792" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-13793" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-13795" href="../Soundness/#plfa_plfa-part3-Soundness-13795" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-13796" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-13798" href="../Soundness/#plfa_plfa-part3-Soundness-13798" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-13799" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-13801" href="../Soundness/#plfa_plfa-part3-Soundness-13801" class="Bound">xv</a>
  <a id="plfa_plfa-part3-Soundness-13806" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-13814" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-13818" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-13819" href="../Soundness/#plfa_plfa-part3-Soundness-12530" class="Function">same-const-env</a> <a id="plfa_plfa-part3-Soundness-13834" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-13835" href="../Soundness/#plfa_plfa-part3-Soundness-13783" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-13836" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-13838" href="../Soundness/#plfa_plfa-part3-Soundness-13792" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-13839" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-13841" href="../Soundness/#plfa_plfa-part3-Soundness-13795" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-13842" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-13845" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Soundness-13851" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-13853" href="../Soundness/#plfa_plfa-part3-Soundness-12322" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-13863" href="../Soundness/#plfa_plfa-part3-Soundness-13792" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-13865" href="../Soundness/#plfa_plfa-part3-Soundness-13795" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-13867" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-13869" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-13871" href="../Soundness/#plfa_plfa-part3-Soundness-13904" class="Function">const-env-ok</a> <a id="plfa_plfa-part3-Soundness-13884" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-13886" href="../Denotational/#plfa_plfa-part3-Denotational-9204" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-13890" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-13892" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Soundness-13896" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Soundness-13904" href="../Soundness/#plfa_plfa-part3-Soundness-13904" class="Function">const-env-ok</a> <a id="plfa_plfa-part3-Soundness-13917" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-13919" href="../Soundness/#plfa_plfa-part3-Soundness-13789" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-13921" href="../Soundness/#plfa_plfa-part3-Soundness-3028" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-13924" href="../Soundness/#plfa_plfa-part3-Soundness-13798" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-13926" href="../Soundness/#plfa_plfa-part3-Soundness-3028" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-13928" href="../Soundness/#plfa_plfa-part3-Soundness-12322" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-13938" href="../Soundness/#plfa_plfa-part3-Soundness-13792" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-13940" href="../Soundness/#plfa_plfa-part3-Soundness-13795" class="Bound">v</a>
  <a id="plfa_plfa-part3-Soundness-13944" href="../Soundness/#plfa_plfa-part3-Soundness-13904" class="Function">const-env-ok</a> <a id="plfa_plfa-part3-Soundness-13957" href="../Soundness/#plfa_plfa-part3-Soundness-13957" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-13959" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-13964" href="../Soundness/#plfa_plfa-part3-Soundness-13792" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-13966" href="../Soundness/#plfa_plfa-part3-Soundness-11902" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-13971" href="../Soundness/#plfa_plfa-part3-Soundness-13957" class="Bound">y</a>
  <a id="plfa_plfa-part3-Soundness-13975" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-13979" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-13981" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-13985" href="../Soundness/#plfa_plfa-part3-Soundness-13985" class="Bound">x≡y</a> <a id="plfa_plfa-part3-Soundness-13989" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-13997" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-14001" href="../Soundness/#plfa_plfa-part3-Soundness-13985" class="Bound">x≡y</a> <a id="plfa_plfa-part3-Soundness-14005" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-14007" href="../Soundness/#plfa_plfa-part3-Soundness-12530" class="Function">same-const-env</a> <a id="plfa_plfa-part3-Soundness-14022" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-14023" href="../Soundness/#plfa_plfa-part3-Soundness-13783" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-14024" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14026" href="../Soundness/#plfa_plfa-part3-Soundness-13792" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-14027" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14029" href="../Soundness/#plfa_plfa-part3-Soundness-13795" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-14030" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-14032" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-14034" href="../Soundness/#plfa_plfa-part3-Soundness-13801" class="Bound">xv</a>
  <a id="plfa_plfa-part3-Soundness-14039" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-14043" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-14045" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-14048" href="../Soundness/#plfa_plfa-part3-Soundness-14048" class="Bound">x≢y</a> <a id="plfa_plfa-part3-Soundness-14052" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-14060" href="../Soundness/#plfa_plfa-part3-Soundness-12713" class="Function">diff-const-env</a> <a id="plfa_plfa-part3-Soundness-14075" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-14076" href="../Soundness/#plfa_plfa-part3-Soundness-13783" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-14077" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14079" href="../Soundness/#plfa_plfa-part3-Soundness-13792" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-14080" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14082" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-14083" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14085" href="../Soundness/#plfa_plfa-part3-Soundness-13795" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-14086" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-14088" href="../Soundness/#plfa_plfa-part3-Soundness-14048" class="Bound">x≢y</a> <a id="plfa_plfa-part3-Soundness-14092" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-14094" href="../Denotational/#plfa_plfa-part3-Denotational-9513" class="InductiveConstructor">⊥-intro</a>
</pre><h3 id="substitutions-and-environment-construction">Substitutions and environment construction</h3><p>Every substitution produces terms that can evaluate to <code>⊥</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-⊥"></a><a id="plfa_plfa-part3-Soundness-14225" href="../Soundness/#plfa_plfa-part3-Soundness-14225" class="Function">subst-⊥</a> <a id="plfa_plfa-part3-Soundness-14233" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14235" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-14237" href="../Soundness/#plfa_plfa-part3-Soundness-14237" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-14239" href="../Soundness/#plfa_plfa-part3-Soundness-14239" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-14240" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14242" href="../Soundness/#plfa_plfa-part3-Soundness-14242" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14244" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14246" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-14250" href="../Soundness/#plfa_plfa-part3-Soundness-14239" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-14251" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14253" href="../Soundness/#plfa_plfa-part3-Soundness-14253" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-14255" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14257" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-14263" href="../Soundness/#plfa_plfa-part3-Soundness-14237" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-14265" href="../Soundness/#plfa_plfa-part3-Soundness-14239" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-14266" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Soundness-14272" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Soundness-14292" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-14294" href="../Soundness/#plfa_plfa-part3-Soundness-14242" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14296" href="../Soundness/#plfa_plfa-part3-Soundness-3028" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-14299" href="../Soundness/#plfa_plfa-part3-Soundness-14253" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-14301" href="../Soundness/#plfa_plfa-part3-Soundness-3028" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-14303" href="../Denotational/#plfa_plfa-part3-Denotational-8107" class="Function">`⊥</a>
<a id="plfa_plfa-part3-Soundness-14306" href="../Soundness/#plfa_plfa-part3-Soundness-14225" class="Function">subst-⊥</a> <a id="plfa_plfa-part3-Soundness-14314" href="../Soundness/#plfa_plfa-part3-Soundness-14314" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-14316" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-14318" href="../Denotational/#plfa_plfa-part3-Denotational-9513" class="InductiveConstructor">⊥-intro</a>
</pre><p>If a substitution produces terms that evaluate to the values in both <code>γ₁</code> and <code>γ₂</code>, then those terms also evaluate to the values in <code>γ₁ ⊔ γ₂</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-⊔"></a><a id="plfa_plfa-part3-Soundness-14483" href="../Soundness/#plfa_plfa-part3-Soundness-14483" class="Function">subst-⊔</a> <a id="plfa_plfa-part3-Soundness-14491" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14493" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-14495" href="../Soundness/#plfa_plfa-part3-Soundness-14495" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-14497" href="../Soundness/#plfa_plfa-part3-Soundness-14497" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-14498" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14500" href="../Soundness/#plfa_plfa-part3-Soundness-14500" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14502" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14504" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-14508" href="../Soundness/#plfa_plfa-part3-Soundness-14497" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-14509" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14511" href="../Soundness/#plfa_plfa-part3-Soundness-14511" class="Bound">γ₁</a> <a id="plfa_plfa-part3-Soundness-14514" href="../Soundness/#plfa_plfa-part3-Soundness-14514" class="Bound">γ₂</a> <a id="plfa_plfa-part3-Soundness-14517" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14519" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-14523" href="../Soundness/#plfa_plfa-part3-Soundness-14495" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-14524" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14526" href="../Soundness/#plfa_plfa-part3-Soundness-14526" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-14528" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14530" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-14536" href="../Soundness/#plfa_plfa-part3-Soundness-14495" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-14538" href="../Soundness/#plfa_plfa-part3-Soundness-14497" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-14539" class="Symbol">}</a>
           <a id="plfa_plfa-part3-Soundness-14552" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-14554" href="../Soundness/#plfa_plfa-part3-Soundness-14500" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14556" href="../Soundness/#plfa_plfa-part3-Soundness-3028" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-14559" href="../Soundness/#plfa_plfa-part3-Soundness-14526" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-14561" href="../Soundness/#plfa_plfa-part3-Soundness-3028" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-14563" href="../Soundness/#plfa_plfa-part3-Soundness-14511" class="Bound">γ₁</a>
           <a id="plfa_plfa-part3-Soundness-14577" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-14579" href="../Soundness/#plfa_plfa-part3-Soundness-14500" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14581" href="../Soundness/#plfa_plfa-part3-Soundness-3028" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-14584" href="../Soundness/#plfa_plfa-part3-Soundness-14526" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-14586" href="../Soundness/#plfa_plfa-part3-Soundness-3028" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-14588" href="../Soundness/#plfa_plfa-part3-Soundness-14514" class="Bound">γ₂</a>
             <a id="plfa_plfa-part3-Soundness-14604" class="Comment">-------------------------</a>
           <a id="plfa_plfa-part3-Soundness-14641" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-14643" href="../Soundness/#plfa_plfa-part3-Soundness-14500" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14645" href="../Soundness/#plfa_plfa-part3-Soundness-3028" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-14648" href="../Soundness/#plfa_plfa-part3-Soundness-14526" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-14650" href="../Soundness/#plfa_plfa-part3-Soundness-3028" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-14652" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-14653" href="../Soundness/#plfa_plfa-part3-Soundness-14511" class="Bound">γ₁</a> <a id="plfa_plfa-part3-Soundness-14656" href="../Denotational/#plfa_plfa-part3-Denotational-8136" class="Function Operator">`⊔</a> <a id="plfa_plfa-part3-Soundness-14659" href="../Soundness/#plfa_plfa-part3-Soundness-14514" class="Bound">γ₂</a><a id="plfa_plfa-part3-Soundness-14661" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-14663" href="../Soundness/#plfa_plfa-part3-Soundness-14483" class="Function">subst-⊔</a> <a id="plfa_plfa-part3-Soundness-14671" href="../Soundness/#plfa_plfa-part3-Soundness-14671" class="Bound">γ₁-ok</a> <a id="plfa_plfa-part3-Soundness-14677" href="../Soundness/#plfa_plfa-part3-Soundness-14677" class="Bound">γ₂-ok</a> <a id="plfa_plfa-part3-Soundness-14683" href="../Soundness/#plfa_plfa-part3-Soundness-14683" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-14685" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-14687" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-14695" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-14696" href="../Soundness/#plfa_plfa-part3-Soundness-14671" class="Bound">γ₁-ok</a> <a id="plfa_plfa-part3-Soundness-14702" href="../Soundness/#plfa_plfa-part3-Soundness-14683" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-14703" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-14705" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-14706" href="../Soundness/#plfa_plfa-part3-Soundness-14677" class="Bound">γ₂-ok</a> <a id="plfa_plfa-part3-Soundness-14712" href="../Soundness/#plfa_plfa-part3-Soundness-14683" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-14713" class="Symbol">)</a>
</pre><h3 id="the-lambda-constructor-is-injective">The Lambda constructor is injective</h3><pre class="Agda"><a id="plfa_plfa-part3-Soundness-lambda-inj"></a><a id="plfa_plfa-part3-Soundness-14769" href="../Soundness/#plfa_plfa-part3-Soundness-14769" class="Function">lambda-inj</a> <a id="plfa_plfa-part3-Soundness-14780" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14782" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-14784" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-14785" href="../Soundness/#plfa_plfa-part3-Soundness-14785" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-14786" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-14788" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-14789" href="../Soundness/#plfa_plfa-part3-Soundness-14789" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-14791" href="../Soundness/#plfa_plfa-part3-Soundness-14791" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-14793" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14795" href="../Soundness/#plfa_plfa-part3-Soundness-14785" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-14797" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-14799" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-14801" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-14803" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-14805" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-14809" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-14811" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡_</a> <a id="plfa_plfa-part3-Soundness-14815" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-14816" class="Argument">A</a> <a id="plfa_plfa-part3-Soundness-14818" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-14820" href="../Soundness/#plfa_plfa-part3-Soundness-14785" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-14822" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-14824" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-14825" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-14827" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-14828" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-14830" href="../Soundness/#plfa_plfa-part3-Soundness-14789" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-14831" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-14833" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-14834" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-14836" href="../Soundness/#plfa_plfa-part3-Soundness-14791" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-14837" class="Symbol">)</a>
    <a id="plfa_plfa-part3-Soundness-14843" class="Comment">---------------------------</a>
  <a id="plfa_plfa-part3-Soundness-14873" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-14875" href="../Soundness/#plfa_plfa-part3-Soundness-14789" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-14877" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-14879" href="../Soundness/#plfa_plfa-part3-Soundness-14791" class="Bound">N</a>
<a id="plfa_plfa-part3-Soundness-14881" href="../Soundness/#plfa_plfa-part3-Soundness-14769" class="Function">lambda-inj</a> <a id="plfa_plfa-part3-Soundness-14892" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-14897" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-14899" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
</pre><h3 id="simultaneous-substitution-reflects-denotations">Simultaneous substitution reflects denotations</h3><p>In this section we prove a central lemma, that substitution reflects denotations. That is, if <code>γ ⊢ subst σ M ↓ v</code>, then <code>δ ⊢ M ↓ v</code> and <code>γ `⊢ σ ↓ δ</code> for some <code>δ</code>. We shall proceed by induction on the derivation of <code>γ ⊢ subst σ M ↓ v</code>. This requires a minor restatement of the lemma, changing the premise to <code>γ ⊢ L ↓ v</code> and <code>L ≡ subst σ M</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-split"></a><a id="plfa_plfa-part3-Soundness-15314" href="../Soundness/#plfa_plfa-part3-Soundness-15314" class="Function">split</a> <a id="plfa_plfa-part3-Soundness-15320" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15322" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-15324" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15325" href="../Soundness/#plfa_plfa-part3-Soundness-15325" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-15326" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15328" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15329" href="../Soundness/#plfa_plfa-part3-Soundness-15329" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-15331" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15333" href="../Soundness/#plfa_plfa-part3-Soundness-15325" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-15335" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-15337" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-15339" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-15341" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-15342" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15344" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15345" href="../Soundness/#plfa_plfa-part3-Soundness-15345" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-15347" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15349" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-15353" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-15354" href="../Soundness/#plfa_plfa-part3-Soundness-15325" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-15356" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-15358" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-15359" class="Symbol">)}</a> <a id="plfa_plfa-part3-Soundness-15362" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15363" href="../Soundness/#plfa_plfa-part3-Soundness-15363" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-15364" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-15368" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-15370" href="../Soundness/#plfa_plfa-part3-Soundness-15345" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-15372" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-15374" href="../Soundness/#plfa_plfa-part3-Soundness-15329" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-15376" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-15378" href="../Soundness/#plfa_plfa-part3-Soundness-15363" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-15384" class="Comment">--------------------------</a>
  <a id="plfa_plfa-part3-Soundness-15413" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-15415" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-15416" href="../Denotational/#plfa_plfa-part3-Denotational-7474" class="Function">init</a> <a id="plfa_plfa-part3-Soundness-15421" href="../Soundness/#plfa_plfa-part3-Soundness-15345" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-15423" href="../Denotational/#plfa_plfa-part3-Denotational-7229" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-15426" href="../Denotational/#plfa_plfa-part3-Denotational-7529" class="Function">last</a> <a id="plfa_plfa-part3-Soundness-15431" href="../Soundness/#plfa_plfa-part3-Soundness-15345" class="Bound">δ</a><a id="plfa_plfa-part3-Soundness-15432" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-15434" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-15436" href="../Soundness/#plfa_plfa-part3-Soundness-15329" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-15438" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-15440" href="../Soundness/#plfa_plfa-part3-Soundness-15363" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-15442" href="../Soundness/#plfa_plfa-part3-Soundness-15314" class="Function">split</a> <a id="plfa_plfa-part3-Soundness-15448" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15449" class="Argument">δ</a> <a id="plfa_plfa-part3-Soundness-15451" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15453" href="../Soundness/#plfa_plfa-part3-Soundness-15453" class="Bound">δ</a><a id="plfa_plfa-part3-Soundness-15454" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15456" href="../Soundness/#plfa_plfa-part3-Soundness-15456" class="Bound">δMv</a> <a id="plfa_plfa-part3-Soundness-15460" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-15468" href="../Denotational/#plfa_plfa-part3-Denotational-7578" class="Function">init-last</a> <a id="plfa_plfa-part3-Soundness-15478" href="../Soundness/#plfa_plfa-part3-Soundness-15453" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-15480" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15482" href="../Soundness/#plfa_plfa-part3-Soundness-15456" class="Bound">δMv</a>

<a id="plfa_plfa-part3-Soundness-subst-reflect"></a><a id="plfa_plfa-part3-Soundness-15487" href="../Soundness/#plfa_plfa-part3-Soundness-15487" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-15501" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15503" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-15505" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15506" href="../Soundness/#plfa_plfa-part3-Soundness-15506" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-15508" href="../Soundness/#plfa_plfa-part3-Soundness-15508" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-15509" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15511" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15512" href="../Soundness/#plfa_plfa-part3-Soundness-15512" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-15514" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15516" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-15520" href="../Soundness/#plfa_plfa-part3-Soundness-15508" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-15521" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15523" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15524" href="../Soundness/#plfa_plfa-part3-Soundness-15524" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-15526" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15528" href="../Soundness/#plfa_plfa-part3-Soundness-15506" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-15530" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-15532" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-15533" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15535" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15536" href="../Soundness/#plfa_plfa-part3-Soundness-15536" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-15537" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15539" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15540" href="../Soundness/#plfa_plfa-part3-Soundness-15540" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-15542" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15544" href="../Soundness/#plfa_plfa-part3-Soundness-15508" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-15546" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-15548" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-15549" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15551" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15552" href="../Soundness/#plfa_plfa-part3-Soundness-15552" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-15554" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15556" href="../Substitution/#plfa_plfa-part2-Substitution-2350" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-15562" href="../Soundness/#plfa_plfa-part3-Soundness-15506" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-15564" href="../Soundness/#plfa_plfa-part3-Soundness-15508" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-15565" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-15569" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-15571" href="../Soundness/#plfa_plfa-part3-Soundness-15512" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-15573" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-15575" href="../Soundness/#plfa_plfa-part3-Soundness-15540" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-15577" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-15579" href="../Soundness/#plfa_plfa-part3-Soundness-15536" class="Bound">v</a>
  <a id="plfa_plfa-part3-Soundness-15583" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-15585" href="../Untyped/#plfa_plfa-part2-Untyped-6759" class="Function">subst</a> <a id="plfa_plfa-part3-Soundness-15591" href="../Soundness/#plfa_plfa-part3-Soundness-15552" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-15593" href="../Soundness/#plfa_plfa-part3-Soundness-15524" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-15595" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-15597" href="../Soundness/#plfa_plfa-part3-Soundness-15540" class="Bound">L</a>
    <a id="plfa_plfa-part3-Soundness-15603" class="Comment">---------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-15645" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-15647" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1244" class="Function">Σ[</a> <a id="plfa_plfa-part3-Soundness-15650" href="../Soundness/#plfa_plfa-part3-Soundness-15650" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-15652" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1244" class="Function">∈</a> <a id="plfa_plfa-part3-Soundness-15654" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-15658" href="../Soundness/#plfa_plfa-part3-Soundness-15506" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-15660" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1244" class="Function">]</a> <a id="plfa_plfa-part3-Soundness-15662" href="../Soundness/#plfa_plfa-part3-Soundness-15512" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-15664" href="../Soundness/#plfa_plfa-part3-Soundness-3028" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-15667" href="../Soundness/#plfa_plfa-part3-Soundness-15552" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-15669" href="../Soundness/#plfa_plfa-part3-Soundness-3028" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-15671" href="../Soundness/#plfa_plfa-part3-Soundness-15650" class="Bound">γ</a>  <a id="plfa_plfa-part3-Soundness-15674" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1618" class="Function Operator">×</a>  <a id="plfa_plfa-part3-Soundness-15677" href="../Soundness/#plfa_plfa-part3-Soundness-15650" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-15679" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-15681" href="../Soundness/#plfa_plfa-part3-Soundness-15524" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-15683" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-15685" href="../Soundness/#plfa_plfa-part3-Soundness-15536" class="Bound">v</a>

<a id="plfa_plfa-part3-Soundness-15688" href="../Soundness/#plfa_plfa-part3-Soundness-15487" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-15702" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15703" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-15705" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15707" href="../Soundness/#plfa_plfa-part3-Soundness-15707" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-15708" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-15710" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-15712" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15714" href="../Soundness/#plfa_plfa-part3-Soundness-15714" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-15715" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15717" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-15718" href="../Denotational/#plfa_plfa-part3-Denotational-9204" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-15722" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15723" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-15725" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15727" href="../Soundness/#plfa_plfa-part3-Soundness-15727" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-15728" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-15731" href="../Soundness/#plfa_plfa-part3-Soundness-15731" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-15735" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-15740" href="../Soundness/#plfa_plfa-part3-Soundness-15707" class="Bound">M</a>
<a id="plfa_plfa-part3-Soundness-15742" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-15746" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-15748" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-15750" href="../Soundness/#plfa_plfa-part3-Soundness-15750" class="Bound">x</a>  <a id="plfa_plfa-part3-Soundness-15753" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-15758" href="../Denotational/#plfa_plfa-part3-Denotational-9204" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-15762" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15763" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-15765" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15767" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-15768" class="Symbol">}</a>
<a id="plfa_plfa-part3-Soundness-15770" class="Symbol">...</a>           <a id="plfa_plfa-part3-Soundness-15784" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-15786" href="../Soundness/#plfa_plfa-part3-Soundness-15786" class="Bound">yv</a>  <a id="plfa_plfa-part3-Soundness-15790" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-15798" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-15802" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-15806" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15808" href="../Soundness/#plfa_plfa-part3-Soundness-13584" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-15826" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15827" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-15829" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15831" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-15832" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15834" href="../Soundness/#plfa_plfa-part3-Soundness-15786" class="Bound">yv</a>
<a id="plfa_plfa-part3-Soundness-15837" href="../Soundness/#plfa_plfa-part3-Soundness-15487" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-15851" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15852" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-15854" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15856" href="../Soundness/#plfa_plfa-part3-Soundness-15856" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-15857" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15859" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-15860" href="../Denotational/#plfa_plfa-part3-Denotational-9204" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-15864" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15865" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-15867" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15869" href="../Soundness/#plfa_plfa-part3-Soundness-15869" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-15870" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-15873" class="Symbol">()</a> <a id="plfa_plfa-part3-Soundness-15876" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-15878" href="../Soundness/#plfa_plfa-part3-Soundness-15878" class="Bound">M₁</a> <a id="plfa_plfa-part3-Soundness-15881" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-15883" href="../Soundness/#plfa_plfa-part3-Soundness-15883" class="Bound">M₂</a>
<a id="plfa_plfa-part3-Soundness-15886" href="../Soundness/#plfa_plfa-part3-Soundness-15487" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-15900" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15901" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-15903" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15905" href="../Soundness/#plfa_plfa-part3-Soundness-15905" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-15906" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15908" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-15909" href="../Denotational/#plfa_plfa-part3-Denotational-9204" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-15913" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15914" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-15916" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15918" href="../Soundness/#plfa_plfa-part3-Soundness-15918" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-15919" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-15922" class="Symbol">()</a> <a id="plfa_plfa-part3-Soundness-15925" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-15927" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-15929" href="../Soundness/#plfa_plfa-part3-Soundness-15929" class="Bound">M′</a>

<a id="plfa_plfa-part3-Soundness-15933" href="../Soundness/#plfa_plfa-part3-Soundness-15487" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-15947" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15948" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-15950" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15952" href="../Soundness/#plfa_plfa-part3-Soundness-15952" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-15953" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-15955" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-15957" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15959" href="../Soundness/#plfa_plfa-part3-Soundness-15959" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-15960" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15962" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-15963" href="../Denotational/#plfa_plfa-part3-Denotational-9279" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-15970" href="../Soundness/#plfa_plfa-part3-Soundness-15970" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-15973" href="../Soundness/#plfa_plfa-part3-Soundness-15973" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-15975" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-15977" href="../Soundness/#plfa_plfa-part3-Soundness-15977" class="Bound">eqL</a>
         <a id="plfa_plfa-part3-Soundness-15990" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-15995" href="../Soundness/#plfa_plfa-part3-Soundness-15952" class="Bound">M</a>
<a id="plfa_plfa-part3-Soundness-15997" class="Symbol">...</a>    <a id="plfa_plfa-part3-Soundness-16004" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16006" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-16008" href="../Soundness/#plfa_plfa-part3-Soundness-16008" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16010" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-16015" href="../Denotational/#plfa_plfa-part3-Denotational-9279" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-16022" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-16025" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-16028" class="Symbol">...</a>    <a id="plfa_plfa-part3-Soundness-16035" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16037" href="../Soundness/#plfa_plfa-part3-Soundness-16037" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-16040" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-16048" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-16052" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-16056" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16058" href="../Soundness/#plfa_plfa-part3-Soundness-13584" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-16076" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16077" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-16079" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16081" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-16082" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16084" href="../Soundness/#plfa_plfa-part3-Soundness-16037" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-16087" href="../Soundness/#plfa_plfa-part3-Soundness-15487" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-16101" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16102" href="../Denotational/#plfa_plfa-part3-Denotational-9279" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-16109" href="../Soundness/#plfa_plfa-part3-Soundness-16109" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-16112" href="../Soundness/#plfa_plfa-part3-Soundness-16112" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-16114" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16116" class="Symbol">()</a> <a id="plfa_plfa-part3-Soundness-16119" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16121" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-16123" href="../Soundness/#plfa_plfa-part3-Soundness-16123" class="Bound">M′</a>
<a id="plfa_plfa-part3-Soundness-16126" href="../Soundness/#plfa_plfa-part3-Soundness-15487" class="Function">subst-reflect</a><a id="plfa_plfa-part3-Soundness-16139" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16140" href="../Soundness/#plfa_plfa-part3-Soundness-16140" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-16141" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-16143" href="../Soundness/#plfa_plfa-part3-Soundness-16143" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-16144" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-16146" href="../Soundness/#plfa_plfa-part3-Soundness-16146" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-16147" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-16149" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-16151" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16153" href="../Soundness/#plfa_plfa-part3-Soundness-16153" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-16154" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16156" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16157" href="../Denotational/#plfa_plfa-part3-Denotational-9279" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-16164" href="../Soundness/#plfa_plfa-part3-Soundness-16164" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-16167" href="../Soundness/#plfa_plfa-part3-Soundness-16167" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-16169" class="Symbol">)</a>
   <a id="plfa_plfa-part3-Soundness-16174" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-16179" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16181" href="../Soundness/#plfa_plfa-part3-Soundness-16181" class="Bound">M₁</a> <a id="plfa_plfa-part3-Soundness-16184" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-16186" href="../Soundness/#plfa_plfa-part3-Soundness-16186" class="Bound">M₂</a>
     <a id="plfa_plfa-part3-Soundness-16194" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-16199" href="../Soundness/#plfa_plfa-part3-Soundness-15487" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-16213" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16214" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-16216" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16218" href="../Soundness/#plfa_plfa-part3-Soundness-16181" class="Bound">M₁</a><a id="plfa_plfa-part3-Soundness-16220" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16222" href="../Soundness/#plfa_plfa-part3-Soundness-16164" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-16225" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-16230" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16232" href="../Soundness/#plfa_plfa-part3-Soundness-15487" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-16246" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16247" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-16249" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16251" href="../Soundness/#plfa_plfa-part3-Soundness-16186" class="Bound">M₂</a><a id="plfa_plfa-part3-Soundness-16253" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16255" href="../Soundness/#plfa_plfa-part3-Soundness-16167" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-16258" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-16263" class="Symbol">...</a>     <a id="plfa_plfa-part3-Soundness-16271" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16273" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16275" href="../Soundness/#plfa_plfa-part3-Soundness-16275" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-16278" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-16280" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16282" href="../Soundness/#plfa_plfa-part3-Soundness-16282" class="Bound">subst-δ₁</a> <a id="plfa_plfa-part3-Soundness-16291" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-16293" href="../Soundness/#plfa_plfa-part3-Soundness-16293" class="Bound">m1</a> <a id="plfa_plfa-part3-Soundness-16296" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-16298" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-16300" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16302" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16304" href="../Soundness/#plfa_plfa-part3-Soundness-16304" class="Bound">δ₂</a> <a id="plfa_plfa-part3-Soundness-16307" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-16309" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16311" href="../Soundness/#plfa_plfa-part3-Soundness-16311" class="Bound">subst-δ₂</a> <a id="plfa_plfa-part3-Soundness-16320" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-16322" href="../Soundness/#plfa_plfa-part3-Soundness-16322" class="Bound">m2</a> <a id="plfa_plfa-part3-Soundness-16325" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-16327" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-16329" class="Symbol">=</a>
     <a id="plfa_plfa-part3-Soundness-16336" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16338" href="../Soundness/#plfa_plfa-part3-Soundness-16275" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-16341" href="../Denotational/#plfa_plfa-part3-Denotational-8136" class="Function Operator">`⊔</a> <a id="plfa_plfa-part3-Soundness-16344" href="../Soundness/#plfa_plfa-part3-Soundness-16304" class="Bound">δ₂</a> <a id="plfa_plfa-part3-Soundness-16347" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-16349" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16351" href="../Soundness/#plfa_plfa-part3-Soundness-14483" class="Function">subst-⊔</a> <a id="plfa_plfa-part3-Soundness-16359" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16360" class="Argument">γ₁</a> <a id="plfa_plfa-part3-Soundness-16363" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16365" href="../Soundness/#plfa_plfa-part3-Soundness-16275" class="Bound">δ₁</a><a id="plfa_plfa-part3-Soundness-16367" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-16369" class="Argument">γ₂</a> <a id="plfa_plfa-part3-Soundness-16372" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16374" href="../Soundness/#plfa_plfa-part3-Soundness-16304" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-16376" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-16378" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-16380" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16382" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-16383" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16385" href="../Soundness/#plfa_plfa-part3-Soundness-16282" class="Bound">subst-δ₁</a> <a id="plfa_plfa-part3-Soundness-16394" href="../Soundness/#plfa_plfa-part3-Soundness-16311" class="Bound">subst-δ₂</a> <a id="plfa_plfa-part3-Soundness-16403" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a>
                    <a id="plfa_plfa-part3-Soundness-16425" href="../Denotational/#plfa_plfa-part3-Denotational-9279" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-16432" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16433" href="../Denotational/#plfa_plfa-part3-Denotational-25039" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-16439" href="../Soundness/#plfa_plfa-part3-Soundness-16293" class="Bound">m1</a> <a id="plfa_plfa-part3-Soundness-16442" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16443" href="../Denotational/#plfa_plfa-part3-Denotational-8470" class="Function">⊑-env-conj-R1</a> <a id="plfa_plfa-part3-Soundness-16457" href="../Soundness/#plfa_plfa-part3-Soundness-16275" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-16460" href="../Soundness/#plfa_plfa-part3-Soundness-16304" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-16462" class="Symbol">))</a>
                           <a id="plfa_plfa-part3-Soundness-16492" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16493" href="../Denotational/#plfa_plfa-part3-Denotational-25039" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-16499" href="../Soundness/#plfa_plfa-part3-Soundness-16322" class="Bound">m2</a> <a id="plfa_plfa-part3-Soundness-16502" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16503" href="../Denotational/#plfa_plfa-part3-Denotational-8576" class="Function">⊑-env-conj-R2</a> <a id="plfa_plfa-part3-Soundness-16517" href="../Soundness/#plfa_plfa-part3-Soundness-16275" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-16520" href="../Soundness/#plfa_plfa-part3-Soundness-16304" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-16522" class="Symbol">))</a> <a id="plfa_plfa-part3-Soundness-16525" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-16527" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a>

<a id="plfa_plfa-part3-Soundness-16530" href="../Soundness/#plfa_plfa-part3-Soundness-15487" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-16544" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16545" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-16547" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16549" href="../Soundness/#plfa_plfa-part3-Soundness-16549" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-16550" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-16552" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-16554" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16556" href="../Soundness/#plfa_plfa-part3-Soundness-16556" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-16557" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16559" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16560" href="../Denotational/#plfa_plfa-part3-Denotational-9401" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-16568" href="../Soundness/#plfa_plfa-part3-Soundness-16568" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-16569" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16571" href="../Soundness/#plfa_plfa-part3-Soundness-16571" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-16575" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-16580" href="../Soundness/#plfa_plfa-part3-Soundness-16549" class="Bound">M</a>
<a id="plfa_plfa-part3-Soundness-16582" class="Symbol">...</a>    <a id="plfa_plfa-part3-Soundness-16589" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16591" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-16593" href="../Soundness/#plfa_plfa-part3-Soundness-16593" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16595" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-16600" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16601" href="../Denotational/#plfa_plfa-part3-Denotational-9401" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-16609" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-16610" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-16612" class="Symbol">...</a>             <a id="plfa_plfa-part3-Soundness-16628" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16630" href="../Soundness/#plfa_plfa-part3-Soundness-16630" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-16633" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-16641" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-16645" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-16649" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16651" href="../Soundness/#plfa_plfa-part3-Soundness-13584" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-16669" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16670" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-16672" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16674" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-16675" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16677" href="../Soundness/#plfa_plfa-part3-Soundness-16630" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-16680" href="../Soundness/#plfa_plfa-part3-Soundness-15487" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-16694" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16695" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-16697" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16699" href="../Soundness/#plfa_plfa-part3-Soundness-16699" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-16700" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16702" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16703" href="../Denotational/#plfa_plfa-part3-Denotational-9401" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-16711" href="../Soundness/#plfa_plfa-part3-Soundness-16711" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-16712" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16714" href="../Soundness/#plfa_plfa-part3-Soundness-16714" class="Bound">eq</a> <a id="plfa_plfa-part3-Soundness-16717" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16719" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-16721" href="../Soundness/#plfa_plfa-part3-Soundness-16721" class="Bound">M′</a>
      <a id="plfa_plfa-part3-Soundness-16730" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-16735" href="../Soundness/#plfa_plfa-part3-Soundness-15487" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-16749" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16750" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-16752" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16754" href="../Untyped/#plfa_plfa-part2-Untyped-6463" class="Function">exts</a> <a id="plfa_plfa-part3-Soundness-16759" href="../Soundness/#plfa_plfa-part3-Soundness-16699" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-16760" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16762" href="../Soundness/#plfa_plfa-part3-Soundness-16711" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-16764" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16765" href="../Soundness/#plfa_plfa-part3-Soundness-14769" class="Function">lambda-inj</a> <a id="plfa_plfa-part3-Soundness-16776" href="../Soundness/#plfa_plfa-part3-Soundness-16714" class="Bound">eq</a><a id="plfa_plfa-part3-Soundness-16778" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-16780" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-16784" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16786" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16788" href="../Soundness/#plfa_plfa-part3-Soundness-16788" class="Bound">δ′</a> <a id="plfa_plfa-part3-Soundness-16791" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-16793" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16795" href="../Soundness/#plfa_plfa-part3-Soundness-16795" class="Bound">exts-σ-δ′</a> <a id="plfa_plfa-part3-Soundness-16805" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-16807" href="../Soundness/#plfa_plfa-part3-Soundness-16807" class="Bound">m′</a> <a id="plfa_plfa-part3-Soundness-16810" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-16812" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-16814" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Soundness-16820" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16822" href="../Denotational/#plfa_plfa-part3-Denotational-7474" class="Function">init</a> <a id="plfa_plfa-part3-Soundness-16827" href="../Soundness/#plfa_plfa-part3-Soundness-16788" class="Bound">δ′</a> <a id="plfa_plfa-part3-Soundness-16830" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-16832" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16834" class="Symbol">((λ</a> <a id="plfa_plfa-part3-Soundness-16838" href="../Soundness/#plfa_plfa-part3-Soundness-16838" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16840" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16842" href="../Soundness/#plfa_plfa-part3-Soundness-10992" class="Function">rename-inc-reflect</a> <a id="plfa_plfa-part3-Soundness-16861" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16862" href="../Soundness/#plfa_plfa-part3-Soundness-16795" class="Bound">exts-σ-δ′</a> <a id="plfa_plfa-part3-Soundness-16872" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16873" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-16875" href="../Soundness/#plfa_plfa-part3-Soundness-16838" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-16876" class="Symbol">))))</a> <a id="plfa_plfa-part3-Soundness-16881" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a>
             <a id="plfa_plfa-part3-Soundness-16896" href="../Denotational/#plfa_plfa-part3-Denotational-9401" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-16904" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16905" href="../Denotational/#plfa_plfa-part3-Denotational-25488" class="Function">up-env</a> <a id="plfa_plfa-part3-Soundness-16912" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16913" href="../Soundness/#plfa_plfa-part3-Soundness-15314" class="Function">split</a> <a id="plfa_plfa-part3-Soundness-16919" href="../Soundness/#plfa_plfa-part3-Soundness-16807" class="Bound">m′</a><a id="plfa_plfa-part3-Soundness-16921" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16923" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16924" href="../Compositional/#plfa_plfa-part3-Compositional-9833" class="Function">var-inv</a> <a id="plfa_plfa-part3-Soundness-16932" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16933" href="../Soundness/#plfa_plfa-part3-Soundness-16795" class="Bound">exts-σ-δ′</a> <a id="plfa_plfa-part3-Soundness-16943" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a><a id="plfa_plfa-part3-Soundness-16944" class="Symbol">)))</a> <a id="plfa_plfa-part3-Soundness-16948" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-16950" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Soundness-16952" href="../Soundness/#plfa_plfa-part3-Soundness-15487" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-16966" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16967" href="../Denotational/#plfa_plfa-part3-Denotational-9401" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-16975" href="../Soundness/#plfa_plfa-part3-Soundness-16975" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-16976" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16978" class="Symbol">()</a> <a id="plfa_plfa-part3-Soundness-16981" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16983" href="../Soundness/#plfa_plfa-part3-Soundness-16983" class="Bound">M₁</a> <a id="plfa_plfa-part3-Soundness-16986" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-16988" href="../Soundness/#plfa_plfa-part3-Soundness-16988" class="Bound">M₂</a>

<a id="plfa_plfa-part3-Soundness-16992" href="../Soundness/#plfa_plfa-part3-Soundness-15487" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-17006" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-17007" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-17009" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17011" href="../Soundness/#plfa_plfa-part3-Soundness-17011" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-17012" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-17014" href="../Denotational/#plfa_plfa-part3-Denotational-9513" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-17022" href="../Soundness/#plfa_plfa-part3-Soundness-17022" class="Bound">eq</a> <a id="plfa_plfa-part3-Soundness-17025" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Soundness-17031" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17033" href="../Denotational/#plfa_plfa-part3-Denotational-8107" class="Function">`⊥</a> <a id="plfa_plfa-part3-Soundness-17036" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17038" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17040" href="../Soundness/#plfa_plfa-part3-Soundness-14225" class="Function">subst-⊥</a> <a id="plfa_plfa-part3-Soundness-17048" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-17049" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-17051" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17053" href="../Soundness/#plfa_plfa-part3-Soundness-17011" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-17054" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-17056" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17058" href="../Denotational/#plfa_plfa-part3-Denotational-9513" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-17066" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17068" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a>

<a id="plfa_plfa-part3-Soundness-17071" href="../Soundness/#plfa_plfa-part3-Soundness-15487" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-17085" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-17086" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-17088" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17090" href="../Soundness/#plfa_plfa-part3-Soundness-17090" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-17091" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-17093" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17094" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-17102" href="../Soundness/#plfa_plfa-part3-Soundness-17102" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-17105" href="../Soundness/#plfa_plfa-part3-Soundness-17105" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-17107" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-17109" href="../Soundness/#plfa_plfa-part3-Soundness-17109" class="Bound">eq</a>
  <a id="plfa_plfa-part3-Soundness-17114" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-17119" href="../Soundness/#plfa_plfa-part3-Soundness-15487" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-17133" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-17134" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-17136" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17138" href="../Soundness/#plfa_plfa-part3-Soundness-17090" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-17139" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-17141" href="../Soundness/#plfa_plfa-part3-Soundness-17102" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-17144" href="../Soundness/#plfa_plfa-part3-Soundness-17109" class="Bound">eq</a> <a id="plfa_plfa-part3-Soundness-17147" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-17149" href="../Soundness/#plfa_plfa-part3-Soundness-15487" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-17163" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-17164" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-17166" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17168" href="../Soundness/#plfa_plfa-part3-Soundness-17090" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-17169" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-17171" href="../Soundness/#plfa_plfa-part3-Soundness-17105" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-17174" href="../Soundness/#plfa_plfa-part3-Soundness-17109" class="Bound">eq</a>
<a id="plfa_plfa-part3-Soundness-17177" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-17181" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-17183" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17185" href="../Soundness/#plfa_plfa-part3-Soundness-17185" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-17188" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17190" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17192" href="../Soundness/#plfa_plfa-part3-Soundness-17192" class="Bound">subst-δ₁</a> <a id="plfa_plfa-part3-Soundness-17201" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17203" href="../Soundness/#plfa_plfa-part3-Soundness-17203" class="Bound">m1</a> <a id="plfa_plfa-part3-Soundness-17206" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17208" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17210" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-17212" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17214" href="../Soundness/#plfa_plfa-part3-Soundness-17214" class="Bound">δ₂</a> <a id="plfa_plfa-part3-Soundness-17217" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17219" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17221" href="../Soundness/#plfa_plfa-part3-Soundness-17221" class="Bound">subst-δ₂</a> <a id="plfa_plfa-part3-Soundness-17230" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17232" href="../Soundness/#plfa_plfa-part3-Soundness-17232" class="Bound">m2</a> <a id="plfa_plfa-part3-Soundness-17235" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17237" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17239" class="Symbol">=</a>
     <a id="plfa_plfa-part3-Soundness-17246" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17248" href="../Soundness/#plfa_plfa-part3-Soundness-17185" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-17251" href="../Denotational/#plfa_plfa-part3-Denotational-8136" class="Function Operator">`⊔</a> <a id="plfa_plfa-part3-Soundness-17254" href="../Soundness/#plfa_plfa-part3-Soundness-17214" class="Bound">δ₂</a> <a id="plfa_plfa-part3-Soundness-17257" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17259" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17261" href="../Soundness/#plfa_plfa-part3-Soundness-14483" class="Function">subst-⊔</a> <a id="plfa_plfa-part3-Soundness-17269" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-17270" class="Argument">γ₁</a> <a id="plfa_plfa-part3-Soundness-17273" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17275" href="../Soundness/#plfa_plfa-part3-Soundness-17185" class="Bound">δ₁</a><a id="plfa_plfa-part3-Soundness-17277" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-17279" class="Argument">γ₂</a> <a id="plfa_plfa-part3-Soundness-17282" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17284" href="../Soundness/#plfa_plfa-part3-Soundness-17214" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-17286" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-17288" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-17290" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17292" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-17293" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-17295" href="../Soundness/#plfa_plfa-part3-Soundness-17192" class="Bound">subst-δ₁</a> <a id="plfa_plfa-part3-Soundness-17304" href="../Soundness/#plfa_plfa-part3-Soundness-17221" class="Bound">subst-δ₂</a> <a id="plfa_plfa-part3-Soundness-17313" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a>
                    <a id="plfa_plfa-part3-Soundness-17335" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-17343" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17344" href="../Denotational/#plfa_plfa-part3-Denotational-25039" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-17350" href="../Soundness/#plfa_plfa-part3-Soundness-17203" class="Bound">m1</a> <a id="plfa_plfa-part3-Soundness-17353" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17354" href="../Denotational/#plfa_plfa-part3-Denotational-8470" class="Function">⊑-env-conj-R1</a> <a id="plfa_plfa-part3-Soundness-17368" href="../Soundness/#plfa_plfa-part3-Soundness-17185" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-17371" href="../Soundness/#plfa_plfa-part3-Soundness-17214" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-17373" class="Symbol">))</a>
                            <a id="plfa_plfa-part3-Soundness-17404" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17405" href="../Denotational/#plfa_plfa-part3-Denotational-25039" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-17411" href="../Soundness/#plfa_plfa-part3-Soundness-17232" class="Bound">m2</a> <a id="plfa_plfa-part3-Soundness-17414" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17415" href="../Denotational/#plfa_plfa-part3-Denotational-8576" class="Function">⊑-env-conj-R2</a> <a id="plfa_plfa-part3-Soundness-17429" href="../Soundness/#plfa_plfa-part3-Soundness-17185" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-17432" href="../Soundness/#plfa_plfa-part3-Soundness-17214" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-17434" class="Symbol">))</a> <a id="plfa_plfa-part3-Soundness-17437" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17439" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Soundness-17441" href="../Soundness/#plfa_plfa-part3-Soundness-15487" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-17455" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17456" href="../Denotational/#plfa_plfa-part3-Denotational-9695" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-17460" href="../Soundness/#plfa_plfa-part3-Soundness-17460" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-17462" href="../Soundness/#plfa_plfa-part3-Soundness-17462" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-17464" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-17466" href="../Soundness/#plfa_plfa-part3-Soundness-17466" class="Bound">eq</a>
    <a id="plfa_plfa-part3-Soundness-17473" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-17478" href="../Soundness/#plfa_plfa-part3-Soundness-15487" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-17492" href="../Soundness/#plfa_plfa-part3-Soundness-17460" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-17494" href="../Soundness/#plfa_plfa-part3-Soundness-17466" class="Bound">eq</a>
<a id="plfa_plfa-part3-Soundness-17497" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-17501" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-17503" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17505" href="../Soundness/#plfa_plfa-part3-Soundness-17505" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-17507" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17509" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17511" href="../Soundness/#plfa_plfa-part3-Soundness-17511" class="Bound">subst-δ</a> <a id="plfa_plfa-part3-Soundness-17519" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17521" href="../Soundness/#plfa_plfa-part3-Soundness-17521" class="Bound">m</a> <a id="plfa_plfa-part3-Soundness-17523" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17525" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17527" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17529" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17531" href="../Soundness/#plfa_plfa-part3-Soundness-17505" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-17533" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17535" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17537" href="../Soundness/#plfa_plfa-part3-Soundness-17511" class="Bound">subst-δ</a> <a id="plfa_plfa-part3-Soundness-17545" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17547" href="../Denotational/#plfa_plfa-part3-Denotational-9695" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-17551" href="../Soundness/#plfa_plfa-part3-Soundness-17521" class="Bound">m</a> <a id="plfa_plfa-part3-Soundness-17553" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-17556" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17558" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a>
</pre><ul><li><p>Case <code>var</code>: We have <code>subst σ M ≡ y</code>, so <code>M</code> must also be a variable, say <code>x</code>. We apply the lemma <code>subst-reflect-var</code> to conclude.</p></li><li><p>Case <code>↦-elim</code>: We have <code>subst σ M ≡ L₁ · L₂</code>. We proceed by cases on <code>M</code>.</p><ul><li><p>Case <code>M ≡ ` x</code>: We apply the <code>subst-reflect-var</code> lemma again to conclude.</p></li><li><p>Case <code>M ≡ M₁ · M₂</code>: By the induction hypothesis, we have some <code>δ₁</code> and <code>δ₂</code> such that <code>δ₁ ⊢ M₁ ↓ v₁ ↦ v₃</code> and <code>γ `⊢ σ ↓ δ₁</code>, as well as <code>δ₂ ⊢ M₂ ↓ v₁</code> and <code>γ `⊢ σ ↓ δ₂</code>. By <code>⊑-env</code> we have <code>δ₁ ⊔ δ₂ ⊢ M₁ ↓ v₁ ↦ v₃</code> and <code>δ₁ ⊔ δ₂ ⊢ M₂ ↓ v₁</code> (using <code>⊑-env-conj-R1</code> and <code>⊑-env-conj-R2</code>), and therefore <code>δ₁ ⊔ δ₂ ⊢ M₁ · M₂ ↓ v₃</code>. We conclude this case by obtaining <code>γ `⊢ σ ↓ δ₁ ⊔ δ₂</code> by the <code>subst-⊔</code> lemma.</p></li></ul></li><li><p>Case <code>↦-intro</code>: We have <code>subst σ M ≡ ƛ L′</code>. We proceed by cases on <code>M</code>.</p><ul><li><p>Case <code>M ≡ x</code>: We apply the <code>subst-reflect-var</code> lemma.</p></li><li><p>Case <code>M ≡ ƛ M′</code>: By the induction hypothesis, we have <code>(δ′ , v′) ⊢ M′ ↓ v₂</code> and <code>(δ , v₁) ⊢ exts σ ↓ (δ′ , v′)</code>. From the later we have <code>(δ , v₁) ⊢ # 0 ↓ v′</code>. By the lemma <code>var-inv</code> we have <code>v′ ⊑ v₁</code>, so by the <code>up-env</code> lemma we have <code>(δ′ , v₁) ⊢ M′ ↓ v₂</code> and therefore <code>δ′ ⊢ ƛ M′ ↓ v₁ → v₂</code>. We also need to show that <code>δ ⊢ σ ↓ δ′</code>. Fix <code>k</code>. We have <code>(δ , v₁) ⊢ rename S_ σ k ↓ δ k′</code>. We then apply the lemma <code>rename-inc-reflect</code> to obtain <code>δ ⊢ σ k ↓ δ k′</code>, so this case is complete.</p></li></ul></li><li><p>Case <code>⊥-intro</code>: We choose <code>⊥</code> for <code>δ</code>. We have <code>⊥ ⊢ M ↓ ⊥</code> by <code>⊥-intro</code>. We have <code>δ `⊢ σ ↓ `⊥</code> by the lemma <code>subst-⊥</code>.</p></li><li><p>Case <code>⊔-intro</code>: By the induction hypothesis we have <code>δ₁ ⊢ M ↓ v₁</code>, <code>δ₂ ⊢ M ↓ v₂</code>, <code>δ `⊢ σ ↓ δ₁</code>, and <code>δ `⊢ σ ↓ δ₂</code>. We have <code>δ₁ ⊔ δ₂ ⊢ M ↓ v₁</code> and <code>δ₁ ⊔ δ₂ ⊢ M ↓ v₂</code> by <code>⊑-env</code> with <code>⊑-env-conj-R1</code> and <code>⊑-env-conj-R2</code>. So by <code>⊔-intro</code> we have <code>δ₁ ⊔ δ₂ ⊢ M ↓ v₁ ⊔ v₂</code>. By <code>subst-⊔</code> we conclude that <code>δ `⊢ σ ↓ δ₁ ⊔ δ₂</code>.</p></li></ul><h3 id="single-substitution-reflects-denotations">Single substitution reflects denotations</h3><p>Most of the work is now behind us. We have proved that simultaneous substitution reflects denotations. Of course, β reduction uses single substitution, so we need a corollary that proves that single substitution reflects denotations. That is, given terms <code>N : (Γ , ★ ⊢ ★)</code> and <code>M : (Γ ⊢ ★)</code>, if <code>γ ⊢ N [ M ] ↓ w</code>, then <code>γ ⊢ M ↓ v</code> and <code>(γ , v) ⊢ N ↓ w</code> for some value <code>v</code>. We have <code>N [ M ] = subst (subst-zero M) N</code>.</p><p>We first prove a lemma about <code>subst-zero</code>, that if <code>δ ⊢ subst-zero M ↓ γ</code>, then <code>γ `⊑ (δ , w) × δ ⊢ M ↓ w</code> for some <code>w</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-zero-reflect"></a><a id="plfa_plfa-part3-Soundness-20034" href="../Soundness/#plfa_plfa-part3-Soundness-20034" class="Function">subst-zero-reflect</a> <a id="plfa_plfa-part3-Soundness-20053" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20055" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-20057" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20058" href="../Soundness/#plfa_plfa-part3-Soundness-20058" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-20059" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20061" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20062" href="../Soundness/#plfa_plfa-part3-Soundness-20062" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20064" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20066" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-20070" href="../Soundness/#plfa_plfa-part3-Soundness-20058" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-20071" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20073" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20074" href="../Soundness/#plfa_plfa-part3-Soundness-20074" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-20076" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20078" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-20082" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20083" href="../Soundness/#plfa_plfa-part3-Soundness-20058" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-20085" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-20087" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-20088" class="Symbol">)}</a> <a id="plfa_plfa-part3-Soundness-20091" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20092" href="../Soundness/#plfa_plfa-part3-Soundness-20092" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20094" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20096" href="../Soundness/#plfa_plfa-part3-Soundness-20058" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-20098" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20100" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-20101" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-20105" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-20107" href="../Soundness/#plfa_plfa-part3-Soundness-20062" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20109" href="../Soundness/#plfa_plfa-part3-Soundness-3028" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-20112" href="../Untyped/#plfa_plfa-part2-Untyped-7175" class="Function">subst-zero</a> <a id="plfa_plfa-part3-Soundness-20123" href="../Soundness/#plfa_plfa-part3-Soundness-20092" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20125" href="../Soundness/#plfa_plfa-part3-Soundness-3028" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-20127" href="../Soundness/#plfa_plfa-part3-Soundness-20074" class="Bound">γ</a>
    <a id="plfa_plfa-part3-Soundness-20133" class="Comment">----------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-20176" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-20178" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1244" class="Function">Σ[</a> <a id="plfa_plfa-part3-Soundness-20181" href="../Soundness/#plfa_plfa-part3-Soundness-20181" class="Bound">w</a> <a id="plfa_plfa-part3-Soundness-20183" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1244" class="Function">∈</a> <a id="plfa_plfa-part3-Soundness-20185" href="../Denotational/#plfa_plfa-part3-Denotational-3907" class="Datatype">Value</a> <a id="plfa_plfa-part3-Soundness-20191" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1244" class="Function">]</a> <a id="plfa_plfa-part3-Soundness-20193" href="../Soundness/#plfa_plfa-part3-Soundness-20074" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-20195" href="../Denotational/#plfa_plfa-part3-Denotational-7900" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-20198" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20199" href="../Soundness/#plfa_plfa-part3-Soundness-20062" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20201" href="../Denotational/#plfa_plfa-part3-Denotational-7229" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-20204" href="../Soundness/#plfa_plfa-part3-Soundness-20181" class="Bound">w</a><a id="plfa_plfa-part3-Soundness-20205" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-20207" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="plfa_plfa-part3-Soundness-20209" href="../Soundness/#plfa_plfa-part3-Soundness-20062" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20211" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20213" href="../Soundness/#plfa_plfa-part3-Soundness-20092" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20215" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-20217" href="../Soundness/#plfa_plfa-part3-Soundness-20181" class="Bound">w</a>
<a id="plfa_plfa-part3-Soundness-20219" href="../Soundness/#plfa_plfa-part3-Soundness-20034" class="Function">subst-zero-reflect</a> <a id="plfa_plfa-part3-Soundness-20238" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20239" class="Argument">δ</a> <a id="plfa_plfa-part3-Soundness-20241" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20243" href="../Soundness/#plfa_plfa-part3-Soundness-20243" class="Bound">δ</a><a id="plfa_plfa-part3-Soundness-20244" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20246" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20247" class="Argument">γ</a> <a id="plfa_plfa-part3-Soundness-20249" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20251" href="../Soundness/#plfa_plfa-part3-Soundness-20251" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-20252" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20254" href="../Soundness/#plfa_plfa-part3-Soundness-20254" class="Bound">δσγ</a> <a id="plfa_plfa-part3-Soundness-20258" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20260" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-20262" href="../Denotational/#plfa_plfa-part3-Denotational-7529" class="Function">last</a> <a id="plfa_plfa-part3-Soundness-20267" href="../Soundness/#plfa_plfa-part3-Soundness-20251" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-20269" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-20271" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-20273" href="../Soundness/#plfa_plfa-part3-Soundness-20301" class="Function">lemma</a> <a id="plfa_plfa-part3-Soundness-20279" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-20281" href="../Soundness/#plfa_plfa-part3-Soundness-20254" class="Bound">δσγ</a> <a id="plfa_plfa-part3-Soundness-20285" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-20287" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-20289" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Soundness-20293" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Soundness-20301" href="../Soundness/#plfa_plfa-part3-Soundness-20301" class="Function">lemma</a> <a id="plfa_plfa-part3-Soundness-20307" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20309" href="../Soundness/#plfa_plfa-part3-Soundness-20251" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-20311" href="../Denotational/#plfa_plfa-part3-Denotational-7900" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-20314" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20315" href="../Soundness/#plfa_plfa-part3-Soundness-20243" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20317" href="../Denotational/#plfa_plfa-part3-Denotational-7229" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-20320" href="../Denotational/#plfa_plfa-part3-Denotational-7529" class="Function">last</a> <a id="plfa_plfa-part3-Soundness-20325" href="../Soundness/#plfa_plfa-part3-Soundness-20251" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-20326" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-20330" href="../Soundness/#plfa_plfa-part3-Soundness-20301" class="Function">lemma</a> <a id="plfa_plfa-part3-Soundness-20336" href="../Untyped/#plfa_plfa-part2-Untyped-3162" class="InductiveConstructor">Z</a>  <a id="plfa_plfa-part3-Soundness-20339" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-20342" href="../Denotational/#plfa_plfa-part3-Denotational-5402" class="Function">⊑-refl</a>
  <a id="plfa_plfa-part3-Soundness-20351" href="../Soundness/#plfa_plfa-part3-Soundness-20301" class="Function">lemma</a> <a id="plfa_plfa-part3-Soundness-20357" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20358" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-20360" href="../Soundness/#plfa_plfa-part3-Soundness-20360" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-20361" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-20363" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20365" href="../Compositional/#plfa_plfa-part3-Compositional-9833" class="Function">var-inv</a> <a id="plfa_plfa-part3-Soundness-20373" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20374" href="../Soundness/#plfa_plfa-part3-Soundness-20254" class="Bound">δσγ</a> <a id="plfa_plfa-part3-Soundness-20378" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20379" href="../Untyped/#plfa_plfa-part2-Untyped-3207" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-20381" href="../Soundness/#plfa_plfa-part3-Soundness-20360" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-20382" class="Symbol">))</a>
</pre><p>We choose <code>w</code> to be the last value in <code>γ</code> and we obtain <code>δ ⊢ M ↓ w</code> by applying the premise to variable <code>Z</code>. Finally, to prove <code>γ `⊑ (δ , w)</code>, we prove a lemma by induction in the input variable. The base case is trivial because of our choice of <code>w</code>. In the induction case, <code>S x</code>, the premise <code>δ ⊢ subst-zero M ↓ γ</code> gives us <code>δ ⊢ x ↓ γ (S x)</code> and then using <code>var-inv</code> we conclude that <code>γ (S x) ⊑ (δ `, w) (S x)</code>.</p><p>Now to prove that substitution reflects denotations.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-substitution-reflect"></a><a id="plfa_plfa-part3-Soundness-20874" href="../Soundness/#plfa_plfa-part3-Soundness-20874" class="Function">substitution-reflect</a> <a id="plfa_plfa-part3-Soundness-20895" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20897" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-20899" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20900" href="../Soundness/#plfa_plfa-part3-Soundness-20900" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-20901" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20903" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20904" href="../Soundness/#plfa_plfa-part3-Soundness-20904" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20906" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20908" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-20912" href="../Soundness/#plfa_plfa-part3-Soundness-20900" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-20913" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20915" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20916" href="../Soundness/#plfa_plfa-part3-Soundness-20916" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-20918" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20920" href="../Soundness/#plfa_plfa-part3-Soundness-20900" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-20922" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-20924" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-20926" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20928" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-20929" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20931" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20932" href="../Soundness/#plfa_plfa-part3-Soundness-20932" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20934" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20936" href="../Soundness/#plfa_plfa-part3-Soundness-20900" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-20938" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20940" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-20941" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20943" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20944" href="../Soundness/#plfa_plfa-part3-Soundness-20944" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-20945" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-20949" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-20951" href="../Soundness/#plfa_plfa-part3-Soundness-20904" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20953" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20955" href="../Soundness/#plfa_plfa-part3-Soundness-20916" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-20957" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">[</a> <a id="plfa_plfa-part3-Soundness-20959" href="../Soundness/#plfa_plfa-part3-Soundness-20932" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20961" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">]</a> <a id="plfa_plfa-part3-Soundness-20963" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-20965" href="../Soundness/#plfa_plfa-part3-Soundness-20944" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-20971" class="Comment">------------------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-21022" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-21024" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1244" class="Function">Σ[</a> <a id="plfa_plfa-part3-Soundness-21027" href="../Soundness/#plfa_plfa-part3-Soundness-21027" class="Bound">w</a> <a id="plfa_plfa-part3-Soundness-21029" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1244" class="Function">∈</a> <a id="plfa_plfa-part3-Soundness-21031" href="../Denotational/#plfa_plfa-part3-Denotational-3907" class="Datatype">Value</a> <a id="plfa_plfa-part3-Soundness-21037" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1244" class="Function">]</a> <a id="plfa_plfa-part3-Soundness-21039" href="../Soundness/#plfa_plfa-part3-Soundness-20904" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-21041" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-21043" href="../Soundness/#plfa_plfa-part3-Soundness-20932" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-21045" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-21047" href="../Soundness/#plfa_plfa-part3-Soundness-21027" class="Bound">w</a>  <a id="plfa_plfa-part3-Soundness-21050" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1618" class="Function Operator">×</a>  <a id="plfa_plfa-part3-Soundness-21053" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21054" href="../Soundness/#plfa_plfa-part3-Soundness-20904" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-21056" href="../Denotational/#plfa_plfa-part3-Denotational-7229" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-21059" href="../Soundness/#plfa_plfa-part3-Soundness-21027" class="Bound">w</a><a id="plfa_plfa-part3-Soundness-21060" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-21062" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-21064" href="../Soundness/#plfa_plfa-part3-Soundness-20916" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-21066" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-21068" href="../Soundness/#plfa_plfa-part3-Soundness-20944" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-21070" href="../Soundness/#plfa_plfa-part3-Soundness-20874" class="Function">substitution-reflect</a> <a id="plfa_plfa-part3-Soundness-21091" href="../Soundness/#plfa_plfa-part3-Soundness-21091" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-21093" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-21098" href="../Soundness/#plfa_plfa-part3-Soundness-15487" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21112" href="../Soundness/#plfa_plfa-part3-Soundness-21091" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-21114" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-21119" class="Symbol">...</a>  <a id="plfa_plfa-part3-Soundness-21124" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21126" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21128" href="../Soundness/#plfa_plfa-part3-Soundness-21128" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-21130" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21132" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21134" href="../Soundness/#plfa_plfa-part3-Soundness-21134" class="Bound">δσγ</a> <a id="plfa_plfa-part3-Soundness-21138" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21140" href="../Soundness/#plfa_plfa-part3-Soundness-21140" class="Bound">γNv</a> <a id="plfa_plfa-part3-Soundness-21144" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21146" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21148" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-21153" href="../Soundness/#plfa_plfa-part3-Soundness-20034" class="Function">subst-zero-reflect</a> <a id="plfa_plfa-part3-Soundness-21172" href="../Soundness/#plfa_plfa-part3-Soundness-21134" class="Bound">δσγ</a>
<a id="plfa_plfa-part3-Soundness-21176" class="Symbol">...</a>    <a id="plfa_plfa-part3-Soundness-21183" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21185" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21187" href="../Soundness/#plfa_plfa-part3-Soundness-21187" class="Bound">w</a> <a id="plfa_plfa-part3-Soundness-21189" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21191" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21193" href="../Soundness/#plfa_plfa-part3-Soundness-21193" class="Bound">ineq</a> <a id="plfa_plfa-part3-Soundness-21198" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21200" href="../Soundness/#plfa_plfa-part3-Soundness-21200" class="Bound">δMw</a> <a id="plfa_plfa-part3-Soundness-21204" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21206" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21208" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21210" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21212" href="../Soundness/#plfa_plfa-part3-Soundness-21187" class="Bound">w</a> <a id="plfa_plfa-part3-Soundness-21214" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21216" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21218" href="../Soundness/#plfa_plfa-part3-Soundness-21200" class="Bound">δMw</a> <a id="plfa_plfa-part3-Soundness-21222" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21224" href="../Denotational/#plfa_plfa-part3-Denotational-25039" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-21230" class="Bound">γNv</a> <a id="plfa_plfa-part3-Soundness-21234" href="../Soundness/#plfa_plfa-part3-Soundness-21193" class="Bound">ineq</a> <a id="plfa_plfa-part3-Soundness-21239" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21241" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a>
</pre><p>We apply the <code>subst-reflect</code> lemma to obtain <code>δ ⊢ subst-zero M ↓ γ</code> and <code>γ ⊢ N ↓ v</code> for some <code>γ</code>. Using the former, the <code>subst-zero-reflect</code> lemma gives us <code>γ `⊑ (δ , w)</code> and <code>δ ⊢ M ↓ w</code>. We conclude that <code>δ , w ⊢ N ↓ v</code> by applying the <code>⊑-env</code> lemma, using <code>γ ⊢ N ↓ v</code> and <code>γ `⊑ (δ , w)</code>.</p><h3 id="reduction-reflects-denotations-1">Reduction reflects denotations</h3><p>Now that we have proved that substitution reflects denotations, we can easily prove that reduction does too.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-reflect-beta"></a><a id="plfa_plfa-part3-Soundness-21702" href="../Soundness/#plfa_plfa-part3-Soundness-21702" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-21715" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-21717" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-21719" href="../Soundness/#plfa_plfa-part3-Soundness-21719" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-21720" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21722" href="../Soundness/#plfa_plfa-part3-Soundness-21722" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-21724" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-21726" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-21730" href="../Soundness/#plfa_plfa-part3-Soundness-21719" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-21731" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21733" href="../Soundness/#plfa_plfa-part3-Soundness-21733" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-21735" href="../Soundness/#plfa_plfa-part3-Soundness-21735" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-21736" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21738" href="../Soundness/#plfa_plfa-part3-Soundness-21738" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-21739" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Soundness-21745" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-21747" href="../Soundness/#plfa_plfa-part3-Soundness-21722" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-21749" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-21751" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21752" href="../Soundness/#plfa_plfa-part3-Soundness-21735" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-21754" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">[</a> <a id="plfa_plfa-part3-Soundness-21756" href="../Soundness/#plfa_plfa-part3-Soundness-21733" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-21758" href="../Untyped/#plfa_plfa-part2-Untyped-7291" class="Function Operator">]</a><a id="plfa_plfa-part3-Soundness-21759" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-21761" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-21763" href="../Soundness/#plfa_plfa-part3-Soundness-21738" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-21769" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-21771" href="../Soundness/#plfa_plfa-part3-Soundness-21722" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-21773" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-21775" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21776" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-21778" href="../Soundness/#plfa_plfa-part3-Soundness-21735" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-21779" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-21781" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-21783" href="../Soundness/#plfa_plfa-part3-Soundness-21733" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-21785" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-21787" href="../Soundness/#plfa_plfa-part3-Soundness-21738" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-21789" href="../Soundness/#plfa_plfa-part3-Soundness-21702" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-21802" href="../Soundness/#plfa_plfa-part3-Soundness-21802" class="Bound">d</a>
    <a id="plfa_plfa-part3-Soundness-21808" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-21813" href="../Soundness/#plfa_plfa-part3-Soundness-20874" class="Function">substitution-reflect</a> <a id="plfa_plfa-part3-Soundness-21834" href="../Soundness/#plfa_plfa-part3-Soundness-21802" class="Bound">d</a>
<a id="plfa_plfa-part3-Soundness-21836" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-21840" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21842" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21844" href="../Soundness/#plfa_plfa-part3-Soundness-21844" class="Bound">v₂′</a> <a id="plfa_plfa-part3-Soundness-21848" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21850" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21852" href="../Soundness/#plfa_plfa-part3-Soundness-21852" class="Bound">d₁′</a> <a id="plfa_plfa-part3-Soundness-21856" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21858" href="../Soundness/#plfa_plfa-part3-Soundness-21858" class="Bound">d₂′</a> <a id="plfa_plfa-part3-Soundness-21862" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21864" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21866" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21868" href="../Denotational/#plfa_plfa-part3-Denotational-9279" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-21875" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21876" href="../Denotational/#plfa_plfa-part3-Denotational-9401" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-21884" href="../Soundness/#plfa_plfa-part3-Soundness-21858" class="Bound">d₂′</a><a id="plfa_plfa-part3-Soundness-21887" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-21889" href="../Soundness/#plfa_plfa-part3-Soundness-21852" class="Bound">d₁′</a>


<a id="plfa_plfa-part3-Soundness-reflect"></a><a id="plfa_plfa-part3-Soundness-21895" href="../Soundness/#plfa_plfa-part3-Soundness-21895" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-21903" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-21905" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-21907" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21908" href="../Soundness/#plfa_plfa-part3-Soundness-21908" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-21909" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21911" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21912" href="../Soundness/#plfa_plfa-part3-Soundness-21912" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-21914" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-21916" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-21920" href="../Soundness/#plfa_plfa-part3-Soundness-21908" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-21921" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21923" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21924" href="../Soundness/#plfa_plfa-part3-Soundness-21924" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-21926" href="../Soundness/#plfa_plfa-part3-Soundness-21926" class="Bound">M′</a> <a id="plfa_plfa-part3-Soundness-21929" href="../Soundness/#plfa_plfa-part3-Soundness-21929" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-21931" href="../Soundness/#plfa_plfa-part3-Soundness-21931" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-21932" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-21936" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-21938" href="../Soundness/#plfa_plfa-part3-Soundness-21912" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-21940" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-21942" href="../Soundness/#plfa_plfa-part3-Soundness-21929" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-21944" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-21946" href="../Soundness/#plfa_plfa-part3-Soundness-21931" class="Bound">v</a>  <a id="plfa_plfa-part3-Soundness-21949" class="Symbol">→</a>  <a id="plfa_plfa-part3-Soundness-21952" href="../Soundness/#plfa_plfa-part3-Soundness-21924" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-21954" href="../Untyped/#plfa_plfa-part2-Untyped-9826" class="Datatype Operator">—→</a> <a id="plfa_plfa-part3-Soundness-21957" href="../Soundness/#plfa_plfa-part3-Soundness-21926" class="Bound">M′</a>  <a id="plfa_plfa-part3-Soundness-21961" class="Symbol">→</a>   <a id="plfa_plfa-part3-Soundness-21965" href="../Soundness/#plfa_plfa-part3-Soundness-21926" class="Bound">M′</a> <a id="plfa_plfa-part3-Soundness-21968" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-21970" href="../Soundness/#plfa_plfa-part3-Soundness-21929" class="Bound">N</a>
    <a id="plfa_plfa-part3-Soundness-21976" class="Comment">---------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-22012" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-22014" href="../Soundness/#plfa_plfa-part3-Soundness-21912" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-22016" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-22018" href="../Soundness/#plfa_plfa-part3-Soundness-21924" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-22020" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-22022" href="../Soundness/#plfa_plfa-part3-Soundness-21931" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-22024" href="../Soundness/#plfa_plfa-part3-Soundness-21895" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22032" href="../Denotational/#plfa_plfa-part3-Denotational-9204" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-22036" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22037" href="../Untyped/#plfa_plfa-part2-Untyped-9876" class="InductiveConstructor">ξ₁</a> <a id="plfa_plfa-part3-Soundness-22040" href="../Soundness/#plfa_plfa-part3-Soundness-22040" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22041" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22043" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-22046" href="../Soundness/#plfa_plfa-part3-Soundness-21895" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22054" href="../Denotational/#plfa_plfa-part3-Denotational-9204" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-22058" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22059" href="../Untyped/#plfa_plfa-part2-Untyped-9966" class="InductiveConstructor">ξ₂</a> <a id="plfa_plfa-part3-Soundness-22062" href="../Soundness/#plfa_plfa-part3-Soundness-22062" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22063" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22065" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-22068" href="../Soundness/#plfa_plfa-part3-Soundness-21895" class="Function">reflect</a><a id="plfa_plfa-part3-Soundness-22075" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22076" class="Argument">γ</a> <a id="plfa_plfa-part3-Soundness-22078" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22080" href="../Soundness/#plfa_plfa-part3-Soundness-22080" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-22081" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-22083" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22084" href="../Denotational/#plfa_plfa-part3-Denotational-9204" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Soundness-22087" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22088" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-22090" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22092" href="../Soundness/#plfa_plfa-part3-Soundness-22092" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-22093" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-22096" href="../Untyped/#plfa_plfa-part2-Untyped-10056" class="InductiveConstructor">β</a> <a id="plfa_plfa-part3-Soundness-22098" href="../Soundness/#plfa_plfa-part3-Soundness-22098" class="Bound">mn</a>
    <a id="plfa_plfa-part3-Soundness-22105" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-22110" href="../Denotational/#plfa_plfa-part3-Denotational-9204" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Soundness-22113" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22114" class="Argument">γ</a> <a id="plfa_plfa-part3-Soundness-22116" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22118" href="../Soundness/#plfa_plfa-part3-Soundness-22080" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-22119" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-22121" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-22123" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22125" href="../Soundness/#plfa_plfa-part3-Soundness-22092" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-22126" class="Symbol">}</a>
<a id="plfa_plfa-part3-Soundness-22128" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-22132" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-22134" href="../Soundness/#plfa_plfa-part3-Soundness-22134" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-22137" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-22145" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-22149" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-22152" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22154" href="../Soundness/#plfa_plfa-part3-Soundness-21702" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-22167" href="../Soundness/#plfa_plfa-part3-Soundness-22134" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-22170" href="../Soundness/#plfa_plfa-part3-Soundness-21895" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22178" href="../Denotational/#plfa_plfa-part3-Denotational-9204" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-22182" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22183" href="../Untyped/#plfa_plfa-part2-Untyped-10164" class="InductiveConstructor">ζ</a> <a id="plfa_plfa-part3-Soundness-22185" href="../Soundness/#plfa_plfa-part3-Soundness-22185" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22186" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22188" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-22191" href="../Soundness/#plfa_plfa-part3-Soundness-21895" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22199" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22200" href="../Denotational/#plfa_plfa-part3-Denotational-9279" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-22207" href="../Soundness/#plfa_plfa-part3-Soundness-22207" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22210" href="../Soundness/#plfa_plfa-part3-Soundness-22210" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-22212" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22214" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22215" href="../Untyped/#plfa_plfa-part2-Untyped-9876" class="InductiveConstructor">ξ₁</a> <a id="plfa_plfa-part3-Soundness-22218" href="../Soundness/#plfa_plfa-part3-Soundness-22218" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22219" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22221" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-22226" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22228" href="../Denotational/#plfa_plfa-part3-Denotational-9279" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-22235" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22236" href="../Soundness/#plfa_plfa-part3-Soundness-21895" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22244" href="../Soundness/#plfa_plfa-part3-Soundness-22207" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22247" href="../Soundness/#plfa_plfa-part3-Soundness-22218" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22249" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-22253" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22255" href="../Soundness/#plfa_plfa-part3-Soundness-22210" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-22258" href="../Soundness/#plfa_plfa-part3-Soundness-21895" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22266" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22267" href="../Denotational/#plfa_plfa-part3-Denotational-9279" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-22274" href="../Soundness/#plfa_plfa-part3-Soundness-22274" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22277" href="../Soundness/#plfa_plfa-part3-Soundness-22277" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-22279" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22281" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22282" href="../Untyped/#plfa_plfa-part2-Untyped-9966" class="InductiveConstructor">ξ₂</a> <a id="plfa_plfa-part3-Soundness-22285" href="../Soundness/#plfa_plfa-part3-Soundness-22285" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22286" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22288" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-22293" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22295" href="../Denotational/#plfa_plfa-part3-Denotational-9279" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-22302" href="../Soundness/#plfa_plfa-part3-Soundness-22274" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22305" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22306" href="../Soundness/#plfa_plfa-part3-Soundness-21895" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22314" href="../Soundness/#plfa_plfa-part3-Soundness-22277" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-22317" href="../Soundness/#plfa_plfa-part3-Soundness-22285" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22319" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-22323" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-22325" href="../Soundness/#plfa_plfa-part3-Soundness-21895" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22333" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22334" href="../Denotational/#plfa_plfa-part3-Denotational-9279" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-22341" href="../Soundness/#plfa_plfa-part3-Soundness-22341" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22344" href="../Soundness/#plfa_plfa-part3-Soundness-22344" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-22346" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22348" href="../Untyped/#plfa_plfa-part2-Untyped-10056" class="InductiveConstructor">β</a> <a id="plfa_plfa-part3-Soundness-22350" href="../Soundness/#plfa_plfa-part3-Soundness-22350" class="Bound">mn</a>
    <a id="plfa_plfa-part3-Soundness-22357" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-22362" href="../Denotational/#plfa_plfa-part3-Denotational-9279" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-22369" href="../Soundness/#plfa_plfa-part3-Soundness-22341" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22372" href="../Soundness/#plfa_plfa-part3-Soundness-22344" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-22375" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-22379" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-22381" href="../Soundness/#plfa_plfa-part3-Soundness-22381" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-22384" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-22392" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-22396" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-22399" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22401" href="../Soundness/#plfa_plfa-part3-Soundness-21702" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-22414" href="../Soundness/#plfa_plfa-part3-Soundness-22381" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-22417" href="../Soundness/#plfa_plfa-part3-Soundness-21895" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22425" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22426" href="../Denotational/#plfa_plfa-part3-Denotational-9279" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-22433" href="../Soundness/#plfa_plfa-part3-Soundness-22433" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22436" href="../Soundness/#plfa_plfa-part3-Soundness-22436" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-22438" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22440" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22441" href="../Untyped/#plfa_plfa-part2-Untyped-10164" class="InductiveConstructor">ζ</a> <a id="plfa_plfa-part3-Soundness-22443" href="../Soundness/#plfa_plfa-part3-Soundness-22443" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22444" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22446" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-22449" href="../Soundness/#plfa_plfa-part3-Soundness-21895" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22457" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22458" href="../Denotational/#plfa_plfa-part3-Denotational-9401" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-22466" href="../Soundness/#plfa_plfa-part3-Soundness-22466" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-22467" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22469" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22470" href="../Untyped/#plfa_plfa-part2-Untyped-9876" class="InductiveConstructor">ξ₁</a> <a id="plfa_plfa-part3-Soundness-22473" href="../Soundness/#plfa_plfa-part3-Soundness-22473" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22474" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22476" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-22479" href="../Soundness/#plfa_plfa-part3-Soundness-21895" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22487" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22488" href="../Denotational/#plfa_plfa-part3-Denotational-9401" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-22496" href="../Soundness/#plfa_plfa-part3-Soundness-22496" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-22497" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22499" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22500" href="../Untyped/#plfa_plfa-part2-Untyped-9966" class="InductiveConstructor">ξ₂</a> <a id="plfa_plfa-part3-Soundness-22503" href="../Soundness/#plfa_plfa-part3-Soundness-22503" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22504" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22506" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-22509" href="../Soundness/#plfa_plfa-part3-Soundness-21895" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22517" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22518" href="../Denotational/#plfa_plfa-part3-Denotational-9401" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-22526" href="../Soundness/#plfa_plfa-part3-Soundness-22526" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-22527" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22529" href="../Untyped/#plfa_plfa-part2-Untyped-10056" class="InductiveConstructor">β</a> <a id="plfa_plfa-part3-Soundness-22531" href="../Soundness/#plfa_plfa-part3-Soundness-22531" class="Bound">mn</a>
    <a id="plfa_plfa-part3-Soundness-22538" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-22543" href="../Denotational/#plfa_plfa-part3-Denotational-9401" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-22551" href="../Soundness/#plfa_plfa-part3-Soundness-22526" class="Bound">d</a>
<a id="plfa_plfa-part3-Soundness-22553" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-22557" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-22559" href="../Soundness/#plfa_plfa-part3-Soundness-22559" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-22562" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-22570" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-22574" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-22577" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22579" href="../Soundness/#plfa_plfa-part3-Soundness-21702" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-22592" href="../Soundness/#plfa_plfa-part3-Soundness-22559" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-22595" href="../Soundness/#plfa_plfa-part3-Soundness-21895" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22603" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22604" href="../Denotational/#plfa_plfa-part3-Denotational-9401" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-22612" href="../Soundness/#plfa_plfa-part3-Soundness-22612" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-22613" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22615" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22616" href="../Untyped/#plfa_plfa-part2-Untyped-10164" class="InductiveConstructor">ζ</a> <a id="plfa_plfa-part3-Soundness-22618" href="../Soundness/#plfa_plfa-part3-Soundness-22618" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22619" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22621" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-22626" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22628" href="../Denotational/#plfa_plfa-part3-Denotational-9401" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-22636" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22637" href="../Soundness/#plfa_plfa-part3-Soundness-21895" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22645" href="../Soundness/#plfa_plfa-part3-Soundness-22612" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-22647" href="../Soundness/#plfa_plfa-part3-Soundness-22618" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22649" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-22653" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-22655" href="../Soundness/#plfa_plfa-part3-Soundness-21895" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22663" href="../Denotational/#plfa_plfa-part3-Denotational-9513" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-22671" href="../Soundness/#plfa_plfa-part3-Soundness-22671" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22673" href="../Soundness/#plfa_plfa-part3-Soundness-22673" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-22676" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22678" href="../Denotational/#plfa_plfa-part3-Denotational-9513" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-22686" href="../Soundness/#plfa_plfa-part3-Soundness-21895" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22694" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22695" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-22703" href="../Soundness/#plfa_plfa-part3-Soundness-22703" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22706" href="../Soundness/#plfa_plfa-part3-Soundness-22706" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-22708" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22710" href="../Soundness/#plfa_plfa-part3-Soundness-22710" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22712" href="../Soundness/#plfa_plfa-part3-Soundness-22712" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-22715" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-22723" href="https://agda.github.io/agda-stdlib/v2.1/Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-22727" href="../Soundness/#plfa_plfa-part3-Soundness-22712" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-22730" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-22735" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-22743" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22744" href="../Soundness/#plfa_plfa-part3-Soundness-21895" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22752" href="../Soundness/#plfa_plfa-part3-Soundness-22703" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22755" href="../Soundness/#plfa_plfa-part3-Soundness-22710" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22757" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-22761" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22763" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22764" href="../Soundness/#plfa_plfa-part3-Soundness-21895" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22772" href="../Soundness/#plfa_plfa-part3-Soundness-22706" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-22775" href="../Soundness/#plfa_plfa-part3-Soundness-22710" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22777" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-22781" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-22783" href="../Soundness/#plfa_plfa-part3-Soundness-21895" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22791" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22792" href="../Denotational/#plfa_plfa-part3-Denotational-9695" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-22796" href="../Soundness/#plfa_plfa-part3-Soundness-22796" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-22798" href="../Soundness/#plfa_plfa-part3-Soundness-22798" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-22800" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22802" href="../Soundness/#plfa_plfa-part3-Soundness-22802" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22804" href="../Soundness/#plfa_plfa-part3-Soundness-22804" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-22807" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22809" href="../Denotational/#plfa_plfa-part3-Denotational-9695" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-22813" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22814" href="../Soundness/#plfa_plfa-part3-Soundness-21895" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22822" href="../Soundness/#plfa_plfa-part3-Soundness-22796" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-22824" href="../Soundness/#plfa_plfa-part3-Soundness-22802" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22826" href="../Soundness/#plfa_plfa-part3-Soundness-22804" class="Bound">mn</a><a id="plfa_plfa-part3-Soundness-22828" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22830" href="../Soundness/#plfa_plfa-part3-Soundness-22798" class="Bound">lt</a>
</pre><h2 id="reduction-implies-denotational-equality">Reduction implies denotational equality</h2><p>We have proved that reduction both preserves and reflects denotations. Thus, reduction implies denotational equality.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-reduce-equal"></a><a id="plfa_plfa-part3-Soundness-23009" href="../Soundness/#plfa_plfa-part3-Soundness-23009" class="Function">reduce-equal</a> <a id="plfa_plfa-part3-Soundness-23022" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-23024" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-23026" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-23027" href="../Soundness/#plfa_plfa-part3-Soundness-23027" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-23028" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-23030" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-23031" href="../Soundness/#plfa_plfa-part3-Soundness-23031" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-23033" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-23035" href="../Soundness/#plfa_plfa-part3-Soundness-23027" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-23037" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-23039" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-23040" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-23042" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-23043" href="../Soundness/#plfa_plfa-part3-Soundness-23043" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-23045" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-23047" href="../Soundness/#plfa_plfa-part3-Soundness-23027" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-23049" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-23051" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-23052" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-23056" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-23058" href="../Soundness/#plfa_plfa-part3-Soundness-23031" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-23060" href="../Untyped/#plfa_plfa-part2-Untyped-9826" class="Datatype Operator">—→</a> <a id="plfa_plfa-part3-Soundness-23063" href="../Soundness/#plfa_plfa-part3-Soundness-23043" class="Bound">N</a>
    <a id="plfa_plfa-part3-Soundness-23069" class="Comment">---------</a>
  <a id="plfa_plfa-part3-Soundness-23081" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-23083" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Soundness-23085" href="../Soundness/#plfa_plfa-part3-Soundness-23031" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-23087" href="../Denotational/#plfa_plfa-part3-Denotational-17528" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Soundness-23089" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Soundness-23091" href="../Soundness/#plfa_plfa-part3-Soundness-23043" class="Bound">N</a>
<a id="plfa_plfa-part3-Soundness-23093" href="../Soundness/#plfa_plfa-part3-Soundness-23009" class="Function">reduce-equal</a> <a id="plfa_plfa-part3-Soundness-23106" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-23107" href="../Soundness/#plfa_plfa-part3-Soundness-23107" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-23108" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-23110" href="../Soundness/#plfa_plfa-part3-Soundness-23110" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-23111" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-23113" href="../Soundness/#plfa_plfa-part3-Soundness-23113" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-23114" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-23116" href="../Soundness/#plfa_plfa-part3-Soundness-23116" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-23118" href="../Soundness/#plfa_plfa-part3-Soundness-23118" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-23120" href="../Soundness/#plfa_plfa-part3-Soundness-23120" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-23122" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Soundness-23128" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-23130" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-23133" href="../Soundness/#plfa_plfa-part3-Soundness-23133" class="Bound">m</a> <a id="plfa_plfa-part3-Soundness-23135" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-23137" href="../Soundness/#plfa_plfa-part3-Soundness-6441" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-23146" href="../Soundness/#plfa_plfa-part3-Soundness-23133" class="Bound">m</a> <a id="plfa_plfa-part3-Soundness-23148" href="../Soundness/#plfa_plfa-part3-Soundness-23116" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-23149" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-23151" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-23153" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-23156" href="../Soundness/#plfa_plfa-part3-Soundness-23156" class="Bound">n</a> <a id="plfa_plfa-part3-Soundness-23158" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-23160" href="../Soundness/#plfa_plfa-part3-Soundness-21895" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-23168" href="../Soundness/#plfa_plfa-part3-Soundness-23156" class="Bound">n</a> <a id="plfa_plfa-part3-Soundness-23170" href="../Soundness/#plfa_plfa-part3-Soundness-23116" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-23172" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-23176" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-23178" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a>
</pre><p>We conclude with the <em>soundness property</em>, that multi-step reduction to a lambda abstraction implies denotational equivalence with a lambda abstraction.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-soundness"></a><a id="plfa_plfa-part3-Soundness-23347" href="../Soundness/#plfa_plfa-part3-Soundness-23347" class="Function">soundness</a> <a id="plfa_plfa-part3-Soundness-23357" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-23359" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-23361" href="../Soundness/#plfa_plfa-part3-Soundness-23361" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-23362" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-23364" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-23365" href="../Soundness/#plfa_plfa-part3-Soundness-23365" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-23367" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-23369" href="../Soundness/#plfa_plfa-part3-Soundness-23361" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-23371" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-23373" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-23374" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-23376" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-23377" href="../Soundness/#plfa_plfa-part3-Soundness-23377" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-23379" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-23381" href="../Soundness/#plfa_plfa-part3-Soundness-23361" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-23383" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-23385" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-23387" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-23389" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-23390" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-23394" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-23396" href="../Soundness/#plfa_plfa-part3-Soundness-23365" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-23398" href="../Untyped/#plfa_plfa-part2-Untyped-10958" class="Datatype Operator">—↠</a> <a id="plfa_plfa-part3-Soundness-23401" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-23403" href="../Soundness/#plfa_plfa-part3-Soundness-23377" class="Bound">N</a>
    <a id="plfa_plfa-part3-Soundness-23409" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Soundness-23429" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-23431" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Soundness-23433" href="../Soundness/#plfa_plfa-part3-Soundness-23365" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-23435" href="../Denotational/#plfa_plfa-part3-Denotational-17528" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Soundness-23437" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Soundness-23439" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-23440" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-23442" href="../Soundness/#plfa_plfa-part3-Soundness-23377" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-23443" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-23445" href="../Soundness/#plfa_plfa-part3-Soundness-23347" class="Function">soundness</a> <a id="plfa_plfa-part3-Soundness-23455" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-23456" class="DottedPattern Symbol">.(</a><a id="plfa_plfa-part3-Soundness-23458" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="DottedPattern InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-23460" class="DottedPattern Symbol">_)</a> <a id="plfa_plfa-part3-Soundness-23463" href="../Untyped/#plfa_plfa-part2-Untyped-11004" class="InductiveConstructor Operator">∎</a><a id="plfa_plfa-part3-Soundness-23464" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-23466" href="../Soundness/#plfa_plfa-part3-Soundness-23466" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-23468" href="../Soundness/#plfa_plfa-part3-Soundness-23468" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-23470" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-23472" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-23474" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-23477" href="../Soundness/#plfa_plfa-part3-Soundness-23477" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-23479" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-23481" href="../Soundness/#plfa_plfa-part3-Soundness-23477" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-23482" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-23484" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-23486" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-23489" href="../Soundness/#plfa_plfa-part3-Soundness-23489" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-23491" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-23493" href="../Soundness/#plfa_plfa-part3-Soundness-23489" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-23494" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-23496" href="../Soundness/#plfa_plfa-part3-Soundness-1206" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Soundness-23498" href="../Soundness/#plfa_plfa-part3-Soundness-23347" class="Function">soundness</a> <a id="plfa_plfa-part3-Soundness-23508" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-23509" href="../Soundness/#plfa_plfa-part3-Soundness-23509" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-23510" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-23512" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-23513" href="../Soundness/#plfa_plfa-part3-Soundness-23513" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-23515" href="../Untyped/#plfa_plfa-part2-Untyped-11146" class="InductiveConstructor Operator">—→⟨</a> <a id="plfa_plfa-part3-Soundness-23519" href="../Soundness/#plfa_plfa-part3-Soundness-23519" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-23521" href="../Untyped/#plfa_plfa-part2-Untyped-11146" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-23523" href="../Soundness/#plfa_plfa-part3-Soundness-23523" class="Bound">M—↠N</a><a id="plfa_plfa-part3-Soundness-23527" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-23529" href="../Soundness/#plfa_plfa-part3-Soundness-23529" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-23531" href="../Soundness/#plfa_plfa-part3-Soundness-23531" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-23533" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-23538" class="Keyword">let</a> <a id="plfa_plfa-part3-Soundness-23542" href="../Soundness/#plfa_plfa-part3-Soundness-23542" class="Bound">ih</a> <a id="plfa_plfa-part3-Soundness-23545" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-23547" href="../Soundness/#plfa_plfa-part3-Soundness-23347" class="Function">soundness</a> <a id="plfa_plfa-part3-Soundness-23557" href="../Soundness/#plfa_plfa-part3-Soundness-23523" class="Bound">M—↠N</a> <a id="plfa_plfa-part3-Soundness-23562" class="Keyword">in</a>
   <a id="plfa_plfa-part3-Soundness-23568" class="Keyword">let</a> <a id="plfa_plfa-part3-Soundness-23572" href="../Soundness/#plfa_plfa-part3-Soundness-23572" class="Bound">e</a> <a id="plfa_plfa-part3-Soundness-23574" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-23576" href="../Soundness/#plfa_plfa-part3-Soundness-23009" class="Function">reduce-equal</a> <a id="plfa_plfa-part3-Soundness-23589" href="../Soundness/#plfa_plfa-part3-Soundness-23519" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-23591" class="Keyword">in</a>
   <a id="plfa_plfa-part3-Soundness-23597" href="../Denotational/#plfa_plfa-part3-Denotational-17937" class="Function">≃-trans</a> <a id="plfa_plfa-part3-Soundness-23605" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-23606" href="../Soundness/#plfa_plfa-part3-Soundness-23509" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-23607" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-23609" href="../Soundness/#plfa_plfa-part3-Soundness-23572" class="Bound">e</a> <a id="plfa_plfa-part3-Soundness-23611" href="../Soundness/#plfa_plfa-part3-Soundness-23542" class="Bound">ih</a> <a id="plfa_plfa-part3-Soundness-23614" href="../Soundness/#plfa_plfa-part3-Soundness-23529" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-23616" href="../Soundness/#plfa_plfa-part3-Soundness-23531" class="Bound">v</a>
</pre><h2 id="unicode">Unicode</h2><p>This chapter uses the following unicode:</p><pre><code>≟  U+225F  QUESTIONED EQUAL TO (\?=)</code></pre></div><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Compositional/">Prev</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/part3/Soundness.lagda.md">Source</a></li><li class="separator">•</li><li><a class="pagelink" href="../Adequacy/">Next</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card" aria-label="Site"><data class="u-url" href="../"></data><div class="wrapper"><h2 class="footer-heading">Programming Language Foundations in Agda</h2><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk"><i class="far fa-envelope"></i>  wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><i class="fab fa-github"></i>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works"><i class="far fa-envelope"></i>  me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><i class="fab fa-github"></i>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><i class="fab fa-twitter"></i>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu"><i class="far fa-envelope"></i>  jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><i class="fab fa-github"></i>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><i class="fab fa-twitter"></i>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></div></footer></body></html>