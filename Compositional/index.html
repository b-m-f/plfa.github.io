<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../assets/css/light.css" integrity="sha512-Bc/dwugBgT+/ITMtRScPY8Mo32Ow+ffTdkXjpSzqi4NuijufZ6PK8Er7QAI6wFBv745YoRIKu/ldMHI2iup7Mg==" title="Light" id="stylesheet-light"><link rel="stylesheet" href="../assets/css/dark.css" integrity="sha512-bcS7iunw3oUP9G9pEymcU5lD/IBBtZAKHbLteS8L2IG97X7mbhqnmPXgPRxLyXxgt5fcBRnbvKl9jsgCsROfDw==" title="Dark" id="stylesheet-dark" disabled><title>Programming Language Foundations in Agda – Compositional</title><script src="../assets/js/anchor.js" integrity="sha512-Y5IMGqYQp36NYYdEL6gXISLsHNpx0LxW0NS0twvYBvXI8GH5PZa1g5gm1B5lxg6tlFyUAiOOfgKL/NIn0dtY4w==" id="script-anchor"></script><script src="../assets/js/darkmode.js" integrity="sha512-iUX9HnSphH4WbMv88MYJEFtLfkCtTHrvWyFwjigSm5GkwHv1L31GP5grIGDo7kI2jftuYVvt4xu4qeCn2fKbww==" id="script-darkmode"></script><script src="../assets/js/main.js" integrity="sha512-X7aZg6IUKq1TvTVjSureaMGKZ/ylbAD7kxiU2w42IUgh4lUTWoOsoIWzNvrqkwBJdQ1y2GsS67gtsv39Uuq6ew==" id="script-main"></script></head><body><header class="site-header" aria-label="Site"><div class="wrapper"><a class="site-title" href="../">Programming Language Foundations in Agda</a><nav class="site-nav" aria-label="Site"><input type="checkbox" id="nav-trigger" class="nav-trigger"><label for="nav-trigger"><span class="menu-icon"><svg class="svg-icon grey" viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span></label><div class="trigger"><a class="page-link" href="../">The Book</a> <a class="page-link" href="../Announcements/">Announcements</a> <a class="page-link" href="../GettingStarted/">Getting Started</a> <a class="page-link" href="../Citing/">Citing</a> <a class="page-link" href="https://agda-zh.github.io/PLFA-zh/">中文</a> <a class="page-link" onclick="window.darkmode.toggle()"><i id="darkmode-trigger" class="fas fa-moon"></i> </a><a class="page-link" href="../plfa.epub"><i class="fa fa-book"></i></a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Denotational/">Prev</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/part3/Compositional.lagda.md">Source</a></li><li class="separator">•</li><li><a class="pagelink" href="../Soundness/">Next</a></li><li class="separator">•</li></ul></nav><header class="post-header" aria-label="Chapter"><h1 class="post-title">Compositional: The denotational semantics is compositional</h1></header><div class="post-content"><pre class="Agda"><a id="plfa_plfa-part3-Compositional-119" class="Keyword">module</a> <a id="plfa_plfa-part3-Compositional-126" href="../Compositional/#" class="Module">plfa.part3.Compositional</a> <a id="plfa_plfa-part3-Compositional-151" class="Keyword">where</a>
</pre><h2 id="introduction">Introduction</h2><p>In this chapter we prove that the denotational semantics is compositional, which means we fill in the ellipses in the following equations.</p><pre><code>ℰ (` x) ≃ ...
ℰ (ƛ M) ≃ ... ℰ M ...
ℰ (M · N) ≃ ... ℰ M ... ℰ N ...</code></pre><p>Such equations would imply that the denotational semantics could be instead defined as a recursive function. Indeed, we end this chapter with such a definition and prove that it is equivalent to ℰ.</p><h2 id="imports">Imports</h2><pre class="Agda"><a id="plfa_plfa-part3-Compositional-620" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-625" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-632" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html" class="Module">Data.Product.Base</a> <a id="plfa_plfa-part3-Compositional-650" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-656" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-657" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1618" class="Function Operator">_×_</a><a id="plfa_plfa-part3-Compositional-660" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-662" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Sigma.html#165" class="Record">Σ</a><a id="plfa_plfa-part3-Compositional-663" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-665" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1244" class="Function">Σ-syntax</a><a id="plfa_plfa-part3-Compositional-673" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-675" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#852" class="Function">∃</a><a id="plfa_plfa-part3-Compositional-676" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-678" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1371" class="Function">∃-syntax</a><a id="plfa_plfa-part3-Compositional-686" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-688" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#636" class="Field">proj₁</a><a id="plfa_plfa-part3-Compositional-693" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-695" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#650" class="Field">proj₂</a><a id="plfa_plfa-part3-Compositional-700" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-704" class="Keyword">renaming</a> <a id="plfa_plfa-part3-Compositional-713" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-714" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">_,_</a> <a id="plfa_plfa-part3-Compositional-718" class="Symbol">to</a> <a id="plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="plfa_plfa-part3-Compositional-726" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-728" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-733" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-740" href="https://agda.github.io/agda-stdlib/v2.1/Data.Sum.Base.html" class="Module">Data.Sum.Base</a> <a id="plfa_plfa-part3-Compositional-754" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-760" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-761" href="https://agda.github.io/agda-stdlib/v2.1/Data.Sum.Base.html#625" class="Datatype Operator">_⊎_</a><a id="plfa_plfa-part3-Compositional-764" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-766" href="https://agda.github.io/agda-stdlib/v2.1/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a><a id="plfa_plfa-part3-Compositional-770" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-772" href="https://agda.github.io/agda-stdlib/v2.1/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a><a id="plfa_plfa-part3-Compositional-776" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-778" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-783" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-790" href="https://agda.github.io/agda-stdlib/v2.1/Data.Unit.Base.html" class="Module">Data.Unit.Base</a> <a id="plfa_plfa-part3-Compositional-805" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-811" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-812" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Unit.html#175" class="Record">⊤</a><a id="plfa_plfa-part3-Compositional-813" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-815" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a><a id="plfa_plfa-part3-Compositional-817" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-819" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-824" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-831" href="../Untyped/#" class="Module">plfa.part2.Untyped</a>
  <a id="plfa_plfa-part3-Compositional-852" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-858" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-859" href="../Untyped/#plfa_plfa-part2-Untyped-2750" class="Datatype">Context</a><a id="plfa_plfa-part3-Compositional-866" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-868" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">_,_</a><a id="plfa_plfa-part3-Compositional-871" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-873" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-874" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-876" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">_∋_</a><a id="plfa_plfa-part3-Compositional-879" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-881" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">_⊢_</a><a id="plfa_plfa-part3-Compositional-884" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-886" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`_</a><a id="plfa_plfa-part3-Compositional-888" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-890" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ_</a><a id="plfa_plfa-part3-Compositional-892" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-894" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">_·_</a><a id="plfa_plfa-part3-Compositional-897" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-899" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-904" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-911" href="../Denotational/#" class="Module">plfa.part3.Denotational</a>
  <a id="plfa_plfa-part3-Compositional-937" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-943" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-944" href="../Denotational/#plfa_plfa-part3-Denotational-3907" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-949" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-951" href="../Denotational/#plfa_plfa-part3-Denotational-3939" class="InductiveConstructor Operator">_↦_</a><a id="plfa_plfa-part3-Compositional-954" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-956" href="../Denotational/#plfa_plfa-part3-Denotational-7229" class="Function Operator">_`,_</a><a id="plfa_plfa-part3-Compositional-960" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-962" href="../Denotational/#plfa_plfa-part3-Denotational-3969" class="InductiveConstructor Operator">_⊔_</a><a id="plfa_plfa-part3-Compositional-965" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-967" href="../Denotational/#plfa_plfa-part3-Denotational-3927" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-968" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-970" href="../Denotational/#plfa_plfa-part3-Denotational-4268" class="Datatype Operator">_⊑_</a><a id="plfa_plfa-part3-Compositional-973" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-975" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">_⊢_↓_</a><a id="plfa_plfa-part3-Compositional-980" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-991" href="../Denotational/#plfa_plfa-part3-Denotational-4303" class="InductiveConstructor">⊑-bot</a><a id="plfa_plfa-part3-Compositional-996" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-998" href="../Denotational/#plfa_plfa-part3-Denotational-4629" class="InductiveConstructor">⊑-fun</a><a id="plfa_plfa-part3-Compositional-1003" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1005" href="../Denotational/#plfa_plfa-part3-Denotational-4328" class="InductiveConstructor">⊑-conj-L</a><a id="plfa_plfa-part3-Compositional-1013" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1015" href="../Denotational/#plfa_plfa-part3-Denotational-4412" class="InductiveConstructor">⊑-conj-R1</a><a id="plfa_plfa-part3-Compositional-1024" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1026" href="../Denotational/#plfa_plfa-part3-Denotational-4485" class="InductiveConstructor">⊑-conj-R2</a><a id="plfa_plfa-part3-Compositional-1035" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1046" href="../Denotational/#plfa_plfa-part3-Denotational-4732" class="InductiveConstructor">⊑-dist</a><a id="plfa_plfa-part3-Compositional-1052" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1054" href="../Denotational/#plfa_plfa-part3-Denotational-5402" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Compositional-1060" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1062" href="../Denotational/#plfa_plfa-part3-Denotational-4558" class="InductiveConstructor">⊑-trans</a><a id="plfa_plfa-part3-Compositional-1069" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1071" href="../Denotational/#plfa_plfa-part3-Denotational-6045" class="Function">⊔↦⊔-dist</a><a id="plfa_plfa-part3-Compositional-1079" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1090" href="../Denotational/#plfa_plfa-part3-Denotational-9204" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Compositional-1093" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1095" href="../Denotational/#plfa_plfa-part3-Denotational-9401" class="InductiveConstructor">↦-intro</a><a id="plfa_plfa-part3-Compositional-1102" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1104" href="../Denotational/#plfa_plfa-part3-Denotational-9279" class="InductiveConstructor">↦-elim</a><a id="plfa_plfa-part3-Compositional-1110" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1112" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊔-intro</a><a id="plfa_plfa-part3-Compositional-1119" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1121" href="../Denotational/#plfa_plfa-part3-Denotational-9513" class="InductiveConstructor">⊥-intro</a><a id="plfa_plfa-part3-Compositional-1128" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1130" href="../Denotational/#plfa_plfa-part3-Denotational-9695" class="InductiveConstructor">sub</a><a id="plfa_plfa-part3-Compositional-1133" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1144" href="../Denotational/#plfa_plfa-part3-Denotational-25488" class="Function">up-env</a><a id="plfa_plfa-part3-Compositional-1150" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1152" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a><a id="plfa_plfa-part3-Compositional-1153" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1155" href="../Denotational/#plfa_plfa-part3-Denotational-17528" class="Function Operator">_≃_</a><a id="plfa_plfa-part3-Compositional-1158" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1160" href="../Denotational/#plfa_plfa-part3-Denotational-17804" class="Function">≃-sym</a><a id="plfa_plfa-part3-Compositional-1165" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1167" href="../Denotational/#plfa_plfa-part3-Denotational-17125" class="Function">Denotation</a><a id="plfa_plfa-part3-Compositional-1177" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1179" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a><a id="plfa_plfa-part3-Compositional-1182" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-1184" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-1189" href="../Denotational/#plfa_plfa-part3-Denotational-18381" class="Module">plfa.part3.Denotational.≃-Reasoning</a>
</pre><h2 id="equation-for-lambda-abstraction">Equation for lambda abstraction</h2><p>Regarding the first equation</p><pre><code>ℰ (ƛ M) ≃ ... ℰ M ...</code></pre><p>we need to define a function that maps a <code>Denotation (Γ , ★)</code> to a <code>Denotation Γ</code>. This function, let us name it <code>ℱ</code>, should mimic the non-recursive part of the semantics when applied to a lambda term. In particular, we need to consider the rules <code>↦-intro</code>, <code>⊥-intro</code>, and <code>⊔-intro</code>. So <code>ℱ</code> has three parameters, the denotation <code>D</code> of the subterm <code>M</code>, an environment <code>γ</code>, and a value <code>v</code>. If we define <code>ℱ</code> by recursion on the value <code>v</code>, then it matches up nicely with the three rules <code>↦-intro</code>, <code>⊥-intro</code>, and <code>⊔-intro</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℱ"></a><a id="plfa_plfa-part3-Compositional-1855" href="../Compositional/#plfa_plfa-part3-Compositional-1855" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-1857" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-1859" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-1861" href="../Compositional/#plfa_plfa-part3-Compositional-1861" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-1862" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-1864" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-1866" href="../Denotational/#plfa_plfa-part3-Denotational-17125" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-1877" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-1878" href="../Compositional/#plfa_plfa-part3-Compositional-1861" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-1880" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-1882" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-1883" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-1885" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-1887" href="../Denotational/#plfa_plfa-part3-Denotational-17125" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-1898" href="../Compositional/#plfa_plfa-part3-Compositional-1861" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Compositional-1900" href="../Compositional/#plfa_plfa-part3-Compositional-1855" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-1902" href="../Compositional/#plfa_plfa-part3-Compositional-1902" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-1904" href="../Compositional/#plfa_plfa-part3-Compositional-1904" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-1906" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-1907" href="../Compositional/#plfa_plfa-part3-Compositional-1907" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-1909" href="../Denotational/#plfa_plfa-part3-Denotational-3939" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-1911" href="../Compositional/#plfa_plfa-part3-Compositional-1911" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-1912" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-1914" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-1916" href="../Compositional/#plfa_plfa-part3-Compositional-1902" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-1918" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-1919" href="../Compositional/#plfa_plfa-part3-Compositional-1904" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-1921" href="../Denotational/#plfa_plfa-part3-Denotational-7229" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Compositional-1924" href="../Compositional/#plfa_plfa-part3-Compositional-1907" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-1925" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-1927" href="../Compositional/#plfa_plfa-part3-Compositional-1911" class="Bound">w</a>
<a id="plfa_plfa-part3-Compositional-1929" href="../Compositional/#plfa_plfa-part3-Compositional-1855" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-1931" href="../Compositional/#plfa_plfa-part3-Compositional-1931" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-1933" href="../Compositional/#plfa_plfa-part3-Compositional-1933" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-1935" href="../Denotational/#plfa_plfa-part3-Denotational-3927" class="InductiveConstructor">⊥</a> <a id="plfa_plfa-part3-Compositional-1937" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-1939" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Unit.html#175" class="Record">⊤</a>
<a id="plfa_plfa-part3-Compositional-1941" href="../Compositional/#plfa_plfa-part3-Compositional-1855" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-1943" href="../Compositional/#plfa_plfa-part3-Compositional-1943" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-1945" href="../Compositional/#plfa_plfa-part3-Compositional-1945" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-1947" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-1948" href="../Compositional/#plfa_plfa-part3-Compositional-1948" class="Bound">u</a> <a id="plfa_plfa-part3-Compositional-1950" href="../Denotational/#plfa_plfa-part3-Denotational-3969" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-1952" href="../Compositional/#plfa_plfa-part3-Compositional-1952" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-1953" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-1955" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-1957" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-1958" href="../Compositional/#plfa_plfa-part3-Compositional-1855" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-1960" href="../Compositional/#plfa_plfa-part3-Compositional-1943" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-1962" href="../Compositional/#plfa_plfa-part3-Compositional-1945" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-1964" href="../Compositional/#plfa_plfa-part3-Compositional-1948" class="Bound">u</a><a id="plfa_plfa-part3-Compositional-1965" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-1967" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="plfa_plfa-part3-Compositional-1969" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-1970" href="../Compositional/#plfa_plfa-part3-Compositional-1855" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-1972" href="../Compositional/#plfa_plfa-part3-Compositional-1943" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-1974" href="../Compositional/#plfa_plfa-part3-Compositional-1945" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-1976" href="../Compositional/#plfa_plfa-part3-Compositional-1952" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-1977" class="Symbol">)</a>
</pre><p>If one squints hard enough, the <code>ℱ</code> function starts to look like the <code>curry</code> operation familiar to functional programmers. It turns a function that expects a tuple of length <code>n + 1</code> (the environment <code>Γ , ★</code>) into a function that expects a tuple of length <code>n</code> and returns a function of one parameter.</p><p>Using this <code>ℱ</code>, we hope to prove that</p><pre><code>ℰ (ƛ N) ≃ ℱ (ℰ N)</code></pre><p>The function <code>ℱ</code> is preserved when going from a larger value <code>v</code> to a smaller value <code>u</code>. The proof is a straightforward induction on the derivation of <code>u ⊑ v</code>, using the <code>up-env</code> lemma in the case for the <code>⊑-fun</code> rule.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-sub-ℱ"></a><a id="plfa_plfa-part3-Compositional-2575" href="../Compositional/#plfa_plfa-part3-Compositional-2575" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2581" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-2583" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-2585" href="../Compositional/#plfa_plfa-part3-Compositional-2585" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-2586" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-2588" href="../Compositional/#plfa_plfa-part3-Compositional-2588" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-2590" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-2592" href="../Compositional/#plfa_plfa-part3-Compositional-2585" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-2594" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-2596" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-2598" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-2600" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-2601" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-2603" href="../Compositional/#plfa_plfa-part3-Compositional-2603" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2605" href="../Compositional/#plfa_plfa-part3-Compositional-2605" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-2607" href="../Compositional/#plfa_plfa-part3-Compositional-2607" class="Bound">u</a><a id="plfa_plfa-part3-Compositional-2608" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-2612" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-2614" href="../Compositional/#plfa_plfa-part3-Compositional-1855" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2616" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2617" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-2619" href="../Compositional/#plfa_plfa-part3-Compositional-2588" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-2620" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2622" href="../Compositional/#plfa_plfa-part3-Compositional-2603" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2624" href="../Compositional/#plfa_plfa-part3-Compositional-2605" class="Bound">v</a>
  <a id="plfa_plfa-part3-Compositional-2628" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-2630" href="../Compositional/#plfa_plfa-part3-Compositional-2607" class="Bound">u</a> <a id="plfa_plfa-part3-Compositional-2632" href="../Denotational/#plfa_plfa-part3-Denotational-4268" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-2634" href="../Compositional/#plfa_plfa-part3-Compositional-2605" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-2640" class="Comment">------------</a>
  <a id="plfa_plfa-part3-Compositional-2655" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-2657" href="../Compositional/#plfa_plfa-part3-Compositional-1855" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2659" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2660" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-2662" href="../Compositional/#plfa_plfa-part3-Compositional-2588" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-2663" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2665" href="../Compositional/#plfa_plfa-part3-Compositional-2603" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2667" href="../Compositional/#plfa_plfa-part3-Compositional-2607" class="Bound">u</a>
<a id="plfa_plfa-part3-Compositional-2669" href="../Compositional/#plfa_plfa-part3-Compositional-2575" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2675" href="../Compositional/#plfa_plfa-part3-Compositional-2675" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2677" href="../Denotational/#plfa_plfa-part3-Denotational-4303" class="InductiveConstructor">⊑-bot</a> <a id="plfa_plfa-part3-Compositional-2683" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2685" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a>
<a id="plfa_plfa-part3-Compositional-2688" href="../Compositional/#plfa_plfa-part3-Compositional-2575" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2694" href="../Compositional/#plfa_plfa-part3-Compositional-2694" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2696" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2697" href="../Denotational/#plfa_plfa-part3-Denotational-4629" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-2703" href="../Compositional/#plfa_plfa-part3-Compositional-2703" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-2706" href="../Compositional/#plfa_plfa-part3-Compositional-2706" class="Bound">lt′</a><a id="plfa_plfa-part3-Compositional-2709" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2711" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2713" href="../Denotational/#plfa_plfa-part3-Denotational-9695" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-2717" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2718" href="../Denotational/#plfa_plfa-part3-Denotational-25488" class="Function">up-env</a> <a id="plfa_plfa-part3-Compositional-2725" href="../Compositional/#plfa_plfa-part3-Compositional-2694" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2727" href="../Compositional/#plfa_plfa-part3-Compositional-2703" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-2729" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2731" href="../Compositional/#plfa_plfa-part3-Compositional-2706" class="Bound">lt′</a>
<a id="plfa_plfa-part3-Compositional-2735" href="../Compositional/#plfa_plfa-part3-Compositional-2575" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2741" href="../Compositional/#plfa_plfa-part3-Compositional-2741" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2743" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2744" href="../Denotational/#plfa_plfa-part3-Denotational-4328" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-2753" href="../Compositional/#plfa_plfa-part3-Compositional-2753" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-2756" href="../Compositional/#plfa_plfa-part3-Compositional-2756" class="Bound">lt₁</a><a id="plfa_plfa-part3-Compositional-2759" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2761" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2763" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-2765" href="../Compositional/#plfa_plfa-part3-Compositional-2575" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2771" href="../Compositional/#plfa_plfa-part3-Compositional-2741" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2773" href="../Compositional/#plfa_plfa-part3-Compositional-2753" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-2776" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-2778" href="../Compositional/#plfa_plfa-part3-Compositional-2575" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2784" href="../Compositional/#plfa_plfa-part3-Compositional-2741" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2786" href="../Compositional/#plfa_plfa-part3-Compositional-2756" class="Bound">lt₁</a> <a id="plfa_plfa-part3-Compositional-2790" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-2792" href="../Compositional/#plfa_plfa-part3-Compositional-2575" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2798" href="../Compositional/#plfa_plfa-part3-Compositional-2798" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2800" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2801" href="../Denotational/#plfa_plfa-part3-Denotational-4412" class="InductiveConstructor">⊑-conj-R1</a> <a id="plfa_plfa-part3-Compositional-2811" href="../Compositional/#plfa_plfa-part3-Compositional-2811" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-2813" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2815" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2817" href="../Compositional/#plfa_plfa-part3-Compositional-2575" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2823" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2824" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#636" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-2830" href="../Compositional/#plfa_plfa-part3-Compositional-2798" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-2831" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2833" href="../Compositional/#plfa_plfa-part3-Compositional-2811" class="Bound">lt</a>
<a id="plfa_plfa-part3-Compositional-2836" href="../Compositional/#plfa_plfa-part3-Compositional-2575" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2842" href="../Compositional/#plfa_plfa-part3-Compositional-2842" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2844" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2845" href="../Denotational/#plfa_plfa-part3-Denotational-4485" class="InductiveConstructor">⊑-conj-R2</a> <a id="plfa_plfa-part3-Compositional-2855" href="../Compositional/#plfa_plfa-part3-Compositional-2855" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-2857" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2859" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2861" href="../Compositional/#plfa_plfa-part3-Compositional-2575" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2867" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2868" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#650" class="Field">proj₂</a> <a id="plfa_plfa-part3-Compositional-2874" href="../Compositional/#plfa_plfa-part3-Compositional-2842" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-2875" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2877" href="../Compositional/#plfa_plfa-part3-Compositional-2855" class="Bound">lt</a>
<a id="plfa_plfa-part3-Compositional-2880" href="../Compositional/#plfa_plfa-part3-Compositional-2575" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2886" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-2887" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-2889" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2891" href="../Compositional/#plfa_plfa-part3-Compositional-2891" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-2894" href="../Denotational/#plfa_plfa-part3-Denotational-3939" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-2896" href="../Compositional/#plfa_plfa-part3-Compositional-2896" class="Bound">v₂</a> <a id="plfa_plfa-part3-Compositional-2899" href="../Denotational/#plfa_plfa-part3-Denotational-3969" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-2901" href="../Compositional/#plfa_plfa-part3-Compositional-2891" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-2904" href="../Denotational/#plfa_plfa-part3-Denotational-3939" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-2906" href="../Compositional/#plfa_plfa-part3-Compositional-2906" class="Bound">v₃</a><a id="plfa_plfa-part3-Compositional-2908" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-2910" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-2911" href="../Compositional/#plfa_plfa-part3-Compositional-2891" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-2914" href="../Denotational/#plfa_plfa-part3-Denotational-3939" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-2916" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2917" href="../Compositional/#plfa_plfa-part3-Compositional-2896" class="Bound">v₂</a> <a id="plfa_plfa-part3-Compositional-2920" href="../Denotational/#plfa_plfa-part3-Denotational-3969" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-2922" href="../Compositional/#plfa_plfa-part3-Compositional-2906" class="Bound">v₃</a><a id="plfa_plfa-part3-Compositional-2924" class="Symbol">)}</a> <a id="plfa_plfa-part3-Compositional-2927" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-2929" href="../Compositional/#plfa_plfa-part3-Compositional-2929" class="Bound">N2</a> <a id="plfa_plfa-part3-Compositional-2932" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-2934" href="../Compositional/#plfa_plfa-part3-Compositional-2934" class="Bound">N3</a> <a id="plfa_plfa-part3-Compositional-2937" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-2939" href="../Denotational/#plfa_plfa-part3-Denotational-4732" class="InductiveConstructor">⊑-dist</a> <a id="plfa_plfa-part3-Compositional-2946" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Compositional-2951" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-2959" href="../Compositional/#plfa_plfa-part3-Compositional-2929" class="Bound">N2</a> <a id="plfa_plfa-part3-Compositional-2962" href="../Compositional/#plfa_plfa-part3-Compositional-2934" class="Bound">N3</a>
<a id="plfa_plfa-part3-Compositional-2965" href="../Compositional/#plfa_plfa-part3-Compositional-2575" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2971" href="../Compositional/#plfa_plfa-part3-Compositional-2971" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2973" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2974" href="../Denotational/#plfa_plfa-part3-Denotational-4558" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-2982" href="../Compositional/#plfa_plfa-part3-Compositional-2982" class="Bound">x₁</a> <a id="plfa_plfa-part3-Compositional-2985" href="../Compositional/#plfa_plfa-part3-Compositional-2985" class="Bound">x₂</a><a id="plfa_plfa-part3-Compositional-2987" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2989" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2991" href="../Compositional/#plfa_plfa-part3-Compositional-2575" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2997" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2998" href="../Compositional/#plfa_plfa-part3-Compositional-2575" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3004" href="../Compositional/#plfa_plfa-part3-Compositional-2971" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3006" href="../Compositional/#plfa_plfa-part3-Compositional-2985" class="Bound">x₂</a><a id="plfa_plfa-part3-Compositional-3008" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3010" href="../Compositional/#plfa_plfa-part3-Compositional-2982" class="Bound">x₁</a>
</pre><p>With this subsumption property in hand, we can prove the forward direction of the semantic equation for lambda. The proof is by induction on the semantics, using <code>sub-ℱ</code> in the case for the <code>sub</code> rule.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℰƛ→ℱℰ"></a><a id="plfa_plfa-part3-Compositional-3230" href="../Compositional/#plfa_plfa-part3-Compositional-3230" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-3236" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3238" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-3240" href="../Compositional/#plfa_plfa-part3-Compositional-3240" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-3241" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3243" href="../Compositional/#plfa_plfa-part3-Compositional-3243" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3245" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3247" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-3251" href="../Compositional/#plfa_plfa-part3-Compositional-3240" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-3252" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3254" href="../Compositional/#plfa_plfa-part3-Compositional-3254" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-3256" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3258" href="../Compositional/#plfa_plfa-part3-Compositional-3240" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-3260" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-3262" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-3264" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-3266" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-3267" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3269" href="../Compositional/#plfa_plfa-part3-Compositional-3269" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-3271" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3273" href="../Denotational/#plfa_plfa-part3-Denotational-3907" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-3278" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-3282" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-3284" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-3286" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3287" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-3289" href="../Compositional/#plfa_plfa-part3-Compositional-3254" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-3290" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3292" href="../Compositional/#plfa_plfa-part3-Compositional-3243" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3294" href="../Compositional/#plfa_plfa-part3-Compositional-3269" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-3300" class="Comment">------------</a>
  <a id="plfa_plfa-part3-Compositional-3315" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-3317" href="../Compositional/#plfa_plfa-part3-Compositional-1855" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-3319" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3320" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-3322" href="../Compositional/#plfa_plfa-part3-Compositional-3254" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-3323" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3325" href="../Compositional/#plfa_plfa-part3-Compositional-3243" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3327" href="../Compositional/#plfa_plfa-part3-Compositional-3269" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-3329" href="../Compositional/#plfa_plfa-part3-Compositional-3230" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-3335" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3336" href="../Denotational/#plfa_plfa-part3-Denotational-9401" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Compositional-3344" href="../Compositional/#plfa_plfa-part3-Compositional-3344" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-3345" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3347" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3349" href="../Compositional/#plfa_plfa-part3-Compositional-3344" class="Bound">d</a>
<a id="plfa_plfa-part3-Compositional-3351" href="../Compositional/#plfa_plfa-part3-Compositional-3230" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-3357" href="../Denotational/#plfa_plfa-part3-Denotational-9513" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-3365" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3367" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a>
<a id="plfa_plfa-part3-Compositional-3370" href="../Compositional/#plfa_plfa-part3-Compositional-3230" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-3376" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3377" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-3385" href="../Compositional/#plfa_plfa-part3-Compositional-3385" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-3388" href="../Compositional/#plfa_plfa-part3-Compositional-3388" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-3390" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3392" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3394" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-3396" href="../Compositional/#plfa_plfa-part3-Compositional-3230" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-3402" href="../Compositional/#plfa_plfa-part3-Compositional-3385" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-3405" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-3407" href="../Compositional/#plfa_plfa-part3-Compositional-3230" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-3413" href="../Compositional/#plfa_plfa-part3-Compositional-3388" class="Bound">d₂</a> <a id="plfa_plfa-part3-Compositional-3416" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-3418" href="../Compositional/#plfa_plfa-part3-Compositional-3230" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-3424" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3425" href="../Denotational/#plfa_plfa-part3-Denotational-9695" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-3429" href="../Compositional/#plfa_plfa-part3-Compositional-3429" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3431" href="../Compositional/#plfa_plfa-part3-Compositional-3431" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-3433" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3435" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3437" href="../Compositional/#plfa_plfa-part3-Compositional-2575" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3443" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3444" href="../Compositional/#plfa_plfa-part3-Compositional-3230" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-3450" href="../Compositional/#plfa_plfa-part3-Compositional-3429" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-3451" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3453" href="../Compositional/#plfa_plfa-part3-Compositional-3431" class="Bound">lt</a>
</pre><p>The “inversion lemma” for lambda abstraction is a special case of the above. The inversion lemma is useful in proving that denotations are preserved by reduction.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-lambda-inversion"></a><a id="plfa_plfa-part3-Compositional-3633" href="../Compositional/#plfa_plfa-part3-Compositional-3633" class="Function">lambda-inversion</a> <a id="plfa_plfa-part3-Compositional-3650" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3652" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-3654" href="../Compositional/#plfa_plfa-part3-Compositional-3654" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-3655" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3657" href="../Compositional/#plfa_plfa-part3-Compositional-3657" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3659" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3661" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-3665" href="../Compositional/#plfa_plfa-part3-Compositional-3654" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-3666" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3668" href="../Compositional/#plfa_plfa-part3-Compositional-3668" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-3670" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3672" href="../Compositional/#plfa_plfa-part3-Compositional-3654" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-3674" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-3676" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-3678" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-3680" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-3681" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3683" href="../Compositional/#plfa_plfa-part3-Compositional-3683" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-3686" href="../Compositional/#plfa_plfa-part3-Compositional-3686" class="Bound">v₂</a> <a id="plfa_plfa-part3-Compositional-3689" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3691" href="../Denotational/#plfa_plfa-part3-Denotational-3907" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-3696" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-3700" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-3702" href="../Compositional/#plfa_plfa-part3-Compositional-3657" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3704" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-3706" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-3708" href="../Compositional/#plfa_plfa-part3-Compositional-3668" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-3710" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Compositional-3712" href="../Compositional/#plfa_plfa-part3-Compositional-3683" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-3715" href="../Denotational/#plfa_plfa-part3-Denotational-3939" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-3717" href="../Compositional/#plfa_plfa-part3-Compositional-3686" class="Bound">v₂</a>
    <a id="plfa_plfa-part3-Compositional-3724" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Compositional-3744" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-3746" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3747" href="../Compositional/#plfa_plfa-part3-Compositional-3657" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3749" href="../Denotational/#plfa_plfa-part3-Denotational-7229" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Compositional-3752" href="../Compositional/#plfa_plfa-part3-Compositional-3683" class="Bound">v₁</a><a id="plfa_plfa-part3-Compositional-3754" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3756" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-3758" href="../Compositional/#plfa_plfa-part3-Compositional-3668" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-3760" href="../Denotational/#plfa_plfa-part3-Denotational-9150" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Compositional-3762" href="../Compositional/#plfa_plfa-part3-Compositional-3686" class="Bound">v₂</a>
<a id="plfa_plfa-part3-Compositional-3765" href="../Compositional/#plfa_plfa-part3-Compositional-3633" class="Function">lambda-inversion</a><a id="plfa_plfa-part3-Compositional-3781" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-3782" class="Argument">v₁</a> <a id="plfa_plfa-part3-Compositional-3785" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3787" href="../Compositional/#plfa_plfa-part3-Compositional-3787" class="Bound">v₁</a><a id="plfa_plfa-part3-Compositional-3789" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3791" class="Argument">v₂</a> <a id="plfa_plfa-part3-Compositional-3794" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3796" href="../Compositional/#plfa_plfa-part3-Compositional-3796" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-3798" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-3800" href="../Compositional/#plfa_plfa-part3-Compositional-3800" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3802" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3804" href="../Compositional/#plfa_plfa-part3-Compositional-3230" class="Function">ℰƛ→ℱℰ</a><a id="plfa_plfa-part3-Compositional-3809" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-3810" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-3812" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3814" href="../Compositional/#plfa_plfa-part3-Compositional-3787" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-3817" href="../Denotational/#plfa_plfa-part3-Denotational-3939" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-3819" href="../Compositional/#plfa_plfa-part3-Compositional-3796" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-3821" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-3823" href="../Compositional/#plfa_plfa-part3-Compositional-3800" class="Bound">d</a>
</pre><p>The backward direction of the semantic equation for lambda is even easier to prove than the forward direction. We proceed by induction on the value v.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℱℰ→ℰƛ"></a><a id="plfa_plfa-part3-Compositional-3990" href="../Compositional/#plfa_plfa-part3-Compositional-3990" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-3996" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3998" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-4000" href="../Compositional/#plfa_plfa-part3-Compositional-4000" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4001" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4003" href="../Compositional/#plfa_plfa-part3-Compositional-4003" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4005" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4007" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-4011" href="../Compositional/#plfa_plfa-part3-Compositional-4000" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4012" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4014" href="../Compositional/#plfa_plfa-part3-Compositional-4014" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4016" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4018" href="../Compositional/#plfa_plfa-part3-Compositional-4000" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-4020" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4022" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-4024" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4026" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-4027" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4029" href="../Compositional/#plfa_plfa-part3-Compositional-4029" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-4031" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4033" href="../Denotational/#plfa_plfa-part3-Denotational-3907" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-4038" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-4042" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4044" href="../Compositional/#plfa_plfa-part3-Compositional-1855" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-4046" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4047" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4049" href="../Compositional/#plfa_plfa-part3-Compositional-4014" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4050" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4052" href="../Compositional/#plfa_plfa-part3-Compositional-4003" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4054" href="../Compositional/#plfa_plfa-part3-Compositional-4029" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-4060" class="Comment">------------</a>
  <a id="plfa_plfa-part3-Compositional-4075" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4077" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4079" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4080" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-4082" href="../Compositional/#plfa_plfa-part3-Compositional-4014" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4083" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4085" href="../Compositional/#plfa_plfa-part3-Compositional-4003" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4087" href="../Compositional/#plfa_plfa-part3-Compositional-4029" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-4089" href="../Compositional/#plfa_plfa-part3-Compositional-3990" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4095" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-4096" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-4098" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4100" href="../Denotational/#plfa_plfa-part3-Denotational-3927" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-4101" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-4103" href="../Compositional/#plfa_plfa-part3-Compositional-4103" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-4105" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4107" href="../Denotational/#plfa_plfa-part3-Denotational-9513" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Compositional-4115" href="../Compositional/#plfa_plfa-part3-Compositional-3990" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4121" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-4122" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-4124" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4126" href="../Compositional/#plfa_plfa-part3-Compositional-4126" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-4129" href="../Denotational/#plfa_plfa-part3-Denotational-3939" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-4131" href="../Compositional/#plfa_plfa-part3-Compositional-4131" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-4133" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-4135" href="../Compositional/#plfa_plfa-part3-Compositional-4135" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-4137" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4139" href="../Denotational/#plfa_plfa-part3-Denotational-9401" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Compositional-4147" href="../Compositional/#plfa_plfa-part3-Compositional-4135" class="Bound">d</a>
<a id="plfa_plfa-part3-Compositional-4149" href="../Compositional/#plfa_plfa-part3-Compositional-3990" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4155" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-4156" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-4158" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4160" href="../Compositional/#plfa_plfa-part3-Compositional-4160" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-4163" href="../Denotational/#plfa_plfa-part3-Denotational-3969" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-4165" href="../Compositional/#plfa_plfa-part3-Compositional-4165" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-4167" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-4169" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-4171" href="../Compositional/#plfa_plfa-part3-Compositional-4171" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-4174" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4176" href="../Compositional/#plfa_plfa-part3-Compositional-4176" class="Bound">d2</a> <a id="plfa_plfa-part3-Compositional-4179" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-4181" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4183" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-4191" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4192" href="../Compositional/#plfa_plfa-part3-Compositional-3990" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4198" href="../Compositional/#plfa_plfa-part3-Compositional-4171" class="Bound">d1</a><a id="plfa_plfa-part3-Compositional-4200" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4202" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4203" href="../Compositional/#plfa_plfa-part3-Compositional-3990" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4209" href="../Compositional/#plfa_plfa-part3-Compositional-4176" class="Bound">d2</a><a id="plfa_plfa-part3-Compositional-4211" class="Symbol">)</a>
</pre><p>So indeed, the denotational semantics is compositional with respect to lambda abstraction, as witnessed by the function <code>ℱ</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-lam-equiv"></a><a id="plfa_plfa-part3-Compositional-4352" href="../Compositional/#plfa_plfa-part3-Compositional-4352" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-4362" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4364" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-4366" href="../Compositional/#plfa_plfa-part3-Compositional-4366" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4367" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4369" href="../Compositional/#plfa_plfa-part3-Compositional-4369" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4371" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4373" href="../Compositional/#plfa_plfa-part3-Compositional-4366" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-4375" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4377" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-4379" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4381" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-4382" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-4386" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4388" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4390" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4391" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-4393" href="../Compositional/#plfa_plfa-part3-Compositional-4369" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4394" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4396" href="../Denotational/#plfa_plfa-part3-Denotational-17528" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-4398" href="../Compositional/#plfa_plfa-part3-Compositional-1855" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-4400" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4401" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4403" href="../Compositional/#plfa_plfa-part3-Compositional-4369" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4404" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-4406" href="../Compositional/#plfa_plfa-part3-Compositional-4352" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-4416" href="../Compositional/#plfa_plfa-part3-Compositional-4416" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4418" href="../Compositional/#plfa_plfa-part3-Compositional-4418" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-4420" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4422" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-4424" href="../Compositional/#plfa_plfa-part3-Compositional-3230" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4430" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4432" href="../Compositional/#plfa_plfa-part3-Compositional-3990" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4438" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a>
</pre><h2 id="equation-for-function-application">Equation for function application</h2><p>Next we fill in the ellipses for the equation concerning function application.</p><pre><code>ℰ (M · N) ≃ ... ℰ M ... ℰ N ...</code></pre><p>For this we need to define a function that takes two denotations, both in context <code>Γ</code>, and produces another one in context <code>Γ</code>. This function, let us name it <code>●</code>, needs to mimic the non-recursive aspects of the semantics of an application <code>L · M</code>. We cannot proceed as easily as for <code>ℱ</code> and define the function by recursion on value <code>v</code> because, for example, the rule <code>↦-elim</code> applies to any value. Instead we shall define <code>●</code> in a way that directly deals with the <code>↦-elim</code> and <code>⊥-intro</code> rules but ignores <code>⊔-intro</code>. This makes the forward direction of the proof more difficult, and the case for <code>⊔-intro</code> demonstrates why the <code>⊑-dist</code> rule is important.</p><p>So we define the application of <code>D₁</code> to <code>D₂</code>, written <code>D₁ ● D₂</code>, to include any value <code>w</code> equivalent to <code>⊥</code>, for the <code>⊥-intro</code> rule, and to include any value <code>w</code> that is the output of an entry <code>v ↦ w</code> in <code>D₁</code>, provided the input <code>v</code> is in <code>D₂</code>, for the <code>↦-elim</code> rule.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-5535" class="Keyword">infixl</a> <a id="plfa_plfa-part3-Compositional-5542" class="Number">7</a> <a id="plfa_plfa-part3-Compositional-5544" href="../Compositional/#plfa_plfa-part3-Compositional-5549" class="Function Operator">_●_</a>

<a id="plfa_plfa-part3-Compositional-_●_"></a><a id="plfa_plfa-part3-Compositional-5549" href="../Compositional/#plfa_plfa-part3-Compositional-5549" class="Function Operator">_●_</a> <a id="plfa_plfa-part3-Compositional-5553" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-5555" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-5557" href="../Compositional/#plfa_plfa-part3-Compositional-5557" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-5558" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-5560" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-5562" href="../Denotational/#plfa_plfa-part3-Denotational-17125" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-5573" href="../Compositional/#plfa_plfa-part3-Compositional-5557" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-5575" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-5577" href="../Denotational/#plfa_plfa-part3-Denotational-17125" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-5588" href="../Compositional/#plfa_plfa-part3-Compositional-5557" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-5590" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-5592" href="../Denotational/#plfa_plfa-part3-Denotational-17125" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-5603" href="../Compositional/#plfa_plfa-part3-Compositional-5557" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Compositional-5605" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-5606" href="../Compositional/#plfa_plfa-part3-Compositional-5606" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-5609" href="../Compositional/#plfa_plfa-part3-Compositional-5549" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-5611" href="../Compositional/#plfa_plfa-part3-Compositional-5611" class="Bound">D₂</a><a id="plfa_plfa-part3-Compositional-5613" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-5615" href="../Compositional/#plfa_plfa-part3-Compositional-5615" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-5617" href="../Compositional/#plfa_plfa-part3-Compositional-5617" class="Bound">w</a> <a id="plfa_plfa-part3-Compositional-5619" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-5621" href="../Compositional/#plfa_plfa-part3-Compositional-5617" class="Bound">w</a> <a id="plfa_plfa-part3-Compositional-5623" href="../Denotational/#plfa_plfa-part3-Denotational-4268" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-5625" href="../Denotational/#plfa_plfa-part3-Denotational-3927" class="InductiveConstructor">⊥</a> <a id="plfa_plfa-part3-Compositional-5627" href="https://agda.github.io/agda-stdlib/v2.1/Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="plfa_plfa-part3-Compositional-5629" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1244" class="Function">Σ[</a> <a id="plfa_plfa-part3-Compositional-5632" href="../Compositional/#plfa_plfa-part3-Compositional-5632" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-5634" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1244" class="Function">∈</a> <a id="plfa_plfa-part3-Compositional-5636" href="../Denotational/#plfa_plfa-part3-Denotational-3907" class="Datatype">Value</a> <a id="plfa_plfa-part3-Compositional-5642" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1244" class="Function">]</a><a id="plfa_plfa-part3-Compositional-5643" class="Symbol">(</a> <a id="plfa_plfa-part3-Compositional-5645" href="../Compositional/#plfa_plfa-part3-Compositional-5606" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-5648" href="../Compositional/#plfa_plfa-part3-Compositional-5615" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-5650" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-5651" href="../Compositional/#plfa_plfa-part3-Compositional-5632" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-5653" href="../Denotational/#plfa_plfa-part3-Denotational-3939" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-5655" href="../Compositional/#plfa_plfa-part3-Compositional-5617" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-5656" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-5658" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="plfa_plfa-part3-Compositional-5660" href="../Compositional/#plfa_plfa-part3-Compositional-5611" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-5663" href="../Compositional/#plfa_plfa-part3-Compositional-5615" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-5665" href="../Compositional/#plfa_plfa-part3-Compositional-5632" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-5667" class="Symbol">)</a>
</pre><p>If one squints hard enough, the <code>_●_</code> operator starts to look like the <code>apply</code> operation familiar to functional programmers. It takes two parameters and applies the first to the second.</p><p>Next we consider the inversion lemma for application, which is also the forward direction of the semantic equation for application. We describe the proof below.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℰ·→●ℰ"></a><a id="plfa_plfa-part3-Compositional-6032" href="../Compositional/#plfa_plfa-part3-Compositional-6032" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-6038" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-6040" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-6042" href="../Compositional/#plfa_plfa-part3-Compositional-6042" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-6043" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6045" href="../Compositional/#plfa_plfa-part3-Compositional-6045" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-6047" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-6049" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-6053" href="../Compositional/#plfa_plfa-part3-Compositional-6042" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-6054" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6056" href="../Compositional/#plfa_plfa-part3-Compositional-6056" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-6058" href="../Compositional/#plfa_plfa-part3-Compositional-6058" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-6060" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-6062" href="../Compositional/#plfa_plfa-part3-Compositional-6042" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-6064" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-6066" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-6067" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6069" href="../Compositional/#plfa_plfa-part3-Compositional-6069" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-6071" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-6073" href="../Denotational/#plfa_plfa-part3-Denotational-3907" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-6078" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-6082" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-6084" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-6086" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6087" href="../Compositional/#plfa_plfa-part3-Compositional-6056" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-6089" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-6091" href="../Compositional/#plfa_plfa-part3-Compositional-6058" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-6092" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-6094" href="../Compositional/#plfa_plfa-part3-Compositional-6045" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-6096" href="../Compositional/#plfa_plfa-part3-Compositional-6069" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-6102" class="Comment">----------------</a>
  <a id="plfa_plfa-part3-Compositional-6121" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-6123" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6124" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-6126" href="../Compositional/#plfa_plfa-part3-Compositional-6056" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-6128" href="../Compositional/#plfa_plfa-part3-Compositional-5549" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-6130" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-6132" href="../Compositional/#plfa_plfa-part3-Compositional-6058" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-6133" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-6135" href="../Compositional/#plfa_plfa-part3-Compositional-6045" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-6137" href="../Compositional/#plfa_plfa-part3-Compositional-6069" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-6139" href="../Compositional/#plfa_plfa-part3-Compositional-6032" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-6145" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6146" href="../Denotational/#plfa_plfa-part3-Denotational-9279" class="InductiveConstructor">↦-elim</a><a id="plfa_plfa-part3-Compositional-6152" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-6153" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-6155" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6157" href="../Compositional/#plfa_plfa-part3-Compositional-6157" class="Bound">v′</a><a id="plfa_plfa-part3-Compositional-6159" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-6161" href="../Compositional/#plfa_plfa-part3-Compositional-6161" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-6164" href="../Compositional/#plfa_plfa-part3-Compositional-6164" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-6166" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-6168" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6170" href="https://agda.github.io/agda-stdlib/v2.1/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-6175" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6177" href="../Compositional/#plfa_plfa-part3-Compositional-6157" class="Bound">v′</a> <a id="plfa_plfa-part3-Compositional-6180" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6182" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6184" href="../Compositional/#plfa_plfa-part3-Compositional-6161" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-6187" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6189" href="../Compositional/#plfa_plfa-part3-Compositional-6164" class="Bound">d₂</a> <a id="plfa_plfa-part3-Compositional-6192" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6194" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-6196" href="../Compositional/#plfa_plfa-part3-Compositional-6032" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-6202" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-6203" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-6205" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6207" href="../Denotational/#plfa_plfa-part3-Denotational-3927" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-6208" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-6210" href="../Denotational/#plfa_plfa-part3-Denotational-9513" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-6218" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6220" href="https://agda.github.io/agda-stdlib/v2.1/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-6225" href="../Denotational/#plfa_plfa-part3-Denotational-4303" class="InductiveConstructor">⊑-bot</a>
<a id="plfa_plfa-part3-Compositional-6231" href="../Compositional/#plfa_plfa-part3-Compositional-6032" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-6237" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-6238" href="../Compositional/#plfa_plfa-part3-Compositional-6238" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-6239" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6241" href="../Compositional/#plfa_plfa-part3-Compositional-6241" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-6242" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6244" href="../Compositional/#plfa_plfa-part3-Compositional-6244" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-6245" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6247" href="../Compositional/#plfa_plfa-part3-Compositional-6247" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-6248" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6250" href="../Compositional/#plfa_plfa-part3-Compositional-6250" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-6251" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-6253" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6254" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊔-intro</a><a id="plfa_plfa-part3-Compositional-6261" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-6262" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-6264" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6266" href="../Compositional/#plfa_plfa-part3-Compositional-6266" class="Bound">v₁</a><a id="plfa_plfa-part3-Compositional-6268" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6270" class="Argument">w</a> <a id="plfa_plfa-part3-Compositional-6272" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6274" href="../Compositional/#plfa_plfa-part3-Compositional-6274" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-6276" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-6278" href="../Compositional/#plfa_plfa-part3-Compositional-6278" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-6281" href="../Compositional/#plfa_plfa-part3-Compositional-6281" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-6283" class="Symbol">)</a>
    <a id="plfa_plfa-part3-Compositional-6289" class="Keyword">with</a> <a id="plfa_plfa-part3-Compositional-6294" href="../Compositional/#plfa_plfa-part3-Compositional-6032" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-6300" href="../Compositional/#plfa_plfa-part3-Compositional-6278" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-6303" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6305" href="../Compositional/#plfa_plfa-part3-Compositional-6032" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-6311" href="../Compositional/#plfa_plfa-part3-Compositional-6281" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Compositional-6314" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-6318" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6320" href="https://agda.github.io/agda-stdlib/v2.1/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-6325" href="../Compositional/#plfa_plfa-part3-Compositional-6325" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-6329" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6331" href="https://agda.github.io/agda-stdlib/v2.1/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-6336" href="../Compositional/#plfa_plfa-part3-Compositional-6336" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-6340" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6342" href="https://agda.github.io/agda-stdlib/v2.1/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-6347" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6348" href="../Denotational/#plfa_plfa-part3-Denotational-4328" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-6357" href="../Compositional/#plfa_plfa-part3-Compositional-6325" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-6361" href="../Compositional/#plfa_plfa-part3-Compositional-6336" class="Bound">lt2</a><a id="plfa_plfa-part3-Compositional-6364" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-6366" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-6370" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6372" href="https://agda.github.io/agda-stdlib/v2.1/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-6377" href="../Compositional/#plfa_plfa-part3-Compositional-6377" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-6381" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6383" href="https://agda.github.io/agda-stdlib/v2.1/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-6388" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6390" href="../Compositional/#plfa_plfa-part3-Compositional-6390" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6394" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6396" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6398" href="../Compositional/#plfa_plfa-part3-Compositional-6398" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-6404" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6406" href="../Compositional/#plfa_plfa-part3-Compositional-6406" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-6411" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6413" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6415" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-6423" href="https://agda.github.io/agda-stdlib/v2.1/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-6428" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6430" href="../Compositional/#plfa_plfa-part3-Compositional-6390" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6434" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6436" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6438" href="../Denotational/#plfa_plfa-part3-Denotational-9695" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-6442" href="../Compositional/#plfa_plfa-part3-Compositional-6398" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-6448" href="../Compositional/#plfa_plfa-part3-Compositional-6474" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-6451" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6453" href="../Compositional/#plfa_plfa-part3-Compositional-6406" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-6458" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6460" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a>
      <a id="plfa_plfa-part3-Compositional-6468" class="Keyword">where</a> <a id="plfa_plfa-part3-Compositional-6474" href="../Compositional/#plfa_plfa-part3-Compositional-6474" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-6477" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-6479" href="../Compositional/#plfa_plfa-part3-Compositional-6390" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6483" href="../Denotational/#plfa_plfa-part3-Denotational-3939" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-6485" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6486" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-6489" href="../Denotational/#plfa_plfa-part3-Denotational-3969" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-6491" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-6493" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-6495" href="../Denotational/#plfa_plfa-part3-Denotational-4268" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-6497" href="../Compositional/#plfa_plfa-part3-Compositional-6390" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6501" href="../Denotational/#plfa_plfa-part3-Denotational-3939" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-6503" class="Bound">v₂</a>
            <a id="plfa_plfa-part3-Compositional-6518" href="../Compositional/#plfa_plfa-part3-Compositional-6474" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-6521" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6523" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6524" href="../Denotational/#plfa_plfa-part3-Denotational-4629" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-6530" href="../Denotational/#plfa_plfa-part3-Denotational-5402" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-6537" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6538" href="../Denotational/#plfa_plfa-part3-Denotational-4328" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-6547" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6548" href="../Denotational/#plfa_plfa-part3-Denotational-4558" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-6556" href="../Compositional/#plfa_plfa-part3-Compositional-6377" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-6560" href="../Denotational/#plfa_plfa-part3-Denotational-4303" class="InductiveConstructor">⊑-bot</a><a id="plfa_plfa-part3-Compositional-6565" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-6567" href="../Denotational/#plfa_plfa-part3-Denotational-5402" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Compositional-6573" class="Symbol">))</a>
<a id="plfa_plfa-part3-Compositional-6576" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-6580" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6582" href="https://agda.github.io/agda-stdlib/v2.1/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-6587" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6589" href="../Compositional/#plfa_plfa-part3-Compositional-6589" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6593" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6595" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6597" href="../Compositional/#plfa_plfa-part3-Compositional-6597" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-6603" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6605" href="../Compositional/#plfa_plfa-part3-Compositional-6605" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-6610" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6612" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6614" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6616" href="https://agda.github.io/agda-stdlib/v2.1/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-6621" href="../Compositional/#plfa_plfa-part3-Compositional-6621" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-6625" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-6633" href="https://agda.github.io/agda-stdlib/v2.1/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-6638" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6640" href="../Compositional/#plfa_plfa-part3-Compositional-6589" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6644" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6646" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6648" href="../Denotational/#plfa_plfa-part3-Denotational-9695" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-6652" href="../Compositional/#plfa_plfa-part3-Compositional-6597" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-6658" href="../Compositional/#plfa_plfa-part3-Compositional-6684" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-6661" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6663" href="../Compositional/#plfa_plfa-part3-Compositional-6605" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-6668" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6670" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a>
      <a id="plfa_plfa-part3-Compositional-6678" class="Keyword">where</a> <a id="plfa_plfa-part3-Compositional-6684" href="../Compositional/#plfa_plfa-part3-Compositional-6684" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-6687" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-6689" href="../Compositional/#plfa_plfa-part3-Compositional-6589" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6693" href="../Denotational/#plfa_plfa-part3-Denotational-3939" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-6695" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6696" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-6699" href="../Denotational/#plfa_plfa-part3-Denotational-3969" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-6701" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-6703" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-6705" href="../Denotational/#plfa_plfa-part3-Denotational-4268" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-6707" href="../Compositional/#plfa_plfa-part3-Compositional-6589" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6711" href="../Denotational/#plfa_plfa-part3-Denotational-3939" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-6713" class="Bound">v₁</a>
            <a id="plfa_plfa-part3-Compositional-6728" href="../Compositional/#plfa_plfa-part3-Compositional-6684" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-6731" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6733" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6734" href="../Denotational/#plfa_plfa-part3-Denotational-4629" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-6740" href="../Denotational/#plfa_plfa-part3-Denotational-5402" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-6747" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6748" href="../Denotational/#plfa_plfa-part3-Denotational-4328" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-6757" href="../Denotational/#plfa_plfa-part3-Denotational-5402" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-6764" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6765" href="../Denotational/#plfa_plfa-part3-Denotational-4558" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-6773" href="../Compositional/#plfa_plfa-part3-Compositional-6621" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-6777" href="../Denotational/#plfa_plfa-part3-Denotational-4303" class="InductiveConstructor">⊑-bot</a><a id="plfa_plfa-part3-Compositional-6782" class="Symbol">)))</a>
<a id="plfa_plfa-part3-Compositional-6786" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-6790" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6792" href="https://agda.github.io/agda-stdlib/v2.1/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-6797" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6799" href="../Compositional/#plfa_plfa-part3-Compositional-6799" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6803" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6805" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6807" href="../Compositional/#plfa_plfa-part3-Compositional-6807" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-6813" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6815" href="../Compositional/#plfa_plfa-part3-Compositional-6815" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-6820" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6822" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6824" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6826" href="https://agda.github.io/agda-stdlib/v2.1/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-6831" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6833" href="../Compositional/#plfa_plfa-part3-Compositional-6833" class="Bound">v₁′′</a> <a id="plfa_plfa-part3-Compositional-6838" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6840" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6842" href="../Compositional/#plfa_plfa-part3-Compositional-6842" class="Bound">L↓v12′</a> <a id="plfa_plfa-part3-Compositional-6849" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6851" href="../Compositional/#plfa_plfa-part3-Compositional-6851" class="Bound">M↓v3′</a> <a id="plfa_plfa-part3-Compositional-6857" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6859" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6861" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-6869" class="Keyword">let</a> <a id="plfa_plfa-part3-Compositional-6873" href="../Compositional/#plfa_plfa-part3-Compositional-6873" class="Bound">L↓⊔</a> <a id="plfa_plfa-part3-Compositional-6877" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6879" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-6887" href="../Compositional/#plfa_plfa-part3-Compositional-6807" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-6893" href="../Compositional/#plfa_plfa-part3-Compositional-6842" class="Bound">L↓v12′</a> <a id="plfa_plfa-part3-Compositional-6900" class="Keyword">in</a>
      <a id="plfa_plfa-part3-Compositional-6909" class="Keyword">let</a> <a id="plfa_plfa-part3-Compositional-6913" href="../Compositional/#plfa_plfa-part3-Compositional-6913" class="Bound">M↓⊔</a> <a id="plfa_plfa-part3-Compositional-6917" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6919" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-6927" href="../Compositional/#plfa_plfa-part3-Compositional-6815" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-6932" href="../Compositional/#plfa_plfa-part3-Compositional-6851" class="Bound">M↓v3′</a> <a id="plfa_plfa-part3-Compositional-6938" class="Keyword">in</a>
      <a id="plfa_plfa-part3-Compositional-6947" href="https://agda.github.io/agda-stdlib/v2.1/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-6952" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6954" href="../Compositional/#plfa_plfa-part3-Compositional-6799" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6958" href="../Denotational/#plfa_plfa-part3-Denotational-3969" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-6960" href="../Compositional/#plfa_plfa-part3-Compositional-6833" class="Bound">v₁′′</a> <a id="plfa_plfa-part3-Compositional-6965" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6967" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6969" href="../Denotational/#plfa_plfa-part3-Denotational-9695" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-6973" href="../Compositional/#plfa_plfa-part3-Compositional-6873" class="Bound">L↓⊔</a> <a id="plfa_plfa-part3-Compositional-6977" href="../Denotational/#plfa_plfa-part3-Denotational-6045" class="Function">⊔↦⊔-dist</a> <a id="plfa_plfa-part3-Compositional-6986" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6988" href="../Compositional/#plfa_plfa-part3-Compositional-6913" class="Bound">M↓⊔</a> <a id="plfa_plfa-part3-Compositional-6992" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6994" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-6996" href="../Compositional/#plfa_plfa-part3-Compositional-6032" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-7002" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-7003" href="../Compositional/#plfa_plfa-part3-Compositional-7003" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-7004" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7006" href="../Compositional/#plfa_plfa-part3-Compositional-7006" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-7007" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7009" href="../Compositional/#plfa_plfa-part3-Compositional-7009" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-7010" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7012" href="../Compositional/#plfa_plfa-part3-Compositional-7012" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-7013" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7015" href="../Compositional/#plfa_plfa-part3-Compositional-7015" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-7016" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-7018" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7019" href="../Denotational/#plfa_plfa-part3-Denotational-9695" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-7023" href="../Compositional/#plfa_plfa-part3-Compositional-7023" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-7025" href="../Compositional/#plfa_plfa-part3-Compositional-7025" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-7027" class="Symbol">)</a>
    <a id="plfa_plfa-part3-Compositional-7033" class="Keyword">with</a> <a id="plfa_plfa-part3-Compositional-7038" href="../Compositional/#plfa_plfa-part3-Compositional-6032" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-7044" href="../Compositional/#plfa_plfa-part3-Compositional-7023" class="Bound">d</a>
<a id="plfa_plfa-part3-Compositional-7046" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-7050" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-7052" href="https://agda.github.io/agda-stdlib/v2.1/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-7057" href="../Compositional/#plfa_plfa-part3-Compositional-7057" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-7061" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7063" href="https://agda.github.io/agda-stdlib/v2.1/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-7068" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7069" href="../Denotational/#plfa_plfa-part3-Denotational-4558" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-7077" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-7080" href="../Compositional/#plfa_plfa-part3-Compositional-7057" class="Bound">lt2</a><a id="plfa_plfa-part3-Compositional-7083" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-7085" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-7089" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-7091" href="https://agda.github.io/agda-stdlib/v2.1/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-7096" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-7098" href="../Compositional/#plfa_plfa-part3-Compositional-7098" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-7101" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-7103" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-7105" href="../Compositional/#plfa_plfa-part3-Compositional-7105" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-7111" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-7113" href="../Compositional/#plfa_plfa-part3-Compositional-7113" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-7118" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-7120" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-7122" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-7130" href="https://agda.github.io/agda-stdlib/v2.1/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-7135" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-7137" href="../Compositional/#plfa_plfa-part3-Compositional-7098" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-7140" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-7142" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-7144" href="../Denotational/#plfa_plfa-part3-Denotational-9695" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-7148" href="../Compositional/#plfa_plfa-part3-Compositional-7105" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-7154" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7155" href="../Denotational/#plfa_plfa-part3-Denotational-4629" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-7161" href="../Denotational/#plfa_plfa-part3-Denotational-5402" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-7168" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-7170" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-7172" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-7174" href="../Compositional/#plfa_plfa-part3-Compositional-7113" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-7179" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-7181" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a>
</pre><p>We proceed by induction on the semantics.</p><ul><li><p>In case <code>↦-elim</code> we have <code>γ ⊢ L ↓ (v′ ↦ v)</code> and <code>γ ⊢ M ↓ v′</code>, which is all we need to show <code>(ℰ L ● ℰ M) γ v</code>.</p></li><li><p>In case <code>⊥-intro</code> we have <code>v = ⊥</code>. We conclude that <code>v ⊑ ⊥</code>.</p></li><li><p>In case <code>⊔-intro</code> we have <code>ℰ (L · M) γ v₁</code> and <code>ℰ (L · M) γ v₂</code> and need to show <code>(ℰ L ● ℰ M) γ (v₁ ⊔ v₂)</code>. By the induction hypothesis, we have <code>(ℰ L ● ℰ M) γ v₁</code> and <code>(ℰ L ● ℰ M) γ v₂</code>. We have four subcases to consider.</p><ul><li><p>Suppose <code>v₁ ⊑ ⊥</code> and <code>v₂ ⊑ ⊥</code>. Then <code>v₁ ⊔ v₂ ⊑ ⊥</code>.</p></li><li><p>Suppose <code>v₁ ⊑ ⊥</code>, <code>γ ⊢ L ↓ v₁′ ↦ v₂</code>, and <code>γ ⊢ M ↓ v₁′</code>. We have <code>γ ⊢ L ↓ v₁′ ↦ (v₁ ⊔ v₂)</code> by rule <code>sub</code> because <code>v₁′ ↦ (v₁ ⊔ v₂) ⊑ v₁′ ↦ v₂</code>.</p></li><li><p>Suppose <code>γ ⊢ L ↓ v₁′ ↦ v₁</code>, <code>γ ⊢ M ↓ v₁′</code>, and <code>v₂ ⊑ ⊥</code>. We have <code>γ ⊢ L ↓ v₁′ ↦ (v₁ ⊔ v₂)</code> by rule <code>sub</code> because <code>v₁′ ↦ (v₁ ⊔ v₂) ⊑ v₁′ ↦ v₁</code>.</p></li><li><p>Suppose <code>γ ⊢ L ↓ v₁′′ ↦ v₁, γ ⊢ M ↓ v₁′′</code>, <code>γ ⊢ L ↓ v₁′ ↦ v₂</code>, and <code>γ ⊢ M ↓ v₁′</code>. This case is the most interesting. By two uses of the rule <code>⊔-intro</code> we have <code>γ ⊢ L ↓ (v₁′ ↦ v₂) ⊔ (v₁′′ ↦ v₁)</code> and <code>γ ⊢ M ↓ (v₁′ ⊔ v₁′′)</code>. But this does not yet match what we need for <code>ℰ L ● ℰ M</code> because the result of <code>L</code> must be an <code>↦</code> whose input entry is <code>v₁′ ⊔ v₁′′</code>. So we use the <code>sub</code> rule to obtain <code>γ ⊢ L ↓ (v₁′ ⊔ v₁′′) ↦ (v₁ ⊔ v₂)</code>, using the <code>⊔↦⊔-dist</code> lemma (thanks to the <code>⊑-dist</code> rule) to show that</p><pre><code>  (v₁′ ⊔ v₁′′) ↦ (v₁ ⊔ v₂) ⊑ (v₁′ ↦ v₂) ⊔ (v₁′′ ↦ v₁)</code></pre><p>So we have proved what is needed for this case.</p></li></ul></li><li><p>In case <code>sub</code> we have <code>Γ ⊢ L · M ↓ v₁</code> and <code>v ⊑ v₁</code>. By the induction hypothesis, we have <code>(ℰ L ● ℰ M) γ v₁</code>. We have two subcases to consider.</p><ul><li>Suppose <code>v₁ ⊑ ⊥</code>. We conclude that <code>v ⊑ ⊥</code>.</li><li>Suppose <code>Γ ⊢ L ↓ v′ → v₁</code> and <code>Γ ⊢ M ↓ v′</code>. We conclude with <code>Γ ⊢ L ↓ v′ → v</code> by rule <code>sub</code>, because <code>v′ → v ⊑ v′ → v₁</code>.</li></ul></li></ul><p>The backward direction is proved by cases on the premise <code>(ℰ L ● ℰ M) γ v</code>. In case <code>v ⊑ ⊥</code>, we obtain <code>Γ ⊢ L · M ↓ ⊥</code> by rule <code>⊥-intro</code>. Otherwise, we conclude immediately by rule <code>↦-elim</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-●ℰ→ℰ·"></a><a id="plfa_plfa-part3-Compositional-9252" href="../Compositional/#plfa_plfa-part3-Compositional-9252" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-9258" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-9260" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-9262" href="../Compositional/#plfa_plfa-part3-Compositional-9262" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-9263" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-9265" href="../Compositional/#plfa_plfa-part3-Compositional-9265" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-9267" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-9269" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-9273" href="../Compositional/#plfa_plfa-part3-Compositional-9262" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-9274" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-9276" href="../Compositional/#plfa_plfa-part3-Compositional-9276" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-9278" href="../Compositional/#plfa_plfa-part3-Compositional-9278" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-9280" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-9282" href="../Compositional/#plfa_plfa-part3-Compositional-9262" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-9284" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-9286" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-9287" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-9289" href="../Compositional/#plfa_plfa-part3-Compositional-9289" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-9290" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-9294" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-9296" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9297" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-9299" href="../Compositional/#plfa_plfa-part3-Compositional-9276" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-9301" href="../Compositional/#plfa_plfa-part3-Compositional-5549" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-9303" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-9305" href="../Compositional/#plfa_plfa-part3-Compositional-9278" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-9306" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9308" href="../Compositional/#plfa_plfa-part3-Compositional-9265" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-9310" href="../Compositional/#plfa_plfa-part3-Compositional-9289" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-9316" class="Comment">----------------</a>
  <a id="plfa_plfa-part3-Compositional-9335" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-9337" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-9339" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9340" href="../Compositional/#plfa_plfa-part3-Compositional-9276" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-9342" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-9344" href="../Compositional/#plfa_plfa-part3-Compositional-9278" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-9345" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9347" href="../Compositional/#plfa_plfa-part3-Compositional-9265" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-9349" href="../Compositional/#plfa_plfa-part3-Compositional-9289" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-9351" href="../Compositional/#plfa_plfa-part3-Compositional-9252" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-9357" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-9358" href="../Compositional/#plfa_plfa-part3-Compositional-9358" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-9359" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-9361" href="../Compositional/#plfa_plfa-part3-Compositional-9361" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-9362" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-9364" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9365" href="https://agda.github.io/agda-stdlib/v2.1/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-9370" href="../Compositional/#plfa_plfa-part3-Compositional-9370" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-9372" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9374" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-9376" href="../Denotational/#plfa_plfa-part3-Denotational-9695" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-9380" href="../Denotational/#plfa_plfa-part3-Denotational-9513" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-9388" href="../Compositional/#plfa_plfa-part3-Compositional-9370" class="Bound">lt</a>
<a id="plfa_plfa-part3-Compositional-9391" href="../Compositional/#plfa_plfa-part3-Compositional-9252" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-9397" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-9398" href="../Compositional/#plfa_plfa-part3-Compositional-9398" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-9399" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-9401" href="../Compositional/#plfa_plfa-part3-Compositional-9401" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-9402" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-9404" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9405" href="https://agda.github.io/agda-stdlib/v2.1/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-9410" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-9412" href="../Compositional/#plfa_plfa-part3-Compositional-9412" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-9415" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-9417" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-9419" href="../Compositional/#plfa_plfa-part3-Compositional-9419" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-9422" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-9424" href="../Compositional/#plfa_plfa-part3-Compositional-9424" class="Bound">d2</a> <a id="plfa_plfa-part3-Compositional-9427" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-9429" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a><a id="plfa_plfa-part3-Compositional-9430" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9432" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-9434" href="../Denotational/#plfa_plfa-part3-Denotational-9279" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Compositional-9441" href="../Compositional/#plfa_plfa-part3-Compositional-9419" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-9444" href="../Compositional/#plfa_plfa-part3-Compositional-9424" class="Bound">d2</a>
</pre><p>So we have proved that the semantics is compositional with respect to function application, as witnessed by the <code>●</code> function.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-app-equiv"></a><a id="plfa_plfa-part3-Compositional-9587" href="../Compositional/#plfa_plfa-part3-Compositional-9587" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-9597" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-9599" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-9601" href="../Compositional/#plfa_plfa-part3-Compositional-9601" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-9602" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-9604" href="../Compositional/#plfa_plfa-part3-Compositional-9604" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-9606" href="../Compositional/#plfa_plfa-part3-Compositional-9606" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-9608" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-9610" href="../Compositional/#plfa_plfa-part3-Compositional-9601" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-9612" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-9614" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-9615" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-9619" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-9621" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-9623" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9624" href="../Compositional/#plfa_plfa-part3-Compositional-9604" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-9626" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-9628" href="../Compositional/#plfa_plfa-part3-Compositional-9606" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-9629" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9631" href="../Denotational/#plfa_plfa-part3-Denotational-17528" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-9633" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9634" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-9636" href="../Compositional/#plfa_plfa-part3-Compositional-9604" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-9637" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9639" href="../Compositional/#plfa_plfa-part3-Compositional-5549" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-9641" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9642" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-9644" href="../Compositional/#plfa_plfa-part3-Compositional-9606" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-9645" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-9647" href="../Compositional/#plfa_plfa-part3-Compositional-9587" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-9657" href="../Compositional/#plfa_plfa-part3-Compositional-9657" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-9659" href="../Compositional/#plfa_plfa-part3-Compositional-9659" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-9661" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-9663" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-9665" href="../Compositional/#plfa_plfa-part3-Compositional-6032" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-9671" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-9673" href="../Compositional/#plfa_plfa-part3-Compositional-9252" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-9679" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a>
</pre><p>We also need an inversion lemma for variables. If <code>Γ ⊢ x ↓ v</code>, then <code>v ⊑ γ x</code>. The proof is a straightforward induction on the semantics.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-var-inv"></a><a id="plfa_plfa-part3-Compositional-9833" href="../Compositional/#plfa_plfa-part3-Compositional-9833" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-9841" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-9843" class="Symbol">∀</a> <a id="plfa_plfa-part3-Compositional-9845" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-9846" href="../Compositional/#plfa_plfa-part3-Compositional-9846" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-9848" href="../Compositional/#plfa_plfa-part3-Compositional-9848" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-9850" href="../Compositional/#plfa_plfa-part3-Compositional-9850" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-9851" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-9853" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-9854" href="../Compositional/#plfa_plfa-part3-Compositional-9854" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-9856" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-9858" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-9862" href="../Compositional/#plfa_plfa-part3-Compositional-9846" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-9863" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-9867" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-9869" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-9871" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9872" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-9874" href="../Compositional/#plfa_plfa-part3-Compositional-9850" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-9875" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9877" href="../Compositional/#plfa_plfa-part3-Compositional-9854" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-9879" href="../Compositional/#plfa_plfa-part3-Compositional-9848" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-9885" class="Comment">-------------------</a>
  <a id="plfa_plfa-part3-Compositional-9907" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-9909" href="../Compositional/#plfa_plfa-part3-Compositional-9848" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-9911" href="../Denotational/#plfa_plfa-part3-Denotational-4268" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-9913" href="../Compositional/#plfa_plfa-part3-Compositional-9854" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-9915" href="../Compositional/#plfa_plfa-part3-Compositional-9850" class="Bound">x</a>
<a id="plfa_plfa-part3-Compositional-9917" href="../Compositional/#plfa_plfa-part3-Compositional-9833" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-9925" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9926" href="../Denotational/#plfa_plfa-part3-Denotational-9204" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Compositional-9929" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9931" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-9933" href="../Denotational/#plfa_plfa-part3-Denotational-5402" class="Function">⊑-refl</a>
<a id="plfa_plfa-part3-Compositional-9940" href="../Compositional/#plfa_plfa-part3-Compositional-9833" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-9948" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9949" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-9957" href="../Compositional/#plfa_plfa-part3-Compositional-9957" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-9960" href="../Compositional/#plfa_plfa-part3-Compositional-9960" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-9962" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9964" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-9966" href="../Denotational/#plfa_plfa-part3-Denotational-4328" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-9975" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9976" href="../Compositional/#plfa_plfa-part3-Compositional-9833" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-9984" href="../Compositional/#plfa_plfa-part3-Compositional-9957" class="Bound">d₁</a><a id="plfa_plfa-part3-Compositional-9986" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9988" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9989" href="../Compositional/#plfa_plfa-part3-Compositional-9833" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-9997" href="../Compositional/#plfa_plfa-part3-Compositional-9960" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-9999" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-10001" href="../Compositional/#plfa_plfa-part3-Compositional-9833" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-10009" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-10010" href="../Denotational/#plfa_plfa-part3-Denotational-9695" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-10014" href="../Compositional/#plfa_plfa-part3-Compositional-10014" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-10016" href="../Compositional/#plfa_plfa-part3-Compositional-10016" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-10018" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-10020" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-10022" href="../Denotational/#plfa_plfa-part3-Denotational-4558" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-10030" href="../Compositional/#plfa_plfa-part3-Compositional-10016" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-10033" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-10034" href="../Compositional/#plfa_plfa-part3-Compositional-9833" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-10042" href="../Compositional/#plfa_plfa-part3-Compositional-10014" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-10043" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-10045" href="../Compositional/#plfa_plfa-part3-Compositional-9833" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-10053" href="../Denotational/#plfa_plfa-part3-Denotational-9513" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-10061" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-10063" href="../Denotational/#plfa_plfa-part3-Denotational-4303" class="InductiveConstructor">⊑-bot</a>
</pre><p>To round-out the semantic equations, we establish the following one for variables.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-var-equiv"></a><a id="plfa_plfa-part3-Compositional-10166" href="../Compositional/#plfa_plfa-part3-Compositional-10166" class="Function">var-equiv</a> <a id="plfa_plfa-part3-Compositional-10176" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-10178" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-10180" href="../Compositional/#plfa_plfa-part3-Compositional-10180" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-10181" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-10183" href="../Compositional/#plfa_plfa-part3-Compositional-10183" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-10185" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-10187" href="../Compositional/#plfa_plfa-part3-Compositional-10180" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-10189" href="../Untyped/#plfa_plfa-part2-Untyped-3126" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Compositional-10191" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-10192" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-10194" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-10196" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-10198" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-10199" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-10201" href="../Compositional/#plfa_plfa-part3-Compositional-10183" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-10202" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-10204" href="../Denotational/#plfa_plfa-part3-Denotational-17528" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-10206" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-10209" href="../Compositional/#plfa_plfa-part3-Compositional-10209" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-10211" href="../Compositional/#plfa_plfa-part3-Compositional-10211" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-10213" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-10215" href="../Compositional/#plfa_plfa-part3-Compositional-10211" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-10217" href="../Denotational/#plfa_plfa-part3-Denotational-4268" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-10219" href="../Compositional/#plfa_plfa-part3-Compositional-10209" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-10221" href="../Compositional/#plfa_plfa-part3-Compositional-10183" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-10222" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-10224" href="../Compositional/#plfa_plfa-part3-Compositional-10166" class="Function">var-equiv</a> <a id="plfa_plfa-part3-Compositional-10234" href="../Compositional/#plfa_plfa-part3-Compositional-10234" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-10236" href="../Compositional/#plfa_plfa-part3-Compositional-10236" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-10238" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-10240" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-10242" href="../Compositional/#plfa_plfa-part3-Compositional-9833" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-10250" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-10252" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-10255" href="../Compositional/#plfa_plfa-part3-Compositional-10255" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-10258" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-10260" href="../Denotational/#plfa_plfa-part3-Denotational-9695" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-10264" href="../Denotational/#plfa_plfa-part3-Denotational-9204" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Compositional-10268" href="../Compositional/#plfa_plfa-part3-Compositional-10255" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-10270" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-10272" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a>
</pre><h2 id="congruence">Congruence</h2><p>The main work of this chapter is complete: we have established semantic equations that show how the denotational semantics is compositional. In this section and the next we make use of these equations to prove some corollaries: that denotational equality is a <em>congruence</em> and to prove the <em>compositionality property</em>, which states that surrounding two denotationally-equal terms in the same context produces two programs that are denotationally equal.</p><p>We begin by showing that denotational equality is a congruence with respect to lambda abstraction: that <code>ℰ N ≃ ℰ N′</code> implies <code>ℰ (ƛ N) ≃ ℰ (ƛ N′)</code>. We shall use the <code>lam-equiv</code> equation to reduce this question to whether <code>ℱ</code> is a congruence.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℱ-cong"></a><a id="plfa_plfa-part3-Compositional-11000" href="../Compositional/#plfa_plfa-part3-Compositional-11000" class="Function">ℱ-cong</a> <a id="plfa_plfa-part3-Compositional-11007" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-11009" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-11011" href="../Compositional/#plfa_plfa-part3-Compositional-11011" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-11012" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11014" href="../Compositional/#plfa_plfa-part3-Compositional-11014" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-11016" href="../Compositional/#plfa_plfa-part3-Compositional-11016" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-11019" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-11021" href="../Denotational/#plfa_plfa-part3-Denotational-17125" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-11032" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11033" href="../Compositional/#plfa_plfa-part3-Compositional-11011" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-11035" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-11037" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-11038" class="Symbol">)}</a>
  <a id="plfa_plfa-part3-Compositional-11043" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-11045" href="../Compositional/#plfa_plfa-part3-Compositional-11014" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-11047" href="../Denotational/#plfa_plfa-part3-Denotational-17528" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-11049" href="../Compositional/#plfa_plfa-part3-Compositional-11016" class="Bound">D′</a>
    <a id="plfa_plfa-part3-Compositional-11056" class="Comment">-----------</a>
  <a id="plfa_plfa-part3-Compositional-11070" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-11072" href="../Compositional/#plfa_plfa-part3-Compositional-1855" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-11074" href="../Compositional/#plfa_plfa-part3-Compositional-11014" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-11076" href="../Denotational/#plfa_plfa-part3-Denotational-17528" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-11078" href="../Compositional/#plfa_plfa-part3-Compositional-1855" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-11080" href="../Compositional/#plfa_plfa-part3-Compositional-11016" class="Bound">D′</a>
<a id="plfa_plfa-part3-Compositional-11083" href="../Compositional/#plfa_plfa-part3-Compositional-11000" class="Function">ℱ-cong</a><a id="plfa_plfa-part3-Compositional-11089" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11090" href="../Compositional/#plfa_plfa-part3-Compositional-11090" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-11091" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11093" href="../Compositional/#plfa_plfa-part3-Compositional-11093" class="Bound">D≃D′</a> <a id="plfa_plfa-part3-Compositional-11098" href="../Compositional/#plfa_plfa-part3-Compositional-11098" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-11100" href="../Compositional/#plfa_plfa-part3-Compositional-11100" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-11102" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-11106" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-11108" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-11111" href="../Compositional/#plfa_plfa-part3-Compositional-11111" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-11113" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-11115" href="../Compositional/#plfa_plfa-part3-Compositional-11178" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-11117" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11118" href="../Compositional/#plfa_plfa-part3-Compositional-11098" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-11119" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11121" href="../Compositional/#plfa_plfa-part3-Compositional-11100" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-11122" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11124" href="../Compositional/#plfa_plfa-part3-Compositional-11111" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-11126" href="../Compositional/#plfa_plfa-part3-Compositional-11093" class="Bound">D≃D′</a><a id="plfa_plfa-part3-Compositional-11130" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-11132" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-11134" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-11137" href="../Compositional/#plfa_plfa-part3-Compositional-11137" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-11139" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-11141" href="../Compositional/#plfa_plfa-part3-Compositional-11178" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-11143" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11144" href="../Compositional/#plfa_plfa-part3-Compositional-11098" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-11145" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11147" href="../Compositional/#plfa_plfa-part3-Compositional-11100" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-11148" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11150" href="../Compositional/#plfa_plfa-part3-Compositional-11137" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-11152" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11153" href="../Denotational/#plfa_plfa-part3-Denotational-17804" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-11159" href="../Compositional/#plfa_plfa-part3-Compositional-11093" class="Bound">D≃D′</a><a id="plfa_plfa-part3-Compositional-11163" class="Symbol">))</a> <a id="plfa_plfa-part3-Compositional-11166" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Compositional-11170" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Compositional-11178" href="../Compositional/#plfa_plfa-part3-Compositional-11178" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-11181" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-11183" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-11185" href="../Compositional/#plfa_plfa-part3-Compositional-11185" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-11187" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-11189" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-11193" href="../Compositional/#plfa_plfa-part3-Compositional-11090" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-11194" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11196" href="../Compositional/#plfa_plfa-part3-Compositional-11196" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-11197" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11199" href="../Compositional/#plfa_plfa-part3-Compositional-11199" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-11201" href="../Compositional/#plfa_plfa-part3-Compositional-11201" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-11204" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-11206" href="../Denotational/#plfa_plfa-part3-Denotational-17125" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-11217" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11218" href="../Compositional/#plfa_plfa-part3-Compositional-11090" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-11220" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-11222" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-11223" class="Symbol">)}</a>
    <a id="plfa_plfa-part3-Compositional-11230" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-11232" href="../Compositional/#plfa_plfa-part3-Compositional-1855" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-11234" href="../Compositional/#plfa_plfa-part3-Compositional-11199" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-11236" href="../Compositional/#plfa_plfa-part3-Compositional-11185" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-11238" href="../Compositional/#plfa_plfa-part3-Compositional-11196" class="Bound">v</a>  <a id="plfa_plfa-part3-Compositional-11241" class="Symbol">→</a>  <a id="plfa_plfa-part3-Compositional-11244" href="../Compositional/#plfa_plfa-part3-Compositional-11199" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-11246" href="../Denotational/#plfa_plfa-part3-Denotational-17528" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-11248" href="../Compositional/#plfa_plfa-part3-Compositional-11201" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-11251" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-11253" href="../Compositional/#plfa_plfa-part3-Compositional-1855" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-11255" href="../Compositional/#plfa_plfa-part3-Compositional-11201" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-11258" href="../Compositional/#plfa_plfa-part3-Compositional-11185" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-11260" href="../Compositional/#plfa_plfa-part3-Compositional-11196" class="Bound">v</a>
  <a id="plfa_plfa-part3-Compositional-11264" href="../Compositional/#plfa_plfa-part3-Compositional-11178" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-11267" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11268" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-11270" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-11272" href="../Denotational/#plfa_plfa-part3-Denotational-3927" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-11273" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11275" href="../Compositional/#plfa_plfa-part3-Compositional-11275" class="Bound">fd</a> <a id="plfa_plfa-part3-Compositional-11278" href="../Compositional/#plfa_plfa-part3-Compositional-11278" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-11282" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-11284" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a>
  <a id="plfa_plfa-part3-Compositional-11289" href="../Compositional/#plfa_plfa-part3-Compositional-11178" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-11292" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11293" href="../Compositional/#plfa_plfa-part3-Compositional-11293" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-11294" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11296" href="../Compositional/#plfa_plfa-part3-Compositional-11296" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-11298" href="../Denotational/#plfa_plfa-part3-Denotational-3939" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-11300" href="../Compositional/#plfa_plfa-part3-Compositional-11300" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-11301" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11303" href="../Compositional/#plfa_plfa-part3-Compositional-11303" class="Bound">fd</a> <a id="plfa_plfa-part3-Compositional-11306" href="../Compositional/#plfa_plfa-part3-Compositional-11306" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-11310" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-11312" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#636" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-11318" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11319" href="../Compositional/#plfa_plfa-part3-Compositional-11306" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-11323" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11324" href="../Compositional/#plfa_plfa-part3-Compositional-11293" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-11326" href="../Denotational/#plfa_plfa-part3-Denotational-7229" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Compositional-11329" href="../Compositional/#plfa_plfa-part3-Compositional-11296" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-11330" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-11332" href="../Compositional/#plfa_plfa-part3-Compositional-11300" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-11333" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-11335" href="../Compositional/#plfa_plfa-part3-Compositional-11303" class="Bound">fd</a>
  <a id="plfa_plfa-part3-Compositional-11340" href="../Compositional/#plfa_plfa-part3-Compositional-11178" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-11343" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11344" href="../Compositional/#plfa_plfa-part3-Compositional-11344" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-11345" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11347" href="../Compositional/#plfa_plfa-part3-Compositional-11347" class="Bound">u</a> <a id="plfa_plfa-part3-Compositional-11349" href="../Denotational/#plfa_plfa-part3-Denotational-3969" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-11351" href="../Compositional/#plfa_plfa-part3-Compositional-11351" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-11352" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11354" href="../Compositional/#plfa_plfa-part3-Compositional-11354" class="Bound">fd</a> <a id="plfa_plfa-part3-Compositional-11357" href="../Compositional/#plfa_plfa-part3-Compositional-11357" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-11361" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-11363" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-11365" href="../Compositional/#plfa_plfa-part3-Compositional-11178" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-11367" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11368" href="../Compositional/#plfa_plfa-part3-Compositional-11344" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-11369" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11371" href="../Compositional/#plfa_plfa-part3-Compositional-11347" class="Bound">u</a><a id="plfa_plfa-part3-Compositional-11372" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11374" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11375" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#636" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-11381" href="../Compositional/#plfa_plfa-part3-Compositional-11354" class="Bound">fd</a><a id="plfa_plfa-part3-Compositional-11383" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-11385" href="../Compositional/#plfa_plfa-part3-Compositional-11357" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-11389" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-11391" href="../Compositional/#plfa_plfa-part3-Compositional-11178" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-11393" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11394" href="../Compositional/#plfa_plfa-part3-Compositional-11344" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-11395" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11397" href="../Compositional/#plfa_plfa-part3-Compositional-11351" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-11398" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11400" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11401" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#650" class="Field">proj₂</a> <a id="plfa_plfa-part3-Compositional-11407" href="../Compositional/#plfa_plfa-part3-Compositional-11354" class="Bound">fd</a><a id="plfa_plfa-part3-Compositional-11409" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-11411" href="../Compositional/#plfa_plfa-part3-Compositional-11357" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-11415" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a>
</pre><p>The proof of <code>ℱ-cong</code> uses the lemma <code>ℱ≃</code> to handle both directions of the if-and-only-if. That lemma is proved by a straightforward induction on the value <code>v</code>.</p><p>We now prove that lambda abstraction is a congruence by direct equational reasoning.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-lam-cong"></a><a id="plfa_plfa-part3-Compositional-11678" href="../Compositional/#plfa_plfa-part3-Compositional-11678" class="Function">lam-cong</a> <a id="plfa_plfa-part3-Compositional-11687" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-11689" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-11691" href="../Compositional/#plfa_plfa-part3-Compositional-11691" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-11692" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11694" href="../Compositional/#plfa_plfa-part3-Compositional-11694" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-11696" href="../Compositional/#plfa_plfa-part3-Compositional-11696" class="Bound">N′</a> <a id="plfa_plfa-part3-Compositional-11699" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-11701" href="../Compositional/#plfa_plfa-part3-Compositional-11691" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-11703" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-11705" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-11707" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-11709" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-11710" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-11714" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-11716" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-11718" href="../Compositional/#plfa_plfa-part3-Compositional-11694" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-11720" href="../Denotational/#plfa_plfa-part3-Denotational-17528" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-11722" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-11724" href="../Compositional/#plfa_plfa-part3-Compositional-11696" class="Bound">N′</a>
    <a id="plfa_plfa-part3-Compositional-11731" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Compositional-11751" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-11753" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-11755" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11756" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-11758" href="../Compositional/#plfa_plfa-part3-Compositional-11694" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-11759" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-11761" href="../Denotational/#plfa_plfa-part3-Denotational-17528" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-11763" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-11765" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11766" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-11768" href="../Compositional/#plfa_plfa-part3-Compositional-11696" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-11770" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-11772" href="../Compositional/#plfa_plfa-part3-Compositional-11678" class="Function">lam-cong</a> <a id="plfa_plfa-part3-Compositional-11781" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11782" href="../Compositional/#plfa_plfa-part3-Compositional-11782" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-11783" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11785" href="../Compositional/#plfa_plfa-part3-Compositional-11785" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-11786" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11788" href="../Compositional/#plfa_plfa-part3-Compositional-11788" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-11790" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11792" href="../Compositional/#plfa_plfa-part3-Compositional-11792" class="Bound">N≃N′</a> <a id="plfa_plfa-part3-Compositional-11797" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-11801" href="../Denotational/#plfa_plfa-part3-Denotational-18473" class="Function Operator">start</a>
    <a id="plfa_plfa-part3-Compositional-11811" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-11813" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11814" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-11816" href="../Compositional/#plfa_plfa-part3-Compositional-11785" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-11817" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-11821" href="../Denotational/#plfa_plfa-part3-Denotational-18564" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-11824" href="../Compositional/#plfa_plfa-part3-Compositional-4352" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-11834" href="../Denotational/#plfa_plfa-part3-Denotational-18564" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-11840" href="../Compositional/#plfa_plfa-part3-Compositional-1855" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-11842" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11843" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-11845" href="../Compositional/#plfa_plfa-part3-Compositional-11785" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-11846" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-11850" href="../Denotational/#plfa_plfa-part3-Denotational-18564" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-11853" href="../Compositional/#plfa_plfa-part3-Compositional-11000" class="Function">ℱ-cong</a> <a id="plfa_plfa-part3-Compositional-11860" href="../Compositional/#plfa_plfa-part3-Compositional-11792" class="Bound">N≃N′</a> <a id="plfa_plfa-part3-Compositional-11865" href="../Denotational/#plfa_plfa-part3-Denotational-18564" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-11871" href="../Compositional/#plfa_plfa-part3-Compositional-1855" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-11873" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11874" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-11876" href="../Compositional/#plfa_plfa-part3-Compositional-11788" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-11878" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-11882" href="../Denotational/#plfa_plfa-part3-Denotational-18564" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-11885" href="../Denotational/#plfa_plfa-part3-Denotational-17804" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-11891" href="../Compositional/#plfa_plfa-part3-Compositional-4352" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-11901" href="../Denotational/#plfa_plfa-part3-Denotational-18564" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-11907" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-11909" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11910" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-11912" href="../Compositional/#plfa_plfa-part3-Compositional-11788" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-11914" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-11918" href="../Denotational/#plfa_plfa-part3-Denotational-18811" class="Function Operator">☐</a>
</pre><p>Next we prove that denotational equality is a congruence for application: that <code>ℰ L ≃ ℰ L′</code> and <code>ℰ M ≃ ℰ M′</code> imply <code>ℰ (L · M) ≃ ℰ (L′ · M′)</code>. The <code>app-equiv</code> equation reduces this to the question of whether the <code>●</code> operator is a congruence.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-●-cong"></a><a id="plfa_plfa-part3-Compositional-12175" href="../Compositional/#plfa_plfa-part3-Compositional-12175" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-12182" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12184" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-12186" href="../Compositional/#plfa_plfa-part3-Compositional-12186" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12187" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12189" href="../Compositional/#plfa_plfa-part3-Compositional-12189" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-12192" href="../Compositional/#plfa_plfa-part3-Compositional-12192" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-12196" href="../Compositional/#plfa_plfa-part3-Compositional-12196" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-12199" href="../Compositional/#plfa_plfa-part3-Compositional-12199" class="Bound">D₂′</a> <a id="plfa_plfa-part3-Compositional-12203" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12205" href="../Denotational/#plfa_plfa-part3-Denotational-17125" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-12216" href="../Compositional/#plfa_plfa-part3-Compositional-12186" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12217" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-12221" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12223" href="../Compositional/#plfa_plfa-part3-Compositional-12189" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-12226" href="../Denotational/#plfa_plfa-part3-Denotational-17528" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-12228" href="../Compositional/#plfa_plfa-part3-Compositional-12192" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-12232" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12234" href="../Compositional/#plfa_plfa-part3-Compositional-12196" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-12237" href="../Denotational/#plfa_plfa-part3-Denotational-17528" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-12239" href="../Compositional/#plfa_plfa-part3-Compositional-12199" class="Bound">D₂′</a>
  <a id="plfa_plfa-part3-Compositional-12245" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12247" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12248" href="../Compositional/#plfa_plfa-part3-Compositional-12189" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-12251" href="../Compositional/#plfa_plfa-part3-Compositional-5549" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-12253" href="../Compositional/#plfa_plfa-part3-Compositional-12196" class="Bound">D₂</a><a id="plfa_plfa-part3-Compositional-12255" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12257" href="../Denotational/#plfa_plfa-part3-Denotational-17528" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-12259" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12260" href="../Compositional/#plfa_plfa-part3-Compositional-12192" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-12264" href="../Compositional/#plfa_plfa-part3-Compositional-5549" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-12266" href="../Compositional/#plfa_plfa-part3-Compositional-12199" class="Bound">D₂′</a><a id="plfa_plfa-part3-Compositional-12269" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-12271" href="../Compositional/#plfa_plfa-part3-Compositional-12175" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-12278" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12279" href="../Compositional/#plfa_plfa-part3-Compositional-12279" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12280" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-12282" href="../Compositional/#plfa_plfa-part3-Compositional-12282" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-12285" href="../Compositional/#plfa_plfa-part3-Compositional-12285" class="Bound">d2</a> <a id="plfa_plfa-part3-Compositional-12288" href="../Compositional/#plfa_plfa-part3-Compositional-12288" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12290" href="../Compositional/#plfa_plfa-part3-Compositional-12290" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-12292" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12294" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12296" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-12299" href="../Compositional/#plfa_plfa-part3-Compositional-12299" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-12301" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12303" href="../Compositional/#plfa_plfa-part3-Compositional-12389" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-12306" href="../Compositional/#plfa_plfa-part3-Compositional-12299" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-12308" href="../Compositional/#plfa_plfa-part3-Compositional-12282" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-12311" href="../Compositional/#plfa_plfa-part3-Compositional-12285" class="Bound">d2</a><a id="plfa_plfa-part3-Compositional-12313" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12315" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a>
                         <a id="plfa_plfa-part3-Compositional-12342" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-12345" href="../Compositional/#plfa_plfa-part3-Compositional-12345" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-12347" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12349" href="../Compositional/#plfa_plfa-part3-Compositional-12389" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-12352" href="../Compositional/#plfa_plfa-part3-Compositional-12345" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-12354" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12355" href="../Denotational/#plfa_plfa-part3-Denotational-17804" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-12361" href="../Compositional/#plfa_plfa-part3-Compositional-12282" class="Bound">d1</a><a id="plfa_plfa-part3-Compositional-12363" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12365" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12366" href="../Denotational/#plfa_plfa-part3-Denotational-17804" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-12372" href="../Compositional/#plfa_plfa-part3-Compositional-12285" class="Bound">d2</a><a id="plfa_plfa-part3-Compositional-12374" class="Symbol">))</a> <a id="plfa_plfa-part3-Compositional-12377" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Compositional-12381" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Compositional-12389" href="../Compositional/#plfa_plfa-part3-Compositional-12389" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-12392" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12394" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-12396" href="../Compositional/#plfa_plfa-part3-Compositional-12396" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12398" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12400" href="../Denotational/#plfa_plfa-part3-Denotational-7068" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-12404" href="../Compositional/#plfa_plfa-part3-Compositional-12279" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12405" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12407" href="../Compositional/#plfa_plfa-part3-Compositional-12407" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-12408" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12410" href="../Compositional/#plfa_plfa-part3-Compositional-12410" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-12413" href="../Compositional/#plfa_plfa-part3-Compositional-12413" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-12417" href="../Compositional/#plfa_plfa-part3-Compositional-12417" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-12420" href="../Compositional/#plfa_plfa-part3-Compositional-12420" class="Bound">D₂′</a> <a id="plfa_plfa-part3-Compositional-12424" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12426" href="../Denotational/#plfa_plfa-part3-Denotational-17125" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-12437" href="../Compositional/#plfa_plfa-part3-Compositional-12279" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12438" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Compositional-12444" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12446" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12447" href="../Compositional/#plfa_plfa-part3-Compositional-12410" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-12450" href="../Compositional/#plfa_plfa-part3-Compositional-5549" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-12452" href="../Compositional/#plfa_plfa-part3-Compositional-12417" class="Bound">D₂</a><a id="plfa_plfa-part3-Compositional-12454" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12456" href="../Compositional/#plfa_plfa-part3-Compositional-12396" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12458" href="../Compositional/#plfa_plfa-part3-Compositional-12407" class="Bound">v</a>  <a id="plfa_plfa-part3-Compositional-12461" class="Symbol">→</a>  <a id="plfa_plfa-part3-Compositional-12464" href="../Compositional/#plfa_plfa-part3-Compositional-12410" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-12467" href="../Denotational/#plfa_plfa-part3-Denotational-17528" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-12469" href="../Compositional/#plfa_plfa-part3-Compositional-12413" class="Bound">D₁′</a>  <a id="plfa_plfa-part3-Compositional-12474" class="Symbol">→</a>  <a id="plfa_plfa-part3-Compositional-12477" href="../Compositional/#plfa_plfa-part3-Compositional-12417" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-12480" href="../Denotational/#plfa_plfa-part3-Denotational-17528" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-12482" href="../Compositional/#plfa_plfa-part3-Compositional-12420" class="Bound">D₂′</a>
    <a id="plfa_plfa-part3-Compositional-12490" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12492" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12493" href="../Compositional/#plfa_plfa-part3-Compositional-12413" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-12497" href="../Compositional/#plfa_plfa-part3-Compositional-5549" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-12499" href="../Compositional/#plfa_plfa-part3-Compositional-12420" class="Bound">D₂′</a><a id="plfa_plfa-part3-Compositional-12502" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12504" href="../Compositional/#plfa_plfa-part3-Compositional-12396" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12506" href="../Compositional/#plfa_plfa-part3-Compositional-12407" class="Bound">v</a>
  <a id="plfa_plfa-part3-Compositional-12510" href="../Compositional/#plfa_plfa-part3-Compositional-12389" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-12513" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12514" href="https://agda.github.io/agda-stdlib/v2.1/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-12519" href="../Compositional/#plfa_plfa-part3-Compositional-12519" class="Bound">v⊑⊥</a><a id="plfa_plfa-part3-Compositional-12522" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12524" href="../Compositional/#plfa_plfa-part3-Compositional-12524" class="Bound">eq₁</a> <a id="plfa_plfa-part3-Compositional-12528" href="../Compositional/#plfa_plfa-part3-Compositional-12528" class="Bound">eq₂</a> <a id="plfa_plfa-part3-Compositional-12532" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12534" href="https://agda.github.io/agda-stdlib/v2.1/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-12539" href="../Compositional/#plfa_plfa-part3-Compositional-12519" class="Bound">v⊑⊥</a>
  <a id="plfa_plfa-part3-Compositional-12545" href="../Compositional/#plfa_plfa-part3-Compositional-12389" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-12548" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12549" href="../Compositional/#plfa_plfa-part3-Compositional-12549" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-12550" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-12552" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12553" href="../Compositional/#plfa_plfa-part3-Compositional-12553" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-12554" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-12556" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12557" href="https://agda.github.io/agda-stdlib/v2.1/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-12562" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12564" href="../Compositional/#plfa_plfa-part3-Compositional-12564" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-12566" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-12568" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12570" href="../Compositional/#plfa_plfa-part3-Compositional-12570" class="Bound">Dv↦w</a> <a id="plfa_plfa-part3-Compositional-12575" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-12577" href="../Compositional/#plfa_plfa-part3-Compositional-12577" class="Bound">Dv</a> <a id="plfa_plfa-part3-Compositional-12580" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-12582" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a><a id="plfa_plfa-part3-Compositional-12583" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12585" href="../Compositional/#plfa_plfa-part3-Compositional-12585" class="Bound">eq₁</a> <a id="plfa_plfa-part3-Compositional-12589" href="../Compositional/#plfa_plfa-part3-Compositional-12589" class="Bound">eq₂</a> <a id="plfa_plfa-part3-Compositional-12593" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Compositional-12599" href="https://agda.github.io/agda-stdlib/v2.1/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-12604" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12606" href="../Compositional/#plfa_plfa-part3-Compositional-12564" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-12608" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-12610" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12612" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#636" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-12618" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12619" href="../Compositional/#plfa_plfa-part3-Compositional-12585" class="Bound">eq₁</a> <a id="plfa_plfa-part3-Compositional-12623" href="../Compositional/#plfa_plfa-part3-Compositional-12549" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12625" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12626" href="../Compositional/#plfa_plfa-part3-Compositional-12564" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-12628" href="../Denotational/#plfa_plfa-part3-Denotational-3939" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-12630" href="../Compositional/#plfa_plfa-part3-Compositional-12553" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-12631" class="Symbol">))</a> <a id="plfa_plfa-part3-Compositional-12634" href="../Compositional/#plfa_plfa-part3-Compositional-12570" class="Bound">Dv↦w</a> <a id="plfa_plfa-part3-Compositional-12639" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-12641" href="https://agda.github.io/agda-stdlib/v2.1/Data.Product.Base.html#636" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-12647" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12648" href="../Compositional/#plfa_plfa-part3-Compositional-12589" class="Bound">eq₂</a> <a id="plfa_plfa-part3-Compositional-12652" href="../Compositional/#plfa_plfa-part3-Compositional-12549" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12654" href="../Compositional/#plfa_plfa-part3-Compositional-12564" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-12655" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12657" href="../Compositional/#plfa_plfa-part3-Compositional-12577" class="Bound">Dv</a> <a id="plfa_plfa-part3-Compositional-12660" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-12662" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a>
</pre><p>Again, both directions of the if-and-only-if are proved via a lemma. This time the lemma is proved by cases on <code>(D₁ ● D₂) γ v</code>.</p><p>With the congruence of <code>●</code>, we can prove that application is a congruence by direct equational reasoning.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-app-cong"></a><a id="plfa_plfa-part3-Compositional-12913" href="../Compositional/#plfa_plfa-part3-Compositional-12913" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-12922" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12924" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-12926" href="../Compositional/#plfa_plfa-part3-Compositional-12926" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12927" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12929" href="../Compositional/#plfa_plfa-part3-Compositional-12929" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12931" href="../Compositional/#plfa_plfa-part3-Compositional-12931" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-12934" href="../Compositional/#plfa_plfa-part3-Compositional-12934" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-12936" href="../Compositional/#plfa_plfa-part3-Compositional-12936" class="Bound">M′</a> <a id="plfa_plfa-part3-Compositional-12939" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12941" href="../Compositional/#plfa_plfa-part3-Compositional-12926" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-12943" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-12945" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-12946" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-12950" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12952" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12954" href="../Compositional/#plfa_plfa-part3-Compositional-12929" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-12956" href="../Denotational/#plfa_plfa-part3-Denotational-17528" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-12958" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12960" href="../Compositional/#plfa_plfa-part3-Compositional-12931" class="Bound">L′</a>
  <a id="plfa_plfa-part3-Compositional-12965" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12967" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12969" href="../Compositional/#plfa_plfa-part3-Compositional-12934" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-12971" href="../Denotational/#plfa_plfa-part3-Denotational-17528" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-12973" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12975" href="../Compositional/#plfa_plfa-part3-Compositional-12936" class="Bound">M′</a>
    <a id="plfa_plfa-part3-Compositional-12982" class="Comment">-------------------------</a>
  <a id="plfa_plfa-part3-Compositional-13010" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13012" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13014" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13015" href="../Compositional/#plfa_plfa-part3-Compositional-12929" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-13017" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-13019" href="../Compositional/#plfa_plfa-part3-Compositional-12934" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-13020" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13022" href="../Denotational/#plfa_plfa-part3-Denotational-17528" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-13024" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13026" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13027" href="../Compositional/#plfa_plfa-part3-Compositional-12931" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-13030" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-13032" href="../Compositional/#plfa_plfa-part3-Compositional-12936" class="Bound">M′</a><a id="plfa_plfa-part3-Compositional-13034" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-13036" href="../Compositional/#plfa_plfa-part3-Compositional-12913" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-13045" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-13046" href="../Compositional/#plfa_plfa-part3-Compositional-13046" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-13047" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-13049" href="../Compositional/#plfa_plfa-part3-Compositional-13049" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-13050" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-13052" href="../Compositional/#plfa_plfa-part3-Compositional-13052" class="Bound">L′</a><a id="plfa_plfa-part3-Compositional-13054" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-13056" href="../Compositional/#plfa_plfa-part3-Compositional-13056" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-13057" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-13059" href="../Compositional/#plfa_plfa-part3-Compositional-13059" class="Bound">M′</a><a id="plfa_plfa-part3-Compositional-13061" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-13063" href="../Compositional/#plfa_plfa-part3-Compositional-13063" class="Bound">L≅L′</a> <a id="plfa_plfa-part3-Compositional-13068" href="../Compositional/#plfa_plfa-part3-Compositional-13068" class="Bound">M≅M′</a> <a id="plfa_plfa-part3-Compositional-13073" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-13077" href="../Denotational/#plfa_plfa-part3-Denotational-18473" class="Function Operator">start</a>
    <a id="plfa_plfa-part3-Compositional-13087" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13089" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13090" href="../Compositional/#plfa_plfa-part3-Compositional-13049" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-13092" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-13094" href="../Compositional/#plfa_plfa-part3-Compositional-13056" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-13095" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-13099" href="../Denotational/#plfa_plfa-part3-Denotational-18564" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-13102" href="../Compositional/#plfa_plfa-part3-Compositional-9587" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-13112" href="../Denotational/#plfa_plfa-part3-Denotational-18564" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-13118" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13120" href="../Compositional/#plfa_plfa-part3-Compositional-13049" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-13122" href="../Compositional/#plfa_plfa-part3-Compositional-5549" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-13124" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13126" href="../Compositional/#plfa_plfa-part3-Compositional-13056" class="Bound">M</a>
  <a id="plfa_plfa-part3-Compositional-13130" href="../Denotational/#plfa_plfa-part3-Denotational-18564" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-13133" href="../Compositional/#plfa_plfa-part3-Compositional-12175" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-13140" href="../Compositional/#plfa_plfa-part3-Compositional-13063" class="Bound">L≅L′</a> <a id="plfa_plfa-part3-Compositional-13145" href="../Compositional/#plfa_plfa-part3-Compositional-13068" class="Bound">M≅M′</a> <a id="plfa_plfa-part3-Compositional-13150" href="../Denotational/#plfa_plfa-part3-Denotational-18564" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-13156" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13158" href="../Compositional/#plfa_plfa-part3-Compositional-13052" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-13161" href="../Compositional/#plfa_plfa-part3-Compositional-5549" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-13163" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13165" href="../Compositional/#plfa_plfa-part3-Compositional-13059" class="Bound">M′</a>
  <a id="plfa_plfa-part3-Compositional-13170" href="../Denotational/#plfa_plfa-part3-Denotational-18564" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-13173" href="../Denotational/#plfa_plfa-part3-Denotational-17804" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-13179" href="../Compositional/#plfa_plfa-part3-Compositional-9587" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-13189" href="../Denotational/#plfa_plfa-part3-Denotational-18564" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-13195" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13197" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13198" href="../Compositional/#plfa_plfa-part3-Compositional-13052" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-13201" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-13203" href="../Compositional/#plfa_plfa-part3-Compositional-13059" class="Bound">M′</a><a id="plfa_plfa-part3-Compositional-13205" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-13209" href="../Denotational/#plfa_plfa-part3-Denotational-18811" class="Function Operator">☐</a>
</pre><h2 id="compositionality">Compositionality</h2><p>The <em>compositionality property</em> states that surrounding two terms that are denotationally equal in the same context produces two programs that are denotationally equal. To make this precise, we define what we mean by “context” and “surround”.</p><p>A <em>context</em> is a program with one hole in it. The following data definition <code>Ctx</code> makes this idea explicit. We index the <code>Ctx</code> data type with two contexts for variables: one for the hole and one for terms that result from filling the hole.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-13731" class="Keyword">data</a> <a id="plfa_plfa-part3-Compositional-Ctx"></a><a id="plfa_plfa-part3-Compositional-13736" href="../Compositional/#plfa_plfa-part3-Compositional-13736" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-13740" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-13742" href="../Untyped/#plfa_plfa-part2-Untyped-2750" class="Datatype">Context</a> <a id="plfa_plfa-part3-Compositional-13750" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13752" href="../Untyped/#plfa_plfa-part2-Untyped-2750" class="Datatype">Context</a> <a id="plfa_plfa-part3-Compositional-13760" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13762" href="https://agda.github.io/agda-stdlib/v2.1/Agda.Primitive.html#388" class="Primitive">Set</a> <a id="plfa_plfa-part3-Compositional-13766" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-hole"></a><a id="plfa_plfa-part3-Compositional-13774" href="../Compositional/#plfa_plfa-part3-Compositional-13774" class="InductiveConstructor">ctx-hole</a> <a id="plfa_plfa-part3-Compositional-13783" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-13785" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-13787" href="../Compositional/#plfa_plfa-part3-Compositional-13787" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-13788" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-13790" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13792" href="../Compositional/#plfa_plfa-part3-Compositional-13736" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-13796" href="../Compositional/#plfa_plfa-part3-Compositional-13787" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13798" href="../Compositional/#plfa_plfa-part3-Compositional-13787" class="Bound">Γ</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-lam"></a><a id="plfa_plfa-part3-Compositional-13802" href="../Compositional/#plfa_plfa-part3-Compositional-13802" class="InductiveConstructor">ctx-lam</a> <a id="plfa_plfa-part3-Compositional-13810" class="Symbol">:</a>  <a id="plfa_plfa-part3-Compositional-13813" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-13815" href="../Compositional/#plfa_plfa-part3-Compositional-13815" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13817" href="../Compositional/#plfa_plfa-part3-Compositional-13817" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-13818" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-13820" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13822" href="../Compositional/#plfa_plfa-part3-Compositional-13736" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-13826" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13827" href="../Compositional/#plfa_plfa-part3-Compositional-13815" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13829" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-13831" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-13832" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13834" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13835" href="../Compositional/#plfa_plfa-part3-Compositional-13817" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-13837" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-13839" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-13840" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13842" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13844" href="../Compositional/#plfa_plfa-part3-Compositional-13736" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-13848" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13849" href="../Compositional/#plfa_plfa-part3-Compositional-13815" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13851" href="../Untyped/#plfa_plfa-part2-Untyped-2788" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-13853" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-13854" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13856" href="../Compositional/#plfa_plfa-part3-Compositional-13817" class="Bound">Δ</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-app-L"></a><a id="plfa_plfa-part3-Compositional-13860" href="../Compositional/#plfa_plfa-part3-Compositional-13860" class="InductiveConstructor">ctx-app-L</a> <a id="plfa_plfa-part3-Compositional-13870" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-13872" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-13874" href="../Compositional/#plfa_plfa-part3-Compositional-13874" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13876" href="../Compositional/#plfa_plfa-part3-Compositional-13876" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-13877" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-13879" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13881" href="../Compositional/#plfa_plfa-part3-Compositional-13736" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-13885" href="../Compositional/#plfa_plfa-part3-Compositional-13874" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13887" href="../Compositional/#plfa_plfa-part3-Compositional-13876" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-13889" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13891" href="../Compositional/#plfa_plfa-part3-Compositional-13876" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-13893" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-13895" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-13897" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13899" href="../Compositional/#plfa_plfa-part3-Compositional-13736" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-13903" href="../Compositional/#plfa_plfa-part3-Compositional-13874" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13905" href="../Compositional/#plfa_plfa-part3-Compositional-13876" class="Bound">Δ</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-app-R"></a><a id="plfa_plfa-part3-Compositional-13909" href="../Compositional/#plfa_plfa-part3-Compositional-13909" class="InductiveConstructor">ctx-app-R</a> <a id="plfa_plfa-part3-Compositional-13919" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-13921" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-13923" href="../Compositional/#plfa_plfa-part3-Compositional-13923" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13925" href="../Compositional/#plfa_plfa-part3-Compositional-13925" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-13926" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-13928" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13930" href="../Compositional/#plfa_plfa-part3-Compositional-13925" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-13932" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-13934" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-13936" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13938" href="../Compositional/#plfa_plfa-part3-Compositional-13736" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-13942" href="../Compositional/#plfa_plfa-part3-Compositional-13923" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13944" href="../Compositional/#plfa_plfa-part3-Compositional-13925" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-13946" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13948" href="../Compositional/#plfa_plfa-part3-Compositional-13736" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-13952" href="../Compositional/#plfa_plfa-part3-Compositional-13923" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13954" href="../Compositional/#plfa_plfa-part3-Compositional-13925" class="Bound">Δ</a>
</pre><ul><li><p>The constructor <code>ctx-hole</code> represents the hole, and in this case the variable context for the hole is the same as the variable context for the term that results from filling the hole.</p></li><li><p>The constructor <code>ctx-lam</code> takes a <code>Ctx</code> and produces a larger one that adds a lambda abstraction at the top. The variable context of the hole stays the same, whereas we remove one variable from the context of the resulting term because it is bound by this lambda abstraction.</p></li><li><p>There are two constructions for application, <code>ctx-app-L</code> and <code>ctx-app-R</code>. The <code>ctx-app-L</code> is for when the hole is inside the left-hand term (the operator) and the later is when the hole is inside the right-hand term (the operand).</p></li></ul><p>The action of surrounding a term with a context is defined by the following <code>plug</code> function. It is defined by recursion on the context.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-plug"></a><a id="plfa_plfa-part3-Compositional-14824" href="../Compositional/#plfa_plfa-part3-Compositional-14824" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-14829" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14831" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-14833" href="../Compositional/#plfa_plfa-part3-Compositional-14833" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-14834" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14836" href="../Compositional/#plfa_plfa-part3-Compositional-14836" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-14837" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14839" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14841" href="../Compositional/#plfa_plfa-part3-Compositional-13736" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-14845" href="../Compositional/#plfa_plfa-part3-Compositional-14833" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-14847" href="../Compositional/#plfa_plfa-part3-Compositional-14836" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-14849" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14851" href="../Compositional/#plfa_plfa-part3-Compositional-14833" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-14853" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-14855" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-14857" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14859" href="../Compositional/#plfa_plfa-part3-Compositional-14836" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-14861" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-14863" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a>
<a id="plfa_plfa-part3-Compositional-14865" href="../Compositional/#plfa_plfa-part3-Compositional-14824" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-14870" href="../Compositional/#plfa_plfa-part3-Compositional-13774" class="InductiveConstructor">ctx-hole</a> <a id="plfa_plfa-part3-Compositional-14879" href="../Compositional/#plfa_plfa-part3-Compositional-14879" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-14881" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14883" href="../Compositional/#plfa_plfa-part3-Compositional-14879" class="Bound">M</a>
<a id="plfa_plfa-part3-Compositional-14885" href="../Compositional/#plfa_plfa-part3-Compositional-14824" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-14890" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14891" href="../Compositional/#plfa_plfa-part3-Compositional-13802" class="InductiveConstructor">ctx-lam</a> <a id="plfa_plfa-part3-Compositional-14899" href="../Compositional/#plfa_plfa-part3-Compositional-14899" class="Bound">C</a><a id="plfa_plfa-part3-Compositional-14900" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14902" href="../Compositional/#plfa_plfa-part3-Compositional-14902" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-14904" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14906" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-14908" href="../Compositional/#plfa_plfa-part3-Compositional-14824" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-14913" href="../Compositional/#plfa_plfa-part3-Compositional-14899" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-14915" href="../Compositional/#plfa_plfa-part3-Compositional-14902" class="Bound">N</a>
<a id="plfa_plfa-part3-Compositional-14917" href="../Compositional/#plfa_plfa-part3-Compositional-14824" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-14922" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14923" href="../Compositional/#plfa_plfa-part3-Compositional-13860" class="InductiveConstructor">ctx-app-L</a> <a id="plfa_plfa-part3-Compositional-14933" href="../Compositional/#plfa_plfa-part3-Compositional-14933" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-14935" href="../Compositional/#plfa_plfa-part3-Compositional-14935" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-14936" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14938" href="../Compositional/#plfa_plfa-part3-Compositional-14938" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-14940" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14942" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14943" href="../Compositional/#plfa_plfa-part3-Compositional-14824" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-14948" href="../Compositional/#plfa_plfa-part3-Compositional-14933" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-14950" href="../Compositional/#plfa_plfa-part3-Compositional-14938" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-14951" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14953" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-14955" href="../Compositional/#plfa_plfa-part3-Compositional-14935" class="Bound">N</a>
<a id="plfa_plfa-part3-Compositional-14957" href="../Compositional/#plfa_plfa-part3-Compositional-14824" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-14962" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14963" href="../Compositional/#plfa_plfa-part3-Compositional-13909" class="InductiveConstructor">ctx-app-R</a> <a id="plfa_plfa-part3-Compositional-14973" href="../Compositional/#plfa_plfa-part3-Compositional-14973" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-14975" href="../Compositional/#plfa_plfa-part3-Compositional-14975" class="Bound">C</a><a id="plfa_plfa-part3-Compositional-14976" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14978" href="../Compositional/#plfa_plfa-part3-Compositional-14978" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-14980" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-14982" href="../Compositional/#plfa_plfa-part3-Compositional-14973" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-14984" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-14986" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14987" href="../Compositional/#plfa_plfa-part3-Compositional-14824" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-14992" href="../Compositional/#plfa_plfa-part3-Compositional-14975" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-14994" href="../Compositional/#plfa_plfa-part3-Compositional-14978" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-14995" class="Symbol">)</a>
</pre><p>We are ready to state and prove the compositionality principle. Given two terms <code>M</code> and <code>N</code> that are denotationally equal, plugging them both into an arbitrary context <code>C</code> produces two programs that are denotationally equal.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-compositionality"></a><a id="plfa_plfa-part3-Compositional-15237" href="../Compositional/#plfa_plfa-part3-Compositional-15237" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-15254" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15256" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-15258" href="../Compositional/#plfa_plfa-part3-Compositional-15258" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-15260" href="../Compositional/#plfa_plfa-part3-Compositional-15260" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-15261" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-15263" href="../Compositional/#plfa_plfa-part3-Compositional-15263" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-15265" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15267" href="../Compositional/#plfa_plfa-part3-Compositional-13736" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-15271" href="../Compositional/#plfa_plfa-part3-Compositional-15258" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-15273" href="../Compositional/#plfa_plfa-part3-Compositional-15260" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-15274" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15276" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15277" href="../Compositional/#plfa_plfa-part3-Compositional-15277" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-15279" href="../Compositional/#plfa_plfa-part3-Compositional-15279" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-15281" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15283" href="../Compositional/#plfa_plfa-part3-Compositional-15258" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-15285" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-15287" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-15288" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-15292" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15294" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15296" href="../Compositional/#plfa_plfa-part3-Compositional-15277" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-15298" href="../Denotational/#plfa_plfa-part3-Denotational-17528" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15300" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15302" href="../Compositional/#plfa_plfa-part3-Compositional-15279" class="Bound">N</a>
    <a id="plfa_plfa-part3-Compositional-15308" class="Comment">---------------------------</a>
  <a id="plfa_plfa-part3-Compositional-15338" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15340" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15342" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15343" href="../Compositional/#plfa_plfa-part3-Compositional-14824" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-15348" href="../Compositional/#plfa_plfa-part3-Compositional-15263" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-15350" href="../Compositional/#plfa_plfa-part3-Compositional-15277" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-15351" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15353" href="../Denotational/#plfa_plfa-part3-Denotational-17528" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15355" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15357" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15358" href="../Compositional/#plfa_plfa-part3-Compositional-14824" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-15363" href="../Compositional/#plfa_plfa-part3-Compositional-15263" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-15365" href="../Compositional/#plfa_plfa-part3-Compositional-15279" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-15366" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-15368" href="../Compositional/#plfa_plfa-part3-Compositional-15237" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-15385" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15386" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-15388" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15390" href="../Compositional/#plfa_plfa-part3-Compositional-13774" class="InductiveConstructor">ctx-hole</a><a id="plfa_plfa-part3-Compositional-15398" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15400" href="../Compositional/#plfa_plfa-part3-Compositional-15400" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-15404" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-15408" href="../Compositional/#plfa_plfa-part3-Compositional-15400" class="Bound">M≃N</a>
<a id="plfa_plfa-part3-Compositional-15412" href="../Compositional/#plfa_plfa-part3-Compositional-15237" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-15429" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15430" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-15432" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15434" href="../Compositional/#plfa_plfa-part3-Compositional-13802" class="InductiveConstructor">ctx-lam</a> <a id="plfa_plfa-part3-Compositional-15442" href="../Compositional/#plfa_plfa-part3-Compositional-15442" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-15444" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15446" href="../Compositional/#plfa_plfa-part3-Compositional-15446" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-15450" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-15454" href="../Compositional/#plfa_plfa-part3-Compositional-11678" class="Function">lam-cong</a> <a id="plfa_plfa-part3-Compositional-15463" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15464" href="../Compositional/#plfa_plfa-part3-Compositional-15237" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-15481" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15482" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-15484" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15486" href="../Compositional/#plfa_plfa-part3-Compositional-15442" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-15488" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15490" href="../Compositional/#plfa_plfa-part3-Compositional-15446" class="Bound">M≃N</a><a id="plfa_plfa-part3-Compositional-15493" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-15495" href="../Compositional/#plfa_plfa-part3-Compositional-15237" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-15512" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15513" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-15515" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15517" href="../Compositional/#plfa_plfa-part3-Compositional-13860" class="InductiveConstructor">ctx-app-L</a> <a id="plfa_plfa-part3-Compositional-15527" href="../Compositional/#plfa_plfa-part3-Compositional-15527" class="Bound">C′</a> <a id="plfa_plfa-part3-Compositional-15530" href="../Compositional/#plfa_plfa-part3-Compositional-15530" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-15531" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15533" href="../Compositional/#plfa_plfa-part3-Compositional-15533" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-15537" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-15541" href="../Compositional/#plfa_plfa-part3-Compositional-12913" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-15550" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15551" href="../Compositional/#plfa_plfa-part3-Compositional-15237" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-15568" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15569" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-15571" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15573" href="../Compositional/#plfa_plfa-part3-Compositional-15527" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-15575" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15577" href="../Compositional/#plfa_plfa-part3-Compositional-15533" class="Bound">M≃N</a><a id="plfa_plfa-part3-Compositional-15580" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15582" class="Symbol">λ</a> <a id="plfa_plfa-part3-Compositional-15584" href="../Compositional/#plfa_plfa-part3-Compositional-15584" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-15586" href="../Compositional/#plfa_plfa-part3-Compositional-15586" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-15588" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15590" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-15592" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-15595" href="../Compositional/#plfa_plfa-part3-Compositional-15595" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15597" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15599" href="../Compositional/#plfa_plfa-part3-Compositional-15595" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-15600" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15602" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-15604" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-15607" href="../Compositional/#plfa_plfa-part3-Compositional-15607" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15609" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15611" href="../Compositional/#plfa_plfa-part3-Compositional-15607" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-15612" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15614" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-15616" href="../Compositional/#plfa_plfa-part3-Compositional-15237" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-15633" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15634" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-15636" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15638" href="../Compositional/#plfa_plfa-part3-Compositional-13909" class="InductiveConstructor">ctx-app-R</a> <a id="plfa_plfa-part3-Compositional-15648" href="../Compositional/#plfa_plfa-part3-Compositional-15648" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-15650" href="../Compositional/#plfa_plfa-part3-Compositional-15650" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-15652" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15654" href="../Compositional/#plfa_plfa-part3-Compositional-15654" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-15658" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-15662" href="../Compositional/#plfa_plfa-part3-Compositional-12913" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-15671" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-15674" href="../Compositional/#plfa_plfa-part3-Compositional-15674" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-15676" href="../Compositional/#plfa_plfa-part3-Compositional-15676" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-15678" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15680" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-15682" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-15685" href="../Compositional/#plfa_plfa-part3-Compositional-15685" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15687" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15689" href="../Compositional/#plfa_plfa-part3-Compositional-15685" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-15690" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15692" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-15694" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-15697" href="../Compositional/#plfa_plfa-part3-Compositional-15697" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15699" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15701" href="../Compositional/#plfa_plfa-part3-Compositional-15697" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-15702" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15704" href="../Compositional/#plfa_plfa-part3-Compositional-721" class="InductiveConstructor Operator">⟩</a><a id="plfa_plfa-part3-Compositional-15705" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15707" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15708" href="../Compositional/#plfa_plfa-part3-Compositional-15237" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-15725" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15726" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-15728" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15730" href="../Compositional/#plfa_plfa-part3-Compositional-15650" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-15732" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15734" href="../Compositional/#plfa_plfa-part3-Compositional-15654" class="Bound">M≃N</a><a id="plfa_plfa-part3-Compositional-15737" class="Symbol">)</a>
</pre><p>The proof is a straightforward induction on the context <code>C</code>, using the congruence properties <code>lam-cong</code> and <code>app-cong</code> that we established above.</p><h2 id="the-denotational-semantics-defined-as-a-function">The denotational semantics defined as a function</h2><p>Having established the three equations <code>var-equiv</code>, <code>lam-equiv</code>, and <code>app-equiv</code>, one should be able to define the denotational semantics as a recursive function over the input term <code>M</code>. Indeed, we define the following function <code>⟦ M ⟧</code> that maps terms to denotations, using the auxiliary curry <code>ℱ</code> and apply <code>●</code> functions in the cases for lambda and application, respectively.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-⟦_⟧"></a><a id="plfa_plfa-part3-Compositional-16330" href="../Compositional/#plfa_plfa-part3-Compositional-16330" class="Function Operator">⟦_⟧</a> <a id="plfa_plfa-part3-Compositional-16334" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16336" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-16338" href="../Compositional/#plfa_plfa-part3-Compositional-16338" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16339" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16341" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16343" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16344" href="../Compositional/#plfa_plfa-part3-Compositional-16344" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16346" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16348" href="../Compositional/#plfa_plfa-part3-Compositional-16338" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-16350" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-16352" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-16353" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16355" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16357" href="../Denotational/#plfa_plfa-part3-Denotational-17125" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-16368" href="../Compositional/#plfa_plfa-part3-Compositional-16338" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Compositional-16370" href="../Compositional/#plfa_plfa-part3-Compositional-16330" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16372" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-16374" href="../Compositional/#plfa_plfa-part3-Compositional-16374" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-16376" href="../Compositional/#plfa_plfa-part3-Compositional-16330" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-16378" href="../Compositional/#plfa_plfa-part3-Compositional-16378" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-16380" href="../Compositional/#plfa_plfa-part3-Compositional-16380" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-16382" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16384" href="../Compositional/#plfa_plfa-part3-Compositional-16380" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-16386" href="../Denotational/#plfa_plfa-part3-Denotational-4268" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-16388" href="../Compositional/#plfa_plfa-part3-Compositional-16378" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-16390" href="../Compositional/#plfa_plfa-part3-Compositional-16374" class="Bound">x</a>
<a id="plfa_plfa-part3-Compositional-16392" href="../Compositional/#plfa_plfa-part3-Compositional-16330" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16394" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-16396" href="../Compositional/#plfa_plfa-part3-Compositional-16396" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-16398" href="../Compositional/#plfa_plfa-part3-Compositional-16330" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-16400" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16402" href="../Compositional/#plfa_plfa-part3-Compositional-1855" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-16404" href="../Compositional/#plfa_plfa-part3-Compositional-16330" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16406" href="../Compositional/#plfa_plfa-part3-Compositional-16396" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-16408" href="../Compositional/#plfa_plfa-part3-Compositional-16330" class="Function Operator">⟧</a>
<a id="plfa_plfa-part3-Compositional-16410" href="../Compositional/#plfa_plfa-part3-Compositional-16330" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16412" href="../Compositional/#plfa_plfa-part3-Compositional-16412" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16414" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16416" href="../Compositional/#plfa_plfa-part3-Compositional-16416" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16418" href="../Compositional/#plfa_plfa-part3-Compositional-16330" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-16420" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16422" href="../Compositional/#plfa_plfa-part3-Compositional-16330" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16424" href="../Compositional/#plfa_plfa-part3-Compositional-16412" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16426" href="../Compositional/#plfa_plfa-part3-Compositional-16330" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-16428" href="../Compositional/#plfa_plfa-part3-Compositional-5549" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-16430" href="../Compositional/#plfa_plfa-part3-Compositional-16330" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16432" href="../Compositional/#plfa_plfa-part3-Compositional-16416" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16434" href="../Compositional/#plfa_plfa-part3-Compositional-16330" class="Function Operator">⟧</a>
</pre><p>The proof that <code>ℰ M</code> is denotationally equal to <code>⟦ M ⟧</code> is a straightforward induction, using the three equations <code>var-equiv</code>, <code>lam-equiv</code>, and <code>app-equiv</code> together with the congruence lemmas for <code>ℱ</code> and <code>●</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℰ≃⟦⟧"></a><a id="plfa_plfa-part3-Compositional-16659" href="../Compositional/#plfa_plfa-part3-Compositional-16659" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-16664" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16666" class="Symbol">∀</a> <a id="plfa_plfa-part3-Compositional-16668" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16669" href="../Compositional/#plfa_plfa-part3-Compositional-16669" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16670" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16672" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16673" href="../Compositional/#plfa_plfa-part3-Compositional-16673" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16675" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16677" href="../Compositional/#plfa_plfa-part3-Compositional-16669" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-16679" href="../Untyped/#plfa_plfa-part2-Untyped-3903" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-16681" href="../Untyped/#plfa_plfa-part2-Untyped-2477" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-16682" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16684" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16686" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16688" href="../Compositional/#plfa_plfa-part3-Compositional-16673" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16690" href="../Denotational/#plfa_plfa-part3-Denotational-17528" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-16692" href="../Compositional/#plfa_plfa-part3-Compositional-16330" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16694" href="../Compositional/#plfa_plfa-part3-Compositional-16673" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16696" href="../Compositional/#plfa_plfa-part3-Compositional-16330" class="Function Operator">⟧</a>
<a id="plfa_plfa-part3-Compositional-16698" href="../Compositional/#plfa_plfa-part3-Compositional-16659" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-16703" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16704" href="../Compositional/#plfa_plfa-part3-Compositional-16704" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16705" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16707" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16708" href="../Untyped/#plfa_plfa-part2-Untyped-3939" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-16710" href="../Compositional/#plfa_plfa-part3-Compositional-16710" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-16711" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16713" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16715" href="../Compositional/#plfa_plfa-part3-Compositional-10166" class="Function">var-equiv</a>
<a id="plfa_plfa-part3-Compositional-16725" href="../Compositional/#plfa_plfa-part3-Compositional-16659" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-16730" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16731" href="../Compositional/#plfa_plfa-part3-Compositional-16731" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16732" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16734" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16735" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-16737" href="../Compositional/#plfa_plfa-part3-Compositional-16737" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-16738" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16740" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-16744" class="Keyword">let</a> <a id="plfa_plfa-part3-Compositional-16748" href="../Compositional/#plfa_plfa-part3-Compositional-16748" class="Bound">ih</a> <a id="plfa_plfa-part3-Compositional-16751" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16753" href="../Compositional/#plfa_plfa-part3-Compositional-16659" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-16758" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16759" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-16761" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16763" href="../Compositional/#plfa_plfa-part3-Compositional-16737" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-16764" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16766" class="Keyword">in</a>
    <a id="plfa_plfa-part3-Compositional-16773" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16775" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16776" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-16778" href="../Compositional/#plfa_plfa-part3-Compositional-16737" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-16779" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-16783" href="../Denotational/#plfa_plfa-part3-Denotational-18564" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-16786" href="../Compositional/#plfa_plfa-part3-Compositional-4352" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-16796" href="../Denotational/#plfa_plfa-part3-Denotational-18564" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-16802" href="../Compositional/#plfa_plfa-part3-Compositional-1855" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-16804" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16805" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16807" href="../Compositional/#plfa_plfa-part3-Compositional-16737" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-16808" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-16812" href="../Denotational/#plfa_plfa-part3-Denotational-18564" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-16815" href="../Compositional/#plfa_plfa-part3-Compositional-11000" class="Function">ℱ-cong</a> <a id="plfa_plfa-part3-Compositional-16822" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16823" href="../Compositional/#plfa_plfa-part3-Compositional-16659" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-16828" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16829" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-16831" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16833" href="../Compositional/#plfa_plfa-part3-Compositional-16737" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-16834" class="Symbol">})</a> <a id="plfa_plfa-part3-Compositional-16837" href="../Denotational/#plfa_plfa-part3-Denotational-18564" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-16843" href="../Compositional/#plfa_plfa-part3-Compositional-1855" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-16845" href="../Compositional/#plfa_plfa-part3-Compositional-16330" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16847" href="../Compositional/#plfa_plfa-part3-Compositional-16737" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-16849" href="../Compositional/#plfa_plfa-part3-Compositional-16330" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-16853" href="../Denotational/#plfa_plfa-part3-Denotational-18704" class="Function Operator">≃⟨⟩</a>
    <a id="plfa_plfa-part3-Compositional-16861" href="../Compositional/#plfa_plfa-part3-Compositional-16330" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16863" href="../Untyped/#plfa_plfa-part2-Untyped-3991" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-16865" href="../Compositional/#plfa_plfa-part3-Compositional-16737" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-16867" href="../Compositional/#plfa_plfa-part3-Compositional-16330" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-16871" href="../Denotational/#plfa_plfa-part3-Denotational-18811" class="Function Operator">☐</a>
<a id="plfa_plfa-part3-Compositional-16873" href="../Compositional/#plfa_plfa-part3-Compositional-16659" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-16878" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16879" href="../Compositional/#plfa_plfa-part3-Compositional-16879" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16880" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16882" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16883" href="../Compositional/#plfa_plfa-part3-Compositional-16883" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16885" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16887" href="../Compositional/#plfa_plfa-part3-Compositional-16887" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-16888" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16890" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Compositional-16895" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16897" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16898" href="../Compositional/#plfa_plfa-part3-Compositional-16883" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16900" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16902" href="../Compositional/#plfa_plfa-part3-Compositional-16887" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-16903" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-16907" href="../Denotational/#plfa_plfa-part3-Denotational-18564" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-16910" href="../Compositional/#plfa_plfa-part3-Compositional-9587" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-16920" href="../Denotational/#plfa_plfa-part3-Denotational-18564" class="Function Operator">⟩</a>
   <a id="plfa_plfa-part3-Compositional-16925" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16927" href="../Compositional/#plfa_plfa-part3-Compositional-16883" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16929" href="../Compositional/#plfa_plfa-part3-Compositional-5549" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-16931" href="../Denotational/#plfa_plfa-part3-Denotational-17342" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16933" href="../Compositional/#plfa_plfa-part3-Compositional-16887" class="Bound">M</a>
  <a id="plfa_plfa-part3-Compositional-16937" href="../Denotational/#plfa_plfa-part3-Denotational-18564" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-16940" href="../Compositional/#plfa_plfa-part3-Compositional-12175" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-16947" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16948" href="../Compositional/#plfa_plfa-part3-Compositional-16659" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-16953" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16954" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-16956" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16958" href="../Compositional/#plfa_plfa-part3-Compositional-16883" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-16959" class="Symbol">})</a> <a id="plfa_plfa-part3-Compositional-16962" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16963" href="../Compositional/#plfa_plfa-part3-Compositional-16659" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-16968" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16969" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-16971" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16973" href="../Compositional/#plfa_plfa-part3-Compositional-16887" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-16974" class="Symbol">})</a> <a id="plfa_plfa-part3-Compositional-16977" href="../Denotational/#plfa_plfa-part3-Denotational-18564" class="Function Operator">⟩</a>
   <a id="plfa_plfa-part3-Compositional-16982" href="../Compositional/#plfa_plfa-part3-Compositional-16330" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16984" href="../Compositional/#plfa_plfa-part3-Compositional-16883" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16986" href="../Compositional/#plfa_plfa-part3-Compositional-16330" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-16988" href="../Compositional/#plfa_plfa-part3-Compositional-5549" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-16990" href="../Compositional/#plfa_plfa-part3-Compositional-16330" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16992" href="../Compositional/#plfa_plfa-part3-Compositional-16887" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16994" href="../Compositional/#plfa_plfa-part3-Compositional-16330" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-16998" href="../Denotational/#plfa_plfa-part3-Denotational-18704" class="Function Operator">≃⟨⟩</a>
    <a id="plfa_plfa-part3-Compositional-17006" href="../Compositional/#plfa_plfa-part3-Compositional-16330" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-17008" href="../Compositional/#plfa_plfa-part3-Compositional-16883" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-17010" href="../Untyped/#plfa_plfa-part2-Untyped-4051" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-17012" href="../Compositional/#plfa_plfa-part3-Compositional-16887" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-17014" href="../Compositional/#plfa_plfa-part3-Compositional-16330" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-17018" href="../Denotational/#plfa_plfa-part3-Denotational-18811" class="Function Operator">☐</a>
</pre><h2 id="unicode">Unicode</h2><p>This chapter uses the following unicode:</p><pre><code>ℱ  U+2131  SCRIPT CAPITAL F (\McF)
●  U+2131  BLACK CIRCLE (\cib)</code></pre></div><nav class="pager" aria-label="Chapter"><ul class="pagination"><li><a class="pagelink" href="../Denotational/">Prev</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/part3/Compositional.lagda.md">Source</a></li><li class="separator">•</li><li><a class="pagelink" href="../Soundness/">Next</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card" aria-label="Site"><data class="u-url" href="../"></data><div class="wrapper"><h2 class="footer-heading">Programming Language Foundations in Agda</h2><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk"><i class="far fa-envelope"></i>  wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><i class="fab fa-github"></i>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works"><i class="far fa-envelope"></i>  me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><i class="fab fa-github"></i>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><i class="fab fa-twitter"></i>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu"><i class="far fa-envelope"></i>  jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><i class="fab fa-github"></i>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><i class="fab fa-twitter"></i>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></div></footer></body></html>